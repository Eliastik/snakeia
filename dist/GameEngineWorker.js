!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=24)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(t)}e.exports=i},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,i){var n=i(12),r=i(13),s=i(14),o=i(15),a=i(16),u=i(17),c=i(18);c.alea=n,c.xor128=r,c.xorwow=s,c.xorshift7=o,c.xor4096=a,c.tychei=u,e.exports=c},function(e,t,i){var n=i(20);function r(t,i,s){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,i){var r=n(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(i):s.value}},r(t,i,s||t)}e.exports=r},function(e,t,i){var n=i(21);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,i){var n=i(22),r=i(23);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(module,exports,__webpack_require__){!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let i=0;i<e.length;i++){if(void 0!==e[i].graph.get(this)._connectivity)continue;let n=[e[i]];for(t++;n.length;){let e=n.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map(e=>{void 0===e.graph.get(this)._connectivity&&0>n.indexOf(e)&&n.push(e)})}}}add(e){return 1<arguments.length?Array.from(arguments).map(e=>this.add(e)):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map(e=>this.delete(e)):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,i=1,n=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===i?e.graph.get(this).delete(t):e.graph.get(this).set(t,i),null===n?t.graph.get(this).delete(e):t.graph.get(this).set(e,n),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,i={}){let n=e.fromArray.X(t,i.order),r=e.fromArray.Y(t,i.order),s=e.fromArray.at.bind(null,t,i.order),o=[],a=null;for(let t,u=1;u<Math.max(2,arguments.length);u++){t=new e,o.push(t),i=arguments[u]||{};let c=e.fromArray.id.bind(null,n,r,i.torus),l=i.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,l);for(let e=0;e<n;e++)for(let i,n=0;n<r;n++)i=t.add(a?a.get(c(e,n)):new f(c(e,n))),i.x=e,i.y=n,i.graph.get(t)._data=s(e,n),h(i,t.nodes.get(c(e-1,n))),h(i,t.nodes.get(c(e+1,n))),h(i,t.nodes.get(c(e,n-1))),h(i,t.nodes.get(c(e,n+1)));if(i.diagonals)for(let e=0;e<n;e++)for(let n=0;n<r;n++){let r=t.nodes.get(c(e,n)),s=t.adjacent(r,t.nodes.get(c(e-1,n))),o=t.adjacent(r,t.nodes.get(c(e+1,n))),a=t.adjacent(r,t.nodes.get(c(e,n-1))),u=t.adjacent(r,t.nodes.get(c(e,n+1)));"strict"===i.cutting?(s&&a&&h(r,t.nodes.get(c(e-1,n-1))),s&&u&&h(r,t.nodes.get(c(e-1,n+1))),o&&a&&h(r,t.nodes.get(c(e+1,n-1))),o&&u&&h(r,t.nodes.get(c(e+1,n+1)))):((s||a||i.cutting)&&h(r,t.nodes.get(c(e-1,n-1))),(s||u||i.cutting)&&h(r,t.nodes.get(c(e-1,n+1))),(o||a||i.cutting)&&h(r,t.nodes.get(c(e+1,n-1))),(o||u||i.cutting)&&h(r,t.nodes.get(c(e+1,n+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>c(e.x,e.y)}),t.connect(),t.X=n,t.Y=r,t.TORUS=i.torus,a||(a=t.nodes)}return 1<o.length?o:o[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",i,n){return"xy"===t?e[i][n]:e[n][i]},e.fromArray.id=function(e=0,t=0,i=!1,n,r){return i?(r+t)%t*e+(n+e)%e:0<=n&&n<e&&0<=r&&r<t?r*e+n:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,i,n){n&&e.edge(i,n,t(e.data(i),e.data(n)),t(e.data(n),e.data(i)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let i in this.id=e,this.graph=new Map,t)"id"!=i&&"graph"!=i&&(this[i]=t[i])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let i=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=i,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],i=this.score(t);for(;0<e;){let n=Math.floor((e+1)/2)-1,r=this.nodes[n];if(i>=this.score(r))break;this.nodes[n]=t,this.nodes[e]=r,e=n}return this}sink(e){let t=this.nodes[e],i=this.score(t);for(;;){let n=2*(e+1),r=n-1,s=null;if(r<this.size&&this.score(this.nodes[r])<i&&(s=r),n<this.size&&this.score(this.nodes[n])<(s?this.score(this.nodes[s]):i)&&(s=n),null===s)break;this.nodes[e]=this.nodes[s],this.nodes[s]=t,e=s}return this}}let h={manhattan:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*(n+r)},manhattanTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)},diagonal:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return m*(n+r)+(dm-2*m)*c(n,r)},diagonalTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)},euclidian:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*Math.sqrt(n*n+r*r)},euclidianTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(n.thread+" couldn't be opened.")}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,i={})=>{this._worker_path_callback=i.callback,delete i.callback,this.worker.postMessage(["path",e,t,i])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);switch(t[0]){case"path":this._worker_path_callback(t[1])}}}}path(e,t,i={}){if(i.jps)return this.jps(e,t,i);let n=new g(e=>e.estimated),r=new Map,s=this.graphs[i.layer||0];if(e=s.node(e,!0),t=s.node(t,!0),n.add({node:e,estimated:0}),r.set(e,{score:0,from:null}),!i.static||s.connected(e,t))for(;n.size;){let e=n.pop().node;if(e===t)break;s.neighbors(e).map(o=>{let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e}),n.set({node:o,estimated:a+h[i.heuristic||this.heuristic](o,t,i.heuristicOptions||this.heuristicOptions)}))}),n.delete(e)}let o=[];if(r.has(t)){let e=t;for(o.push(t);null!==(e=r.get(e).from);)o.push(e);o=o.reverse()}return i.callback&&i.callback(o,r),o}}if(j.JPS=class{constructor(){}static access(e,t,i,n){return e.adjacent(t,n?e.node(i,!0):i)}static neighborhood(e,t,i,n){let r=[],s=i.get(n).from||null;if(null===s)return t.neighbors(n);{let i={x:b(n.x-s.x),y:b(n.y-s.y)};if(0!=i.x&&0!=i.y){let s=e(n,{x:n.x+i.x,y:n.y},!0),o=e(n,{x:n.x,y:n.y+i.y},!0);(s||o)&&(r.push(t.node({x:n.x+i.x,y:n.y+i.y},!0)),s&&(r.push(t.node({x:n.x+i.x,y:n.y},!0)),!e(n,{x:n.x,y:n.y-i.y},!0)&&r.push(t.node({x:n.x+i.x,y:n.y-i.y},!0))),o&&(r.push(t.node({x:n.x,y:n.y+i.y},!0)),!e(n,{x:n.x-i.x,y:n.y},!0)&&r.push(t.node({x:n.x-i.x,y:n.y+i.y},!0))))}else e(n,{x:n.x+i.x,y:n.y+i.y},!0)&&(r.push(t.node({x:n.x+i.x,y:n.y+i.y},!0)),0==i.x?0!=i.y&&(!e(n,{x:n.x-1,y:n.y},!0)&&r.push(t.node({x:n.x-1,y:n.y+i.y},!0)),!e(n,{x:n.x+1,y:n.y},!0)&&r.push(t.node({x:n.x+1,y:n.y+i.y},!0))):(!e(n,{x:n.x,y:n.y-1},!0)&&r.push(t.node({x:n.x+i.x,y:n.y-1},!0)),!e(n,{x:n.x,y:n.y+1},!0)&&r.push(t.node({x:n.x+i.x,y:n.y+1},!0))))}return r.filter(e=>e)}static jump(e,t,i,n,r,s){for(;;){if(!e(s,r))return null;if(r.x===n.x&&r.y===n.y)return r;let o={x:b(r.x-s.x),y:b(r.y-s.y)};if(0!=o.x&&0!=o.y){if(!e(r,{x:r.x-o.x,y:r.y},!0)&&e(r,{x:r.x-o.x,y:r.y+o.y},!0)||!e(r,{x:r.x,y:r.y-o.y},!0)&&e(r,{x:r.x+o.x,y:r.y-o.y},!0))return r;let s=j.JPS.jump.bind(this,e,t,i,n);if(null!==s(t.node({x:r.x+o.x,y:r.y},!0),r)||null!==s(t.node({x:r.x,y:r.y+o.y},!0),r))return r}else if(0!=o.x){if(!e(r,{x:r.x,y:r.y-1},!0)&&e(r,{x:r.x+o.x,y:r.y-1},!0)||!e(r,{x:r.x,y:r.y+1},!0)&&e(r,{x:r.x+o.x,y:r.y+1},!0))return r}else if(0!=o.y&&(!e(r,{x:r.x-1,y:r.y},!0)&&e(r,{x:r.x-1,y:r.y+o.y},!0)||!e(r,{x:r.x+1,y:r.y},!0)&&e(r,{x:r.x+1,y:r.y+o.y},!0)))return r;s=r,r=t.node({x:r.x+o.x,y:r.y+o.y},!0)}return null}},j.prototype.jps=function(e,t,i={}){if(this.graphs[i.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),i.callback&&i.callback([],new Map),[];let n=new g(e=>e.estimated),r=new Map,s=this.graphs[i.layer||0],o=null;e=s.node(e,!0),t=s.node(t,!0),n.add({node:e,estimated:0}),r.set(e,{score:0,from:null});let a=j.JPS.access.bind(this,s),u=j.JPS.neighborhood.bind(this,a,s,r),c=j.JPS.jump.bind(this,a,s,r,t);if(!i.static||s.connected(e,t))for(;n.size;){let e=n.pop().node;if(e===t)break;u(e).map(a=>{if(null!==(o=c(a,e))){let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e,jumped:!0}),n.set({node:o,estimated:a+h[i.heuristic||this.heuristic](o,t,i.heuristicOptions||this.heuristicOptions)}))}}),n.delete(e)}let l=[];if(r.has(t)){let i=t;for(;i.x!=e.x||i.y!=e.y;)for(let e=r.get(i).from;i.x!=e.x||i.y!=e.y;)l.push(i),i=s.node({x:i.x+b(e.x-i.x),y:i.y+b(e.y-i.y)},!0);l.push(i),l.reverse()}return i.callback&&i.callback(l,r),l},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?this:window)},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t,i=this,n=(t=4022871197,function(e){e=String(e);for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});i.next=function(){var e=2091639*i.s0+2.3283064365386963e-10*i.c;return i.s0=i.s1,i.s1=i.s2,i.s2=e-(i.c=0|e)},i.c=1,i.s0=n(" "),i.s1=n(" "),i.s2=n(" "),i.s0-=n(e),i.s0<0&&(i.s0+=1),i.s1-=n(e),i.s1<0&&(i.s1+=1),i.s2-=n(e),i.s2<0&&(i.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var i=new o(e),n=t&&t.state,r=i.next;return r.int32=function(){return 4294967296*i.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.alea=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xor128=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),n==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xorwow=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,i,n=t.x,r=t.i;return e=n[r],i=(e^=e>>>7)^e<<24,i^=(e=n[r+1&7])^e>>>10,i^=(e=n[r+3&7])^e>>>3,i^=(e=n[r+4&7])^e<<7,e=n[r+7&7],i^=(e^=e<<13)^e<<9,n[r]=i,t.i=r+1&7,i},function(e,t){var i,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,i=0;i<t.length;++i)n[7&i]=n[7&i]<<15^t.charCodeAt(i)+n[i+1&7]<<13;for(;n.length<8;)n.push(0);for(i=0;i<8&&0===n[i];++i);for(8==i?n[7]=-1:n[i],e.x=n,e.i=0,i=256;i>0;--i)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.x&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xorshift7=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,i,n=t.w,r=t.X,s=t.i;return t.w=n=n+1640531527|0,i=r[s+34&127],e=r[s=s+1&127],i^=i<<13,e^=e<<17,i^=i>>>15,e^=e>>>12,i=r[s]=i^e,t.i=s,i+(n^n>>>16)|0},function(e,t){var i,n,r,s,o,a=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),r=0,s=-32;s<u;++s)t&&(n^=t.charCodeAt((s+32)%t.length)),0===s&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(o=o+1640531527|0,r=0==(i=a[127&s]^=n+o)?r+1:0);for(r>=128&&(a[127&(t&&t.length||0)]=-1),r=127,s=512;s>0;--s)n=a[r+34&127],i=a[r=r+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,a[r]=n^i;e.w=o,e.X=a,e.i=r}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.X&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xor4096=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.next=function(){var e=t.b,i=t.c,n=t.d,r=t.a;return e=e<<25^e>>>7^i,i=i-n|0,n=n<<24^n>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^i,t.c=i=i-n|0,t.d=n<<16^i>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):i+=e;for(var n=0;n<i.length+20;n++)t.b^=0|i.charCodeAt(n),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=u:i(3)&&i(9)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.tychei=u}(0,e,i(3))}).call(this,i(8)(e))},function(e,t,i){var n;!function(r,s,o){var a,u=o.pow(256,6),c=o.pow(2,52),l=2*c;function h(e,t,i){var n=[],h=g(function e(t,i){var n,r=[],s=typeof t;if(i&&"object"==s)for(n in t)try{r.push(e(t[n],i-1))}catch(e){}return r.length?r:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,p(s)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(e)),p(e)}catch(e){var t=r.navigator,i=t&&t.plugins;return[+new Date,r,i,r.screen,p(s)]}}():e,3),n),y=new f(n),v=function(){for(var e=y.g(6),t=u,i=0;e<c;)e=256*(e+i),t*=256,i=y.g(1);for(;e>=l;)e/=2,t/=2,i>>>=1;return(e+i)/t};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,g(p(y.S),s),(t.pass||i||function(e,t,i,n){return n&&(n.S&&d(n,y),e.state=function(){return d(y,{})}),i?(o.random=e,t):e})(v,h,"global"in t?t.global:this==o,t.state)}function f(e){var t,i=e.length,n=this,r=0,s=n.i=n.j=0,o=n.S=[];for(i||(e=[i++]);r<256;)o[r]=r++;for(r=0;r<256;r++)o[r]=o[s=255&s+e[r%i]+(t=o[r])],o[s]=t;(n.g=function(e){for(var t,i=0,r=n.i,s=n.j,o=n.S;e--;)t=o[r=255&r+1],i=256*i+o[255&(o[r]=o[s=255&s+t])+(o[s]=t)];return n.i=r,n.j=s,i})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var i,n=e+"",r=0;r<n.length;)t[255&r]=255&(i^=19*t[255&r])+n.charCodeAt(r++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),s),e.exports){e.exports=h;try{a=i(19)}catch(e){}}else void 0===(n=function(){return h}.call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},function(e,t){},function(e,t,i){var n=i(2);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(t,n)}e.exports=i},function(e,t){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(e){return typeof e}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,i){"use strict";i.r(t);var n=i(10),r=i.n(n),s={EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6,CROSSED:7},o={AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},a={RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA",CUSTOM:"AI_LEVEL_CUSTOM"},u={CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","×"],APP_VERSION:"2.1-dev",DATE_VERSION:"05/03/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50},c={UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},l={UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},h=i(0),f=i.n(h),d=i(1),g=i.n(d),p=function(){function e(t,i,n){f()(this,e),this.x=t,this.y=i,this.direction=n}return g()(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.direction)}},{key:"convertToKeyDirection",value:function(){switch(this.direction){case c.UP:return l.UP;case c.RIGHT:return l.RIGHT;case c.LEFT:return l.LEFT;case c.BOTTOM:return l.BOTTOM;default:return this.direction}}},{key:"convertToSimpleDirection",value:function(){switch(this.direction){case l.UP:return c.UP;case l.RIGHT:return c.RIGHT;case l.LEFT:return c.LEFT;case l.BOTTOM:return c.BOTTOM;default:return this.direction}}},{key:"equals",value:function(e){return null!=e&&(this.x==e.x&&this.y==e.y)}}]),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){v(e,t,i[t])}))}return e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,i){return t&&k(e.prototype,t),i&&k(e,i),e}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?T(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function S(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function L(e,t){if(e){if("string"==typeof e)return R(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R(e,t):void 0}}function M(e){return function(e){if(Array.isArray(e))return R(e)}(e)||S(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){if(Array.isArray(e))return e}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e){return A(e)||S(e)||L(e)||I()}function F(e,t){return A(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}}(e,t)||L(e,t)||I()}var D={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var i;console&&console[e]&&(i=console)[e].apply(i,M(t))}},U=new(function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,e),this.init(t,i)}return b(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||D,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,i,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(i).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,x({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),G=function(){function e(){m(this,e),this.observers={}}return b(e,[{key:"on",value:function(e,t){var i=this;return e.split(" ").forEach((function(e){i.observers[e]=i.observers[e]||[],i.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,i)}))}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach((function(t){t.apply(t,[e].concat(i))}))}}}]),e}();function _(){var e,t,i=new Promise((function(i,n){e=i,t=n}));return i.resolve=e,i.reject=t,i}function j(e){return null==e?"":""+e}function H(e,t,i){e.forEach((function(e){t[e]&&(i[e]=t[e])}))}function C(e,t,i){function n(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var s="string"!=typeof t?[].concat(t):t.split(".");s.length>1;){if(r())return{};var o=n(s.shift());!e[o]&&i&&(e[o]=new i),e=e[o]}return r()?{}:{obj:e,k:n(s.shift())}}function B(e,t,i){var n=C(e,t,Object);n.obj[n.k]=i}function z(e,t){var i=C(e,t),n=i.obj,r=i.k;if(n)return n[r]}function Y(e,t,i){var n=z(e,i);return void 0!==n?n:z(t,i)}function K(e,t,i){for(var n in t)n in e?"string"==typeof e[n]||e[n]instanceof String||"string"==typeof t[n]||t[n]instanceof String?i&&(e[n]=t[n]):K(e[n],t[n],i):e[n]=t[n];return e}function W(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function q(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return V[e]})):e}var J="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,$=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return m(this,t),i=P(this,O(t).call(this)),J&&G.call(T(i)),i.data=e||{},i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i}return E(t,e),b(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,s=[e,t];return i&&"string"!=typeof i&&(s=s.concat(i)),i&&"string"==typeof i&&(s=s.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(s=e.split(".")),z(this.data,s)}},{key:"addResource",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var o=[e,t];i&&(o=o.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(n=t,t=(o=e.split("."))[1]),this.addNamespaces(t),B(this.data,o,n),r.silent||this.emit("added",e,t,i,n)}},{key:"addResources",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in i)"string"!=typeof i[r]&&"[object Array]"!==Object.prototype.toString.apply(i[r])||this.addResource(e,t,r,i[r],{silent:!0});n.silent||this.emit("added",e,t,i)}},{key:"addResourceBundle",value:function(e,t,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(n=i,i=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var a=z(this.data,o)||{};n?K(a,i,r):a=x({},a,i),B(this.data,o,a),s.silent||this.emit("added",e,t,i)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?x({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(G),X={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,n,r){var s=this;return e.forEach((function(e){s.processors[e]&&(t=s.processors[e].process(t,i,n,r))})),t}},Z={},Q=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m(this,t),i=P(this,O(t).call(this)),J&&G.call(T(i)),H(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,T(i)),i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=U.create("translator"),i}return E(t,e),b(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},i=this.resolve(e,t);return i&&void 0!==i.res}},{key:"extractFromKey",value:function(e,t){var i=t.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS;if(i&&e.indexOf(i)>-1){var s=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),e=s.join(n)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t){var i=this;if("object"!==y(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=this.extractFromKey(e[e.length-1],t),s=r.key,o=r.namespaces,a=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(c){var l=t.nsSeparator||this.options.nsSeparator;return a+l+s}return s}var h=this.resolve(e,t),f=h&&h.res,d=h&&h.usedKey||s,g=h&&h.exactUsedKey||s,p=Object.prototype.toString.apply(f),v=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(k&&f&&b&&v.indexOf(p)<0&&("string"!=typeof m||"[object Array]"!==p)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,f,t):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(n){var T="[object Array]"===p,P=T?[]:{},O=T?g:d;for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)){var E="".concat(O).concat(n).concat(w);P[w]=this.translate(E,x({},t,{joinArrays:!1,ns:o})),P[w]===E&&(P[w]=f[w])}f=P}}else if(k&&"string"==typeof m&&"[object Array]"===p)(f=f.join(m))&&(f=this.extendTranslation(f,e,t));else{var R=!1,S=!1;if(!this.isValidLookup(f)&&void 0!==t.defaultValue){if(R=!0,void 0!==t.count){var L=this.pluralResolver.getSuffix(u,t.count);f=t["defaultValue".concat(L)]}f||(f=t.defaultValue)}this.isValidLookup(f)||(S=!0,f=s);var M=t.defaultValue&&t.defaultValue!==f&&this.options.updateMissing;if(S||R||M){this.logger.log(M?"updateKey":"missingKey",u,a,s,M?t.defaultValue:f);var A=[],I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&I&&I[0])for(var N=0;N<I.length;N++)A.push(I[N]);else"all"===this.options.saveMissingTo?A=this.languageUtils.toResolveHierarchy(t.lng||this.language):A.push(t.lng||this.language);var F=function(e,n){i.options.missingKeyHandler?i.options.missingKeyHandler(e,a,n,M?t.defaultValue:f,M,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,a,n,M?t.defaultValue:f,M,t),i.emit("missingKey",e,a,n,f)};if(this.options.saveMissing){var D=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&D?A.forEach((function(e){i.pluralResolver.getPluralFormsOfKey(e,s).forEach((function(t){return F([e],t)}))})):F(A,s)}}f=this.extendTranslation(f,e,t,h),S&&f===s&&this.options.appendNamespaceToMissingKey&&(f="".concat(a,":").concat(s)),S&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,i,n){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,i,n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(x({},i,{interpolation:x({},this.options.interpolation,i.interpolation)}));var s=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(s=x({},this.options.interpolation.defaultVariables,s)),e=this.interpolator.interpolate(e,s,i.lng||this.language,i),!1!==i.nest&&(e=this.interpolator.nest(e,(function(){return r.translate.apply(r,arguments)}),i)),i.interpolation&&this.interpolator.reset()}var o=i.postProcess||this.options.postProcess,a="string"==typeof o?[o]:o;return null!=e&&a&&a.length&&!1!==i.applyPostProcessor&&(e=X.handle(a,e,t,this.options&&this.options.postProcessPassResolved?x({i18nResolved:n},i):i,this)),e}},{key:"resolve",value:function(e){var t,i,n,r,s,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var u=o.extractFromKey(e,a),c=u.key;i=c;var l=u.namespaces;o.options.fallbackNS&&(l=l.concat(o.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,f=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,d=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);l.forEach((function(e){o.isValidLookup(t)||(s=e,!Z["".concat(d[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(s)&&(Z["".concat(d[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(i,'" for namespace "').concat(s,'" for languages "').concat(d.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(i){if(!o.isValidLookup(t)){r=i;var s,u,l=c,d=[l];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(d,c,i,e,a);else h&&(s=o.pluralResolver.getSuffix(i,a.count)),h&&f&&d.push(l+s),f&&d.push(l+="".concat(o.options.contextSeparator).concat(a.context)),h&&d.push(l+=s);for(;u=d.pop();)o.isValidLookup(t)||(n=u,t=o.getResource(i,e,u,a))}})))}))}})),{res:t,usedKey:i,exactUsedKey:n,usedLng:r,usedNS:s}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}}]),t}(G);function ee(e){return e.charAt(0).toUpperCase()+e.slice(1)}var te=function(){function e(t){m(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=U.create("languageUtils")}return b(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],i=e.split("-");return this.options.lowerCaseLng?i=i.map((function(e){return e.toLowerCase()})):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=ee(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=ee(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=ee(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}},{key:"toResolveHierarchy",value:function(e,t){var i=this,n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],s=function(e){e&&(i.isWhitelisted(e)?r.push(e):i.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),n.forEach((function(e){r.indexOf(e)<0&&s(i.formatLanguageCode(e))})),r}}]),e}(),ie=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],ne={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}};function re(){var e={};return ie.forEach((function(t){t.lngs.forEach((function(i){e[i]={numbers:t.nr,plurals:ne[t.fc]}}))})),e}var se=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,e),this.languageUtils=t,this.options=i,this.logger=U.create("pluralResolver"),this.rules=re()}return b(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var i=this,n=[],r=this.getRule(e);return r?(r.numbers.forEach((function(r){var s=i.getSuffix(e,r);n.push("".concat(t).concat(s))})),n):n}},{key:"getSuffix",value:function(e,t){var i=this,n=this.getRule(e);if(n){var r=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),s=n.numbers[r];this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]&&(2===s?s="plural":1===s&&(s=""));var o=function(){return i.options.prepend&&s.toString()?i.options.prepend+s.toString():s.toString()};return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?"_plural_".concat(s.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this.logger=U.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return b(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:q,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?W(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?W(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?W(t.nestingPrefix):t.nestingPrefixEscaped||W("$t("),this.nestingSuffix=t.nestingSuffix?W(t.nestingSuffix):t.nestingSuffixEscaped||W(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(e,t,i,n){var r,s,o,a=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(a.formatSeparator)<0){var r=Y(t,u,e);return a.alwaysFormat?a.format(r,void 0,i):r}var s=e.split(a.formatSeparator),o=s.shift().trim(),c=s.join(a.formatSeparator).trim();return a.format(Y(t,u,o),c,i,n)};this.resetRegExp();var h=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler;for(o=0;r=this.regexpUnescape.exec(e);){if(void 0===(s=l(r[1].trim())))if("function"==typeof h){var f=h(e,r,n);s="string"==typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),s="";else"string"==typeof s||this.useRawValueToEscape||(s=j(s));if(e=e.replace(r[0],c(s)),this.regexpUnescape.lastIndex=0,++o>=this.maxReplaces)break}for(o=0;r=this.regexp.exec(e);){if(void 0===(s=l(r[1].trim())))if("function"==typeof h){var d=h(e,r,n);s="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),s="";else"string"==typeof s||this.useRawValueToEscape||(s=j(s));if(s=this.escapeValue?c(this.escape(s)):c(s),e=e.replace(r[0],s),this.regexp.lastIndex=0,++o>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var i,n,r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=x({},s);function a(e,t){var i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;var n=e.split(new RegExp("".concat(i,"[ ]*{"))),r="{".concat(n[1]);e=n[0],r=(r=this.interpolate(r,o)).replace(/'/g,'"');try{o=JSON.parse(r),t&&(o=x({},t,o))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(i).concat(r)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;i=this.nestingRegexp.exec(e);){var u=[],c=!1;if(i[0].includes(this.formatSeparator)&&!/{.*}/.test(i[1])){var l=i[1].split(this.formatSeparator).map((function(e){return e.trim()})),h=N(l);i[1]=h[0],u=h.slice(1),c=!0}if((n=t(a.call(this,i[1].trim(),o),o))&&i[0]===e&&"string"!=typeof n)return n;"string"!=typeof n&&(n=j(n)),n||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(e)),n=""),c&&(n=u.reduce((function(e,t){return r.format(e,t,s.lng,s)}),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}}]),e}();var ae=function(e){function t(e,i,n){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return m(this,t),r=P(this,O(t).call(this)),J&&G.call(T(r)),r.backend=e,r.store=i,r.services=n,r.languageUtils=n.languageUtils,r.options=s,r.logger=U.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,s.backend,s),r}return E(t,e),b(t,[{key:"queueLoad",value:function(e,t,i,n){var r=this,s=[],o=[],a=[],u=[];return e.forEach((function(e){var n=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!i.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?o.indexOf(a)<0&&o.push(a):(r.state[a]=1,n=!1,o.indexOf(a)<0&&o.push(a),s.indexOf(a)<0&&s.push(a),u.indexOf(t)<0&&u.push(t)))})),n||a.push(e)})),(s.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:n}),{toLoad:s,pending:o,toLoadLanguages:a,toLoadNamespaces:u}}},{key:"loaded",value:function(e,t,i){var n=F(e.split("|"),2),r=n[0],s=n[1];t&&this.emit("failedLoading",r,s,t),i&&this.store.addResourceBundle(r,s,i),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(i){var n,a,u,c,l,h;n=i.loaded,a=s,c=C(n,[r],Object),l=c.obj,h=c.k,l[h]=l[h]||[],u&&(l[h]=l[h].concat(a)),u||l[h].push(a),function(e,t){for(var i=e.indexOf(t);-1!==i;)e.splice(i,1),i=e.indexOf(t)}(i.pending,e),t&&i.errors.push(t),0!==i.pending.length||i.done||(Object.keys(i.loaded).forEach((function(e){o[e]||(o[e]=[]),i.loaded[e].length&&i.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[i](e,t,(function(a,u){a&&u&&r<5?setTimeout((function(){n.read.call(n,e,t,i,r+1,2*s,o)}),s):o(a,u)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach((function(e){i.loadOne(e)}))}},{key:"load",value:function(e,t,i){this.prepareLoading(e,t,{},i)}},{key:"reload",value:function(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}},{key:"loadOne",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("|"),r=F(n,2),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(function(n,r){n&&t.logger.warn("".concat(i,"loading namespace ").concat(o," for language ").concat(s," failed"),n),!n&&r&&t.logger.log("".concat(i,"loaded namespace ").concat(o," for language ").concat(s),r),t.loaded(e,n,r)}))}},{key:"saveMissing",value:function(e,t,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(i,'" for namespace "').concat(t,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=i&&""!==i&&(this.backend&&this.backend.create&&this.backend.create(e,t,i,n,null,x({},s,{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,i,n))}}]),t}(G);function ue(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===y(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===y(e[2])||"object"===y(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){t[e]=i[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,i,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3}}}function ce(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function le(){}var he=new(function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(m(this,t),e=P(this,O(t).call(this)),J&&G.call(T(e)),e.options=ce(i),e.services={},e.logger=U,e.modules={external:[]},n&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,n),P(e,T(e));setTimeout((function(){e.init(i,n)}),0)}return e}return E(t,e),b(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;function n(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(i=t,t={}),this.options=x({},ue(),this.options,ce(t)),this.format=this.options.interpolation.format,i||(i=le),!this.options.isClone){this.modules.logger?U.init(n(this.modules.logger),this.options):U.init(null,this.options);var r=new te(this.options);this.store=new $(this.options.resources,this.options);var s=this.services;s.logger=U,s.resourceStore=this.store,s.languageUtils=r,s.pluralResolver=new se(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new oe(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ae(n(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.languageDetector&&(s.languageDetector=n(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=n(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Q(this.services,this.options),this.translator.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var o=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];o.forEach((function(t){e[t]=function(){var i;return(i=e.store)[t].apply(i,arguments)}}));var a=_(),u=function(){e.changeLanguage(e.options.lng,(function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),a.resolve(n),i(t,n)}))};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),a}},{key:"loadResources",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le,n=i,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var s=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};if(r)o(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(s,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,i){var n=_();return e||(e=this.languages),t||(t=this.options.ns),i||(i=le),this.services.backendConnector.reload(e,t,(function(e){n.resolve(),i(e)})),n}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&X.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var i=this;this.isLanguageChangingTo=e;var n=_();this.emit("languageChanging",e);var r=function(e){e&&(i.language||(i.language=e,i.languages=i.services.languageUtils.toResolveHierarchy(e)),i.translator.language||i.translator.changeLanguage(e),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage(e)),i.loadResources(e,(function(r){!function(e,r){r?(i.language=r,i.languages=i.services.languageUtils.toResolveHierarchy(r),i.translator.changeLanguage(r),i.isLanguageChangingTo=void 0,i.emit("languageChanged",r),i.logger.log("languageChanged",r)):i.isLanguageChangingTo=void 0,n.resolve((function(){return i.t.apply(i,arguments)})),t&&t(e,(function(){return i.t.apply(i,arguments)}))}(r,e)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),n}},{key:"getFixedT",value:function(e,t){var i=this,n=function e(t,n){var r;if("object"!==y(n)){for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];r=i.options.overloadTranslationOptionHandler([t,n].concat(o))}else r=x({},n);return r.lng=r.lng||e.lng,r.lngs=r.lngs||e.lngs,r.ns=r.ns||e.ns,i.t(t,r)};return"string"==typeof e?n.lng=e:n.lngs=e,n.ns=t,n}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],n=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,i){var n=t.services.backendConnector.state["".concat(e,"|").concat(i)];return-1===n||2===n};return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||n&&!s(r,e)))}},{key:"loadNamespaces",value:function(e,t){var i=this,n=_();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){i.options.ns.indexOf(e)<0&&i.options.ns.push(e)})),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var i=_();"string"==typeof e&&(e=[e]);var n=this.options.preload||[],r=e.filter((function(e){return n.indexOf(e)<0}));return r.length?(this.options.preload=n.concat(r),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new t(e,i)}},{key:"cloneInstance",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le,r=x({},this.options,i,{isClone:!0}),s=new t(r),o=["store","services","language"];return o.forEach((function(t){s[t]=e[t]})),s.services=x({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new Q(s.services,s.options),s.translator.on("*",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];s.emit.apply(s,[e].concat(i))})),s.init(r,n),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),t}(G)),fe=function(e,t,i){return Math.floor((i?i():Math.random())*(t-e+1))+e},de=function(e,t){var i=e+t;return i>360?i-360:i<0?360+i:i},ge=function(e,t){for(var i,n,r=e.length-1;r>0;r--)i=Math.floor((t?t():Math.random())*(r+1)),n=e[r],e[r]=e[i],e[i]=n;return e},pe=i(4),ye=i.n(pe),ve=i(11),xe=function(){function e(t,i,n,r,s,o,a,u,l){f()(this,e),this.width=null==t?20:t,this.height=null==i?20:i,this.generateWalls=null!=n&&n,this.borderWalls=null!=r&&r,this.maze=null!=s&&s,this.mazeFirstPosition=new p(1,1,c.RIGHT),this.mazeForceAuto=null!=a&&a,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.seedGrid=u,this.seedGame=l,this.rngGrid=ye()(this.seedGrid),this.rngGame=ye()(this.seedGame),this.init(o)}return g()(e,[{key:"init",value:function(e){if(null!=e||null!=this.initialGrid){var t;t=null!=this.initialGrid?this.initialGrid:e,this.height=t.length,this.width=t[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var i=0;i<this.height;i++)this.initialGrid[i]=t[i].slice(),this.grid[i]=t[i].slice()}else{this.grid=new Array(this.height);for(var n=0;n<this.height;n++){this.grid[n]=new Array(this.width);for(var r=0;r<this.width;r++)this.borderWalls&&(0==n||n==this.height-1||0==r||r==this.width-1)||this.generateWalls&&this.rngGrid()>.65||this.maze?this.grid[n][r]=s.WALL:this.grid[n][r]=s.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null}},{key:"fixWalls",value:function(e){var t,i,n,r;e?(t=1,n=this.height-1,i=1,r=this.width-1):(t=0,n=this.height,i=0,r=this.width);for(var o=t;o<n;o++)for(var a=i;a<r;a++){var u=new p(a,o),l=this.getNextPosition(u,c.UP),h=this.getNextPosition(l,c.LEFT),f=this.getNextPosition(l,c.RIGHT),d=this.getNextPosition(u,c.BOTTOM),g=this.getNextPosition(d,c.LEFT),y=this.getNextPosition(d,c.RIGHT);this.get(h)!=s.WALL&&this.get(f)!=s.WALL&&this.get(g)!=s.WALL&&this.get(y)!=s.WALL||this.set(s.EMPTY,u)}}},{key:"maze_recursion",value:function(e,t){for(var i=ge([c.UP,c.RIGHT,c.BOTTOM,c.LEFT],this.rngGrid),n=0;n<i.length;n++)switch(i[n]){case c.UP:if(e-2<=0)continue;this.get(new p(t,e-2))!=s.EMPTY&&(this.set(s.EMPTY,new p(t,e-2)),this.set(s.EMPTY,new p(t,e-1)),this.maze_recursion(e-2,t));break;case c.RIGHT:if(t+2>=this.width-1)continue;this.get(new p(t+2,e))!=s.EMPTY&&(this.set(s.EMPTY,new p(t+2,e)),this.set(s.EMPTY,new p(t+1,e)),this.maze_recursion(e,t+2));break;case c.BOTTOM:if(e+2>=this.height-1)continue;this.get(new p(t,e+2))!=s.EMPTY&&(this.set(s.EMPTY,new p(t,e+2)),this.set(s.EMPTY,new p(t,e+1)),this.maze_recursion(e+2,t));break;case c.LEFT:if(t-2<=0)continue;this.get(new p(t-2,e))!=s.EMPTY&&(this.set(s.EMPTY,new p(t-2,e)),this.set(s.EMPTY,new p(t-1,e)),this.maze_recursion(e,t-2))}}},{key:"generateMaze",value:function(){this.mazeFirstPosition=new p(1,1,c.RIGHT),this.set(s.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)}},{key:"set",value:function(e,t){this.grid[t.y][t.x]=e}},{key:"get",value:function(e){return this.grid[e.y][e.x]}},{key:"valToChar",value:function(e){switch(e){case s.EMPTY:return"-";case s.SNAKE:return"o";case s.SNAKE_DEAD:return"O";case s.FRUIT:return"x";case s.WALL:return"#";case s.SURROUNDED:return"/";case s.FRUIT_GOLD:return"X"}}},{key:"getImageCase",value:function(e){switch(this.get(e)){case s.WALL:return"wall.png";case s.FRUIT:return"fruit.png";case s.FRUIT_GOLD:return"fruit_gold.png"}return""}},{key:"getGraph",value:function(e){for(var t=new Array(this.height),i=0;i<this.height;i++){t[i]=new Array(this.width);for(var n=0;n<this.width;n++){var r=new p(n,i);e&&this.get(r)==s.SNAKE?t[i][n]=0:this.isDeadPosition(r)?t[i][n]=1:t[i][n]=0}}return t}},{key:"getRandomPosition",value:function(){return new p(fe(0,this.width-1,this.rngGame),fe(0,this.height-1,this.rngGame))}},{key:"setFruit",value:function(e,t){var i,n,r=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=s.FRUIT||this.set(s.EMPTY,this.fruitPos),!(this.getTotal(s.EMPTY)>0))return!!(this.getTotal(s.EMPTY)<=0&&this.fruitPosGold);do{i=this.getRandomPosition();var o=this.getNextPosition(i,c.TOP),a=this.getNextPosition(i,c.BOTTOM),l=this.getNextPosition(i,c.RIGHT),h=this.getNextPosition(i,c.LEFT);if((n=this.isDeadPosition(o,!0)+this.isDeadPosition(a,!0)+this.isDeadPosition(l,!0)+this.isDeadPosition(h,!0))>=3&&this.get(i)==s.EMPTY&&this.set(s.SURROUNDED,i),this.getTotal(s.EMPTY)<=0)return!!this.fruitPosGold}while(this.get(i)!=s.EMPTY||this.isFruitSurrounded(i,!0)||this.maze&&!this.testFruitMaze(i,r)||n>=3);return t?(this.fruitPosGold=i,this.set(s.FRUIT_GOLD,i)):(this.fruitPos=i,this.set(s.FRUIT,i)),this.maze||null!=this.fruitPosGold||1!=fe(1,e>1?u.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:u.PROB_GOLD_FRUIT_1_PLAYER,this.rngGame)||this.setFruit(e,!0),!0}},{key:"testFruitMaze",value:function(e,t){var i=this.getGraph(!0);return new ve.Astar.Configuration(i,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:function(e,t){return 1==t?null:1}}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(s.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)}},{key:"isCaseSurrounded",value:function(e,t,i,n){if(null==e||null==e)return!1;for(var r=JSON.parse(JSON.stringify(this.grid)),o=[e];o.length>0;){var a=o[0];o.shift();for(var u=[this.getNextPosition(a,c.UP),this.getNextPosition(a,c.BOTTOM),this.getNextPosition(a,c.LEFT),this.getNextPosition(a,c.RIGHT)],l=0;l<u.length;l++)if(r[u[l].y][u[l].x]!=s.CROSSED&&n.indexOf(this.get(u[l]))>-1){if(o.push(u[l]),i.indexOf(this.get(u[l]))>-1)return!1;t&&this.get(u[l])==s.EMPTY?(this.set(s.SURROUNDED,u[l]),r[u[l].y][u[l].x]=s.SURROUNDED):r[u[l].y][u[l].x]=s.CROSSED}}return(t&&(this.get(e)==s.EMPTY||this.get(e)==s.FRUIT)||this.get(e)==s.FRUIT_GOLD)&&this.set(s.SURROUNDED,e),!0}},{key:"isFruitSurrounded",value:function(e,t){var i=this.isCaseSurrounded(e,!1,[s.SNAKE],[s.EMPTY,s.SNAKE]);return i&&t&&this.isCaseSurrounded(e,!0,[s.SNAKE],[s.EMPTY,s.SNAKE]),i}},{key:"getOnLine",value:function(e,t){for(var i=0,n=0;n<this.width;n++)this.get(new p(n,t))==e&&i++;return i}},{key:"getTotal",value:function(e){for(var t=0,i=0;i<this.height;i++)t+=this.getOnLine(e,i);return t}},{key:"getNextPosition",value:function(e,t){var i=new p(e.x,e.y,t);switch(t){case c.LEFT:i.x--,i.direction=c.LEFT;break;case c.UP:i.y--,i.direction=c.UP;break;case c.RIGHT:i.x++,i.direction=c.RIGHT;break;case c.BOTTOM:i.y++,i.direction=c.BOTTOM;break;case l.LEFT:i.x--,i.direction=l.LEFT;break;case l.UP:i.y--,i.direction=l.UP;break;case l.RIGHT:i.x++,i.direction=c.RIGHT;break;case l.BOTTOM:i.y++,i.direction=c.BOTTOM}return i.x<0?i.x=this.width-1:i.x>=this.width&&(i.x=0),i.y<0?i.y=this.height-1:i.y>=this.height&&(i.y=0),i}},{key:"getDirectionTo",value:function(e,t){return this.getNextPosition(e,c.UP).equals(t)?c.UP:this.getNextPosition(e,c.BOTTOM).equals(t)?c.BOTTOM:this.getNextPosition(e,c.RIGHT).equals(t)?c.RIGHT:this.getNextPosition(e,c.LEFT).equals(t)?c.LEFT:-1}},{key:"isDeadPosition",value:function(e,t){return!t&&this.get(e)==s.SNAKE||this.get(e)==s.WALL||this.get(e)==s.SNAKE_DEAD}},{key:"toString",value:function(){for(var e="",t=0;t<this.height;t++){for(var i=0;i<this.width;i++)e+=this.valToChar(this.get(new p(i,t)))+" ";e+="\n"}return e}}]),e}(),me=function(){function e(t){f()(this,e),this.snake=t,this.aiFruitGoal=s.FRUIT}return g()(e,[{key:"ai",value:function(){var e=this.snake.getHeadPosition(),t=this.snake.grid.fruitPos,i=this.snake.grid.fruitPosGold;if(null!=t){var n=Math.abs(t.x-e.x)+Math.abs(t.y-e.y),r=null!=i?Math.abs(i.x-e.x)+Math.abs(i.y-e.y):-1;null!=i&&this.snake.grid.get(i)==s.FRUIT_GOLD&&this.aiFruitGoal==s.FRUIT?this.aiFruitGoal=r<n?s.FRUIT_GOLD:s.FRUIT:null!=i&&this.snake.grid.get(i)==s.FRUIT_GOLD||(this.aiFruitGoal=s.FRUIT)}return null}},{key:"aiLevelText",get:function(){return he.t("engine.aiLevelList.custom")}}]),e}(),ke=i(5),be=i.n(ke),Te=i(6),Pe=i.n(Te),Oe=i(7),we=i.n(Oe),Ee=i(2),Re=i.n(Ee);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Re()(e);if(t){var r=Re()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return we()(this,i)}}var Le=function(e){Pe()(i,e);var t=Se(i);function i(e){return f()(this,i),t.call(this,e)}return g()(i,[{key:"ai",value:function(){be()(Re()(i.prototype),"ai",this).call(this);var e=this.snake.getHeadPosition(),t=this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.UP)),n=this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.LEFT)),r=this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.BOTTOM)),s=this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.RIGHT));if(t&&n&&r&&s)return l.UP;for(var o=null;null==o||this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,o));){switch(fe(1,4,this.snake.grid?this.snake.grid.rngGame:null)){case 1:o=l.UP;break;case 2:o=l.LEFT;break;case 3:o=l.BOTTOM;break;case 4:o=l.RIGHT}}return o}},{key:"aiLevelText",get:function(){return he.t("engine.aiLevelList.random")}}]),i}(me);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Re()(e);if(t){var r=Re()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return we()(this,i)}}var Ae=function(e){Pe()(i,e);var t=Me(i);function i(e){return f()(this,i),t.call(this,e)}return g()(i,[{key:"ai",value:function(){if(be()(Re()(i.prototype),"ai",this).call(this),null!=this.snake.grid.fruitPos){var e=this.snake.getHeadPosition(),t=this.aiFruitGoal==s.FRUIT_GOLD?this.snake.grid.fruitPosGold:this.snake.grid.fruitPos,n=l.RIGHT;t.x>e.x?n=t.x-e.x>this.snake.grid.width/2?l.LEFT:l.RIGHT:t.x<e.x?n=e.x-t.x>this.snake.grid.width/2?l.RIGHT:l.LEFT:t.y<e.y?n=e.y-t.y>this.snake.grid.height/2?l.BOTTOM:l.UP:t.y>e.y&&(n=t.y-e.y>this.snake.grid.height/2?l.UP:l.BOTTOM);var r=this.snake.getNextPosition(e,n);if(this.snake.grid.isDeadPosition(r)){for(var o=this.direction,a=null,u=1;u<this.snake.queue.length;u++)if(this.snake.get(u).direction!=o){a=this.snake.get(u).direction;break}r=this.snake.getNextPosition(e,a),this.snake.grid.isDeadPosition(r)?this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.UP))?this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.RIGHT))?this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.BOTTOM))?this.snake.grid.isDeadPosition(this.snake.getNextPosition(e,l.LEFT))||(n=l.LEFT):n=l.BOTTOM:n=l.RIGHT:n=l.UP:n=r.convertToKeyDirection()}return n}}},{key:"aiLevelText",get:function(){return he.t("engine.aiLevelList.low")}}]),i}(me);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Re()(e);if(t){var r=Re()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return we()(this,i)}}var Ne=function(e){Pe()(i,e);var t=Ie(i);function i(e,n){var r;return f()(this,i),(r=t.call(this,e)).enableTorus=n,r}return g()(i,[{key:"ai",value:function(){be()(Re()(i.prototype),"ai",this).call(this);var e=this.snake.getHeadPosition(),t=this.snake.grid.fruitPos,n=this.snake.grid.fruitPosGold;if(this.snake.grid.fruitPos){var r=this.snake.grid.getGraph(!1),o=new Lowlight.Astar.Configuration(r,{order:"yx",torus:!!this.enableTorus,diagonals:!1,cutting:!1,static:!0,cost:function(e,t){return 1==t?null:1}}),a=o.path({x:e.x,y:e.y},{x:this.aiFruitGoal==s.FRUIT_GOLD?n.x:t.x,y:this.aiFruitGoal==s.FRUIT_GOLD?n.y:t.y});if(a.length<1&&(a=o.path({x:e.x,y:e.y},{x:this.aiFruitGoal!=s.FRUIT_GOLD&&n?n.x:t.x,y:this.aiFruitGoal!=s.FRUIT_GOLD&&n?n.y:t.y})),a.length>1){var u=new p(a[1].x,a[1].y);return new p(null,null,this.snake.getDirectionTo(e,u)).convertToKeyDirection()}a=null}return null}},{key:"aiLevelText",get:function(){return he.t("engine.aiLevelList.normal")}}]),i}(me);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Re()(e);if(t){var r=Re()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return we()(this,i)}}var De,Ue=function(e){Pe()(i,e);var t=Fe(i);function i(e){var n;return f()(this,i),(n=t.call(this,e,!0)).aiLow=new Ne(e),n}return g()(i,[{key:"ai",value:function(){var e=be()(Re()(i.prototype),"ai",this).call(this);return e||this.aiLow.ai()}},{key:"aiLevelText",get:function(){return he.t("engine.aiLevelList.high")}}]),i}(Ne),Ge=function(){function e(t,i,n,r,s,u,l,h){if(f()(this,e),this.direction=null==t?c.RIGHT:t,this.initialDirection=null==t?c.RIGHT:t,this.initialLength=null==i?3:i,this.initTriedDirections=[],this.errorInit=!1,this.grid=n||new xe,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.player=null==r?o.HUMAN:r,this.aiLevel=null==s?a.DEFAULT:s,this.autoRetry=null!=u&&u,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==l?"Snake":l,this.snakeAI=new me(this),h)this.snakeAI=h,this.snakeAI.snake=this,this.aiLevel=a.CUSTOM;else switch(this.aiLevel){case a.RANDOM:this.snakeAI=new Le(this);break;case a.LOW:this.snakeAI=new Ae(this);break;case a.DEFAULT:this.snakeAI=new Ne(this);break;case a.HIGH:case a.ULTRA:this.snakeAI=new Ue(this)}this.init()}return g()(e,[{key:"init",value:function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==c.RIGHT&&-1==this.initTriedDirections.indexOf(c.RIGHT)||this.initialDirection==c.LEFT&&-1==this.initTriedDirections.indexOf(c.LEFT)){for(var i=0;i<this.grid.height;i++)for(var n=0,r=0;r<this.grid.width;r++)if(this.grid.get(new p(r,i))==s.EMPTY?n++:n=0,n>=this.initialLength){e++;break}}else if(this.initialDirection==c.UP&&-1==this.initTriedDirections.indexOf(c.UP)||this.initialDirection==c.BOTTOM&&-1==this.initTriedDirections.indexOf(c.BOTTOM))for(var u=0;u<this.grid.width;u++)for(var l=0,h=0;h<this.grid.height;h++)if(this.grid.get(new p(u,h))==s.EMPTY?l++:l=0,l>=this.initialLength){t++;break}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==c.RIGHT||this.initialDirection==c.LEFT)||t<=0&&(this.initialDirection==c.UP||this.initialDirection==c.BOTTOM))return-1==this.initTriedDirections.indexOf(c.RIGHT)?(this.initialDirection=c.RIGHT,this.direction=c.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(c.LEFT)?(this.initialDirection=c.LEFT,this.direction=c.LEFT,this.init()):-1==this.initTriedDirections.indexOf(c.UP)?(this.initialDirection=c.UP,this.direction=c.UP,this.init()):-1==this.initTriedDirections.indexOf(c.BOTTOM)?(this.initialDirection=c.BOTTOM,this.direction=c.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var f,d,g=!0,y=[];g;){g=!1,f=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition(),d=new p(f.x,f.y,this.initialDirection),y=[];for(var v=this.initialLength-1;v>=0;v--)v<this.initialLength-1&&(this.initialDirection==c.RIGHT?d=this.grid.getNextPosition(new p(d.x,d.y,this.initialDirection),c.RIGHT):this.initialDirection==c.LEFT?d=this.grid.getNextPosition(new p(d.x,d.y,this.initialDirection),c.LEFT):this.initialDirection==c.BOTTOM?d=this.grid.getNextPosition(new p(d.x,d.y,this.initialDirection),c.BOTTOM):this.initialDirection==c.UP&&(d=this.grid.getNextPosition(new p(d.x,d.y,this.initialDirection),c.UP))),this.grid.get(d)!=s.EMPTY?g=!0:y.push(new p(d.x,d.y,d.direction));if(this.grid.maze&&g)return this.init()}for(var x=0;x<y.length;x++)this.insert(y[x]);return this.grid.maze&&this.player==o.HYBRID_HUMAN_AI&&(this.player=o.HUMAN),this.player==o.HYBRID_HUMAN_AI&&(this.aiLevel=a.HIGH),this.lastTail=this.get(this.queue.length-1),!0}},{key:"reset",value:function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastKey=-1,this.aiFruitGoal=s.FRUIT,this.init()}},{key:"insert",value:function(e){this.queue.unshift(e),this.grid.set(s.SNAKE,e)}},{key:"remove",value:function(){var e=this.queue.pop();this.grid.set(s.EMPTY,e),this.lastTail=e}},{key:"length",value:function(){return this.queue.length}},{key:"get",value:function(e){return null!=this.queue[e]?this.queue[e].copy():null}},{key:"set",value:function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)}},{key:"getHeadPosition",value:function(){return this.get(0)}},{key:"getTailPosition",value:function(){return this.get(this.length()-1)}},{key:"hasMaxScore",value:function(){return this.grid.getTotal(s.EMPTY)<=0&&!this.grid.fruitPosGold&&!this.grid.fruitPos}},{key:"setGameOver",value:function(){this.gameOver=!0;for(var e=0;e<this.length();e++)this.grid.set(s.SNAKE_DEAD,this.get(e))}},{key:"kill",value:function(){this.autoRetry=!1,this.grid=null,this.queue=null}},{key:"moveTo",value:function(e){e==l.LEFT&&this.direction!=c.RIGHT&&this.direction!=c.LEFT&&(this.direction=c.LEFT),e==l.UP&&this.direction!=c.BOTTOM&&this.direction!=c.UP&&(this.direction=c.UP),e==l.RIGHT&&this.direction!=c.LEFT&&this.direction!=c.RIGHT&&(this.direction=c.RIGHT),e==l.BOTTOM&&this.direction!=c.UP&&this.direction!=c.BOTTOM&&(this.direction=c.BOTTOM)}},{key:"getNextPosition",value:function(e,t){return this.grid.getNextPosition(e,t)}},{key:"getDirectionTo",value:function(e,t){return this.grid.getDirectionTo(e,t)}},{key:"getGraphicDirectionFor",value:function(e,t,i){if(null==t||null==i)return e.direction;var n=this.getDirectionTo(e,i),r=this.getDirectionTo(e,t);return n==c.LEFT&&r==c.BOTTOM||n==c.BOTTOM&&r==c.LEFT?c.ANGLE_1:n==c.RIGHT&&r==c.BOTTOM||n==c.BOTTOM&&r==c.RIGHT?c.ANGLE_2:n==c.UP&&r==c.RIGHT||n==c.RIGHT&&r==c.UP?c.ANGLE_3:n==c.UP&&r==c.LEFT||n==c.LEFT&&r==c.UP?c.ANGLE_4:e.direction}},{key:"getGraphicDirection",value:function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))}},{key:"copy",value:function(){for(var t=new e(direction,3,new xe(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),i=0;i<t.grid.height;i++)for(var n=0;n<t.grid.width;n++)t.grid.set(this.grid.get(new p(n,i)),new p(n,i));t.queue=[];for(var r=0;r<this.queue.length;r++)t.queue.push(elem.copy());return t}},{key:"ai",value:function(){return this.snakeAI.ai()}},{key:"getAILevelText",value:function(){return this.snakeAI.aiLevelText}}]),e}(),_e=function(){function e(t){f()(this,e),this.name=t,this.callbacks=[]}return g()(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}}]),e}(),je=function(){function e(){f()(this,e),this.events={}}return g()(e,[{key:"registerEvent",value:function(e){this.events[e]=new _e(e)}},{key:"dispatchEvent",value:function(e,t){for(var i=this.events[e].callbacks,n=0,r=i.length;n<r;n++)i[n](t)}},{key:"addEventListener",value:function(e,t){this.events[e].registerCallback(t)}}]),e}(),He=function(){function e(t,i,n,r,s,o){f()(this,e),this.grid=t,this.snakes=i,this.speed=null==n?8:n,this.initialSpeed=null==n?8:n,this.initialSpeedUntouched=null==n?8:n,this.enablePause=null==r||r,this.enableRetry=null==s||s,this.progressiveSpeed=null!=o&&o,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.intervalPlay,this.reactor=new je,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}return g()(e,[{key:"init",value:function(){if(!this.clientSidePredictionsMode){null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes];for(var e=fe(0,360,this.grid?this.grid.rngGame:null),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof Ge==0?this.errorOccurred=!0:(e=de(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e);this.grid instanceof xe==0?this.errorOccurred=!0:this.errorOccurred||this.grid.setFruit(this.snakes.length)}}},{key:"reset",value:function(){if(this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.grid.seedGrid&&this.grid.seedGrid++,this.grid.seedGame&&this.grid.seedGame++,this.grid.rngGrid&&(this.grid.rngGrid=ye()(this.grid.seedGrid)),this.grid.rngGame&&(this.grid.rngGame=ye()(this.grid.seedGame)),this.grid.init(),null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.grid.setFruit(this.snakes.length),this.reactor.dispatchEvent("onReset"),this.start()}},{key:"start",value:function(){var e=this;if(this.reactor.dispatchEvent("onUpdateCounter"),!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&e.forceStart()}),1e3))}}},{key:"forceStart",value:function(){this.clearIntervalPlay(),this.countBeforePlay=-1,this.paused=!1,this.isReseted=!1,this.firstStart=!1,this.starting=!1,this.reactor.dispatchEvent("onStart"),this.tick()}},{key:"clearIntervalPlay",value:function(){clearInterval(this.intervalPlay)}},{key:"continue",value:function(){this.clientSidePredictionsMode||(this.start(),this.reactor.dispatchEvent("onContinue"))}},{key:"stop",value:function(e){this.gameOver||this.clientSidePredictionsMode||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))}},{key:"pause",value:function(){this.paused||this.clientSidePredictionsMode||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))}},{key:"kill",value:function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}}},{key:"exit",value:function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)this.snakes[i].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var i=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)if(this.snakes[n].player==t&&i++,i==e)return this.snakes[n];return null}},{key:"tick",value:function(){var e=this;setTimeout((function(){if(!e.paused&&!e.killed){0==e.lastTime&&(e.lastTime=time),e.ticks++;var t,i=!1;if(e.grid&&(!e.grid.maze||e.grid.mazeForceAuto||e.grid.maze&&e.getNBPlayer(o.HUMAN)<=0&&e.getNBPlayer(o.HYBRID_HUMAN_AI)<=0||e.grid.maze&&(e.getNBPlayer(o.HUMAN)>0||e.getNBPlayer(o.HYBRID_HUMAN_AI)>0)&&-1!=(e.getPlayer(1,o.HYBRID_HUMAN_AI)||e.getPlayer(1,o.HUMAN)).lastKey)){for(var n=0;n<e.snakes.length;n++){var r=e.snakes[n].direction,u=!1,c=!1;if(i=!1,e.snakes[n].lastTailMoved=!1,!e.snakes[n].gameOver&&!e.snakes[n].scoreMax){e.snakes[n].player==o.HUMAN||e.snakes[n].player==o.HYBRID_HUMAN_AI?(e.snakes[n].moveTo(e.snakes[n].lastKey),e.snakes[n].lastKey=-1):e.snakes[n].player==o.AI&&(!e.clientSidePredictionsMode||e.clientSidePredictionsMode&&e.snakes[n].aiLevel!=a.RANDOM)&&e.snakes[n].moveTo(e.snakes[n].ai());var l=e.snakes[n].getHeadPosition();e.snakes[n].player==o.HYBRID_HUMAN_AI&&e.grid.isDeadPosition(e.snakes[n].getNextPosition(l,e.snakes[n].direction))&&(e.snakes[n].direction=r,e.snakes[n].moveTo(e.snakes[n].ai()),e.snakes[n].lastKey=-1),l=e.snakes[n].getNextPosition(l,e.snakes[n].direction),e.grid.isDeadPosition(l)?e.snakes[n].setGameOver():e.grid.get(l)==s.FRUIT||e.grid.get(l)==s.FRUIT_GOLD?(e.grid.get(l)==s.FRUIT?(e.snakes[n].score++,e.grid.set(s.EMPTY,e.grid.fruitPos),e.grid.fruitPos=null):e.grid.get(l)==s.FRUIT_GOLD&&(e.snakes[n].score+=3,e.grid.set(s.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null,c=!0),t=!0,e.snakes[n].insert(l),e.grid.maze?(e.gameMazeWin=!0,e.gameFinished=!0,e.stop()):e.snakes[n].hasMaxScore()&&e.snakes.length<=1?(e.scoreMax=!0,e.snakes[n].scoreMax=!0,e.stop()):(e.numFruit++,c||(u=!0)),e.snakes.length<=1&&e.progressiveSpeed&&e.snakes[n].score>0&&e.initialSpeed>1&&(e.initialSpeed=Math.ceil(-e.initialSpeedUntouched/100*e.snakes[n].score+e.initialSpeedUntouched),e.initialSpeed=e.initialSpeed<1?1:e.initialSpeed)):(e.snakes[n].insert(l),e.grid.maze||(e.snakes[n].remove(),e.snakes[n].lastTailMoved=!0))}e.scoreMax||!u||e.clientSidePredictionsMode||(i=!e.grid.setFruit(e.snakes.length))}e.scoreMax||i||!e.grid.isFruitSurrounded(e.grid.fruitPos,!0)||e.clientSidePredictionsMode||(i=!e.grid.setFruit(e.snakes.length)),!e.scoreMax&&null!=e.grid.fruitPosGold&&e.grid.isFruitSurrounded(e.grid.fruitPosGold,!0)&&(e.grid.set(s.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null);for(var h=0,f=0;f<e.snakes.length;f++)(e.snakes[f].gameOver||e.snakes[f].scoreMax)&&h++;(h>=e.snakes.length||i)&&(e.stop(),e.snakes.length>1&&(e.gameFinished=!0)),e.reactor.dispatchEvent("onUpdate"),t&&e.reactor.dispatchEvent("onScoreIncreased")}e.tick()}}),this.initialSpeed*u.TIME_MULTIPLIER)}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"onUpdate",value:function(e){this.reactor.addEventListener("onUpdate",e)}},{key:"onUpdateCounter",value:function(e){this.reactor.addEventListener("onUpdateCounter",e)}}]),e}();function Ce(e){var t=JSON.parse(JSON.stringify(e));if(t)for(var i=0;i<t.length;i++)delete t[i].grid;return t}function Be(e){var t=JSON.parse(JSON.stringify(e));return t&&(t.rngGrid=null,t.rngGame=null),t}function ze(e,t){if(De)var i=i||De.grid;(t=Object.assign(new xe,t)).rngGrid=ye()(t.seedGrid),t.rngGame=ye()(t.seedGame),!e&&De&&(e=De.snakes);for(var n=0;n<e.length;n++){e[n].grid=t,e[n]=Object.assign(new Ge,e[n]);for(var r=0;r<e[n].queue.length;r++)e[n].queue[r]=Object.assign(new p,e[n].queue[r])}return{grid:t,snakes:e}}onmessage=function(e){var t=e.data;if(t.length>1&&"init"==t[0]){var i=ze(t[1].snakes,t[1].grid),n=i.grid,s=i.snakes;De=new He(n,s,t[1].speed,t[1].enablePause,t[1].enableRetry,t[1].progressiveSpeed),self.postMessage(["init",{snakes:Ce(De.snakes),grid:Be(De.grid),enablePause:De.enablePause,enableRetry:De.enableRetry,progressiveSpeed:De.progressiveSpeed,offsetFrame:De.speed*u.TIME_MULTIPLIER,errorOccurred:De.errorOccurred}]),De.onReset((function(){self.postMessage(["reset",{paused:De.paused,isReseted:De.isReseted,exited:De.exited,snakes:Ce(De.snakes),grid:Be(De.grid),numFruit:De.numFruit,ticks:De.ticks,scoreMax:De.scoreMax,gameOver:De.gameOver,gameFinished:De.gameFinished,gameMazeWin:De.gameMazeWin,starting:De.starting,initialSpeed:De.initialSpeed,speed:De.speed,offsetFrame:De.speed*u.TIME_MULTIPLIER,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onStart((function(){self.postMessage(["start",{snakes:Ce(De.snakes),grid:Be(De.grid),starting:De.starting,countBeforePlay:De.countBeforePlay,paused:De.paused,isReseted:De.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onPause((function(){self.postMessage(["pause",{paused:De.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onContinue((function(){self.postMessage(["continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onStop((function(){self.postMessage(["stop",{paused:De.paused,scoreMax:De.scoreMax,gameOver:De.gameOver,gameFinished:De.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onExit((function(){self.postMessage(["exit",{paused:De.paused,gameOver:De.gameOver,gameFinished:De.gameFinished,exited:De.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onKill((function(){self.postMessage(["kill",{paused:De.paused,gameOver:De.gameOver,killed:De.killed,snakes:Ce(De.snakes),grid:Be(De.grid),gameFinished:De.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:De.errorOccurred}])})),De.onScoreIncreased((function(){self.postMessage(["scoreIncreased",{}])})),De.onUpdate((function(){var e;self.postMessage(["update",(e={paused:De.paused,isReseted:De.isReseted,exited:De.exited,snakes:Ce(De.snakes),grid:Be(De.grid),numFruit:De.numFruit,ticks:De.ticks,scoreMax:De.scoreMax,gameOver:De.gameOver,gameFinished:De.gameFinished,gameMazeWin:De.gameMazeWin,starting:De.starting,initialSpeed:De.initialSpeed,speed:De.speed,countBeforePlay:De.countBeforePlay},r()(e,"numFruit",De.numFruit),r()(e,"offsetFrame",0),r()(e,"errorOccurred",De.errorOccurred),e)])})),De.onUpdateCounter((function(){var e;self.postMessage(["updateCounter",(e={paused:De.paused,isReseted:De.isReseted,exited:De.exited,snakes:Ce(De.snakes),grid:Be(De.grid),numFruit:De.numFruit,ticks:De.ticks,scoreMax:De.scoreMax,gameOver:De.gameOver,gameFinished:De.gameFinished,gameMazeWin:De.gameMazeWin,starting:De.starting,initialSpeed:De.initialSpeed,speed:De.speed,countBeforePlay:De.countBeforePlay},r()(e,"numFruit",De.numFruit),r()(e,"errorOccurred",De.errorOccurred),e)])}))}else if(null!=De){switch(t[0]){case"reset":De.reset();break;case"start":De.start();break;case"stop":De.stop();break;case"finish":De.stop(!0);break;case"stop":De.stop(!1);break;case"pause":De.pause();break;case"kill":De.kill();break;case"tick":De.paused=!1,De.countBeforePlay=-1,De.tick();break;case"ping":self.postMessage("pong");break;case"exit":De.exit();break;case"forceStart":De.forceStart();break;case"key":if(t.length>1){De.lastKey=t[1];var a=De.getPlayer(1,o.HUMAN)||De.getPlayer(1,o.HYBRID_HUMAN_AI);null!=a&&null!=a.lastKey&&(a.lastKey=t[1])}break;case"update":if(t.length>1)if("snakes"==t[1].key){var c=ze(t[1].data);De.snakes=c.snakes}else if("grid"==t[1].key){var l=ze(null,t[1].data);De.grid=l.grid}else De[t[1].key]=t[1].data}}else"ping"==t&&self.postMessage("pong")}}]);