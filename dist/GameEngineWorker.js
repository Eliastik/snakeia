!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SnakeIA=t():e.SnakeIA=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=95)}([function(e,t,i){"use strict";t.a={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6,CROSSED:7},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","Ã—"],APP_VERSION:"2.1",DATE_VERSION:"05/03/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},Error:{ROOM_NOT_FOUND:"ROOM_NOT_FOUND",ROOM_ALREADY_JOINED:"ROOM_ALREADY_JOINED",INVALID_SETTINGS:"INVALID_SETTINGS",MAX_ROOM_LIMIT_REACHED:"MAX_ROOM_LIMIT_REACHED",AUTHENTICATION_REQUIRED:"AUTHENTICATION_REQUIRED",ALREADY_CREATED_ROOM:"ALREADY_CREATED_ROOM",BANNED:"BANNED",DISCONNECTED:"DISCONNECTED"},GameState:{STARTING:"STARTING",STARTED:"STARTED",SEARCHING_PLAYERS:"SEARCHING_PLAYERS",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS"}}},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}var s=i(10),o=i(11);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function g(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,t):void 0}}function y(e){return function(e){if(Array.isArray(e))return d(e)}(e)||g(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){if(Array.isArray(e))return e}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return v(e)||g(e)||p(e)||_()}function x(e,t){return v(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return i}}(e,t)||p(e,t)||_()}var b={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var i;console&&console[e]&&(i=console)[e].apply(i,y(t))}},T=new(function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,e),this.init(t,i)}return Object(o.a)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,i,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(i).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,a({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),k=function(){function e(){Object(s.a)(this,e),this.observers={}}return Object(o.a)(e,[{key:"on",value:function(e,t){var i=this;return e.split(" ").forEach((function(e){i.observers[e]=i.observers[e]||[],i.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,i)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(i))}))}}}]),e}();function O(){var e,t,i=new Promise((function(i,n){e=i,t=n}));return i.resolve=e,i.reject=t,i}function P(e){return null==e?"":""+e}function E(e,t,i){e.forEach((function(e){t[e]&&(i[e]=t[e])}))}function D(e,t,i){function n(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(r())return{};var s=n(a.shift());!e[s]&&i&&(e[s]=new i),e=e[s]}return r()?{}:{obj:e,k:n(a.shift())}}function R(e,t,i){var n=D(e,t,Object);n.obj[n.k]=i}function w(e,t){var i=D(e,t),n=i.obj,r=i.k;if(n)return n[r]}function L(e,t,i){var n=w(e,i);return void 0!==n?n:w(t,i)}function M(e,t,i){for(var n in t)n in e?"string"==typeof e[n]||e[n]instanceof String||"string"==typeof t[n]||t[n]instanceof String?i&&(e[n]=t[n]):M(e[n],t[n],i):e[n]=t[n];return e}function S(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function C(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return A[e]})):e}var I="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,N=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Object(s.a)(this,t),i=c(this,l(t).call(this)),I&&k.call(u(i)),i.data=e||{},i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i}return f(t,e),Object(o.a)(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=[e,t];return i&&"string"!=typeof i&&(a=a.concat(i)),i&&"string"==typeof i&&(a=a.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(a=e.split(".")),w(this.data,a)}},{key:"addResource",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var s=[e,t];i&&(s=s.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(n=t,t=(s=e.split("."))[1]),this.addNamespaces(t),R(this.data,s,n),r.silent||this.emit("added",e,t,i,n)}},{key:"addResources",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in i)"string"!=typeof i[r]&&"[object Array]"!==Object.prototype.toString.apply(i[r])||this.addResource(e,t,r,i[r],{silent:!0});n.silent||this.emit("added",e,t,i)}},{key:"addResourceBundle",value:function(e,t,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(n=i,i=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var u=w(this.data,o)||{};n?M(u,i,r):u=a({},u,i),R(this.data,o,u),s.silent||this.emit("added",e,t,i)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?a({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(k),U={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,n,r){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,i,n,r))})),t}},F={},G=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,t),i=c(this,l(t).call(this)),I&&k.call(u(i)),E(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,u(i)),i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=T.create("translator"),i}return f(t,e),Object(o.a)(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},i=this.resolve(e,t);return i&&void 0!==i.res}},{key:"extractFromKey",value:function(e,t){var i=t.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS;if(i&&e.indexOf(i)>-1){var a=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(a[0])>-1)&&(r=a.shift()),e=a.join(n)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t){var i=this;if("object"!==n(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),o=s.key,u=s.namespaces,c=u[u.length-1],l=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(h){var f=t.nsSeparator||this.options.nsSeparator;return c+f+o}return o}var d=this.resolve(e,t),g=d&&d.res,p=d&&d.usedKey||o,y=d&&d.exactUsedKey||o,v=Object.prototype.toString.apply(g),_=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g;if(x&&g&&b&&_.indexOf(v)<0&&("string"!=typeof m||"[object Array]"!==v)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,g,t):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(r){var T="[object Array]"===v,k=T?[]:{},O=T?y:p;for(var P in g)if(Object.prototype.hasOwnProperty.call(g,P)){var E="".concat(O).concat(r).concat(P);k[P]=this.translate(E,a({},t,{joinArrays:!1,ns:u})),k[P]===E&&(k[P]=g[P])}g=k}}else if(x&&"string"==typeof m&&"[object Array]"===v)(g=g.join(m))&&(g=this.extendTranslation(g,e,t));else{var D=!1,R=!1;if(!this.isValidLookup(g)&&void 0!==t.defaultValue){if(D=!0,void 0!==t.count){var w=this.pluralResolver.getSuffix(l,t.count);g=t["defaultValue".concat(w)]}g||(g=t.defaultValue)}this.isValidLookup(g)||(R=!0,g=o);var L=t.defaultValue&&t.defaultValue!==g&&this.options.updateMissing;if(R||D||L){this.logger.log(L?"updateKey":"missingKey",l,c,o,L?t.defaultValue:g);var M=[],S=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&S&&S[0])for(var A=0;A<S.length;A++)M.push(S[A]);else"all"===this.options.saveMissingTo?M=this.languageUtils.toResolveHierarchy(t.lng||this.language):M.push(t.lng||this.language);var C=function(e,n){i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,n,L?t.defaultValue:g,L,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,n,L?t.defaultValue:g,L,t),i.emit("missingKey",e,c,n,g)};if(this.options.saveMissing){var I=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&I?M.forEach((function(e){i.pluralResolver.getPluralFormsOfKey(e,o).forEach((function(t){return C([e],t)}))})):C(M,o)}}g=this.extendTranslation(g,e,t,d),R&&g===o&&this.options.appendNamespaceToMissingKey&&(g="".concat(c,":").concat(o)),R&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(g))}return g}},{key:"extendTranslation",value:function(e,t,i,n){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,i,n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(a({},i,{interpolation:a({},this.options.interpolation,i.interpolation)}));var s=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(s=a({},this.options.interpolation.defaultVariables,s)),e=this.interpolator.interpolate(e,s,i.lng||this.language,i),!1!==i.nest&&(e=this.interpolator.nest(e,(function(){return r.translate.apply(r,arguments)}),i)),i.interpolation&&this.interpolator.reset()}var o=i.postProcess||this.options.postProcess,u="string"==typeof o?[o]:o;return null!=e&&u&&u.length&&!1!==i.applyPostProcessor&&(e=U.handle(u,e,t,this.options&&this.options.postProcessPassResolved?a({i18nResolved:n},i):i,this)),e}},{key:"resolve",value:function(e){var t,i,n,r,a,s=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var u=s.extractFromKey(e,o),c=u.key;i=c;var l=u.namespaces;s.options.fallbackNS&&(l=l.concat(s.options.fallbackNS));var h=void 0!==o.count&&"string"!=typeof o.count,f=void 0!==o.context&&"string"==typeof o.context&&""!==o.context,d=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);l.forEach((function(e){s.isValidLookup(t)||(a=e,!F["".concat(d[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(a)&&(F["".concat(d[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(i,'" for namespace "').concat(a,'" for languages "').concat(d.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(i){if(!s.isValidLookup(t)){r=i;var a,u,l=c,d=[l];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(d,c,i,e,o);else h&&(a=s.pluralResolver.getSuffix(i,o.count)),h&&f&&d.push(l+a),f&&d.push(l+="".concat(s.options.contextSeparator).concat(o.context)),h&&d.push(l+=a);for(;u=d.pop();)s.isValidLookup(t)||(n=u,t=s.getResource(i,e,u,o))}})))}))}})),{res:t,usedKey:i,exactUsedKey:n,usedLng:r,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}}]),t}(k);function j(e){return e.charAt(0).toUpperCase()+e.slice(1)}var K=function(){function e(t){Object(s.a)(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=T.create("languageUtils")}return Object(o.a)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],i=e.split("-");return this.options.lowerCaseLng?i=i.map((function(e){return e.toLowerCase()})):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=j(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=j(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=j(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}},{key:"toResolveHierarchy",value:function(e,t){var i=this,n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],a=function(e){e&&(i.isWhitelisted(e)?r.push(e):i.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),n.forEach((function(e){r.indexOf(e)<0&&a(i.formatLanguageCode(e))})),r}}]),e}(),H=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],B={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}};function W(){var e={};return H.forEach((function(t){t.lngs.forEach((function(i){e[i]={numbers:t.nr,plurals:B[t.fc]}}))})),e}var z=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,e),this.languageUtils=t,this.options=i,this.logger=T.create("pluralResolver"),this.rules=W()}return Object(o.a)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var i=this,n=[],r=this.getRule(e);return r?(r.numbers.forEach((function(r){var a=i.getSuffix(e,r);n.push("".concat(t).concat(a))})),n):n}},{key:"getSuffix",value:function(e,t){var i=this,n=this.getRule(e);if(n){var r=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),a=n.numbers[r];this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var s=function(){return i.options.prepend&&a.toString()?i.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),this.logger=T.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return Object(o.a)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:C,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?S(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?S(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?S(t.nestingPrefix):t.nestingPrefixEscaped||S("$t("),this.nestingSuffix=t.nestingSuffix?S(t.nestingSuffix):t.nestingSuffixEscaped||S(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(e,t,i,n){var r,a,s,o=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(o.formatSeparator)<0){var r=L(t,u,e);return o.alwaysFormat?o.format(r,void 0,i):r}var a=e.split(o.formatSeparator),s=a.shift().trim(),c=a.join(o.formatSeparator).trim();return o.format(L(t,u,s),c,i,n)};this.resetRegExp();var h=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler;for(s=0;r=this.regexpUnescape.exec(e);){if(void 0===(a=l(r[1].trim())))if("function"==typeof h){var f=h(e,r,n);a="string"==typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),a="";else"string"==typeof a||this.useRawValueToEscape||(a=P(a));if(e=e.replace(r[0],c(a)),this.regexpUnescape.lastIndex=0,++s>=this.maxReplaces)break}for(s=0;r=this.regexp.exec(e);){if(void 0===(a=l(r[1].trim())))if("function"==typeof h){var d=h(e,r,n);a="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),a="";else"string"==typeof a||this.useRawValueToEscape||(a=P(a));if(a=this.escapeValue?c(this.escape(a)):c(a),e=e.replace(r[0],a),this.regexp.lastIndex=0,++s>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var i,n,r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a({},s);function u(e,t){var i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;var n=e.split(new RegExp("".concat(i,"[ ]*{"))),r="{".concat(n[1]);e=n[0],r=(r=this.interpolate(r,o)).replace(/'/g,'"');try{o=JSON.parse(r),t&&(o=a({},t,o))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(i).concat(r)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;i=this.nestingRegexp.exec(e);){var c=[],l=!1;if(i[0].includes(this.formatSeparator)&&!/{.*}/.test(i[1])){var h=i[1].split(this.formatSeparator).map((function(e){return e.trim()})),f=m(h);i[1]=f[0],c=f.slice(1),l=!0}if((n=t(u.call(this,i[1].trim(),o),o))&&i[0]===e&&"string"!=typeof n)return n;"string"!=typeof n&&(n=P(n)),n||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(e)),n=""),l&&(n=c.reduce((function(e,t){return r.format(e,t,s.lng,s)}),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}}]),e}();var q=function(e){function t(e,i,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(s.a)(this,t),r=c(this,l(t).call(this)),I&&k.call(u(r)),r.backend=e,r.store=i,r.services=n,r.languageUtils=n.languageUtils,r.options=a,r.logger=T.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,a.backend,a),r}return f(t,e),Object(o.a)(t,[{key:"queueLoad",value:function(e,t,i,n){var r=this,a=[],s=[],o=[],u=[];return e.forEach((function(e){var n=!0;t.forEach((function(t){var o="".concat(e,"|").concat(t);!i.reload&&r.store.hasResourceBundle(e,t)?r.state[o]=2:r.state[o]<0||(1===r.state[o]?s.indexOf(o)<0&&s.push(o):(r.state[o]=1,n=!1,s.indexOf(o)<0&&s.push(o),a.indexOf(o)<0&&a.push(o),u.indexOf(t)<0&&u.push(t)))})),n||o.push(e)})),(a.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:n}),{toLoad:a,pending:s,toLoadLanguages:o,toLoadNamespaces:u}}},{key:"loaded",value:function(e,t,i){var n=x(e.split("|"),2),r=n[0],a=n[1];t&&this.emit("failedLoading",r,a,t),i&&this.store.addResourceBundle(r,a,i),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(i){var n,o,u,c,l,h;n=i.loaded,o=a,c=D(n,[r],Object),l=c.obj,h=c.k,l[h]=l[h]||[],u&&(l[h]=l[h].concat(o)),u||l[h].push(o),function(e,t){for(var i=e.indexOf(t);-1!==i;)e.splice(i,1),i=e.indexOf(t)}(i.pending,e),t&&i.errors.push(t),0!==i.pending.length||i.done||(Object.keys(i.loaded).forEach((function(e){s[e]||(s[e]=[]),i.loaded[e].length&&i.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[i](e,t,(function(o,u){o&&u&&r<5?setTimeout((function(){n.read.call(n,e,t,i,r+1,2*a,s)}),a):s(o,u)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,n,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach((function(e){i.loadOne(e)}))}},{key:"load",value:function(e,t,i){this.prepareLoading(e,t,{},i)}},{key:"reload",value:function(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}},{key:"loadOne",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("|"),r=x(n,2),a=r[0],s=r[1];this.read(a,s,"read",void 0,void 0,(function(n,r){n&&t.logger.warn("".concat(i,"loading namespace ").concat(s," for language ").concat(a," failed"),n),!n&&r&&t.logger.log("".concat(i,"loaded namespace ").concat(s," for language ").concat(a),r),t.loaded(e,n,r)}))}},{key:"saveMissing",value:function(e,t,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(i,'" for namespace "').concat(t,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=i&&""!==i&&(this.backend&&this.backend.create&&this.backend.create(e,t,i,n,null,a({},s,{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,i,n))}}]),t}(k);function V(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===n(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===n(e[2])||"object"===n(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){t[e]=i[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,i,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3}}}function J(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function X(){}var $=new(function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(Object(s.a)(this,t),e=c(this,l(t).call(this)),I&&k.call(u(e)),e.options=J(i),e.services={},e.logger=T,e.modules={external:[]},n&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,n),c(e,u(e));setTimeout((function(){e.init(i,n)}),0)}return e}return f(t,e),Object(o.a)(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;function n(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(i=t,t={}),this.options=a({},V(),this.options,J(t)),this.format=this.options.interpolation.format,i||(i=X),!this.options.isClone){this.modules.logger?T.init(n(this.modules.logger),this.options):T.init(null,this.options);var r=new K(this.options);this.store=new N(this.options.resources,this.options);var s=this.services;s.logger=T,s.resourceStore=this.store,s.languageUtils=r,s.pluralResolver=new z(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new Y(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new q(n(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.languageDetector&&(s.languageDetector=n(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=n(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new G(this.services,this.options),this.translator.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var o=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];o.forEach((function(t){e[t]=function(){var i;return(i=e.store)[t].apply(i,arguments)}}));var u=O(),c=function(){e.changeLanguage(e.options.lng,(function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(n),i(t,n)}))};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X,n=i,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var a=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(r)s(r);else{var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);o.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(a,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,i){var n=O();return e||(e=this.languages),t||(t=this.options.ns),i||(i=X),this.services.backendConnector.reload(e,t,(function(e){n.resolve(),i(e)})),n}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&U.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var i=this;this.isLanguageChangingTo=e;var n=O();this.emit("languageChanging",e);var r=function(e){e&&(i.language||(i.language=e,i.languages=i.services.languageUtils.toResolveHierarchy(e)),i.translator.language||i.translator.changeLanguage(e),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage(e)),i.loadResources(e,(function(r){!function(e,r){r?(i.language=r,i.languages=i.services.languageUtils.toResolveHierarchy(r),i.translator.changeLanguage(r),i.isLanguageChangingTo=void 0,i.emit("languageChanged",r),i.logger.log("languageChanged",r)):i.isLanguageChangingTo=void 0,n.resolve((function(){return i.t.apply(i,arguments)})),t&&t(e,(function(){return i.t.apply(i,arguments)}))}(r,e)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),n}},{key:"getFixedT",value:function(e,t){var i=this,r=function e(t,r){var s;if("object"!==n(r)){for(var o=arguments.length,u=new Array(o>2?o-2:0),c=2;c<o;c++)u[c-2]=arguments[c];s=i.options.overloadTranslationOptionHandler([t,r].concat(u))}else s=a({},r);return s.lng=s.lng||e.lng,s.lngs=s.lngs||e.lngs,s.ns=s.ns||e.ns,i.t(t,s)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],n=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var a=function(e,i){var n=t.services.backendConnector.state["".concat(e,"|").concat(i)];return-1===n||2===n};return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!a(i,e)||n&&!a(r,e)))}},{key:"loadNamespaces",value:function(e,t){var i=this,n=O();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){i.options.ns.indexOf(e)<0&&i.options.ns.push(e)})),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var i=O();"string"==typeof e&&(e=[e]);var n=this.options.preload||[],r=e.filter((function(e){return n.indexOf(e)<0}));return r.length?(this.options.preload=n.concat(r),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new t(e,i)}},{key:"cloneInstance",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X,r=a({},this.options,i,{isClone:!0}),s=new t(r),o=["store","services","language"];return o.forEach((function(t){s[t]=e[t]})),s.services=a({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new G(s.services,s.options),s.translator.on("*",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];s.emit.apply(s,[e].concat(i))})),s.init(r,n),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),t}(k));t.a=$},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=i(0),u=function(){function e(t,i,n){r()(this,e),this.x=t,this.y=i,this.direction=n}return s()(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.direction)}},{key:"convertToKeyDirection",value:function(){switch(this.direction){case o.a.Direction.UP:return o.a.Key.UP;case o.a.Direction.RIGHT:return o.a.Key.RIGHT;case o.a.Direction.LEFT:return o.a.Key.LEFT;case o.a.Direction.BOTTOM:return o.a.Key.BOTTOM;default:return this.direction}}},{key:"convertToSimpleDirection",value:function(){switch(this.direction){case o.a.Key.UP:return o.a.Direction.UP;case o.a.Key.RIGHT:return o.a.Direction.RIGHT;case o.a.Key.LEFT:return o.a.Direction.LEFT;case o.a.Key.BOTTOM:return o.a.Direction.BOTTOM;default:return this.direction}}},{key:"equals",value:function(e){return null!=e&&(this.x==e.x&&this.y==e.y)}}]),e}()},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=(i(25),i(7)),u=i(0),c=i(2),l=i(12),h=i.n(l),f=function(){function e(t,i,n,a,s,o,l,f,d){r()(this,e),this.width=null==t?20:t,this.height=null==i?20:i,this.generateWalls=null!=n&&n,this.borderWalls=null!=a&&a,this.maze=null!=s&&s,this.mazeFirstPosition=new c.a(1,1,u.a.Direction.RIGHT),this.mazeForceAuto=null!=l&&l,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.seedGrid=f,this.seedGame=d,this.rngGrid=h()(this.seedGrid),this.rngGame=h()(this.seedGame),this.init(o)}return s()(e,[{key:"init",value:function(e){if(null!=e||null!=this.initialGrid){var t;t=null!=this.initialGrid?this.initialGrid:e,this.height=t.length,this.width=t[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var i=0;i<this.height;i++)this.initialGrid[i]=t[i].slice(),this.grid[i]=t[i].slice()}else{this.grid=new Array(this.height);for(i=0;i<this.height;i++){this.grid[i]=new Array(this.width);for(var n=0;n<this.width;n++)this.borderWalls&&(0==i||i==this.height-1||0==n||n==this.width-1)||this.generateWalls&&this.rngGrid()>.65||this.maze?this.grid[i][n]=u.a.CaseType.WALL:this.grid[i][n]=u.a.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null}},{key:"fixWalls",value:function(e){if(e)var t=1,i=this.height-1,n=1,r=this.width-1;else t=0,i=this.height,n=0,r=this.width;for(var a=t;a<i;a++)for(var s=n;s<r;s++){var o=new c.a(s,a),l=this.getNextPosition(o,u.a.Direction.UP),h=this.getNextPosition(l,u.a.Direction.LEFT),f=this.getNextPosition(l,u.a.Direction.RIGHT),d=this.getNextPosition(o,u.a.Direction.BOTTOM),g=this.getNextPosition(d,u.a.Direction.LEFT),p=this.getNextPosition(d,u.a.Direction.RIGHT);this.get(h)!=u.a.CaseType.WALL&&this.get(f)!=u.a.CaseType.WALL&&this.get(g)!=u.a.CaseType.WALL&&this.get(p)!=u.a.CaseType.WALL||this.set(u.a.CaseType.EMPTY,o)}}},{key:"maze_recursion",value:function(e,t){for(var i=o.a.shuffle([u.a.Direction.UP,u.a.Direction.RIGHT,u.a.Direction.BOTTOM,u.a.Direction.LEFT],this.rngGrid),n=0;n<i.length;n++)switch(i[n]){case u.a.Direction.UP:if(e-2<=0)continue;this.get(new c.a(t,e-2))!=u.a.CaseType.EMPTY&&(this.set(u.a.CaseType.EMPTY,new c.a(t,e-2)),this.set(u.a.CaseType.EMPTY,new c.a(t,e-1)),this.maze_recursion(e-2,t));break;case u.a.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new c.a(t+2,e))!=u.a.CaseType.EMPTY&&(this.set(u.a.CaseType.EMPTY,new c.a(t+2,e)),this.set(u.a.CaseType.EMPTY,new c.a(t+1,e)),this.maze_recursion(e,t+2));break;case u.a.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new c.a(t,e+2))!=u.a.CaseType.EMPTY&&(this.set(u.a.CaseType.EMPTY,new c.a(t,e+2)),this.set(u.a.CaseType.EMPTY,new c.a(t,e+1)),this.maze_recursion(e+2,t));break;case u.a.Direction.LEFT:if(t-2<=0)continue;this.get(new c.a(t-2,e))!=u.a.CaseType.EMPTY&&(this.set(u.a.CaseType.EMPTY,new c.a(t-2,e)),this.set(u.a.CaseType.EMPTY,new c.a(t-1,e)),this.maze_recursion(e,t-2))}}},{key:"generateMaze",value:function(){this.mazeFirstPosition=new c.a(1,1,u.a.Direction.RIGHT),this.set(u.a.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)}},{key:"set",value:function(e,t){this.grid[t.y][t.x]=e}},{key:"get",value:function(e){return this.grid[e.y][e.x]}},{key:"valToChar",value:function(e){switch(e){case u.a.CaseType.EMPTY:return"-";case u.a.CaseType.SNAKE:return"o";case u.a.CaseType.SNAKE_DEAD:return"O";case u.a.CaseType.FRUIT:return"x";case u.a.CaseType.WALL:return"#";case u.a.CaseType.SURROUNDED:return"/";case u.a.CaseType.FRUIT_GOLD:return"X"}}},{key:"getImageCase",value:function(e){switch(this.get(e)){case u.a.CaseType.WALL:return"wall.png";case u.a.CaseType.FRUIT:return"fruit.png";case u.a.CaseType.FRUIT_GOLD:return"fruit_gold.png"}return""}},{key:"getGraph",value:function(e){for(var t=new Array(this.height),i=0;i<this.height;i++){t[i]=new Array(this.width);for(var n=0;n<this.width;n++){var r=new c.a(n,i);e&&this.get(r)==u.a.CaseType.SNAKE?t[i][n]=0:this.isDeadPosition(r)?t[i][n]=1:t[i][n]=0}}return t}},{key:"getRandomPosition",value:function(){return new c.a(o.a.randRange(0,this.width-1,this.rngGame),o.a.randRange(0,this.height-1,this.rngGame))}},{key:"setFruit",value:function(e,t){var i,n=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=u.a.CaseType.FRUIT||this.set(u.a.CaseType.EMPTY,this.fruitPos),!(this.getTotal(u.a.CaseType.EMPTY)>0))return!!(this.getTotal(u.a.CaseType.EMPTY)<=0&&this.fruitPosGold);do{i=this.getRandomPosition();var r=this.getNextPosition(i,u.a.Direction.TOP),a=this.getNextPosition(i,u.a.Direction.BOTTOM),s=this.getNextPosition(i,u.a.Direction.RIGHT),c=this.getNextPosition(i,u.a.Direction.LEFT),l=this.isDeadPosition(r,!0)+this.isDeadPosition(a,!0)+this.isDeadPosition(s,!0)+this.isDeadPosition(c,!0);if(l>=3&&this.get(i)==u.a.CaseType.EMPTY&&this.set(u.a.CaseType.SURROUNDED,i),this.getTotal(u.a.CaseType.EMPTY)<=0)return!!this.fruitPosGold}while(this.get(i)!=u.a.CaseType.EMPTY||this.isFruitSurrounded(i,!0)||this.maze&&!this.testFruitMaze(i,n)||l>=3);return t?(this.fruitPosGold=i,this.set(u.a.CaseType.FRUIT_GOLD,i)):(this.fruitPos=i,this.set(u.a.CaseType.FRUIT,i)),this.maze||null!=this.fruitPosGold||1!=o.a.randRange(1,e>1?u.a.Setting.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:u.a.Setting.PROB_GOLD_FRUIT_1_PLAYER,this.rngGame)||this.setFruit(e,!0),!0}},{key:"testFruitMaze",value:function(e,t){var i=this.getGraph(!0);return new Lowlight.Astar.Configuration(i,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:function(e,t){return 1==t?null:1}}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(u.a.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)}},{key:"isCaseSurrounded",value:function(e,t,i,n){if(null==e||null==e)return!1;t=null!=t&&t;for(var r=JSON.parse(JSON.stringify(this.grid)),a=[e];a.length>0;){var s=a[0];a.shift();for(var o=[this.getNextPosition(s,u.a.Direction.UP),this.getNextPosition(s,u.a.Direction.BOTTOM),this.getNextPosition(s,u.a.Direction.LEFT),this.getNextPosition(s,u.a.Direction.RIGHT)],c=0;c<o.length;c++)if(r[o[c].y][o[c].x]!=u.a.CaseType.CROSSED&&n.indexOf(this.get(o[c]))>-1){if(a.push(o[c]),i.indexOf(this.get(o[c]))>-1)return!1;t&&this.get(o[c])==u.a.CaseType.EMPTY?(this.set(u.a.CaseType.SURROUNDED,o[c]),r[o[c].y][o[c].x]=u.a.CaseType.SURROUNDED):r[o[c].y][o[c].x]=u.a.CaseType.CROSSED}}return(t&&(this.get(e)==u.a.CaseType.EMPTY||this.get(e)==u.a.CaseType.FRUIT)||this.get(e)==u.a.CaseType.FRUIT_GOLD)&&this.set(u.a.CaseType.SURROUNDED,e),!0}},{key:"isFruitSurrounded",value:function(e,t){var i=this.isCaseSurrounded(e,!1,[u.a.CaseType.SNAKE],[u.a.CaseType.EMPTY,u.a.CaseType.SNAKE]);return i&&t&&this.isCaseSurrounded(e,!0,[u.a.CaseType.SNAKE],[u.a.CaseType.EMPTY,u.a.CaseType.SNAKE]),i}},{key:"getOnLine",value:function(e,t){for(var i=0,n=0;n<this.width;n++)this.get(new c.a(n,t))==e&&i++;return i}},{key:"getTotal",value:function(e){for(var t=0,i=0;i<this.height;i++)t+=this.getOnLine(e,i);return t}},{key:"getNextPosition",value:function(e,t){var i=new c.a(e.x,e.y,t);switch(t){case u.a.Direction.LEFT:i.x--,i.direction=u.a.Direction.LEFT;break;case u.a.Direction.UP:i.y--,i.direction=u.a.Direction.UP;break;case u.a.Direction.RIGHT:i.x++,i.direction=u.a.Direction.RIGHT;break;case u.a.Direction.BOTTOM:i.y++,i.direction=u.a.Direction.BOTTOM;break;case u.a.Key.LEFT:i.x--,i.direction=u.a.Key.LEFT;break;case u.a.Key.UP:i.y--,i.direction=u.a.Key.UP;break;case u.a.Key.RIGHT:i.x++,i.direction=u.a.Direction.RIGHT;break;case u.a.Key.BOTTOM:i.y++,i.direction=u.a.Direction.BOTTOM}return i.x<0?i.x=this.width-1:i.x>=this.width&&(i.x=0),i.y<0?i.y=this.height-1:i.y>=this.height&&(i.y=0),i}},{key:"getDirectionTo",value:function(e,t){return this.getNextPosition(e,u.a.Direction.UP).equals(t)?u.a.Direction.UP:this.getNextPosition(e,u.a.Direction.BOTTOM).equals(t)?u.a.Direction.BOTTOM:this.getNextPosition(e,u.a.Direction.RIGHT).equals(t)?u.a.Direction.RIGHT:this.getNextPosition(e,u.a.Direction.LEFT).equals(t)?u.a.Direction.LEFT:-1}},{key:"isDeadPosition",value:function(e,t){return!t&&this.get(e)==u.a.CaseType.SNAKE||this.get(e)==u.a.CaseType.WALL||this.get(e)==u.a.CaseType.SNAKE_DEAD}},{key:"toString",value:function(){res="";for(var e=0;e<this.height;e++){for(var t=0;t<this.width;t++)res+=this.valToChar(this.get(new c.a(t,e)))+" ";res+="\n"}return res}}]),e}()},function(e,t,i){"use strict";var n=i(1);t.a={randRange:function(e,t,i){return Math.floor((i?i():Math.random())*(t-e+1))+e},addHue:function(e,t){var i=e+t;return i>360?i-=360:i<0&&(i=360+i),i},hsvToRgb:function(e,t,i){var n,r,a,s,o,u,c,l;switch(u=i*(1-t),c=i*(1-(o=6*e-(s=Math.floor(6*e)))*t),l=i*(1-(1-o)*t),s%6){case 0:n=i,r=l,a=u;break;case 1:n=c,r=i,a=u;break;case 2:n=u,r=i,a=l;break;case 3:n=u,r=c,a=i;break;case 4:n=l,r=u,a=i;break;case 5:n=i,r=u,a=c}return[Math.round(255*n),Math.round(255*r),Math.round(255*a)]},hslToName:function(e,t,i){return t<=10&&i>=90?n.a.t("engine.colors.white"):t<=10&&i<=70||0==t?n.a.t("engine.colors.gray"):i<=15?n.a.t("engine.colors.black"):e>=0&&e<=6||e>=350?n.a.t("engine.colors.red"):e>=7&&e<=42?n.a.t("engine.colors.orange"):e>=43&&e<=70?n.a.t("engine.colors.yellow"):e>=71&&e<=156?n.a.t("engine.colors.green"):e>=157&&e<=221?n.a.t("engine.colors.blue"):e>=222&&e<=290?n.a.t("engine.colors.purple"):e>=291&&e<=349?n.a.t("engine.colors.pink"):"???"},shuffle:function(e,t){for(var i,n,r=e.length-1;r>0;r--)i=Math.floor((t?t():Math.random())*(r+1)),n=e[r],e[r]=e[i],e[i]=n;return e},millisecondsFormat:function(e){return e/=1e3,("0"+Math.trunc(e/60)).slice(-2)+":"+("0"+Math.trunc(e%60)).slice(-2)},secondsFormat:function(e){return this.millisecondsFormat(1e3*e)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=i(1),u=(i(25),i(7)),c=i(0),l=i(2),h=i(6),f=function(){function e(t,i,n,a,s,o,u){r()(this,e),this.direction=null==t?c.a.Direction.RIGHT:t,this.initialDirection=null==t?c.a.Direction.RIGHT:t,this.initialLength=null==i?3:i,this.initTriedDirections=[],this.errorInit=!1,this.grid=n||new h.a,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.player=null==a?c.a.PlayerType.HUMAN:a,this.aiLevel=null==s?c.a.AiLevel.DEFAULT:s,this.autoRetry=null!=o&&o,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==u?"Snake":u,this.aiFruitGoal=c.a.CaseType.FRUIT,this.init()}return s()(e,[{key:"init",value:function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==c.a.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(c.a.Direction.RIGHT)||this.initialDirection==c.a.Direction.LEFT&&-1==this.initTriedDirections.indexOf(c.a.Direction.LEFT)){for(var i=0;i<this.grid.height;i++)for(var n=0,r=0;r<this.grid.width;r++)if(this.grid.get(new l.a(r,i))==c.a.CaseType.EMPTY?n++:n=0,n>=this.initialLength){e++;break}}else if(this.initialDirection==c.a.Direction.UP&&-1==this.initTriedDirections.indexOf(c.a.Direction.UP)||this.initialDirection==c.a.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(c.a.Direction.BOTTOM))for(i=0;i<this.grid.width;i++){var a=0;for(r=0;r<this.grid.height;r++)if(this.grid.get(new l.a(i,r))==c.a.CaseType.EMPTY?a++:a=0,a>=this.initialLength){t++;break}}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==c.a.Direction.RIGHT||this.initialDirection==c.a.Direction.LEFT)||t<=0&&(this.initialDirection==c.a.Direction.UP||this.initialDirection==c.a.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(c.a.Direction.RIGHT)?(this.initialDirection=c.a.Direction.RIGHT,this.direction=c.a.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(c.a.Direction.LEFT)?(this.initialDirection=c.a.Direction.LEFT,this.direction=c.a.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(c.a.Direction.UP)?(this.initialDirection=c.a.Direction.UP,this.direction=c.a.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(c.a.Direction.BOTTOM)?(this.initialDirection=c.a.Direction.BOTTOM,this.direction=c.a.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var s,o,u=!0,h=[];u;){u=!1,s=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition(),o=new l.a(s.x,s.y,this.initialDirection),h=[];for(i=this.initialLength-1;i>=0;i--)i<this.initialLength-1&&(this.initialDirection==c.a.Direction.RIGHT?o=this.grid.getNextPosition(new l.a(o.x,o.y,this.initialDirection),c.a.Direction.RIGHT):this.initialDirection==c.a.Direction.LEFT?o=this.grid.getNextPosition(new l.a(o.x,o.y,this.initialDirection),c.a.Direction.LEFT):this.initialDirection==c.a.Direction.BOTTOM?o=this.grid.getNextPosition(new l.a(o.x,o.y,this.initialDirection),c.a.Direction.BOTTOM):this.initialDirection==c.a.Direction.UP&&(o=this.grid.getNextPosition(new l.a(o.x,o.y,this.initialDirection),c.a.Direction.UP))),this.grid.get(o)!=c.a.CaseType.EMPTY?u=!0:h.push(new l.a(o.x,o.y,o.direction));if(this.grid.maze&&u)return this.init()}for(i=0;i<h.length;i++)this.insert(h[i]);return this.grid.maze&&this.player==c.a.PlayerType.HYBRID_HUMAN_AI&&(this.player=c.a.PlayerType.HUMAN),this.player==c.a.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=c.a.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0}},{key:"reset",value:function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastKey=-1,this.aiFruitGoal=c.a.CaseType.FRUIT,this.init()}},{key:"insert",value:function(e){this.queue.unshift(e),this.grid.set(c.a.CaseType.SNAKE,e)}},{key:"remove",value:function(){var e=this.queue.pop();this.grid.set(c.a.CaseType.EMPTY,e),this.lastTail=e}},{key:"length",value:function(){return this.queue.length}},{key:"get",value:function(e){return null!=this.queue[e]?this.queue[e].copy():null}},{key:"set",value:function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)}},{key:"getHeadPosition",value:function(){return this.get(0)}},{key:"getTailPosition",value:function(){return this.get(this.length()-1)}},{key:"hasMaxScore",value:function(){return this.grid.getTotal(c.a.CaseType.EMPTY)<=0&&!this.grid.fruitPosGold&&!this.grid.fruitPos}},{key:"setGameOver",value:function(){this.gameOver=!0;for(var e=0;e<this.length();e++)this.grid.set(c.a.CaseType.SNAKE_DEAD,this.get(e))}},{key:"kill",value:function(){this.autoRetry=!1,this.grid=null,this.queue=null}},{key:"moveTo",value:function(e){e==c.a.Key.LEFT&&this.direction!=c.a.Direction.RIGHT&&this.direction!=c.a.Direction.LEFT&&(this.direction=c.a.Direction.LEFT),e==c.a.Key.UP&&this.direction!=c.a.Direction.BOTTOM&&this.direction!=c.a.Direction.UP&&(this.direction=c.a.Direction.UP),e==c.a.Key.RIGHT&&this.direction!=c.a.Direction.LEFT&&this.direction!=c.a.Direction.RIGHT&&(this.direction=c.a.Direction.RIGHT),e==c.a.Key.BOTTOM&&this.direction!=c.a.Direction.UP&&this.direction!=c.a.Direction.BOTTOM&&(this.direction=c.a.Direction.BOTTOM)}},{key:"getNextPosition",value:function(e,t){return this.grid.getNextPosition(e,t)}},{key:"getDirectionTo",value:function(e,t){return this.grid.getDirectionTo(e,t)}},{key:"getGraphicDirectionFor",value:function(e,t,i){if(null==t||null==i)return e.direction;var n=this.getDirectionTo(e,i),r=this.getDirectionTo(e,t);c.a.Direction.UP;return n==c.a.Direction.LEFT&&r==c.a.Direction.BOTTOM||n==c.a.Direction.BOTTOM&&r==c.a.Direction.LEFT?c.a.Direction.ANGLE_1:n==c.a.Direction.RIGHT&&r==c.a.Direction.BOTTOM||n==c.a.Direction.BOTTOM&&r==c.a.Direction.RIGHT?c.a.Direction.ANGLE_2:n==c.a.Direction.UP&&r==c.a.Direction.RIGHT||n==c.a.Direction.RIGHT&&r==c.a.Direction.UP?c.a.Direction.ANGLE_3:n==c.a.Direction.UP&&r==c.a.Direction.LEFT||n==c.a.Direction.LEFT&&r==c.a.Direction.UP?c.a.Direction.ANGLE_4:e.direction}},{key:"getGraphicDirection",value:function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))}},{key:"copy",value:function(){for(var t=new e(direction,3,new h.a(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),i=0;i<t.grid.height;i++)for(var n=0;n<t.grid.width;n++)t.grid.set(this.grid.get(new l.a(n,i)),new l.a(n,i));t.queue=[];for(i=0;i<this.queue.length;i++)t.queue.push(elem.copy());return t}},{key:"randomAI",value:function(){var e=this.getHeadPosition(),t=this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.UP)),i=this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.LEFT)),n=this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.BOTTOM)),r=this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.RIGHT));if(t&&i&&n&&r)return c.a.Key.UP;for(var a=null;null==a||this.grid.isDeadPosition(this.getNextPosition(e,a));){switch(u.a.randRange(1,4,this.grid?this.grid.rngGame:null)){case 1:a=c.a.Key.UP;break;case 2:a=c.a.Key.LEFT;break;case 3:a=c.a.Key.BOTTOM;break;case 4:a=c.a.Key.RIGHT}}return a}},{key:"simpleAI",value:function(){if(null!=this.grid.fruitPos){var e=this.getHeadPosition(),t=this.aiFruitGoal==c.a.CaseType.FRUIT_GOLD?this.grid.fruitPosGold:this.grid.fruitPos,i=c.a.Key.RIGHT;t.x>e.x?i=t.x-e.x>this.grid.width/2?c.a.Key.LEFT:c.a.Key.RIGHT:t.x<e.x?i=e.x-t.x>this.grid.width/2?c.a.Key.RIGHT:c.a.Key.LEFT:t.y<e.y?i=e.y-t.y>this.grid.height/2?c.a.Key.BOTTOM:c.a.Key.UP:t.y>e.y&&(i=t.y-e.y>this.grid.height/2?c.a.Key.UP:c.a.Key.BOTTOM);var n=this.getNextPosition(e,i);if(this.grid.isDeadPosition(n)){for(var r=this.direction,a=null,s=1;s<this.queue.length;s++)if(this.get(s).direction!=r){a=this.get(s).direction;break}n=this.getNextPosition(e,a),this.grid.isDeadPosition(n)?this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.UP))?this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.RIGHT))?this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.BOTTOM))?this.grid.isDeadPosition(this.getNextPosition(e,c.a.Key.LEFT))||(i=c.a.Key.LEFT):i=c.a.Key.BOTTOM:i=c.a.Key.RIGHT:i=c.a.Key.UP:i=n.convertToKeyDirection()}return i}}},{key:"ai",value:function(){var e=null,t=this.getHeadPosition(),i=this.grid.fruitPos,n=this.grid.fruitPosGold;if(null!=i){var r=Math.abs(i.x-t.x)+Math.abs(i.y-t.y),a=null!=n?Math.abs(n.x-t.x)+Math.abs(n.y-t.y):-1;null!=n&&this.grid.get(n)==c.a.CaseType.FRUIT_GOLD&&this.aiFruitGoal==c.a.CaseType.FRUIT?this.aiFruitGoal=a<r?c.a.CaseType.FRUIT_GOLD:c.a.CaseType.FRUIT:null!=n&&this.grid.get(n)==c.a.CaseType.FRUIT_GOLD||(this.aiFruitGoal=c.a.CaseType.FRUIT)}if(this.aiLevel==c.a.AiLevel.RANDOM)e=this.randomAI();else if(this.aiLevel==c.a.AiLevel.LOW)e=this.simpleAI();else if(null!=i){var s=this.grid.getGraph(!1),o=new Lowlight.Astar.Configuration(s,{order:"yx",torus:this.aiLevel==c.a.AiLevel.HIGH||this.aiLevel==c.a.AiLevel.ULTRA,diagonals:!1,cutting:!1,static:!0,cost:function(e,t){return 1==t?null:1}}),u=o.path({x:t.x,y:t.y},{x:this.aiFruitGoal==c.a.CaseType.FRUIT_GOLD?n.x:i.x,y:this.aiFruitGoal==c.a.CaseType.FRUIT_GOLD?n.y:i.y});if(u.length<1&&(u=o.path({x:t.x,y:t.y},{x:this.aiFruitGoal!=c.a.CaseType.FRUIT_GOLD&&n?n.x:i.x,y:this.aiFruitGoal!=c.a.CaseType.FRUIT_GOLD&&n?n.y:i.y})),u.length>1){var h=new l.a(u[1].x,u[1].y);e=new l.a(null,null,this.getDirectionTo(t,h)).convertToKeyDirection()}else this.aiLevel!=c.a.AiLevel.HIGH&&this.aiLevel!=c.a.AiLevel.ULTRA||(e=this.simpleAI());u=null}return e}},{key:"getAILevelText",value:function(){switch(this.aiLevel){case c.a.AiLevel.RANDOM:return o.a.t("engine.aiLevelList.random");case c.a.AiLevel.LOW:return o.a.t("engine.aiLevelList.low");case c.a.AiLevel.DEFAULT:return o.a.t("engine.aiLevelList.normal");case c.a.AiLevel.HIGH:return o.a.t("engine.aiLevelList.high");case c.a.AiLevel.ULTRA:return o.a.t("engine.aiLevelList.ultra");default:return o.a.t("engine.aiLevelList.normal")}}}]),e}()},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",(function(){return r}))},function(e,t,i){var n=i(37),r=i(38),a=i(39),s=i(40),o=i(41),u=i(42),c=i(43);c.alea=n,c.xor128=r,c.xorwow=a,c.xorshift7=s,c.xor4096=o,c.tychei=u,e.exports=c},function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(t)}e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=i(22),u=function(){function e(){r()(this,e),this.events={}}return s()(e,[{key:"registerEvent",value:function(e){var t=new o.a(e);this.events[e]=t}},{key:"dispatchEvent",value:function(e,t){for(var i=this.events[e].callbacks,n=0,r=i.length;n<r;n++)i[n](t)}},{key:"addEventListener",value:function(e,t){this.events[e].registerCallback(t)}}]),e}()},function(e,t,i){var n=i(21);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,i){var n=i(20),r=i(32);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t}},function(e,t){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(e){return typeof e}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(t,n)}e.exports=i},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=function(){function e(t){r()(this,e),this.name=t,this.callbacks=[]}return s()(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}}]),e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i(4),r=i.n(n),a=i(5),s=i.n(a),o=i(7),u=i(0),c=i(17),l=i(6),h=i(8),f=i(12),d=i.n(f),g=function(){function e(t,i,n,a,s,o){r()(this,e),this.grid=t,this.snakes=i,this.speed=null==n?8:n,this.initialSpeed=null==n?8:n,this.initialSpeedUntouched=null==n?8:n,this.enablePause=null==a||a,this.enableRetry=null==s||s,this.progressiveSpeed=null!=o&&o,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.intervalPlay,this.reactor=new c.a,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}return s()(e,[{key:"init",value:function(){if(!this.clientSidePredictionsMode){null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes];for(var e=o.a.randRange(0,360,this.grid?this.grid.rngGame:null),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof h.a==0?this.errorOccurred=!0:(e=o.a.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e);this.grid instanceof l.a==0?this.errorOccurred=!0:this.errorOccurred||this.grid.setFruit(this.snakes.length)}}},{key:"reset",value:function(){if(this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.grid.seedGrid&&this.grid.seedGrid++,this.grid.seedGame&&this.grid.seedGame++,this.grid.rngGrid&&(this.grid.rngGrid=d()(this.grid.seedGrid)),this.grid.rngGame&&(this.grid.rngGame=d()(this.grid.seedGame)),this.grid.init(),null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.grid.setFruit(this.snakes.length),this.reactor.dispatchEvent("onReset"),this.start()}},{key:"start",value:function(){this.reactor.dispatchEvent("onUpdateCounter");var e=this;if(!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&e.forceStart()}),1e3))}}},{key:"forceStart",value:function(){this.clearIntervalPlay(),this.countBeforePlay=-1,this.paused=!1,this.isReseted=!1,this.firstStart=!1,this.starting=!1,this.reactor.dispatchEvent("onStart"),this.tick()}},{key:"clearIntervalPlay",value:function(){clearInterval(this.intervalPlay)}},{key:"continue",value:function(){this.clientSidePredictionsMode||(this.start(),this.reactor.dispatchEvent("onContinue"))}},{key:"stop",value:function(e){this.gameOver||this.clientSidePredictionsMode||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))}},{key:"pause",value:function(){this.paused||this.clientSidePredictionsMode||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))}},{key:"kill",value:function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}}},{key:"exit",value:function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)this.snakes[i].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var i=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)if(this.snakes[n].player==t&&i++,i==e)return this.snakes[n];return null}},{key:"tick",value:function(){var e=this;setTimeout((function(){if(!e.paused&&!e.killed){0==e.lastTime&&(e.lastTime=time),e.ticks++;var t=!1;if(e.grid&&(!e.grid.maze||e.grid.mazeForceAuto||e.grid.maze&&e.getNBPlayer(u.a.PlayerType.HUMAN)<=0&&e.getNBPlayer(u.a.PlayerType.HYBRID_HUMAN_AI)<=0||e.grid.maze&&(e.getNBPlayer(u.a.PlayerType.HUMAN)>0||e.getNBPlayer(u.a.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=(e.getPlayer(1,u.a.PlayerType.HYBRID_HUMAN_AI)||e.getPlayer(1,u.a.PlayerType.HUMAN)).lastKey)){for(var i=0;i<e.snakes.length;i++){var n=e.snakes[i].direction,r=!1,a=!1,s=!1;if(e.snakes[i].lastTailMoved=!1,!e.snakes[i].gameOver&&!e.snakes[i].scoreMax){e.snakes[i].player==u.a.PlayerType.HUMAN||e.snakes[i].player==u.a.PlayerType.HYBRID_HUMAN_AI?(e.snakes[i].moveTo(e.snakes[i].lastKey),e.snakes[i].lastKey=-1):e.snakes[i].player==u.a.PlayerType.AI&&(!e.clientSidePredictionsMode||e.clientSidePredictionsMode&&e.snakes[i].aiLevel!=u.a.AiLevel.RANDOM)&&e.snakes[i].moveTo(e.snakes[i].ai());var o=e.snakes[i].getHeadPosition();e.snakes[i].player==u.a.PlayerType.HYBRID_HUMAN_AI&&e.grid.isDeadPosition(e.snakes[i].getNextPosition(o,e.snakes[i].direction))&&(e.snakes[i].direction=n,e.snakes[i].moveTo(e.snakes[i].ai()),e.snakes[i].lastKey=-1),o=e.snakes[i].getNextPosition(o,e.snakes[i].direction),e.grid.isDeadPosition(o)?e.snakes[i].setGameOver():e.grid.get(o)==u.a.CaseType.FRUIT||e.grid.get(o)==u.a.CaseType.FRUIT_GOLD?(e.grid.get(o)==u.a.CaseType.FRUIT?(e.snakes[i].score++,e.grid.set(u.a.CaseType.EMPTY,e.grid.fruitPos),e.grid.fruitPos=null):e.grid.get(o)==u.a.CaseType.FRUIT_GOLD&&(e.snakes[i].score+=3,e.grid.set(u.a.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null,s=!0),t=!0,e.snakes[i].insert(o),e.grid.maze?(e.gameMazeWin=!0,e.gameFinished=!0,e.stop()):e.snakes[i].hasMaxScore()&&e.snakes.length<=1?(e.scoreMax=!0,e.snakes[i].scoreMax=!0,e.stop()):(e.numFruit++,s||(r=!0)),e.snakes.length<=1&&e.progressiveSpeed&&e.snakes[i].score>0&&e.initialSpeed>1&&(e.initialSpeed=Math.ceil(-e.initialSpeedUntouched/100*e.snakes[i].score+e.initialSpeedUntouched),e.initialSpeed=e.initialSpeed<1?1:e.initialSpeed)):(e.snakes[i].insert(o),e.grid.maze||(e.snakes[i].remove(),e.snakes[i].lastTailMoved=!0))}e.scoreMax||!r||e.clientSidePredictionsMode||(a=!e.grid.setFruit(e.snakes.length))}e.scoreMax||a||!e.grid.isFruitSurrounded(e.grid.fruitPos,!0)||e.clientSidePredictionsMode||(a=!e.grid.setFruit(e.snakes.length)),!e.scoreMax&&null!=e.grid.fruitPosGold&&e.grid.isFruitSurrounded(e.grid.fruitPosGold,!0)&&(e.grid.set(u.a.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null);for(var c=0,l=0;l<e.snakes.length;l++)(e.snakes[l].gameOver||e.snakes[l].scoreMax)&&c++;(c>=e.snakes.length||a)&&(e.stop(),e.snakes.length>1&&(e.gameFinished=!0)),e.reactor.dispatchEvent("onUpdate"),t&&e.reactor.dispatchEvent("onScoreIncreased")}e.tick()}}),this.initialSpeed*u.a.Setting.TIME_MULTIPLIER)}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"onUpdate",value:function(e){this.reactor.addEventListener("onUpdate",e)}},{key:"onUpdateCounter",value:function(e){this.reactor.addEventListener("onUpdateCounter",e)}}]),e}()},,function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26),_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_6__);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,n=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(e);if(t){var r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this,i)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_6___default()(module)&&"object"==_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_6___default()(module.exports)&&(module.exports=a.Lowlight);var e=function(){function e(){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,e),this.nodes=new Map}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(e,[{key:"id",value:function(e){return e}},{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}},{key:"data",value:function(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}},{key:"adjacent",value:function(e,t){return e.graph.get(this).has(t)}},{key:"neighbors",value:function(e){return Array.from(e.graph.get(this).keys())}},{key:"connected",value:function(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}},{key:"connect",value:function(){for(var e=this,t=Array.from(this.nodes.values()),i=0,n=0;n<t.length;n++)t[n].graph.get(this)._connectivity=void 0;for(var r=function(n){if(void 0!==t[n].graph.get(e)._connectivity)return"continue";var r=[t[n]];for(i++;r.length;){var a=r.shift();a.graph.get(e)._connectivity=i,e.neighbors(a).map((function(t){void 0===t.graph.get(e)._connectivity&&0>r.indexOf(t)&&r.push(t)}))}},a=0;a<t.length;a++)r(a)}},{key:"add",value:function(e){var t=this;return 1<arguments.length?Array.from(arguments).map((function(e){return t.add(e)})):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}},{key:"delete",value:function(e){var t=this;return 1<arguments.length?Array.from(arguments).map((function(e){return t.delete(e)})):(e.graph.delete(this),this.nodes.delete(e.id),e)}},{key:"edge",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===i?e.graph.get(this).delete(t):e.graph.get(this).set(t,i),null===n?t.graph.get(this).delete(e):t.graph.get(this).set(e,n),this}},{key:"cost",value:function(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}]),e}();e.fromArray=function(t){for(var i,n=arguments,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.fromArray.X(t,r.order),s=e.fromArray.Y(t,r.order),o=e.fromArray.at.bind(null,t,r.order),u=[],c=null,l=function(t,l){t=new e,u.push(t),r=n[l]||{};for(var h=e.fromArray.id.bind(null,a,s,r.torus),d=r.cost||e.fromArray.cost,g=e.fromArray.edge.bind(null,t,d),p=0;p<a;p++)for(var y,v=0;v<s;v++)(y=t.add(c?c.get(h(p,v)):new f(h(p,v)))).x=p,y.y=v,y.graph.get(t)._data=o(p,v),g(y,t.nodes.get(h(p-1,v))),g(y,t.nodes.get(h(p+1,v))),g(y,t.nodes.get(h(p,v-1))),g(y,t.nodes.get(h(p,v+1)));if(r.diagonals)for(var _=0;_<a;_++)for(var m=0;m<s;m++){var x=t.nodes.get(h(_,m)),b=t.adjacent(x,t.nodes.get(h(_-1,m))),T=t.adjacent(x,t.nodes.get(h(_+1,m))),k=t.adjacent(x,t.nodes.get(h(_,m-1))),O=t.adjacent(x,t.nodes.get(h(_,m+1)));"strict"===r.cutting?(b&&k&&g(x,t.nodes.get(h(_-1,m-1))),b&&O&&g(x,t.nodes.get(h(_-1,m+1))),T&&k&&g(x,t.nodes.get(h(_+1,m-1))),T&&O&&g(x,t.nodes.get(h(_+1,m+1)))):((b||k||r.cutting)&&g(x,t.nodes.get(h(_-1,m-1))),(b||O||r.cutting)&&g(x,t.nodes.get(h(_-1,m+1))),(T||k||r.cutting)&&g(x,t.nodes.get(h(_+1,m-1))),(T||O||r.cutting)&&g(x,t.nodes.get(h(_+1,m+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:function(e){return i=t,h(e.x,e.y)}}),t.connect(),t.X=a,t.Y=s,t.TORUS=r.torus,c||(c=t.nodes),i=t},h=1;h<Math.max(2,arguments.length);h++)l(i,h);return 1<u.length?u:u[0]},e.fromArray.X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yx";return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yx";return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yx",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return"xy"===t?e[i][n]:e[n][i]},e.fromArray.id=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return i?(r+t)%t*e+(n+e)%e:0<=n&&n<e&&0<=r&&r<t?r*e+n:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,i,n){n&&e.edge(i,n,t(e.data(i),e.data(n)),t(e.data(n),e.data(i)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};var f=function e(t,i){for(var n in _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,e),this.id=t,this.graph=new Map,i)"id"!=n&&"graph"!=n&&(this[n]=i[n])},g=function(){function e(t){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,e),this.nodes=[],this.score="function"==typeof t?t:function(e){return+e}}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(e,[{key:"add",value:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return this.nodes.push(e),this.bubble(this.size-1)}},{key:"set",value:function(e){var t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}},{key:"pop",value:function(){var e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}},{key:"top",value:function(){return this.nodes[0]}},{key:"delete",value:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.delete(arguments[t]);return this}for(var i=0;i<this.size;i++)if(this.nodes[i]==e){var n=this.nodes.pop();return i==this.size-1?this:(this.nodes[i]=n,this.bubble(i).sink(i))}}},{key:"bubble",value:function(e){for(var t=this.nodes[e],i=this.score(t);0<e;){var n=Math.floor((e+1)/2)-1,r=this.nodes[n];if(i>=this.score(r))break;this.nodes[n]=t,this.nodes[e]=r,e=n}return this}},{key:"sink",value:function(e){for(var t=this.nodes[e],i=this.score(t);;){var n=2*(e+1),r=n-1,a=null;if(r<this.size&&this.score(this.nodes[r])<i&&(a=r),n<this.size&&this.score(this.nodes[n])<(a?this.score(this.nodes[a]):i)&&(a=n),null===a)break;this.nodes[e]=this.nodes[a],this.nodes[a]=t,e=a}return this}},{key:"size",get:function(){return this.nodes.length}}]),e}(),h={manhattan:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*(n+r)},manhattanTorus:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)},diagonal:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i=d(t.x-e.x),n=d(t.y-e.y);return m*(i+n)+(dm-2*m)*c(i,n)},diagonalTorus:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)},euclidian:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*Math.sqrt(n*n+r*r)},euclidianTorus:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)}},i=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_0___default()(i,e);var t=_createSuper(i);function i(e){var n;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,i),(n=t.call(this,e)).name="WorkerError",n}return i}(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_3___default()(Error)),j=function(){function t(n){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,t),this.graphs=[],this.heuristic=a.heuristic||"manhattan",this.heuristicOptions=a.heuristicOptions||{},Array.isArray(n)&&(this.heuristic=a.heuristic in h?a.heuristic:a.diagonals?a.torus?"diagonalTorus":"diagonal":a.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(n,a.order),this.heuristicOptions.y=e.fromArray.Y(n,a.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),a.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(a.thread)}catch(n){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i("".concat(a.thread," couldn't be opened."))}"cost"in a&&(a.cost=a.cost.toString()),this.worker.postMessage(["constructor",n,a]),this.path=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r._worker_path_callback=i.callback,delete i.callback,r.worker.postMessage(["path",e,t,i])},this.worker.onmessage=function(e){var t=JSON.parse(e.data);switch(t[0]){case"path":r._worker_path_callback(t[1])}}}}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(t,[{key:"path",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.jps)return this.jps(e,t,n);var r=new g((function(e){return e.estimated})),a=new Map,s=this.graphs[n.layer||0];if(e=s.node(e,!0),t=s.node(t,!0),r.add({node:e,estimated:0}),a.set(e,{score:0,from:null}),!n.static||s.connected(e,t))for(var o=function(){var e=r.pop().node;if(e===t)return"break";s.neighbors(e).map((function(o){var u=(a.has(e)?a.get(e).score:0)+s.cost(e,o);u<(a.has(o)?a.get(o).score:1/0)&&(a.set(o,{score:u,from:e}),r.set({node:o,estimated:u+h[n.heuristic||i.heuristic](o,t,n.heuristicOptions||i.heuristicOptions)}))})),r.delete(e)};r.size;){var u=o();if("break"===u)break}var c=[];if(a.has(t)){var l=t;for(c.push(t);null!==(l=a.get(l).from);)c.push(l);c=c.reverse()}return n.callback&&n.callback(c,a),c}}]),t}(),_a6;(j.JPS=function(){function e(){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,e)}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(e,null,[{key:"access",value:function(e,t,i,n){return e.adjacent(t,n?e.node(i,!0):i)}},{key:"neighborhood",value:function(e,t,i,n){var r=[],a=i.get(n).from||null;if(null===a)return t.neighbors(n);var s={x:b(n.x-a.x),y:b(n.y-a.y)};if(0!=s.x&&0!=s.y){var o=e(n,{x:n.x+s.x,y:n.y},!0),u=e(n,{x:n.x,y:n.y+s.y},!0);(o||u)&&(r.push(t.node({x:n.x+s.x,y:n.y+s.y},!0)),o&&(r.push(t.node({x:n.x+s.x,y:n.y},!0)),!e(n,{x:n.x,y:n.y-s.y},!0)&&r.push(t.node({x:n.x+s.x,y:n.y-s.y},!0))),u&&(r.push(t.node({x:n.x,y:n.y+s.y},!0)),!e(n,{x:n.x-s.x,y:n.y},!0)&&r.push(t.node({x:n.x-s.x,y:n.y+s.y},!0))))}else e(n,{x:n.x+s.x,y:n.y+s.y},!0)&&(r.push(t.node({x:n.x+s.x,y:n.y+s.y},!0)),0==s.x?0!=s.y&&(!e(n,{x:n.x-1,y:n.y},!0)&&r.push(t.node({x:n.x-1,y:n.y+s.y},!0)),!e(n,{x:n.x+1,y:n.y},!0)&&r.push(t.node({x:n.x+1,y:n.y+s.y},!0))):(!e(n,{x:n.x,y:n.y-1},!0)&&r.push(t.node({x:n.x+s.x,y:n.y-1},!0)),!e(n,{x:n.x,y:n.y+1},!0)&&r.push(t.node({x:n.x+s.x,y:n.y+1},!0))));return r.filter((function(e){return e}))}},{key:"jump",value:function(e,t,i,n,r,a){for(;;){if(!e(a,r))return null;if(r.x===n.x&&r.y===n.y)return r;var s={x:b(r.x-a.x),y:b(r.y-a.y)};if(0!=s.x&&0!=s.y){if(!e(r,{x:r.x-s.x,y:r.y},!0)&&e(r,{x:r.x-s.x,y:r.y+s.y},!0)||!e(r,{x:r.x,y:r.y-s.y},!0)&&e(r,{x:r.x+s.x,y:r.y-s.y},!0))return r;var o=j.JPS.jump.bind(this,e,t,i,n);if(null!==o(t.node({x:r.x+s.x,y:r.y},!0),r)||null!==o(t.node({x:r.x,y:r.y+s.y},!0),r))return r}else if(0!=s.x){if(!e(r,{x:r.x,y:r.y-1},!0)&&e(r,{x:r.x+s.x,y:r.y-1},!0)||!e(r,{x:r.x,y:r.y+1},!0)&&e(r,{x:r.x+s.x,y:r.y+1},!0))return r}else if(0!=s.y&&(!e(r,{x:r.x-1,y:r.y},!0)&&e(r,{x:r.x-1,y:r.y+s.y},!0)||!e(r,{x:r.x+1,y:r.y},!0)&&e(r,{x:r.x+1,y:r.y+s.y},!0)))return r;a=r,r=t.node({x:r.x+s.x,y:r.y+s.y},!0)}return null}}]),e}(),j.prototype.jps=function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.graphs[n.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),n.callback&&n.callback([],new Map),[];var r=new g((function(e){return e.estimated})),a=new Map,s=this.graphs[n.layer||0],o=null;e=s.node(e,!0),t=s.node(t,!0),r.add({node:e,estimated:0}),a.set(e,{score:0,from:null});var u=j.JPS.access.bind(this,s),c=j.JPS.neighborhood.bind(this,u,s,a),l=j.JPS.jump.bind(this,u,s,a,t);if(!n.static||s.connected(e,t))for(var f=function(){var e=r.pop().node;if(e===t)return"break";c(e).map((function(u){if(null!==(o=l(u,e))){var c=(a.has(e)?a.get(e).score:0)+s.cost(e,o);c<(a.has(o)?a.get(o).score:1/0)&&(a.set(o,{score:c,from:e,jumped:!0}),r.set({node:o,estimated:c+h[n.heuristic||i.heuristic](o,t,n.heuristicOptions||i.heuristicOptions)}))}})),r.delete(e)};r.size;){var d=f();if("break"===d)break}var p=[];if(a.has(t)){for(var y=t;y.x!=e.x||y.y!=e.y;)for(var v=a.get(y).from;y.x!=v.x||y.y!=v.y;)p.push(y),y=s.node({x:y.x+b(v.x-y.x),y:y.y+b(v.y-y.y)},!0);p.push(y),p.reverse()}return n.callback&&n.callback(p,a),p},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)&&(onmessage=function onmessage(b){var c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){var _a7=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),_b7=/^function /.test(c[2].cost);c[2].cost=eval("(".concat(_a7||_b7?"":"function ").concat(c[2].cost,")"))}_a6=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",_a6.path(c[1],c[2],c[3])]))}});a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?void 0:window)}).call(this,__webpack_require__(33)(module))},function(e,t,i){var n=i(13),r=i(21),a=i(34),s=i(35);function o(t){var i="function"==typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},o(t)}e.exports=o},,,,,,function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,i){var n=i(21),r=i(36);function a(t,i,s){return r()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,i){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return i&&n(a,i.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t,i=this,n=(t=4022871197,function(e){e=String(e);for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});i.next=function(){var e=2091639*i.s0+2.3283064365386963e-10*i.c;return i.s0=i.s1,i.s1=i.s2,i.s2=e-(i.c=0|e)},i.c=1,i.s0=n(" "),i.s1=n(" "),i.s2=n(" "),i.s0-=n(e),i.s0<0&&(i.s0+=1),i.s1-=n(e),i.s1<0&&(i.s1+=1),i.s2-=n(e),i.s2<0&&(i.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var i=new s(e),n=t&&t.state,r=i.next;return r.int32=function(){return 4294967296*i.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,n&&("object"==typeof n&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.alea=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var i=new s(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xor128=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),n==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var i=new s(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xorwow=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t=this;t.next=function(){var e,i,n=t.x,r=t.i;return e=n[r],i=(e^=e>>>7)^e<<24,i^=(e=n[r+1&7])^e>>>10,i^=(e=n[r+3&7])^e>>>3,i^=(e=n[r+4&7])^e<<7,e=n[r+7&7],i^=(e^=e<<13)^e<<9,n[r]=i,t.i=r+1&7,i},function(e,t){var i,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,i=0;i<t.length;++i)n[7&i]=n[7&i]<<15^t.charCodeAt(i)+n[i+1&7]<<13;for(;n.length<8;)n.push(0);for(i=0;i<8&&0===n[i];++i);for(8==i?n[7]=-1:n[i],e.x=n,e.i=0,i=256;i>0;--i)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var i=new s(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.x&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xorshift7=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t=this;t.next=function(){var e,i,n=t.w,r=t.X,a=t.i;return t.w=n=n+1640531527|0,i=r[a+34&127],e=r[a=a+1&127],i^=i<<13,e^=e<<17,i^=i>>>15,e^=e>>>12,i=r[a]=i^e,t.i=a,i+(n^n>>>16)|0},function(e,t){var i,n,r,a,s,o=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),r=0,a=-32;a<u;++a)t&&(n^=t.charCodeAt((a+32)%t.length)),0===a&&(s=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,a>=0&&(s=s+1640531527|0,r=0==(i=o[127&a]^=n+s)?r+1:0);for(r>=128&&(o[127&(t&&t.length||0)]=-1),r=127,a=512;a>0;--a)n=o[r+34&127],i=o[r=r+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,o[r]=n^i;e.w=s,e.X=o,e.i=r}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var i=new s(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.X&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.xor4096=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){(function(e){var n;!function(e,r,a){function s(e){var t=this,i="";t.next=function(){var e=t.b,i=t.c,n=t.d,r=t.a;return e=e<<25^e>>>7^i,i=i-n|0,n=n<<24^n>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^i,t.c=i=i-n|0,t.d=n<<16^i>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):i+=e;for(var n=0;n<i.length+20;n++)t.b^=0|i.charCodeAt(n),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var i=new s(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&o(n,i),r.state=function(){return o(i,{})}),r}r&&r.exports?r.exports=u:i(9)&&i(15)?void 0===(n=function(){return u}.call(t,i,t,r))||(r.exports=n):this.tychei=u}(0,e,i(9))}).call(this,i(14)(e))},function(e,t,i){var n;!function(r,a,s){var o,u=s.pow(256,6),c=s.pow(2,52),l=2*c;function h(e,t,i){var n=[],h=g(function e(t,i){var n,r=[],a=typeof t;if(i&&"object"==a)for(n in t)try{r.push(e(t[n],i-1))}catch(e){}return r.length?r:"string"==a?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,p(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(e)),p(e)}catch(e){var t=r.navigator,i=t&&t.plugins;return[+new Date,r,i,r.screen,p(a)]}}():e,3),n),y=new f(n),v=function(){for(var e=y.g(6),t=u,i=0;e<c;)e=256*(e+i),t*=256,i=y.g(1);for(;e>=l;)e/=2,t/=2,i>>>=1;return(e+i)/t};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,g(p(y.S),a),(t.pass||i||function(e,t,i,n){return n&&(n.S&&d(n,y),e.state=function(){return d(y,{})}),i?(s.random=e,t):e})(v,h,"global"in t?t.global:this==s,t.state)}function f(e){var t,i=e.length,n=this,r=0,a=n.i=n.j=0,s=n.S=[];for(i||(e=[i++]);r<256;)s[r]=r++;for(r=0;r<256;r++)s[r]=s[a=255&a+e[r%i]+(t=s[r])],s[a]=t;(n.g=function(e){for(var t,i=0,r=n.i,a=n.j,s=n.S;e--;)t=s[r=255&r+1],i=256*i+s[255&(s[r]=s[a=255&a+t])+(s[a]=t)];return n.i=r,n.j=a,i})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var i,n=e+"",r=0;r<n.length;)t[255&r]=255&(i^=19*t[255&r])+n.charCodeAt(r++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}if(g(s.random(),a),e.exports){e.exports=h;try{o=i(44)}catch(e){}}else void 0===(n=function(){return h}.call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t);var n,r=i(16),a=i.n(r),s=i(0),o=i(2),u=i(6),c=i(8),l=i(23),h=i(12),f=i.n(h);function d(e){var t=JSON.parse(JSON.stringify(e));if(t)for(var i=0;i<t.length;i++)delete t[i].grid;return t}function g(e){var t=JSON.parse(JSON.stringify(e));return t&&(t.rngGrid=null,t.rngGame=null),t}function p(e,t){if(n)t=t||n.grid;(t=Object.assign(new u.a,t)).rngGrid=f()(t.seedGrid),t.rngGame=f()(t.seedGame),!e&&n&&(e=n.snakes);for(var i=0;i<e.length;i++){e[i].grid=t,e[i]=Object.assign(new c.a,e[i]);for(var r=0;r<e[i].queue.length;r++)e[i].queue[r]=Object.assign(new o.a,e[i].queue[r])}return{grid:t,snakes:e}}onmessage=function(e){var t=e.data;if(t.length>1&&"init"==t[0]){var i=p(t[1].snakes,t[1].grid),r=i.grid,o=i.snakes;n=new l.a(r,o,t[1].speed,t[1].enablePause,t[1].enableRetry,t[1].progressiveSpeed),this.postMessage(["init",{snakes:d(n.snakes),grid:g(n.grid),enablePause:n.enablePause,enableRetry:n.enableRetry,progressiveSpeed:n.progressiveSpeed,offsetFrame:n.speed*s.a.Setting.TIME_MULTIPLIER,errorOccurred:n.errorOccurred}]),n.onReset((function(){self.postMessage(["reset",{paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:d(n.snakes),grid:g(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,offsetFrame:n.speed*s.a.Setting.TIME_MULTIPLIER,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onStart((function(){self.postMessage(["start",{snakes:d(n.snakes),grid:g(n.grid),starting:n.starting,countBeforePlay:n.countBeforePlay,paused:n.paused,isReseted:n.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onPause((function(){self.postMessage(["pause",{paused:n.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onContinue((function(){self.postMessage(["continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onStop((function(){self.postMessage(["stop",{paused:n.paused,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onExit((function(){self.postMessage(["exit",{paused:n.paused,gameOver:n.gameOver,gameFinished:n.gameFinished,exited:n.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onKill((function(){self.postMessage(["kill",{paused:n.paused,gameOver:n.gameOver,killed:n.killed,snakes:d(n.snakes),grid:g(n.grid),gameFinished:n.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onScoreIncreased((function(){self.postMessage(["scoreIncreased",{}])})),n.onUpdate((function(){var e;self.postMessage(["update",(e={paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:d(n.snakes),grid:g(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,countBeforePlay:n.countBeforePlay},a()(e,"numFruit",n.numFruit),a()(e,"offsetFrame",0),a()(e,"errorOccurred",n.errorOccurred),e)])})),n.onUpdateCounter((function(){var e;self.postMessage(["updateCounter",(e={paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:d(n.snakes),grid:g(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,countBeforePlay:n.countBeforePlay},a()(e,"numFruit",n.numFruit),a()(e,"errorOccurred",n.errorOccurred),e)])}))}else if(null!=n){switch(t[0]){case"reset":n.reset();break;case"start":n.start();break;case"stop":n.stop();break;case"finish":n.stop(!0);break;case"stop":n.stop(!1);break;case"pause":n.pause();break;case"kill":n.kill();break;case"tick":n.paused=!1,n.countBeforePlay=-1,n.tick();break;case"ping":self.postMessage("pong");break;case"exit":n.exit();break;case"forceStart":n.forceStart();break;case"key":if(t.length>1){n.lastKey=t[1];var u=n.getPlayer(1,s.a.PlayerType.HUMAN)||n.getPlayer(1,s.a.PlayerType.HYBRID_HUMAN_AI);null!=u&&null!=u.lastKey&&(u.lastKey=t[1])}break;case"update":if(t.length>1)if("snakes"==t[1].key){var c=p(t[1].data);n.snakes=c.snakes}else if("grid"==t[1].key){c=p(null,t[1].data);n.grid=c.grid}else n[t[1].key]=t[1].data}}else"ping"==t&&self.postMessage("pong")}}])}));