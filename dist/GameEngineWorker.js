!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=95)}({0:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return n}))},10:function(e,t,i){var n=i(6).default,r=i(13),s=i(9),o=i(3),a=i(8),c=i(7);function u(e,t,i,n,r,s,a){this.direction=null==e?o.Direction.RIGHT:e,this.initialDirection=null==e?o.Direction.RIGHT:e,this.initialLength=null==t?3:t,this.initTriedDirections=[],this.errorInit=!1,this.grid=i||new c,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.player=null==n?o.PlayerType.HUMAN:n,this.aiLevel=null==r?o.AiLevel.DEFAULT:r,this.autoRetry=null!=s&&s,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==a?"Snake":a,this.aiFruitGoal=o.CaseType.FRUIT,this.init()}u.prototype.init=function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==o.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(o.Direction.RIGHT)||this.initialDirection==o.Direction.LEFT&&-1==this.initTriedDirections.indexOf(o.Direction.LEFT)){for(var i=0;i<this.grid.height;i++)for(var n=0,r=0;r<this.grid.width;r++)if(this.grid.get(new a(r,i))==o.CaseType.EMPTY?n++:n=0,n>=this.initialLength){e++;break}}else if(this.initialDirection==o.Direction.UP&&-1==this.initTriedDirections.indexOf(o.Direction.UP)||this.initialDirection==o.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(o.Direction.BOTTOM))for(i=0;i<this.grid.width;i++){var s=0;for(r=0;r<this.grid.height;r++)if(this.grid.get(new a(i,r))==o.CaseType.EMPTY?s++:s=0,s>=this.initialLength){t++;break}}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==o.Direction.RIGHT||this.initialDirection==o.Direction.LEFT)||t<=0&&(this.initialDirection==o.Direction.UP||this.initialDirection==o.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(o.Direction.RIGHT)?(this.initialDirection=o.Direction.RIGHT,this.direction=o.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(o.Direction.LEFT)?(this.initialDirection=o.Direction.LEFT,this.direction=o.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(o.Direction.UP)?(this.initialDirection=o.Direction.UP,this.direction=o.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(o.Direction.BOTTOM)?(this.initialDirection=o.Direction.BOTTOM,this.direction=o.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var c,u,l=!0,h=[];l;){l=!1,c=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition(),u=new a(c.x,c.y,this.initialDirection),h=[];for(i=this.initialLength-1;i>=0;i--)i<this.initialLength-1&&(this.initialDirection==o.Direction.RIGHT?u=this.grid.getNextPosition(new a(u.x,u.y,this.initialDirection),o.Direction.RIGHT):this.initialDirection==o.Direction.LEFT?u=this.grid.getNextPosition(new a(u.x,u.y,this.initialDirection),o.Direction.LEFT):this.initialDirection==o.Direction.BOTTOM?u=this.grid.getNextPosition(new a(u.x,u.y,this.initialDirection),o.Direction.BOTTOM):this.initialDirection==o.Direction.UP&&(u=this.grid.getNextPosition(new a(u.x,u.y,this.initialDirection),o.Direction.UP))),this.grid.get(u)!=o.CaseType.EMPTY?l=!0:h.push(new a(u.x,u.y,u.direction));if(this.grid.maze&&l)return this.init()}for(i=0;i<h.length;i++)this.insert(h[i]);return this.grid.maze&&this.player==o.PlayerType.HYBRID_HUMAN_AI&&(this.player=o.PlayerType.HUMAN),this.player==o.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=o.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0},u.prototype.reset=function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastKey=-1,this.aiFruitGoal=o.CaseType.FRUIT,this.init()},u.prototype.insert=function(e){this.queue.unshift(e),this.grid.set(o.CaseType.SNAKE,e)},u.prototype.remove=function(){var e=this.queue.pop();this.grid.set(o.CaseType.EMPTY,e),this.lastTail=e},u.prototype.length=function(){return this.queue.length},u.prototype.get=function(e){return null!=this.queue[e]?this.queue[e].copy():null},u.prototype.set=function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)},u.prototype.getHeadPosition=function(){return this.get(0)},u.prototype.getTailPosition=function(){return this.get(this.length()-1)},u.prototype.hasMaxScore=function(){return this.grid.getTotal(o.CaseType.EMPTY)<=0},u.prototype.setGameOver=function(){this.gameOver=!0;for(var e=0;e<this.length();e++)this.grid.set(o.CaseType.SNAKE_DEAD,this.get(e))},u.prototype.kill=function(){this.autoRetry=!1,this.grid=null,this.queue=null},u.prototype.moveTo=function(e){e==o.Key.LEFT&&this.direction!=o.Direction.RIGHT&&this.direction!=o.Direction.LEFT&&(this.direction=o.Direction.LEFT),e==o.Key.UP&&this.direction!=o.Direction.BOTTOM&&this.direction!=o.Direction.UP&&(this.direction=o.Direction.UP),e==o.Key.RIGHT&&this.direction!=o.Direction.LEFT&&this.direction!=o.Direction.RIGHT&&(this.direction=o.Direction.RIGHT),e==o.Key.BOTTOM&&this.direction!=o.Direction.UP&&this.direction!=o.Direction.BOTTOM&&(this.direction=o.Direction.BOTTOM)},u.prototype.getNextPosition=function(e,t){return this.grid.getNextPosition(e,t)},u.prototype.getDirectionTo=function(e,t){return this.grid.getDirectionTo(e,t)},u.prototype.getGraphicDirectionFor=function(e,t,i){if(null==t||null==i)return e.direction;var n=this.getDirectionTo(e,i),r=this.getDirectionTo(e,t);o.Direction.UP;return n==o.Direction.LEFT&&r==o.Direction.BOTTOM||n==o.Direction.BOTTOM&&r==o.Direction.LEFT?o.Direction.ANGLE_1:n==o.Direction.RIGHT&&r==o.Direction.BOTTOM||n==o.Direction.BOTTOM&&r==o.Direction.RIGHT?o.Direction.ANGLE_2:n==o.Direction.UP&&r==o.Direction.RIGHT||n==o.Direction.RIGHT&&r==o.Direction.UP?o.Direction.ANGLE_3:n==o.Direction.UP&&r==o.Direction.LEFT||n==o.Direction.LEFT&&r==o.Direction.UP?o.Direction.ANGLE_4:e.direction},u.prototype.getGraphicDirection=function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))},u.prototype.copy=function(){for(var e=new u(direction,3,new c(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),t=0;t<e.grid.height;t++)for(var i=0;i<e.grid.width;i++)e.grid.set(this.grid.get(new a(i,t)),new a(i,t));e.queue=[];for(t=0;t<this.queue.length;t++)e.queue.push(elem.copy());return e},u.prototype.randomAI=function(){var e=this.getHeadPosition(),t=this.grid.isDeadPosition(this.getNextPosition(e,o.Key.UP)),i=this.grid.isDeadPosition(this.getNextPosition(e,o.Key.LEFT)),n=this.grid.isDeadPosition(this.getNextPosition(e,o.Key.BOTTOM)),r=this.grid.isDeadPosition(this.getNextPosition(e,o.Key.RIGHT));if(t&&i&&n&&r)return o.Key.UP;for(var a=null;null==a||this.grid.isDeadPosition(this.getNextPosition(e,a));){switch(s.randRange(1,4,this.grid?this.grid.rngGame:null)){case 1:a=o.Key.UP;break;case 2:a=o.Key.LEFT;break;case 3:a=o.Key.BOTTOM;break;case 4:a=o.Key.RIGHT}}return a},u.prototype.simpleAI=function(){if(null!=this.grid.fruitPos){var e=this.getHeadPosition(),t=this.aiFruitGoal==o.CaseType.FRUIT_GOLD?this.grid.fruitPosGold:this.grid.fruitPos,i=o.Key.RIGHT;t.x>e.x?i=t.x-e.x>this.grid.width/2?o.Key.LEFT:o.Key.RIGHT:t.x<e.x?i=e.x-t.x>this.grid.width/2?o.Key.RIGHT:o.Key.LEFT:t.y<e.y?i=e.y-t.y>this.grid.height/2?o.Key.BOTTOM:o.Key.UP:t.y>e.y&&(i=t.y-e.y>this.grid.height/2?o.Key.UP:o.Key.BOTTOM);var n=this.getNextPosition(e,i);if(this.grid.isDeadPosition(n)){for(var r=this.direction,s=null,a=1;a<this.queue.length;a++)if(this.get(a).direction!=r){s=this.get(a).direction;break}n=this.getNextPosition(e,s),this.grid.isDeadPosition(n)?this.grid.isDeadPosition(this.getNextPosition(e,o.Key.UP))?this.grid.isDeadPosition(this.getNextPosition(e,o.Key.RIGHT))?this.grid.isDeadPosition(this.getNextPosition(e,o.Key.BOTTOM))?this.grid.isDeadPosition(this.getNextPosition(e,o.Key.LEFT))||(i=o.Key.LEFT):i=o.Key.BOTTOM:i=o.Key.RIGHT:i=o.Key.UP:i=n.convertToKeyDirection()}return i}},u.prototype.ai=function(){var e=null,t=this.getHeadPosition(),i=this.grid.fruitPos,n=this.grid.fruitPosGold;if(null!=i){var s=Math.abs(i.x-t.x)+Math.abs(i.y-t.y),c=null!=n?Math.abs(n.x-t.x)+Math.abs(n.y-t.y):-1;null!=n&&this.grid.get(n)==o.CaseType.FRUIT_GOLD&&this.aiFruitGoal==o.CaseType.FRUIT?this.aiFruitGoal=c<s?o.CaseType.FRUIT_GOLD:o.CaseType.FRUIT:null!=n&&this.grid.get(n)==o.CaseType.FRUIT_GOLD||(this.aiFruitGoal=o.CaseType.FRUIT)}if(this.aiLevel==o.AiLevel.RANDOM)e=this.randomAI();else if(this.aiLevel==o.AiLevel.LOW)e=this.simpleAI();else if(null!=i){var u=this.grid.getGraph(!1),l=new r.Astar.Configuration(u,{order:"yx",torus:this.aiLevel==o.AiLevel.HIGH||this.aiLevel==o.AiLevel.ULTRA,diagonals:!1,cutting:!1,static:!0,cost:(e,t)=>1==t?null:1}),h=l.path({x:t.x,y:t.y},{x:this.aiFruitGoal==o.CaseType.FRUIT_GOLD?n.x:i.x,y:this.aiFruitGoal==o.CaseType.FRUIT_GOLD?n.y:i.y});if(h.length>1){var d=new a(h[1].x,h[1].y);e=new a(null,null,this.getDirectionTo(t,d)).convertToKeyDirection()}else this.aiLevel!=o.AiLevel.HIGH&&this.aiLevel!=o.AiLevel.ULTRA||(e=this.simpleAI());h=null}return e},u.prototype.getAILevelText=function(){switch(this.aiLevel){case o.AiLevel.RANDOM:return n.t("engine.aiLevelList.random");case o.AiLevel.LOW:return n.t("engine.aiLevelList.low");case o.AiLevel.DEFAULT:return n.t("engine.aiLevelList.normal");case o.AiLevel.HIGH:return n.t("engine.aiLevelList.high");case o.AiLevel.ULTRA:return n.t("engine.aiLevelList.ultra");default:return n.t("engine.aiLevelList.normal")}},e.exports=u},11:function(e,t,i){var n=i(16);function r(){this.events={}}r.prototype.registerEvent=function(e){var t=new n(e);this.events[e]=t},r.prototype.dispatchEvent=function(e,t){for(var i=this.events[e].callbacks,n=0,r=i.length;n<r;n++)i[n](t)},r.prototype.addEventListener=function(e,t){this.events[e].registerCallback(t)},e.exports=r},13:function(module,exports,__webpack_require__){!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let i=0;i<e.length;i++){if(void 0!==e[i].graph.get(this)._connectivity)continue;let n=[e[i]];for(t++;n.length;){let e=n.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map(e=>{void 0===e.graph.get(this)._connectivity&&0>n.indexOf(e)&&n.push(e)})}}}add(e){return 1<arguments.length?Array.from(arguments).map(e=>this.add(e)):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map(e=>this.delete(e)):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,i=1,n=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===i?e.graph.get(this).delete(t):e.graph.get(this).set(t,i),null===n?t.graph.get(this).delete(e):t.graph.get(this).set(e,n),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,i={}){let n=e.fromArray.X(t,i.order),r=e.fromArray.Y(t,i.order),s=e.fromArray.at.bind(null,t,i.order),o=[],a=null;for(let t,c=1;c<Math.max(2,arguments.length);c++){t=new e,o.push(t),i=arguments[c]||{};let u=e.fromArray.id.bind(null,n,r,i.torus),l=i.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,l);for(let e=0;e<n;e++)for(let i,n=0;n<r;n++)i=t.add(a?a.get(u(e,n)):new f(u(e,n))),i.x=e,i.y=n,i.graph.get(t)._data=s(e,n),h(i,t.nodes.get(u(e-1,n))),h(i,t.nodes.get(u(e+1,n))),h(i,t.nodes.get(u(e,n-1))),h(i,t.nodes.get(u(e,n+1)));if(i.diagonals)for(let e=0;e<n;e++)for(let n=0;n<r;n++){let r=t.nodes.get(u(e,n)),s=t.adjacent(r,t.nodes.get(u(e-1,n))),o=t.adjacent(r,t.nodes.get(u(e+1,n))),a=t.adjacent(r,t.nodes.get(u(e,n-1))),c=t.adjacent(r,t.nodes.get(u(e,n+1)));"strict"===i.cutting?(s&&a&&h(r,t.nodes.get(u(e-1,n-1))),s&&c&&h(r,t.nodes.get(u(e-1,n+1))),o&&a&&h(r,t.nodes.get(u(e+1,n-1))),o&&c&&h(r,t.nodes.get(u(e+1,n+1)))):((s||a||i.cutting)&&h(r,t.nodes.get(u(e-1,n-1))),(s||c||i.cutting)&&h(r,t.nodes.get(u(e-1,n+1))),(o||a||i.cutting)&&h(r,t.nodes.get(u(e+1,n-1))),(o||c||i.cutting)&&h(r,t.nodes.get(u(e+1,n+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>u(e.x,e.y)}),t.connect(),t.X=n,t.Y=r,t.TORUS=i.torus,a||(a=t.nodes)}return 1<o.length?o:o[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",i,n){return"xy"===t?e[i][n]:e[n][i]},e.fromArray.id=function(e=0,t=0,i=!1,n,r){return i?(r+t)%t*e+(n+e)%e:0<=n&&n<e&&0<=r&&r<t?r*e+n:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,i,n){n&&e.edge(i,n,t(e.data(i),e.data(n)),t(e.data(n),e.data(i)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let i in this.id=e,this.graph=new Map,t)"id"!=i&&"graph"!=i&&(this[i]=t[i])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let i=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=i,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],i=this.score(t);for(;0<e;){let n=Math.floor((e+1)/2)-1,r=this.nodes[n];if(i>=this.score(r))break;this.nodes[n]=t,this.nodes[e]=r,e=n}return this}sink(e){let t=this.nodes[e],i=this.score(t);for(;;){let n=2*(e+1),r=n-1,s=null;if(r<this.size&&this.score(this.nodes[r])<i&&(s=r),n<this.size&&this.score(this.nodes[n])<(s?this.score(this.nodes[s]):i)&&(s=n),null===s)break;this.nodes[e]=this.nodes[s],this.nodes[s]=t,e=s}return this}}let h={manhattan:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*(n+r)},manhattanTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)},diagonal:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return m*(n+r)+(dm-2*m)*c(n,r)},diagonalTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)},euclidian:function(e,t,i={}){let n=d(t.x-e.x),r=d(t.y-e.y);return(i.multiplier||1)*Math.sqrt(n*n+r*r)},euclidianTorus:function(e,t,i={}){let n=c(d(t.x-e.x),t.x+(i.x||0)-e.x,e.x+(i.x||0)-t.x),r=c(d(t.y-e.y),t.y+(i.y||0)-e.y,e.y+(i.y||0)-t.y);return(i.multiplier||1)*(n+r)+((i.diagonalMultiplier||1.4)-2*(i.multiplier||1))*c(n,r)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(n.thread+" couldn't be opened.")}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,i={})=>{this._worker_path_callback=i.callback,delete i.callback,this.worker.postMessage(["path",e,t,i])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);switch(t[0]){case"path":this._worker_path_callback(t[1])}}}}path(e,t,i={}){if(i.jps)return this.jps(e,t,i);let n=new g(e=>e.estimated),r=new Map,s=this.graphs[i.layer||0];if(e=s.node(e,!0),t=s.node(t,!0),n.add({node:e,estimated:0}),r.set(e,{score:0,from:null}),!i.static||s.connected(e,t))for(;n.size;){let e=n.pop().node;if(e===t)break;s.neighbors(e).map(o=>{let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e}),n.set({node:o,estimated:a+h[i.heuristic||this.heuristic](o,t,i.heuristicOptions||this.heuristicOptions)}))}),n.delete(e)}let o=[];if(r.has(t)){let e=t;for(o.push(t);null!==(e=r.get(e).from);)o.push(e);o=o.reverse()}return i.callback&&i.callback(o,r),o}}if(j.JPS=class{constructor(){}static access(e,t,i,n){return e.adjacent(t,n?e.node(i,!0):i)}static neighborhood(e,t,i,n){let r=[],s=i.get(n).from||null;if(null===s)return t.neighbors(n);{let i={x:b(n.x-s.x),y:b(n.y-s.y)};if(0!=i.x&&0!=i.y){let s=e(n,{x:n.x+i.x,y:n.y},!0),o=e(n,{x:n.x,y:n.y+i.y},!0);(s||o)&&(r.push(t.node({x:n.x+i.x,y:n.y+i.y},!0)),s&&(r.push(t.node({x:n.x+i.x,y:n.y},!0)),!e(n,{x:n.x,y:n.y-i.y},!0)&&r.push(t.node({x:n.x+i.x,y:n.y-i.y},!0))),o&&(r.push(t.node({x:n.x,y:n.y+i.y},!0)),!e(n,{x:n.x-i.x,y:n.y},!0)&&r.push(t.node({x:n.x-i.x,y:n.y+i.y},!0))))}else e(n,{x:n.x+i.x,y:n.y+i.y},!0)&&(r.push(t.node({x:n.x+i.x,y:n.y+i.y},!0)),0==i.x?0!=i.y&&(!e(n,{x:n.x-1,y:n.y},!0)&&r.push(t.node({x:n.x-1,y:n.y+i.y},!0)),!e(n,{x:n.x+1,y:n.y},!0)&&r.push(t.node({x:n.x+1,y:n.y+i.y},!0))):(!e(n,{x:n.x,y:n.y-1},!0)&&r.push(t.node({x:n.x+i.x,y:n.y-1},!0)),!e(n,{x:n.x,y:n.y+1},!0)&&r.push(t.node({x:n.x+i.x,y:n.y+1},!0))))}return r.filter(e=>e)}static jump(e,t,i,n,r,s){for(;;){if(!e(s,r))return null;if(r.x===n.x&&r.y===n.y)return r;let o={x:b(r.x-s.x),y:b(r.y-s.y)};if(0!=o.x&&0!=o.y){if(!e(r,{x:r.x-o.x,y:r.y},!0)&&e(r,{x:r.x-o.x,y:r.y+o.y},!0)||!e(r,{x:r.x,y:r.y-o.y},!0)&&e(r,{x:r.x+o.x,y:r.y-o.y},!0))return r;let s=j.JPS.jump.bind(this,e,t,i,n);if(null!==s(t.node({x:r.x+o.x,y:r.y},!0),r)||null!==s(t.node({x:r.x,y:r.y+o.y},!0),r))return r}else if(0!=o.x){if(!e(r,{x:r.x,y:r.y-1},!0)&&e(r,{x:r.x+o.x,y:r.y-1},!0)||!e(r,{x:r.x,y:r.y+1},!0)&&e(r,{x:r.x+o.x,y:r.y+1},!0))return r}else if(0!=o.y&&(!e(r,{x:r.x-1,y:r.y},!0)&&e(r,{x:r.x-1,y:r.y+o.y},!0)||!e(r,{x:r.x+1,y:r.y},!0)&&e(r,{x:r.x+1,y:r.y+o.y},!0)))return r;s=r,r=t.node({x:r.x+o.x,y:r.y+o.y},!0)}return null}},j.prototype.jps=function(e,t,i={}){if(this.graphs[i.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),i.callback&&i.callback([],new Map),[];let n=new g(e=>e.estimated),r=new Map,s=this.graphs[i.layer||0],o=null;e=s.node(e,!0),t=s.node(t,!0),n.add({node:e,estimated:0}),r.set(e,{score:0,from:null});let a=j.JPS.access.bind(this,s),c=j.JPS.neighborhood.bind(this,a,s,r),u=j.JPS.jump.bind(this,a,s,r,t);if(!i.static||s.connected(e,t))for(;n.size;){let e=n.pop().node;if(e===t)break;c(e).map(a=>{if(null!==(o=u(a,e))){let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e,jumped:!0}),n.set({node:o,estimated:a+h[i.heuristic||this.heuristic](o,t,i.heuristicOptions||this.heuristicOptions)}))}}),n.delete(e)}let l=[];if(r.has(t)){let i=t;for(;i.x!=e.x||i.y!=e.y;)for(let e=r.get(i).from;i.x!=e.x||i.y!=e.y;)l.push(i),i=s.node({x:i.x+b(e.x-i.x),y:i.y+b(e.y-i.y)},!0);l.push(i),l.reverse()}return i.callback&&i.callback(l,r),l},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?this:window)},14:function(e,t,i){var n=i(24),r=i(25),s=i(26),o=i(27),a=i(28),c=i(29),u=i(30);u.alea=n,u.xor128=r,u.xorwow=s,u.xorshift7=o,u.xor4096=a,u.tychei=c,e.exports=u},16:function(e,t,i){function n(e){this.name=e,this.callbacks=[]}n.prototype.registerCallback=function(e){this.callbacks.push(e)},e.exports=n},18:function(e,t,i){var n=i(9),r=i(3),s=i(11),o=i(7),a=i(10);function c(e,t,i,n,r,o){this.grid=e,this.snakes=t,this.speed=null==i?8:i,this.initialSpeed=null==i?8:i,this.initialSpeedUntouched=null==i?8:i,this.enablePause=null==n||n,this.enableRetry=null==r||r,this.progressiveSpeed=null!=o&&o,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.intervalPlay,this.reactor=new s,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}c.prototype.init=function(){if(!this.clientSidePredictionsMode){null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes];for(var e=n.randRange(0,360,this.grid?this.grid.rngGame:null),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof a==0?this.errorOccurred=!0:(e=n.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e);this.grid instanceof o==0?this.errorOccurred=!0:this.errorOccurred||this.grid.setFruit(this.snakes.length)}},c.prototype.reset=function(){if(this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.grid.init(),null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.grid.setFruit(this.snakes.length),this.reactor.dispatchEvent("onReset"),this.start()},c.prototype.start=function(){this.reactor.dispatchEvent("onUpdateCounter");var e=this;if(!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&e.forceStart()}),1e3))}},c.prototype.forceStart=function(){this.clearIntervalPlay(),this.countBeforePlay=-1,this.paused=!1,this.isReseted=!1,this.firstStart=!1,this.starting=!1,this.reactor.dispatchEvent("onStart"),this.tick()},c.prototype.clearIntervalPlay=function(){clearInterval(this.intervalPlay)},c.prototype.continue=function(){this.clientSidePredictionsMode||(this.start(),this.reactor.dispatchEvent("onContinue"))},c.prototype.stop=function(e){this.gameOver||this.clientSidePredictionsMode||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))},c.prototype.pause=function(){this.paused||this.clientSidePredictionsMode||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))},c.prototype.kill=function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}},c.prototype.exit=function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))},c.prototype.getNBPlayer=function(e){var t=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)this.snakes[i].player==e&&t++;return t},c.prototype.getPlayer=function(e,t){var i=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)if(this.snakes[n].player==t&&i++,i==e)return this.snakes[n];return null},c.prototype.tick=function(){var e=this;setTimeout((function(){if(!e.paused&&!e.killed){0==e.lastTime&&(e.lastTime=time),e.ticks++;var t=!1;if(e.grid&&(!e.grid.maze||e.grid.mazeForceAuto||e.grid.maze&&e.getNBPlayer(r.PlayerType.HUMAN)<=0&&e.getNBPlayer(r.PlayerType.HYBRID_HUMAN_AI)<=0||e.grid.maze&&(e.getNBPlayer(r.PlayerType.HUMAN)>0||e.getNBPlayer(r.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=(e.getPlayer(1,r.PlayerType.HYBRID_HUMAN_AI)||e.getPlayer(1,r.PlayerType.HUMAN)).lastKey)){for(var i=0;i<e.snakes.length;i++){var n=e.snakes[i].direction,s=!1,o=!1,a=!1;if(e.snakes[i].lastTailMoved=!1,!e.snakes[i].gameOver&&!e.snakes[i].scoreMax){e.snakes[i].player==r.PlayerType.HUMAN||e.snakes[i].player==r.PlayerType.HYBRID_HUMAN_AI?(e.snakes[i].moveTo(e.snakes[i].lastKey),e.snakes[i].lastKey=-1):e.snakes[i].player==r.PlayerType.AI&&(!e.clientSidePredictionsMode||e.clientSidePredictionsMode&&e.snakes[i].aiLevel!=r.AiLevel.RANDOM)&&e.snakes[i].moveTo(e.snakes[i].ai());var c=e.snakes[i].getHeadPosition();e.snakes[i].player==r.PlayerType.HYBRID_HUMAN_AI&&e.grid.isDeadPosition(e.snakes[i].getNextPosition(c,e.snakes[i].direction))&&(e.snakes[i].direction=n,e.snakes[i].moveTo(e.snakes[i].ai()),e.snakes[i].lastKey=-1),c=e.snakes[i].getNextPosition(c,e.snakes[i].direction),e.grid.isDeadPosition(c)?e.snakes[i].setGameOver():e.grid.get(c)==r.CaseType.FRUIT||e.grid.get(c)==r.CaseType.FRUIT_GOLD?(e.grid.get(c)==r.CaseType.FRUIT?e.snakes[i].score++:e.grid.get(c)==r.CaseType.FRUIT_GOLD&&(e.snakes[i].score+=3,e.grid.set(r.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null,a=!0),t=!0,e.snakes[i].insert(c),e.grid.maze?(e.stop(),e.gameMazeWin=!0,e.gameFinished=!0):e.snakes[i].hasMaxScore()&&e.snakes.length<=1?(e.stop(),e.scoreMax=!0,e.snakes[i].scoreMax=!0):(e.numFruit++,a||(s=!0)),e.snakes.length<=1&&e.progressiveSpeed&&e.snakes[i].score>0&&e.initialSpeed>1&&(e.initialSpeed=Math.ceil(-e.initialSpeedUntouched/100*e.snakes[i].score+e.initialSpeedUntouched),e.initialSpeed=e.initialSpeed<1?1:e.initialSpeed)):(e.snakes[i].insert(c),e.grid.maze||(e.snakes[i].remove(),e.snakes[i].lastTailMoved=!0))}e.scoreMax||!s||e.clientSidePredictionsMode||(o=!e.grid.setFruit(e.snakes.length))}e.scoreMax||o||!e.grid.isFruitSurrounded(e.grid.fruitPos,!0)||e.clientSidePredictionsMode||(o=!e.grid.setFruit(e.snakes.length)),!e.scoreMax&&null!=e.grid.fruitPosGold&&e.grid.isFruitSurrounded(e.grid.fruitPosGold,!0)&&(e.grid.set(r.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null);for(var u=0,l=0;l<e.snakes.length;l++)(e.snakes[l].gameOver||e.snakes[l].scoreMax)&&u++;(u>=e.snakes.length||o)&&(e.stop(),e.snakes.length>1&&(e.gameFinished=!0)),e.reactor.dispatchEvent("onUpdate"),t&&e.reactor.dispatchEvent("onScoreIncreased")}e.tick()}}),this.initialSpeed*r.Setting.TIME_MULTIPLIER)},c.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},c.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},c.prototype.onContinue=function(e){this.reactor.addEventListener("onContinue",e)},c.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},c.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},c.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},c.prototype.onKill=function(e){this.reactor.addEventListener("onKill",e)},c.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},c.prototype.onUpdate=function(e){this.reactor.addEventListener("onUpdate",e)},c.prototype.onUpdateCounter=function(e){this.reactor.addEventListener("onUpdateCounter",e)},e.exports=c},2:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",(function(){return r}))},24:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t,i=this,n=(t=4022871197,function(e){e=String(e);for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});i.next=function(){var e=2091639*i.s0+2.3283064365386963e-10*i.c;return i.s0=i.s1,i.s1=i.s2,i.s2=e-(i.c=0|e)},i.c=1,i.s0=n(" "),i.s1=n(" "),i.s2=n(" "),i.s0-=n(e),i.s0<0&&(i.s0+=1),i.s1-=n(e),i.s1<0&&(i.s1+=1),i.s2-=n(e),i.s2<0&&(i.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var i=new o(e),n=t&&t.state,r=i.next;return r.int32=function(){return 4294967296*i.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.alea=c}(0,e,i(0))}).call(this,i(4)(e))},25:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.xor128=c}(0,e,i(0))}).call(this,i(4)(e))},26:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:i+=e;for(var n=0;n<i.length+64;n++)t.x^=0|i.charCodeAt(n),n==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.xorwow=c}(0,e,i(0))}).call(this,i(4)(e))},27:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,i,n=t.x,r=t.i;return e=n[r],i=(e^=e>>>7)^e<<24,i^=(e=n[r+1&7])^e>>>10,i^=(e=n[r+3&7])^e>>>3,i^=(e=n[r+4&7])^e<<7,e=n[r+7&7],i^=(e^=e<<13)^e<<9,n[r]=i,t.i=r+1&7,i},function(e,t){var i,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,i=0;i<t.length;++i)n[7&i]=n[7&i]<<15^t.charCodeAt(i)+n[i+1&7]<<13;for(;n.length<8;)n.push(0);for(i=0;i<8&&0===n[i];++i);for(8==i?n[7]=-1:n[i],e.x=n,e.i=0,i=256;i>0;--i)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.x&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.xorshift7=c}(0,e,i(0))}).call(this,i(4)(e))},28:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,i,n=t.w,r=t.X,s=t.i;return t.w=n=n+1640531527|0,i=r[s+34&127],e=r[s=s+1&127],i^=i<<13,e^=e<<17,i^=i>>>15,e^=e>>>12,i=r[s]=i^e,t.i=s,i+(n^n>>>16)|0},function(e,t){var i,n,r,s,o,a=[],c=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,c=Math.max(c,t.length)),r=0,s=-32;s<c;++s)t&&(n^=t.charCodeAt((s+32)%t.length)),0===s&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(o=o+1640531527|0,r=0==(i=a[127&s]^=n+o)?r+1:0);for(r>=128&&(a[127&(t&&t.length||0)]=-1),r=127,s=512;s>0;--s)n=a[r+34&127],i=a[r=r+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,a[r]=n^i;e.w=o,e.X=a,e.i=r}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&(n.X&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.xor4096=c}(0,e,i(0))}).call(this,i(4)(e))},29:function(e,t,i){(function(e){var n;!function(e,r,s){function o(e){var t=this,i="";t.next=function(){var e=t.b,i=t.c,n=t.d,r=t.a;return e=e<<25^e>>>7^i,i=i-n|0,n=n<<24^n>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^i,t.c=i=i-n|0,t.d=n<<16^i>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):i+=e;for(var n=0;n<i.length+20;n++)t.b^=0|i.charCodeAt(n),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var i=new o(e),n=t&&t.state,r=function(){return(i.next()>>>0)/4294967296};return r.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=i.next,r.quick=r,n&&("object"==typeof n&&a(n,i),r.state=function(){return a(i,{})}),r}r&&r.exports?r.exports=c:i(0)&&i(5)?void 0===(n=function(){return c}.call(t,i,t,r))||(r.exports=n):this.tychei=c}(0,e,i(0))}).call(this,i(4)(e))},3:function(e,t,i){e.exports={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6,CROSSED:7},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","×"],APP_VERSION:"2.0.1",DATE_VERSION:"03/18/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},Error:{ROOM_NOT_FOUND:"ROOM_NOT_FOUND",ROOM_ALREADY_JOINED:"ROOM_ALREADY_JOINED",INVALID_SETTINGS:"INVALID_SETTINGS",MAX_ROOM_LIMIT_REACHED:"MAX_ROOM_LIMIT_REACHED",AUTHENTICATION_REQUIRED:"AUTHENTICATION_REQUIRED",ALREADY_CREATED_ROOM:"ALREADY_CREATED_ROOM",BANNED:"BANNED",DISCONNECTED:"DISCONNECTED"},GameState:{STARTING:"STARTING",STARTED:"STARTED",SEARCHING_PLAYERS:"SEARCHING_PLAYERS",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS"}}},30:function(e,t,i){var n;!function(r,s,o){var a,c=o.pow(256,6),u=o.pow(2,52),l=2*u;function h(e,t,i){var n=[],h=f(function e(t,i){var n,r=[],s=typeof t;if(i&&"object"==s)for(n in t)try{r.push(e(t[n],i-1))}catch(e){}return r.length?r:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,p(s)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(e)),p(e)}catch(e){var t=r.navigator,i=t&&t.plugins;return[+new Date,r,i,r.screen,p(s)]}}():e,3),n),y=new d(n),v=function(){for(var e=y.g(6),t=c,i=0;e<u;)e=256*(e+i),t*=256,i=y.g(1);for(;e>=l;)e/=2,t/=2,i>>>=1;return(e+i)/t};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,f(p(y.S),s),(t.pass||i||function(e,t,i,n){return n&&(n.S&&g(n,y),e.state=function(){return g(y,{})}),i?(o.random=e,t):e})(v,h,"global"in t?t.global:this==o,t.state)}function d(e){var t,i=e.length,n=this,r=0,s=n.i=n.j=0,o=n.S=[];for(i||(e=[i++]);r<256;)o[r]=r++;for(r=0;r<256;r++)o[r]=o[s=255&s+e[r%i]+(t=o[r])],o[s]=t;(n.g=function(e){for(var t,i=0,r=n.i,s=n.j,o=n.S;e--;)t=o[r=255&r+1],i=256*i+o[255&(o[r]=o[s=255&s+t])+(o[s]=t)];return n.i=r,n.j=s,i})(256)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var i,n=e+"",r=0;r<n.length;)t[255&r]=255&(i^=19*t[255&r])+n.charCodeAt(r++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}if(f(o.random(),s),e.exports){e.exports=h;try{a=i(31)}catch(e){}}else void 0===(n=function(){return h}.call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},31:function(e,t){},4:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},5:function(e,t){(function(t){e.exports=t}).call(this,{})},6:function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}i.r(t);var o=i(1),a=i(2);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||f(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){if(Array.isArray(e))return e}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return v(e)||f(e)||p(e)||x()}function T(e,t){return v(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}}(e,t)||p(e,t)||x()}var b={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var i;console&&console[e]&&(i=console)[e].apply(i,y(t))}},k=new(function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),this.init(t,i)}return Object(a.a)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,i,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(i).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,s({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),O=function(){function e(){Object(o.a)(this,e),this.observers={}}return Object(a.a)(e,[{key:"on",value:function(e,t){var i=this;return e.split(" ").forEach((function(e){i.observers[e]=i.observers[e]||[],i.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,i)}))}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach((function(t){t.apply(t,[e].concat(i))}))}}}]),e}();function P(){var e,t,i=new Promise((function(i,n){e=i,t=n}));return i.resolve=e,i.reject=t,i}function E(e){return null==e?"":""+e}function D(e,t,i){e.forEach((function(e){t[e]&&(i[e]=t[e])}))}function w(e,t,i){function n(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var s="string"!=typeof t?[].concat(t):t.split(".");s.length>1;){if(r())return{};var o=n(s.shift());!e[o]&&i&&(e[o]=new i),e=e[o]}return r()?{}:{obj:e,k:n(s.shift())}}function L(e,t,i){var n=w(e,t,Object);n.obj[n.k]=i}function R(e,t){var i=w(e,t),n=i.obj,r=i.k;if(n)return n[r]}function S(e,t,i){var n=R(e,i);return void 0!==n?n:R(t,i)}function A(e,t,i){for(var n in t)n in e?"string"==typeof e[n]||e[n]instanceof String||"string"==typeof t[n]||t[n]instanceof String?i&&(e[n]=t[n]):A(e[n],t[n],i):e[n]=t[n];return e}function M(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function N(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return I[e]})):e}var C="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,F=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Object(o.a)(this,t),i=u(this,l(t).call(this)),C&&O.call(c(i)),i.data=e||{},i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i}return d(t,e),Object(a.a)(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,s=[e,t];return i&&"string"!=typeof i&&(s=s.concat(i)),i&&"string"==typeof i&&(s=s.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(s=e.split(".")),R(this.data,s)}},{key:"addResource",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var o=[e,t];i&&(o=o.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(n=t,t=(o=e.split("."))[1]),this.addNamespaces(t),L(this.data,o,n),r.silent||this.emit("added",e,t,i,n)}},{key:"addResources",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in i)"string"!=typeof i[r]&&"[object Array]"!==Object.prototype.toString.apply(i[r])||this.addResource(e,t,r,i[r],{silent:!0});n.silent||this.emit("added",e,t,i)}},{key:"addResourceBundle",value:function(e,t,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(n=i,i=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var c=R(this.data,a)||{};n?A(c,i,r):c=s({},c,i),L(this.data,a,c),o.silent||this.emit("added",e,t,i)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?s({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(O),U={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,n,r){var s=this;return e.forEach((function(e){s.processors[e]&&(t=s.processors[e].process(t,i,n,r))})),t}},_={},G=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),i=u(this,l(t).call(this)),C&&O.call(c(i)),D(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,c(i)),i.options=n,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=k.create("translator"),i}return d(t,e),Object(a.a)(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},i=this.resolve(e,t);return i&&void 0!==i.res}},{key:"extractFromKey",value:function(e,t){var i=t.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS;if(i&&e.indexOf(i)>-1){var s=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),e=s.join(n)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t){var i=this;if("object"!==n(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],t),a=o.key,c=o.namespaces,u=c[c.length-1],l=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(h){var d=t.nsSeparator||this.options.nsSeparator;return u+d+a}return a}var g=this.resolve(e,t),f=g&&g.res,p=g&&g.usedKey||a,y=g&&g.exactUsedKey||a,v=Object.prototype.toString.apply(f),x=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(T&&f&&b&&x.indexOf(v)<0&&("string"!=typeof m||"[object Array]"!==v)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,f,t):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(r){var k="[object Array]"===v,O=k?[]:{},P=k?y:p;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var D="".concat(P).concat(r).concat(E);O[E]=this.translate(D,s({},t,{joinArrays:!1,ns:c})),O[E]===D&&(O[E]=f[E])}f=O}}else if(T&&"string"==typeof m&&"[object Array]"===v)(f=f.join(m))&&(f=this.extendTranslation(f,e,t));else{var w=!1,L=!1;if(!this.isValidLookup(f)&&void 0!==t.defaultValue){if(w=!0,void 0!==t.count){var R=this.pluralResolver.getSuffix(l,t.count);f=t["defaultValue".concat(R)]}f||(f=t.defaultValue)}this.isValidLookup(f)||(L=!0,f=a);var S=t.defaultValue&&t.defaultValue!==f&&this.options.updateMissing;if(L||w||S){this.logger.log(S?"updateKey":"missingKey",l,u,a,S?t.defaultValue:f);var A=[],M=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&M&&M[0])for(var I=0;I<M.length;I++)A.push(M[I]);else"all"===this.options.saveMissingTo?A=this.languageUtils.toResolveHierarchy(t.lng||this.language):A.push(t.lng||this.language);var N=function(e,n){i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,n,S?t.defaultValue:f,S,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,n,S?t.defaultValue:f,S,t),i.emit("missingKey",e,u,n,f)};if(this.options.saveMissing){var C=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&C?A.forEach((function(e){i.pluralResolver.getPluralFormsOfKey(e,a).forEach((function(t){return N([e],t)}))})):N(A,a)}}f=this.extendTranslation(f,e,t,g),L&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(u,":").concat(a)),L&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,i,n){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,i,n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(s({},i,{interpolation:s({},this.options.interpolation,i.interpolation)}));var o=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(o=s({},this.options.interpolation.defaultVariables,o)),e=this.interpolator.interpolate(e,o,i.lng||this.language,i),!1!==i.nest&&(e=this.interpolator.nest(e,(function(){return r.translate.apply(r,arguments)}),i)),i.interpolation&&this.interpolator.reset()}var a=i.postProcess||this.options.postProcess,c="string"==typeof a?[a]:a;return null!=e&&c&&c.length&&!1!==i.applyPostProcessor&&(e=U.handle(c,e,t,this.options&&this.options.postProcessPassResolved?s({i18nResolved:n},i):i,this)),e}},{key:"resolve",value:function(e){var t,i,n,r,s,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var c=o.extractFromKey(e,a),u=c.key;i=u;var l=c.namespaces;o.options.fallbackNS&&(l=l.concat(o.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,d=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,g=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);l.forEach((function(e){o.isValidLookup(t)||(s=e,!_["".concat(g[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(s)&&(_["".concat(g[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(i,'" for namespace "').concat(s,'" for languages "').concat(g.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((function(i){if(!o.isValidLookup(t)){r=i;var s,c,l=u,g=[l];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(g,u,i,e,a);else h&&(s=o.pluralResolver.getSuffix(i,a.count)),h&&d&&g.push(l+s),d&&g.push(l+="".concat(o.options.contextSeparator).concat(a.context)),h&&g.push(l+=s);for(;c=g.pop();)o.isValidLookup(t)||(n=c,t=o.getResource(i,e,c,a))}})))}))}})),{res:t,usedKey:i,exactUsedKey:n,usedLng:r,usedNS:s}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}}]),t}(O);function j(e){return e.charAt(0).toUpperCase()+e.slice(1)}var H=function(){function e(t){Object(o.a)(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=k.create("languageUtils")}return Object(a.a)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],i=e.split("-");return this.options.lowerCaseLng?i=i.map((function(e){return e.toLowerCase()})):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=j(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=j(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=j(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}},{key:"toResolveHierarchy",value:function(e,t){var i=this,n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],s=function(e){e&&(i.isWhitelisted(e)?r.push(e):i.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),n.forEach((function(e){r.indexOf(e)<0&&s(i.formatLanguageCode(e))})),r}}]),e}(),K=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],B={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}};function z(){var e={};return K.forEach((function(t){t.lngs.forEach((function(i){e[i]={numbers:t.nr,plurals:B[t.fc]}}))})),e}var Y=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),this.languageUtils=t,this.options=i,this.logger=k.create("pluralResolver"),this.rules=z()}return Object(a.a)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var i=this,n=[],r=this.getRule(e);return r?(r.numbers.forEach((function(r){var s=i.getSuffix(e,r);n.push("".concat(t).concat(s))})),n):n}},{key:"getSuffix",value:function(e,t){var i=this,n=this.getRule(e);if(n){var r=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),s=n.numbers[r];this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]&&(2===s?s="plural":1===s&&(s=""));var o=function(){return i.options.prepend&&s.toString()?i.options.prepend+s.toString():s.toString()};return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?"_plural_".concat(s.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.logger=k.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return Object(a.a)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:N,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?M(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?M(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?M(t.nestingPrefix):t.nestingPrefixEscaped||M("$t("),this.nestingSuffix=t.nestingSuffix?M(t.nestingSuffix):t.nestingSuffixEscaped||M(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(e,t,i,n){var r,s,o,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(a.formatSeparator)<0){var r=S(t,c,e);return a.alwaysFormat?a.format(r,void 0,i):r}var s=e.split(a.formatSeparator),o=s.shift().trim(),u=s.join(a.formatSeparator).trim();return a.format(S(t,c,o),u,i,n)};this.resetRegExp();var h=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler;for(o=0;r=this.regexpUnescape.exec(e);){if(void 0===(s=l(r[1].trim())))if("function"==typeof h){var d=h(e,r,n);s="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),s="";else"string"==typeof s||this.useRawValueToEscape||(s=E(s));if(e=e.replace(r[0],u(s)),this.regexpUnescape.lastIndex=0,++o>=this.maxReplaces)break}for(o=0;r=this.regexp.exec(e);){if(void 0===(s=l(r[1].trim())))if("function"==typeof h){var g=h(e,r,n);s="string"==typeof g?g:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),s="";else"string"==typeof s||this.useRawValueToEscape||(s=E(s));if(s=this.escapeValue?u(this.escape(s)):u(s),e=e.replace(r[0],s),this.regexp.lastIndex=0,++o>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var i,n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=s({},o);function c(e,t){var i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;var n=e.split(new RegExp("".concat(i,"[ ]*{"))),r="{".concat(n[1]);e=n[0],r=(r=this.interpolate(r,a)).replace(/'/g,'"');try{a=JSON.parse(r),t&&(a=s({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(i).concat(r)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;i=this.nestingRegexp.exec(e);){var u=[],l=!1;if(i[0].includes(this.formatSeparator)&&!/{.*}/.test(i[1])){var h=i[1].split(this.formatSeparator).map((function(e){return e.trim()})),d=m(h);i[1]=d[0],u=d.slice(1),l=!0}if((n=t(c.call(this,i[1].trim(),a),a))&&i[0]===e&&"string"!=typeof n)return n;"string"!=typeof n&&(n=E(n)),n||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(e)),n=""),l&&(n=u.reduce((function(e,t){return r.format(e,t,o.lng,o)}),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}}]),e}();var V=function(e){function t(e,i,n){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(o.a)(this,t),r=u(this,l(t).call(this)),C&&O.call(c(r)),r.backend=e,r.store=i,r.services=n,r.languageUtils=n.languageUtils,r.options=s,r.logger=k.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,s.backend,s),r}return d(t,e),Object(a.a)(t,[{key:"queueLoad",value:function(e,t,i,n){var r=this,s=[],o=[],a=[],c=[];return e.forEach((function(e){var n=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!i.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?o.indexOf(a)<0&&o.push(a):(r.state[a]=1,n=!1,o.indexOf(a)<0&&o.push(a),s.indexOf(a)<0&&s.push(a),c.indexOf(t)<0&&c.push(t)))})),n||a.push(e)})),(s.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:n}),{toLoad:s,pending:o,toLoadLanguages:a,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,i){var n=T(e.split("|"),2),r=n[0],s=n[1];t&&this.emit("failedLoading",r,s,t),i&&this.store.addResourceBundle(r,s,i),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(i){var n,a,c,u,l,h;n=i.loaded,a=s,u=w(n,[r],Object),l=u.obj,h=u.k,l[h]=l[h]||[],c&&(l[h]=l[h].concat(a)),c||l[h].push(a),function(e,t){for(var i=e.indexOf(t);-1!==i;)e.splice(i,1),i=e.indexOf(t)}(i.pending,e),t&&i.errors.push(t),0!==i.pending.length||i.done||(Object.keys(i.loaded).forEach((function(e){o[e]||(o[e]=[]),i.loaded[e].length&&i.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[i](e,t,(function(a,c){a&&c&&r<5?setTimeout((function(){n.read.call(n,e,t,i,r+1,2*s,o)}),s):o(a,c)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach((function(e){i.loadOne(e)}))}},{key:"load",value:function(e,t,i){this.prepareLoading(e,t,{},i)}},{key:"reload",value:function(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}},{key:"loadOne",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("|"),r=T(n,2),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(function(n,r){n&&t.logger.warn("".concat(i,"loading namespace ").concat(o," for language ").concat(s," failed"),n),!n&&r&&t.logger.log("".concat(i,"loaded namespace ").concat(o," for language ").concat(s),r),t.loaded(e,n,r)}))}},{key:"saveMissing",value:function(e,t,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(i,'" for namespace "').concat(t,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=i&&""!==i&&(this.backend&&this.backend.create&&this.backend.create(e,t,i,n,null,s({},o,{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,i,n))}}]),t}(O);function q(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===n(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===n(e[2])||"object"===n(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){t[e]=i[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,i,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3}}}function J(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function X(){}var $=new(function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(Object(o.a)(this,t),e=u(this,l(t).call(this)),C&&O.call(c(e)),e.options=J(i),e.services={},e.logger=k,e.modules={external:[]},n&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,n),u(e,c(e));setTimeout((function(){e.init(i,n)}),0)}return e}return d(t,e),Object(a.a)(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;function n(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(i=t,t={}),this.options=s({},q(),this.options,J(t)),this.format=this.options.interpolation.format,i||(i=X),!this.options.isClone){this.modules.logger?k.init(n(this.modules.logger),this.options):k.init(null,this.options);var r=new H(this.options);this.store=new F(this.options.resources,this.options);var o=this.services;o.logger=k,o.resourceStore=this.store,o.languageUtils=r,o.pluralResolver=new Y(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new W(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new V(n(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.languageDetector&&(o.languageDetector=n(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=n(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new G(this.services,this.options),this.translator.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t].concat(n))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];a.forEach((function(t){e[t]=function(){var i;return(i=e.store)[t].apply(i,arguments)}}));var c=P(),u=function(){e.changeLanguage(e.options.lng,(function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(n),i(t,n)}))};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X,n=i,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var s=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};if(r)o(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(s,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,i){var n=P();return e||(e=this.languages),t||(t=this.options.ns),i||(i=X),this.services.backendConnector.reload(e,t,(function(e){n.resolve(),i(e)})),n}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&U.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var i=this;this.isLanguageChangingTo=e;var n=P();this.emit("languageChanging",e);var r=function(e){e&&(i.language||(i.language=e,i.languages=i.services.languageUtils.toResolveHierarchy(e)),i.translator.language||i.translator.changeLanguage(e),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage(e)),i.loadResources(e,(function(r){!function(e,r){r?(i.language=r,i.languages=i.services.languageUtils.toResolveHierarchy(r),i.translator.changeLanguage(r),i.isLanguageChangingTo=void 0,i.emit("languageChanged",r),i.logger.log("languageChanged",r)):i.isLanguageChangingTo=void 0,n.resolve((function(){return i.t.apply(i,arguments)})),t&&t(e,(function(){return i.t.apply(i,arguments)}))}(r,e)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),n}},{key:"getFixedT",value:function(e,t){var i=this,r=function e(t,r){var o;if("object"!==n(r)){for(var a=arguments.length,c=new Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];o=i.options.overloadTranslationOptionHandler([t,r].concat(c))}else o=s({},r);return o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,i.t(t,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],n=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,i){var n=t.services.backendConnector.state["".concat(e,"|").concat(i)];return-1===n||2===n};return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||n&&!s(r,e)))}},{key:"loadNamespaces",value:function(e,t){var i=this,n=P();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){i.options.ns.indexOf(e)<0&&i.options.ns.push(e)})),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var i=P();"string"==typeof e&&(e=[e]);var n=this.options.preload||[],r=e.filter((function(e){return n.indexOf(e)<0}));return r.length?(this.options.preload=n.concat(r),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new t(e,i)}},{key:"cloneInstance",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X,r=s({},this.options,i,{isClone:!0}),o=new t(r),a=["store","services","language"];return a.forEach((function(t){o[t]=e[t]})),o.services=s({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new G(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];o.emit.apply(o,[e].concat(i))})),o.init(r,n),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),t}(O));t.default=$},7:function(e,t,i){var n=i(13),r=i(9),s=i(3),o=i(8),a=i(14);function c(e,t,i,n,r,c,u,l,h){this.width=null==e?20:e,this.height=null==t?20:t,this.generateWalls=null!=i&&i,this.borderWalls=null!=n&&n,this.maze=null!=r&&r,this.mazeFirstPosition=new o(1,1,s.Direction.RIGHT),this.mazeForceAuto=null!=u&&u,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.seedGrid=l,this.seedGame=h,this.rngGrid=a(this.seedGrid),this.rngGame=a(this.seedGame),this.init(c)}c.prototype.init=function(e){if(null!=e||null!=this.initialGrid){var t;t=null!=this.initialGrid?this.initialGrid:e,this.height=t.length,this.width=t[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var i=0;i<this.height;i++)this.initialGrid[i]=t[i].slice(),this.grid[i]=t[i].slice()}else{this.grid=new Array(this.height);for(i=0;i<this.height;i++){this.grid[i]=new Array(this.width);for(var n=0;n<this.width;n++)this.borderWalls&&(0==i||i==this.height-1||0==n||n==this.width-1)||this.generateWalls&&this.rngGrid()>.65||this.maze?this.grid[i][n]=s.CaseType.WALL:this.grid[i][n]=s.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null},c.prototype.fixWalls=function(e){if(e)var t=1,i=this.height-1,n=1,r=this.width-1;else t=0,i=this.height,n=0,r=this.width;for(var a=t;a<i;a++)for(var c=n;c<r;c++){var u=new o(c,a),l=this.getNextPosition(u,s.Direction.UP),h=this.getNextPosition(l,s.Direction.LEFT),d=this.getNextPosition(l,s.Direction.RIGHT),g=this.getNextPosition(u,s.Direction.BOTTOM),f=this.getNextPosition(g,s.Direction.LEFT),p=this.getNextPosition(g,s.Direction.RIGHT);this.get(h)!=s.CaseType.WALL&&this.get(d)!=s.CaseType.WALL&&this.get(f)!=s.CaseType.WALL&&this.get(p)!=s.CaseType.WALL||this.set(s.CaseType.EMPTY,u)}},c.prototype.maze_recursion=function(e,t){for(var i=r.shuffle([s.Direction.UP,s.Direction.RIGHT,s.Direction.BOTTOM,s.Direction.LEFT],this.rngGrid),n=0;n<i.length;n++)switch(i[n]){case s.Direction.UP:if(e-2<=0)continue;this.get(new o(t,e-2))!=s.CaseType.EMPTY&&(this.set(s.CaseType.EMPTY,new o(t,e-2)),this.set(s.CaseType.EMPTY,new o(t,e-1)),this.maze_recursion(e-2,t));break;case s.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new o(t+2,e))!=s.CaseType.EMPTY&&(this.set(s.CaseType.EMPTY,new o(t+2,e)),this.set(s.CaseType.EMPTY,new o(t+1,e)),this.maze_recursion(e,t+2));break;case s.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new o(t,e+2))!=s.CaseType.EMPTY&&(this.set(s.CaseType.EMPTY,new o(t,e+2)),this.set(s.CaseType.EMPTY,new o(t,e+1)),this.maze_recursion(e+2,t));break;case s.Direction.LEFT:if(t-2<=0)continue;this.get(new o(t-2,e))!=s.CaseType.EMPTY&&(this.set(s.CaseType.EMPTY,new o(t-2,e)),this.set(s.CaseType.EMPTY,new o(t-1,e)),this.maze_recursion(e,t-2))}},c.prototype.generateMaze=function(){this.mazeFirstPosition=new o(1,1,s.Direction.RIGHT),this.set(s.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)},c.prototype.set=function(e,t){this.grid[t.y][t.x]=e},c.prototype.get=function(e){return this.grid[e.y][e.x]},c.prototype.valToChar=function(e){switch(e){case s.CaseType.EMPTY:return"-";case s.CaseType.SNAKE:return"o";case s.CaseType.SNAKE_DEAD:return"O";case s.CaseType.FRUIT:return"x";case s.CaseType.WALL:return"#";case s.CaseType.SURROUNDED:return"/";case s.CaseType.FRUIT_GOLD:return"X"}},c.prototype.getImageCase=function(e){switch(this.get(e)){case s.CaseType.WALL:return"wall.png";case s.CaseType.FRUIT:return"fruit.png";case s.CaseType.FRUIT_GOLD:return"fruit_gold.png"}return""},c.prototype.getGraph=function(e){for(var t=new Array(this.height),i=0;i<this.height;i++){t[i]=new Array(this.width);for(var n=0;n<this.width;n++){var r=new o(n,i);e&&this.get(r)==s.CaseType.SNAKE?t[i][n]=0:this.isDeadPosition(r)?t[i][n]=1:t[i][n]=0}}return t},c.prototype.getRandomPosition=function(){return new o(r.randRange(0,this.width-1,this.rngGame),r.randRange(0,this.height-1,this.rngGame))},c.prototype.setFruit=function(e,t){var i,n=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=s.CaseType.FRUIT||this.set(s.CaseType.EMPTY,this.fruitPos),!(this.getTotal(s.CaseType.EMPTY)>0))return!1;do{i=this.getRandomPosition();var o=this.getNextPosition(i,s.Direction.TOP),a=this.getNextPosition(i,s.Direction.BOTTOM),c=this.getNextPosition(i,s.Direction.RIGHT),u=this.getNextPosition(i,s.Direction.LEFT),l=this.isDeadPosition(o,!0)+this.isDeadPosition(a,!0)+this.isDeadPosition(c,!0)+this.isDeadPosition(u,!0);if(l>=3&&this.get(i)==s.CaseType.EMPTY&&this.set(s.CaseType.SURROUNDED,i),this.getTotal(s.CaseType.EMPTY)<=0)return!1}while(this.get(i)!=s.CaseType.EMPTY||this.isFruitSurrounded(i,!0)||this.maze&&!this.testFruitMaze(i,n)||l>=3);return t?(this.fruitPosGold=i,this.set(s.CaseType.FRUIT_GOLD,i)):(this.fruitPos=i,this.set(s.CaseType.FRUIT,i)),this.maze||null!=this.fruitPosGold||1!=r.randRange(1,e>1?s.Setting.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:s.Setting.PROB_GOLD_FRUIT_1_PLAYER,this.rngGame)||this.setFruit(e,!0),!0},c.prototype.testFruitMaze=function(e,t){var i=this.getGraph(!0);return new n.Astar.Configuration(i,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:(e,t)=>1==t?null:1}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(s.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)},c.prototype.isCaseSurrounded=function(e,t,i,n){if(null==e||null==e)return!1;t=null!=t&&t;for(var r=JSON.parse(JSON.stringify(this.grid)),o=[e];o.length>0;){var a=o[0];o.shift();for(var c=[this.getNextPosition(a,s.Direction.UP),this.getNextPosition(a,s.Direction.BOTTOM),this.getNextPosition(a,s.Direction.LEFT),this.getNextPosition(a,s.Direction.RIGHT)],u=0;u<c.length;u++)if(r[c[u].y][c[u].x]!=s.CaseType.CROSSED&&n.indexOf(this.get(c[u]))>-1){if(o.push(c[u]),i.indexOf(this.get(c[u]))>-1)return!1;t&&this.get(c[u])==s.CaseType.EMPTY?(this.set(s.CaseType.SURROUNDED,c[u]),r[c[u].y][c[u].x]=s.CaseType.SURROUNDED):r[c[u].y][c[u].x]=s.CaseType.CROSSED}}return(t&&(this.get(e)==s.CaseType.EMPTY||this.get(e)==s.CaseType.FRUIT)||this.get(e)==s.CaseType.FRUIT_GOLD)&&this.set(s.CaseType.SURROUNDED,e),!0},c.prototype.isFruitSurrounded=function(e,t){var i=this.isCaseSurrounded(e,!1,[s.CaseType.SNAKE],[s.CaseType.EMPTY,s.CaseType.SNAKE]);return i&&t&&this.isCaseSurrounded(e,!0,[s.CaseType.SNAKE],[s.CaseType.EMPTY,s.CaseType.SNAKE]),i},c.prototype.getOnLine=function(e,t){for(var i=0,n=0;n<this.width;n++)this.get(new o(n,t))==e&&i++;return i},c.prototype.getTotal=function(e){for(var t=0,i=0;i<this.height;i++)t+=this.getOnLine(e,i);return t},c.prototype.getNextPosition=function(e,t){var i=new o(e.x,e.y,t);switch(t){case s.Direction.LEFT:i.x--,i.direction=s.Direction.LEFT;break;case s.Direction.UP:i.y--,i.direction=s.Direction.UP;break;case s.Direction.RIGHT:i.x++,i.direction=s.Direction.RIGHT;break;case s.Direction.BOTTOM:i.y++,i.direction=s.Direction.BOTTOM;break;case s.Key.LEFT:i.x--,i.direction=s.Key.LEFT;break;case s.Key.UP:i.y--,i.direction=s.Key.UP;break;case s.Key.RIGHT:i.x++,i.direction=s.Direction.RIGHT;break;case s.Key.BOTTOM:i.y++,i.direction=s.Direction.BOTTOM}return i.x<0?i.x=this.width-1:i.x>=this.width&&(i.x=0),i.y<0?i.y=this.height-1:i.y>=this.height&&(i.y=0),i},c.prototype.getDirectionTo=function(e,t){return this.getNextPosition(e,s.Direction.UP).equals(t)?s.Direction.UP:this.getNextPosition(e,s.Direction.BOTTOM).equals(t)?s.Direction.BOTTOM:this.getNextPosition(e,s.Direction.RIGHT).equals(t)?s.Direction.RIGHT:this.getNextPosition(e,s.Direction.LEFT).equals(t)?s.Direction.LEFT:-1},c.prototype.isDeadPosition=function(e,t){return!t&&this.get(e)==s.CaseType.SNAKE||this.get(e)==s.CaseType.WALL||this.get(e)==s.CaseType.SNAKE_DEAD},c.prototype.toString=function(){res="";for(var e=0;e<this.height;e++){for(var t=0;t<this.width;t++)res+=this.valToChar(this.get(new o(t,e)))+" ";res+="\n"}return res},e.exports=c},8:function(e,t,i){var n=i(3);function r(e,t,i){this.x=e,this.y=t,this.direction=i}r.prototype.copy=function(){return new r(this.x,this.y,this.direction)},r.prototype.convertToKeyDirection=function(){switch(this.direction){case n.Direction.UP:return n.Key.UP;case n.Direction.RIGHT:return n.Key.RIGHT;case n.Direction.LEFT:return n.Key.LEFT;case n.Direction.BOTTOM:return n.Key.BOTTOM;default:return this.direction}},r.prototype.convertToSimpleDirection=function(){switch(this.direction){case n.Key.UP:return n.Direction.UP;case n.Key.RIGHT:return n.Direction.RIGHT;case n.Key.LEFT:return n.Direction.LEFT;case n.Key.BOTTOM:return n.Direction.BOTTOM;default:return this.direction}},r.prototype.equals=function(e){return null!=e&&(this.x==e.x&&this.y==e.y)},e.exports=r},9:function(e,t,i){var n=i(6).default,r={randRange:function(e,t,i){return Math.floor((i?i():Math.random())*(t-e+1))+e},addHue:function(e,t){var i=e+t;return i>360?i-=360:i<0&&(i=360+i),i},hsvToRgb:function(e,t,i){var n,r,s,o,a,c,u,l;switch(c=i*(1-t),u=i*(1-(a=6*e-(o=Math.floor(6*e)))*t),l=i*(1-(1-a)*t),o%6){case 0:n=i,r=l,s=c;break;case 1:n=u,r=i,s=c;break;case 2:n=c,r=i,s=l;break;case 3:n=c,r=u,s=i;break;case 4:n=l,r=c,s=i;break;case 5:n=i,r=c,s=u}return[Math.round(255*n),Math.round(255*r),Math.round(255*s)]},hslToName:function(e,t,i){return t<=10&&i>=90?n.t("engine.colors.white"):t<=10&&i<=70||0==t?n.t("engine.colors.gray"):i<=15?n.t("engine.colors.black"):e>=0&&e<=6||e>=350?n.t("engine.colors.red"):e>=7&&e<=42?n.t("engine.colors.orange"):e>=43&&e<=70?n.t("engine.colors.yellow"):e>=71&&e<=156?n.t("engine.colors.green"):e>=157&&e<=221?n.t("engine.colors.blue"):e>=222&&e<=290?n.t("engine.colors.purple"):e>=291&&e<=349?n.t("engine.colors.pink"):"???"},shuffle:function(e,t){for(var i,n,r=e.length-1;r>0;r--)i=Math.floor((t?t():Math.random())*(r+1)),n=e[r],e[r]=e[i],e[i]=n;return e},millisecondsFormat:function(e){return e/=1e3,("0"+Math.trunc(e/60)).slice(-2)+":"+("0"+Math.trunc(e%60)).slice(-2)},secondsFormat:function(e){return this.millisecondsFormat(1e3*e)}};e.exports=r},95:function(e,t,i){var n,r=i(3),s=i(8),o=i(7),a=i(10),c=i(18),u=i(14);function l(e){var t=JSON.parse(JSON.stringify(e));if(t)for(var i=0;i<t.length;i++)delete t[i].grid;return t}function h(e){var t=JSON.parse(JSON.stringify(e));return t&&(t.rngGrid=null,t.rngGame=null),t}function d(e,t){if(n)t=t||n.grid;(t=Object.assign(new o,t)).rngGrid=u(t.seedGrid),t.rngGame=u(t.seedGame),!e&&n&&(e=n.snakes);for(var i=0;i<e.length;i++){e[i].grid=t,e[i]=Object.assign(new a,e[i]);for(var r=0;r<e[i].queue.length;r++)e[i].queue[r]=Object.assign(new s,e[i].queue[r])}return{grid:t,snakes:e}}onmessage=function(e){var t=e.data;if(t.length>1&&"init"==t[0]){var i=d(t[1].snakes,t[1].grid),s=i.grid,o=i.snakes;n=new c(s,o,t[1].speed,t[1].enablePause,t[1].enableRetry,t[1].progressiveSpeed),this.postMessage(["init",{snakes:l(n.snakes),grid:h(n.grid),enablePause:n.enablePause,enableRetry:n.enableRetry,progressiveSpeed:n.progressiveSpeed,offsetFrame:n.speed*r.Setting.TIME_MULTIPLIER,errorOccurred:n.errorOccurred}]),n.onReset((function(){self.postMessage(["reset",{paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:l(n.snakes),grid:h(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,offsetFrame:n.speed*r.Setting.TIME_MULTIPLIER,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onStart((function(){self.postMessage(["start",{snakes:l(n.snakes),grid:h(n.grid),starting:n.starting,countBeforePlay:n.countBeforePlay,paused:n.paused,isReseted:n.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onPause((function(){self.postMessage(["pause",{paused:n.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onContinue((function(){self.postMessage(["continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onStop((function(){self.postMessage(["stop",{paused:n.paused,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onExit((function(){self.postMessage(["exit",{paused:n.paused,gameOver:n.gameOver,gameFinished:n.gameFinished,exited:n.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onKill((function(){self.postMessage(["kill",{paused:n.paused,gameOver:n.gameOver,killed:n.killed,snakes:l(n.snakes),grid:h(n.grid),gameFinished:n.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:n.errorOccurred}])})),n.onScoreIncreased((function(){self.postMessage(["scoreIncreased",{}])})),n.onUpdate((function(){self.postMessage(["update",{paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:l(n.snakes),grid:h(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,countBeforePlay:n.countBeforePlay,numFruit:n.numFruit,offsetFrame:0,errorOccurred:n.errorOccurred}])})),n.onUpdateCounter((function(){self.postMessage(["updateCounter",{paused:n.paused,isReseted:n.isReseted,exited:n.exited,snakes:l(n.snakes),grid:h(n.grid),numFruit:n.numFruit,ticks:n.ticks,scoreMax:n.scoreMax,gameOver:n.gameOver,gameFinished:n.gameFinished,gameMazeWin:n.gameMazeWin,starting:n.starting,initialSpeed:n.initialSpeed,speed:n.speed,countBeforePlay:n.countBeforePlay,numFruit:n.numFruit,errorOccurred:n.errorOccurred}])}))}else if(null!=n){switch(t[0]){case"reset":n.reset();break;case"start":n.start();break;case"stop":n.stop();break;case"finish":n.stop(!0);break;case"stop":n.stop(!1);break;case"pause":n.pause();break;case"kill":n.kill();break;case"tick":n.paused=!1,n.countBeforePlay=-1,n.tick();break;case"ping":self.postMessage("pong");break;case"exit":n.exit();break;case"forceStart":n.forceStart();break;case"key":if(t.length>1){n.lastKey=t[1];var a=n.getPlayer(1,r.PlayerType.HUMAN)||n.getPlayer(1,r.PlayerType.HYBRID_HUMAN_AI);null!=a&&null!=a.lastKey&&(a.lastKey=t[1])}break;case"update":if(t.length>1)if("snakes"==t[1].key){var u=d(t[1].data);n.snakes=u.snakes}else if("grid"==t[1].key){u=d(null,t[1].data);n.grid=u.grid}else n[t[1].key]=t[1].data}}else"ping"==t&&self.postMessage("pong")}}});