/*! For license information please see SnakeIA.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SnakeIA=t():e.SnakeIA=t()}("undefined"!=typeof self?self:this,(()=>(()=>{var __webpack_modules__={293:function(module){(function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let n=0;n<e.length;n++){if(void 0!==e[n].graph.get(this)._connectivity)continue;let i=[e[n]];for(t++;i.length;){let e=i.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map((e=>{void 0===e.graph.get(this)._connectivity&&0>i.indexOf(e)&&i.push(e)}))}}}add(e){return 1<arguments.length?Array.from(arguments).map((e=>this.add(e))):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map((e=>this.delete(e))):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,n=1,i=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===n?e.graph.get(this).delete(t):e.graph.get(this).set(t,n),null===i?t.graph.get(this).delete(e):t.graph.get(this).set(e,i),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,n={}){let i=e.fromArray.X(t,n.order),s=e.fromArray.Y(t,n.order),r=e.fromArray.at.bind(null,t,n.order),o=[],a=null;for(let t,l=1;l<Math.max(2,arguments.length);l++){t=new e,o.push(t),n=arguments[l]||{};let u=e.fromArray.id.bind(null,i,s,n.torus),c=n.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,c);for(let e=0;e<i;e++)for(let n,i=0;i<s;i++)n=t.add(a?a.get(u(e,i)):new f(u(e,i))),n.x=e,n.y=i,n.graph.get(t)._data=r(e,i),h(n,t.nodes.get(u(e-1,i))),h(n,t.nodes.get(u(e+1,i))),h(n,t.nodes.get(u(e,i-1))),h(n,t.nodes.get(u(e,i+1)));if(n.diagonals)for(let e=0;e<i;e++)for(let i=0;i<s;i++){let s=t.nodes.get(u(e,i)),r=t.adjacent(s,t.nodes.get(u(e-1,i))),o=t.adjacent(s,t.nodes.get(u(e+1,i))),a=t.adjacent(s,t.nodes.get(u(e,i-1))),l=t.adjacent(s,t.nodes.get(u(e,i+1)));"strict"===n.cutting?(r&&a&&h(s,t.nodes.get(u(e-1,i-1))),r&&l&&h(s,t.nodes.get(u(e-1,i+1))),o&&a&&h(s,t.nodes.get(u(e+1,i-1))),o&&l&&h(s,t.nodes.get(u(e+1,i+1)))):((r||a||n.cutting)&&h(s,t.nodes.get(u(e-1,i-1))),(r||l||n.cutting)&&h(s,t.nodes.get(u(e-1,i+1))),(o||a||n.cutting)&&h(s,t.nodes.get(u(e+1,i-1))),(o||l||n.cutting)&&h(s,t.nodes.get(u(e+1,i+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>u(e.x,e.y)}),t.connect(),t.X=i,t.Y=s,t.TORUS=n.torus,a||(a=t.nodes)}return 1<o.length?o:o[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",n,i){return"xy"===t?e[n][i]:e[i][n]},e.fromArray.id=function(e=0,t=0,n=!1,i,s){return n?(s+t)%t*e+(i+e)%e:0<=i&&i<e&&0<=s&&s<t?s*e+i:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,n,i){i&&e.edge(n,i,t(e.data(n),e.data(i)),t(e.data(i),e.data(n)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let n in this.id=e,this.graph=new Map,t)"id"!=n&&"graph"!=n&&(this[n]=t[n])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let n=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=n,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],n=this.score(t);for(;0<e;){let i=Math.floor((e+1)/2)-1,s=this.nodes[i];if(n>=this.score(s))break;this.nodes[i]=t,this.nodes[e]=s,e=i}return this}sink(e){let t=this.nodes[e],n=this.score(t);for(;;){let i=2*(e+1),s=i-1,r=null;if(s<this.size&&this.score(this.nodes[s])<n&&(r=s),i<this.size&&this.score(this.nodes[i])<(r?this.score(this.nodes[r]):n)&&(r=i),null===r)break;this.nodes[e]=this.nodes[r],this.nodes[r]=t,e=r}return this}}let h={manhattan:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return(n.multiplier||1)*(i+s)},manhattanTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)},diagonal:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return m*(i+s)+(dm-2*m)*c(i,s)},diagonalTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,s)},euclidian:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return(n.multiplier||1)*Math.sqrt(i*i+s*s)},euclidianTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,s)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(`${n.thread} couldn't be opened.`)}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,n={})=>{this._worker_path_callback=n.callback,delete n.callback,this.worker.postMessage(["path",e,t,n])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);"path"===t[0]&&this._worker_path_callback(t[1])}}}path(e,t,n={}){if(n.jps)return this.jps(e,t,n);let i=new g((e=>e.estimated)),s=new Map,r=this.graphs[n.layer||0];if(e=r.node(e,!0),t=r.node(t,!0),i.add({node:e,estimated:0}),s.set(e,{score:0,from:null}),!n.static||r.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;r.neighbors(e).map((o=>{let a=(s.has(e)?s.get(e).score:0)+r.cost(e,o);a<(s.has(o)?s.get(o).score:1/0)&&(s.set(o,{score:a,from:e}),i.set({node:o,estimated:a+h[n.heuristic||this.heuristic](o,t,n.heuristicOptions||this.heuristicOptions)}))})),i.delete(e)}let o=[];if(s.has(t)){let e=t;for(o.push(t);null!==(e=s.get(e).from);)o.push(e);o=o.reverse()}return n.callback&&n.callback(o,s),o}}if(j.JPS=class{constructor(){}static access(e,t,n,i){return e.adjacent(t,i?e.node(n,!0):n)}static neighborhood(e,t,n,i){let s=[],r=n.get(i).from||null;if(null===r)return t.neighbors(i);{let n={x:b(i.x-r.x),y:b(i.y-r.y)};if(0!=n.x&&0!=n.y){let r=e(i,{x:i.x+n.x,y:i.y},!0),o=e(i,{x:i.x,y:i.y+n.y},!0);(r||o)&&(s.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),r&&(s.push(t.node({x:i.x+n.x,y:i.y},!0)),!e(i,{x:i.x,y:i.y-n.y},!0)&&s.push(t.node({x:i.x+n.x,y:i.y-n.y},!0))),o&&(s.push(t.node({x:i.x,y:i.y+n.y},!0)),!e(i,{x:i.x-n.x,y:i.y},!0)&&s.push(t.node({x:i.x-n.x,y:i.y+n.y},!0))))}else e(i,{x:i.x+n.x,y:i.y+n.y},!0)&&(s.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),0==n.x?0!=n.y&&(!e(i,{x:i.x-1,y:i.y},!0)&&s.push(t.node({x:i.x-1,y:i.y+n.y},!0)),!e(i,{x:i.x+1,y:i.y},!0)&&s.push(t.node({x:i.x+1,y:i.y+n.y},!0))):(!e(i,{x:i.x,y:i.y-1},!0)&&s.push(t.node({x:i.x+n.x,y:i.y-1},!0)),!e(i,{x:i.x,y:i.y+1},!0)&&s.push(t.node({x:i.x+n.x,y:i.y+1},!0))))}return s.filter((e=>e))}static jump(e,t,n,i,s,r){for(;;){if(!e(r,s))return null;if(s.x===i.x&&s.y===i.y)return s;let o={x:b(s.x-r.x),y:b(s.y-r.y)};if(0!=o.x&&0!=o.y){if(!e(s,{x:s.x-o.x,y:s.y},!0)&&e(s,{x:s.x-o.x,y:s.y+o.y},!0)||!e(s,{x:s.x,y:s.y-o.y},!0)&&e(s,{x:s.x+o.x,y:s.y-o.y},!0))return s;let r=j.JPS.jump.bind(this,e,t,n,i);if(null!==r(t.node({x:s.x+o.x,y:s.y},!0),s)||null!==r(t.node({x:s.x,y:s.y+o.y},!0),s))return s}else if(0!=o.x){if(!e(s,{x:s.x,y:s.y-1},!0)&&e(s,{x:s.x+o.x,y:s.y-1},!0)||!e(s,{x:s.x,y:s.y+1},!0)&&e(s,{x:s.x+o.x,y:s.y+1},!0))return s}else if(0!=o.y&&(!e(s,{x:s.x-1,y:s.y},!0)&&e(s,{x:s.x-1,y:s.y+o.y},!0)||!e(s,{x:s.x+1,y:s.y},!0)&&e(s,{x:s.x+1,y:s.y+o.y},!0)))return s;r=s,s=t.node({x:s.x+o.x,y:s.y+o.y},!0)}return null}},j.prototype.jps=function(e,t,n={}){if(this.graphs[n.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),n.callback&&n.callback([],new Map),[];let i=new g((e=>e.estimated)),s=new Map,r=this.graphs[n.layer||0],o=null;e=r.node(e,!0),t=r.node(t,!0),i.add({node:e,estimated:0}),s.set(e,{score:0,from:null});let a=j.JPS.access.bind(this,r),l=j.JPS.neighborhood.bind(this,a,r,s),u=j.JPS.jump.bind(this,a,r,s,t);if(!n.static||r.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;l(e).map((a=>{if(null!==(o=u(a,e))){let a=(s.has(e)?s.get(e).score:0)+r.cost(e,o);a<(s.has(o)?s.get(o).score:1/0)&&(s.set(o,{score:a,from:e,jumped:!0}),i.set({node:o,estimated:a+h[n.heuristic||this.heuristic](o,t,n.heuristicOptions||this.heuristicOptions)}))}})),i.delete(e)}let c=[];if(s.has(t)){let n=t;for(;n.x!=e.x||n.y!=e.y;)for(let e=s.get(n).from;n.x!=e.x||n.y!=e.y;)c.push(n),n=r.node({x:n.x+b(e.x-n.x),y:n.y+b(e.y-n.y)},!0);c.push(n),c.reverse()}return n.callback&&n.callback(c,s),c},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}})("undefined"==typeof window?this:window)},386:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js":function(e,t){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classApplyDescriptorSet.js":function(e,t){e.exports=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js":function(e,t){e.exports=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js"),s=n("./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js");e.exports=function(e,t){var n=s(e,t,"get");return i(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/classApplyDescriptorSet.js"),s=n("./node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js");e.exports=function(e,t,n){var r=s(e,t,"set");return i(e,r,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/construct.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),s=n("./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js");function r(t,n,o){return s()?(e.exports=r=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e,t,n){var s=[null];s.push.apply(s,t);var r=new(Function.bind.apply(e,s));return n&&i(r,n.prototype),r},e.exports.default=e.exports,e.exports.__esModule=!0),r.apply(null,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/get.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/superPropBase.js");function s(t,n,r){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=s=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=s=function(e,t,n){var s=i(e,t);if(s){var r=Object.getOwnPropertyDescriptor(s,t);return r.get?r.get.call(n):r.value}},e.exports.default=e.exports,e.exports.__esModule=!0),s(t,n,r||t)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/inherits.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js":function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/typeof.js").default,s=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/set.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/superPropBase.js"),s=n("./node_modules/@babel/runtime/helpers/defineProperty.js");function r(e,t,n,o){return r="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,a=i(e,t);if(a){if((o=Object.getOwnPropertyDescriptor(a,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else s(r,t,n);return!0},r(e,t,n,o)}e.exports=function(e,t,n,i,s){if(!r(e,t,n,i||e)&&s)throw new Error("failed to set property");return n},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,i)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/superPropBase.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),s=n("./node_modules/@babel/runtime/helpers/iterableToArray.js"),r=n("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),o=n("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return i(e)||s(e)||r(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/typeof.js":function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(e,t,n){var i=n("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},"./src/Arrow.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./src/Component.js"),E=n("./src/Constants.js"),k=n("./src/Style.js"),S=n("./src/Utils.js");var _=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a){var u;return s()(this,r),u=i.call(this,e,t,null,null,a),v()(l()(u),"selectable",!1),u.toX=n,u.toY=o,u}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");S.default.drawArrow(t,this.x,this.y,this.toX,this.toY,this.style.lineWidth,this.style.headSize,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return Math.abs(this.x-this.toX)}},{key:"height",get:function(){return Math.abs(this.y-this.toY)}},{key:"defaultStyle",get:function(){return new k.default({lineWidth:E.default.Setting.ARROW_DEFAULT_LINE_SIZE,headSize:E.default.Setting.ARROW_DEFAULT_HEAD_SIZE,color:E.default.Setting.ARROW_DEFAULT_COLOR,lineCap:E.default.Setting.ARROW_DEFAULT_LINE_CAP})}}]),r}(b.default)},"./src/Box.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y);var b=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a){var u;return s()(this,r),u=i.call(this,e,t,n,o,a),v()(l()(u),"selectable",!1),u}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),this.drawBackground(t),this.drawBorder(t),t.restore()}}},{key:"drawBackground",value:function(e){var t=this.backgroundColor;t&&(e.save(),e.fillStyle=t,e.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),e.restore())}},{key:"backgroundColor",get:function(){return this.hovered&&this.clicked&&null!=this.style.backgroundColorDown?this.style.backgroundColorDown:this.hovered&&null!=this.style.backgroundColorHover?this.style.backgroundColorHover:this.style.backgroundColor}},{key:"drawBorder",value:function(e){var t=this.borderColor;t&&this.style.borderSize>0&&(e.save(),e.strokeStyle=t,e.lineWidth=this.style.borderSize,e.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width-this.style.borderSize/2),Math.round(this.height-this.style.borderSize/2)),e.restore())}},{key:"borderColor",get:function(){return this.clicked&&this.hovered&&null!=this.style.borderColorDown?this.style.borderColorDown:!this.clicked&&this.hovered&&null!=this.style.borderColorHover?this.style.borderColorHover:this.selectable&&this.selected&&null!=this.style.borderColorSelected?this.style.borderColorSelected:this.style.borderColor}}]),r}(n("./src/Component.js").default)},"./src/Button.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./src/Row.js"),E=n("./src/Constants.js"),k=n("./src/Style.js");var S=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a){var u;s()(this,r);for(var c=arguments.length,h=new Array(c>5?c-5:0),d=5;d<c;d++)h[d-5]=arguments[d];return u=i.call.apply(i,[this,e,t,n,o,a].concat(h)),v()(l()(u),"selectable",!0),u}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),this.drawComponents(t),t.restore()}}},{key:"drawComponents",value:function(e){c()(m()(r.prototype),"draw",this).call(this,e)}},{key:"height",get:function(){return(this.maxHeight||c()(m()(r.prototype),"height",this))+this.style.padding}},{key:"width",get:function(){return(this.maxWidth||c()(m()(r.prototype),"width",this))+this.style.padding}},{key:"defaultStyle",get:function(){return new k.default({backgroundColor:E.default.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:E.default.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:E.default.Setting.BUTTON_DEFAULT_CLICK_BACKGROUND,scrollXDisabled:!0,scrollYDisabled:!0})}}]),r}(b.default)},"./src/ButtonImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/get.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./src/ImageContainer.js"),v=n("./src/Button.js"),b=n("./src/Style.js"),E=n("./src/Constants.js");var k=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a,l,u,c,h,d){var p;s()(this,r);var g=new b.default({alignement:o,verticalAlignement:a,backgroundColor:c||E.default.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:h||E.default.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND});return(p=i.call(this,t,n,l,u,g)).image=new y.default(e,t,n,l,u,new b.default({alignement:"center",verticalAlignement:"center"}),d),p.add(p.image),console&&console.warn&&console.warn(E.default.String.NOTICE_MESSAGE+" "+E.default.String.BUTTON_IMAGE_DEPRECATED),p}return o()(r,[{key:"loadImage",value:function(e){this.components[0]instanceof y.default&&this.components[0].loadImage(e)}},{key:"minWidth",get:function(){return l()(m()(r.prototype),"minWidth",this)},set:function(e){this.image.width=e,c()(m()(r.prototype),"minWidth",e,this,!0)}},{key:"minHeight",get:function(){return l()(m()(r.prototype),"minHeight",this)},set:function(e){this.image.height=e,c()(m()(r.prototype),"minHeight",e,this,!0)}},{key:"maxWidth",get:function(){return l()(m()(r.prototype),"maxWidth",this)},set:function(e){this.image.width=e,c()(m()(r.prototype),"maxWidth",e,this,!0)}},{key:"maxHeight",get:function(){return l()(m()(r.prototype),"maxHeight",this)},set:function(e){this.image.height=e,c()(m()(r.prototype),"maxHeight",e,this,!0)}},{key:"width",get:function(){return l()(m()(r.prototype),"width",this)},set:function(e){this.minWidth=e,this.maxWidth=e}},{key:"height",get:function(){return l()(m()(r.prototype),"height",this)},set:function(e){this.minHeight=e,this.maxHeight=e}}]),r}(v.default)},"./src/Canvas.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var i=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),d=n.n(h),p=n("./src/Constants.js"),g=n("./src/Utils.js"),f=n("./src/Scene.js"),m=n("./src/ReactorCanvas.js"),y=n("./src/ErrorScreen.js"),v=new WeakMap,b=new WeakMap,E=new WeakMap,k=function(){function e(t,n,i,s,r,a){o()(this,e),v.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),this.canvas=n||document.createElement("canvas"),this.container=document.createElement("div"),this.width=i||p.default.Setting.CANVAS_WIDTH,this.height=s||p.default.Setting.CANVAS_HEIGHT,this.scene=t,this.container.appendChild(this.canvas),this.started=!1,this.init=!1,this.maxFPS=a||-1,d()(this,v,0),this.hasError=!1,this.fullscreen=!1,this.fullpage=!1,this.sceneError=new y.default(this),this.scenePrevious=this.scene,this.reactor=new m.default,this.reactor.registerEvent("mousemove"),this.reactor.registerEvent("click"),this.reactor.registerEvent("mousedown"),this.reactor.registerEvent("mouseup"),this.reactor.registerEvent("wheel"),this.reactor.registerEvent("touchstart"),this.reactor.registerEvent("touchend"),this.reactor.registerEvent("touchmove"),r&&this.autoResize(),this.createEvents(),p.default.Setting.DISABLE_OPTIMIZATIONS&&console&&console.info(p.default.String.NOTICE_MESSAGE+" "+p.default.String.OPTIMIZATION_DISABLED),p.default.Setting.DISABLE_CONTAINERS_CUTTING&&console&&console.info(p.default.String.NOTICE_MESSAGE+" "+p.default.String.CONTAINER_CUTTING_DISABLED)}return l()(e,[{key:"draw",value:function(){var e=this.canvas.getContext("2d");this.drawClear(e),this.drawScene(e)}},{key:"drawScene",value:function(e){if(this.scene){this.scene.parent=this,this.scene.canvas=this;try{e.scale(p.default.Setting.PIXEL_RATIO,p.default.Setting.PIXEL_RATIO),this.scene.draw(e)}catch(e){this.hasError=!0,this.scene=this.sceneError,this.sceneError.errorText=""+e.stack,console.error(p.default.String.ERROR_MESSAGE+" "+p.default.String.ERROR_MESSAGE_CANVAS+"\n",e)}}}},{key:"drawClear",value:function(e){g.default.clear(e)}},{key:"startDraw",value:function(e){var t=this;this.started=!0,requestAnimationFrame((function(n){if(t.started){var i=n-c()(t,v);t.fullscreen=document.fullscreenElement==t.canvas||document.fullscreenElement==t.container,p.default.Setting.ENABLE_PIXEL_RATIO_RESIZING?p.default.Setting.PIXEL_RATIO=window.devicePixelRatio*p.default.Setting.RESOLUTION_SCALE:p.default.Setting.PIXEL_RATIO=1*p.default.Setting.RESOLUTION_SCALE,(t.maxFPS<1||i>1e3/t.maxFPS)&&(g.default.autoDPI(t.canvas),d()(t,v,n),t.draw()),t.startDraw(e),e&&e()}}))}},{key:"stopDraw",value:function(){this.started=!1}},{key:"appendTo",value:function(e){e.appendChild(this.container)}},{key:"remove",value:function(e){e.removeChild(this.container),this.container.removeChild(this.canvas)}},{key:"toggleFullscreen",value:function(){g.default.toggleFullscreen(this.canvas,this.container)}},{key:"toggleFullpage",value:function(){g.default.toggleFullpage(this.canvas,this.container),this.fullpage=!this.fullpage}},{key:"autoResize",value:function(){g.default.enableAutoResizeCanvas(this.canvas,this.container,this.width,this.height)}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return 0}},{key:"width",get:function(){return this.canvas?g.default.getCanvasWidth(this.canvas):c()(this,b)},set:function(e){e!=c()(this,b)&&(d()(this,b,e),this.canvas.width=e,this.scene&&this.scene.reactor.dispatchEvent("onChange",this))}},{key:"height",get:function(){return this.canvas?g.default.getCanvasHeight(this.canvas):c()(this,E)},set:function(e){e!=c()(this,E)&&(d()(this,E,e),this.canvas.height=e,this.scene&&this.scene.reactor.dispatchEvent("onChange",this))}},{key:"style",get:function(){return this.canvas?this.canvas.style:null}},{key:"cursor",get:function(){return this.canvas?this.canvas.style.cursor:""},set:function(e){this.canvas&&(this.canvas.style.cursor=e)}},{key:"getContext",value:function(e){return this.canvas?this.canvas.getContext(e||"2d"):null}},{key:"createEvents",value:function(){var e=this;!this.init&&this.canvas&&(["mousemove","click","mousedown","mouseup","wheel"].forEach((function(t){e.canvas.addEventListener(t,(function(n){var i=e.getMousePos(n);e.doEvents(n,t,i),n.preventDefault()}),!1)})),["touchstart","touchmove","touchend"].forEach((function(t){e.canvas.addEventListener(t,(function(n){var i=n.changedTouches[0],s=e.getMousePos(i);e.doEvents(n,t,s)}))})),this.init=!0)}},{key:"doEvents",value:function(e,t,n){var i=this,r=this.getComponentsAtPosition(n);this.reactor.dispatchEvent(t,e,!1),s()(r).reverse().forEach((function(n){return i.reactor.dispatchEventComponent(t,n,e,!0)}))}},{key:"addEventListener",value:function(e,t,n){this.reactor.addEventListener(e,t,n)}},{key:"getMousePos",value:function(e){return g.default.getMousePos(this.canvas,e)}},{key:"getAllComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;return this.scene.getAllComponents(e)}},{key:"getComponentsAtPosition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scene,i=this.scene.getComponentsTree(n),r=[n];return i.childs&&i.childs.sort(f.default.sortComponentsTree).reverse().some((function(n){if(n.component.isInside(e)&&!n.component.hidden&&!n.component.disabled)return r.push.apply(r,s()(t.getComponentsAtPosition(e,n.component))),!0})),r}}]),e}()},"./src/Circle.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Component.js"),S=n("./src/Constants.js"),_=n("./src/Utils.js"),A=n("./src/Style.js");var I=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t,n,o){var a;return s()(this,r),a=i.call(this,e,t,n,n,o),E()(l()(a),"selectable",!1),a}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){d()(v()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");_.default.drawCircle(t,this.x,this.y,this.width,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return d()(v()(r.prototype),"width",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"width",e,this,!0)}},{key:"height",get:function(){return d()(v()(r.prototype),"height",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new A.default({lineWidth:S.default.Setting.CIRCLE_DEFAULT_LINE_SIZE,color:S.default.Setting.CIRCLE_DEFAULT_COLOR,fill:S.default.Setting.CIRCLE_DEFAULT_FILL,lineCap:S.default.Setting.CIRCLE_DEFAULT_LINE_CAP,fillColor:S.default.Setting.CIRCLE_DEFAULT_FILL_COLOR})}}]),r}(k.default)},"./src/Col.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),S=n.n(k),_=n("./src/Component.js"),A=n("./src/Container.js"),I=n("./src/Utils.js"),T=n("./src/Constants.js");var w=new WeakMap,L=new WeakMap,C=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a){var u;s()(this,r);for(var c=arguments.length,h=new Array(c>5?c-5:0),d=5;d<c;d++)h[d-5]=arguments[d];return u=i.call.apply(i,[this,e,t,n,o,a].concat(h)),v()(l()(u),"selectable",!1),w.set(l()(u),{writable:!0,value:0}),L.set(l()(u),{writable:!0,value:0}),T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(u.updateInnerWidth(),u.updateInnerHeight(),u.addChangeAction((function(){u.updateInnerWidth(),u.updateInnerHeight()}))),u}return o()(r,[{key:"draw",value:function(e){var t=this;if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var n=e.canvas.getContext("2d");n.save();var i=n;if(this.isCutting&&(i=this.canvasTmp.getContext("2d")).scale(T.default.Setting.PIXEL_RATIO,T.default.Setting.PIXEL_RATIO),null!=c()(m()(r.prototype),"components",this)){var s=this.style.padding;c()(m()(r.prototype),"components",this).forEach((function(e){s=t.drawComponent(e,s,i)}))}this.isCutting&&I.default.drawImageData(n,this.canvasTmp,this.x,this.y,this.width,this.height,this.x*T.default.Setting.PIXEL_RATIO,this.y*T.default.Setting.PIXEL_RATIO,this.width*T.default.Setting.PIXEL_RATIO,this.height*T.default.Setting.PIXEL_RATIO),c()(m()(r.prototype),"drawScrollbars",this).call(this,n),n.restore()}}},{key:"drawComponent",value:function(e,t,n){return e instanceof _.default&&(e.x=this.style.padding-this.offsetScrollX,e.y=t-this.offsetScrollY,e.hidden||(this.isComponentVisible(e)&&e.draw(n),t+=e.height+this.style.spaceBetweenComponents)),t}},{key:"updateInnerHeight",value:function(){var e=0;c()(m()(r.prototype),"components",this).forEach((function(t){t.hidden||(e+=t.height)})),S()(this,w,e+this.style.spaceBetweenComponents*(c()(m()(r.prototype),"components",this).length-1)+this.style.padding)}},{key:"updateInnerWidth",value:function(){var e=0;c()(m()(r.prototype),"components",this).forEach((function(t){t.width>e&&!t.hidden&&(e=t.width)})),S()(this,L,e+this.style.padding)}},{key:"innerHeight",get:function(){return T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),E()(this,w)}},{key:"innerWidth",get:function(){return T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),E()(this,L)}},{key:"width",get:function(){var e=this.innerWidth||this.parent&&this.parent.width,t=null!=this.maxWidth?Math.min(this.maxWidth,e):null;return null!=this.minWidth?Math.max(this.minWidth,null!=t?t:e):null!=t?t:e}},{key:"height",get:function(){var e=this.innerHeight||this.parent&&this.parent.height,t=null!=this.maxHeight?Math.min(this.maxHeight,e):null;return null!=this.minHeight?Math.max(this.minHeight,null!=t?t:e):null!=t?t:e}},{key:"defaultStyle",get:function(){return c()(m()(r.prototype),"defaultStyle",this)}}]),r}(A.default)},"./src/Component.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),d=n.n(h),p=n("./src/Constants.js"),g=n("./src/Style.js"),f=n("./src/Reactor.js"),m=new WeakMap,y=new WeakMap,v=new WeakMap,b=new WeakMap,E=new WeakMap,k=new WeakMap,S=new WeakMap,_=function(){function e(t,n,i,r,o){var a=this;s()(this,e),l()(this,"selectable",!0),m.set(this,{writable:!0,value:0}),y.set(this,{writable:!0,value:0}),v.set(this,{writable:!0,value:0}),b.set(this,{writable:!0,value:0}),E.set(this,{writable:!0,value:!1}),k.set(this,{writable:!0,value:!1}),S.set(this,{writable:!0,value:void 0}),d()(this,v,t||0),d()(this,b,n||0),this.deltaX=0,this.deltaY=0,d()(this,m,i),d()(this,y,r),this.canvas,this.parent,this.style=o,this.reactor=new f.default,this.reactor.registerEvent("onClick"),this.reactor.registerEvent("onHover"),this.reactor.registerEvent("onDown"),this.reactor.registerEvent("onScroll"),this.reactor.registerEvent("onMove"),this.reactor.registerEvent("onUp"),this.reactor.registerEvent("onChange"),this.init=!1,this.hasInitEvents=!1,d()(this,k,!1),this.clicked=!1,this.hovered=!1,d()(this,E,!1),this.movable=!1,this.moving=!1,this.offsetScrollX=0,this.offsetScrollY=0,this.offsetMoveX=0,this.offsetMoveY=0,this.moveEventStartX=0,this.moveEventStartY=0,this.touchEventStartX=0,this.touchEventStartY=0,this.touchEventStartTimestamp=0,this.tooltip,this.initEvents(),this.addMoveAction((function(e,t){a.movable&&!a.disabled&&a.clicked&&(a.deltaX-=e,a.deltaY-=t)}))}return o()(e,[{key:"initEvents",value:function(){var e=this;if(!this.hasInitEvents&&null!=this.canvas){this.canvas.addEventListener("mousemove",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1,e.tooltip&&e.tooltip.disable();else{var i=e.getMousePos(t);if(e.moving=!1,e.clicked){var s=e.moveEventStartX-i.x,r=e.moveEventStartY-i.y;e.offsetMoveX+=s,e.offsetMoveY+=r,e.reactor&&e.reactor.dispatchEvent("onMove",s,r,i),e.moveEventStartX=i.x,e.moveEventStartY=i.y,e.movable&&(e.moving=!0)}n?(e.reactor&&!e.disabled&&e.reactor.dispatchEvent("onHover",i),e.tooltip&&(e.tooltip.x=i.x+10,e.tooltip.y=i.y+10,e.tooltip.enable()),e.hovered=!0):(e.hovered=!1,e.tooltip&&e.tooltip.disable())}})),this.canvas.addEventListener("click",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(t);n&&e.hovered?e.moving?e.moving=!1:(e.reactor&&e.reactor.dispatchEvent("onClick",i),e.selected=!0):(e.clicked=!1,e.selected=!1)}})),this.canvas.addEventListener("mousedown",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(t);n&&!e.moving&&(e.reactor&&e.reactor.dispatchEvent("onDown",i),e.clicked=!0,e.moveEventStartX=i.x,e.moveEventStartY=i.y)}})),this.canvas.addEventListener("mouseup",this,(function(t){if(!e.disabled){var n=e.getMousePos(t);e.reactor&&e.reactor.dispatchEvent("onUp",n),e.clicked=!1}})),this.canvas.addEventListener("wheel",this,(function(t){!e.hovered||e.disabled||e.scrollDisabled||(e.offsetScrollX+=t.deltaX,e.offsetScrollY+=t.deltaY,e.reactor&&e.reactor.dispatchEvent("onScroll",t.deltaX,t.deltaY))}));var t=function(t,n){var i=t.changedTouches[0],s=e.getMousePos(i);n?(e.hovered=!0,e.selected=!0):(e.hovered=!1,e.selected=!1),e.hovered&&!e.disabled&&(e.touchEventStartX=s.x,e.touchEventStartY=s.y,e.touchEventStartTimestamp=t.timestamp)};this.canvas.addEventListener("touchstart",this,t),this.canvas.addEventListener("touchend",this,t),this.canvas.addEventListener("touchmove",this,(function(t){!function(t){var n=t.changedTouches[0],i=e.getMousePos(n);if(e.hovered&&!e.disabled&&!e.scrollDisabled){var s=e.touchEventStartX-i.x,r=e.touchEventStartY-i.y;e.offsetScrollX+=s,e.offsetScrollY+=r,e.reactor&&e.reactor.dispatchEvent("onScroll",s,r,i),e.touchEventStartX=i.x,e.touchEventStartY=i.y}}(t),t.preventDefault()})),this.hasInitEvents=!0}}},{key:"draw",value:function(e){this.hidden||(this.initEvents(),this.disabled?(this.selected=!1,this.clicked=!1,this.hovered=!1,this.tooltip&&(this.tooltip.disabled=!0)):this.movable&&this.hovered&&(this.canvas.cursor="grab"))}},{key:"getMousePos",value:function(e){return this.canvas.getMousePos(e)}},{key:"isInside",value:function(e){return e.x>this.x&&e.x<this.x+this.width&&e.y<this.y+this.height&&e.y>this.y}},{key:"disable",value:function(){return this.disabled=!0,!0}},{key:"enable",value:function(){return this.disabled=!1,!0}},{key:"disabled",get:function(){return c()(this,E)||this.parent&&this.parent.disabled},set:function(e){e!=c()(this,E)&&(d()(this,E,e),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"setClickAction",value:function(e){this.removeAllClickActions(),this.addClickAction(e)}},{key:"addClickAction",value:function(e){this.reactor.addEventListener("onClick",e)}},{key:"removeClickAction",value:function(e){this.reactor.removeEventListener("onClick",e)}},{key:"removeAllClickActions",value:function(){this.reactor.removeAllEventListener("onClick")}},{key:"setHoverAction",value:function(e){this.removeAllHoverActions(),this.addHoverAction(e)}},{key:"addHoverAction",value:function(e){this.reactor.addEventListener("onHover",e)}},{key:"removeHoverAction",value:function(e){this.reactor.removeEventListener("onHover",e)}},{key:"removeAllHoverActions",value:function(){this.reactor.removeAllEventListener("onHover")}},{key:"setDownAction",value:function(e){this.removeAllDownActions(),this.addDownAction(e)}},{key:"addDownAction",value:function(e){this.reactor.addEventListener("onDown",e)}},{key:"removeDownAction",value:function(e){this.reactor.removeEventListener("onDown",e)}},{key:"removeAllDownActions",value:function(){this.reactor.removeAllEventListener("onDown")}},{key:"setScrollAction",value:function(e){this.removeAllScrollActions(),this.addScrollAction(e)}},{key:"addScrollAction",value:function(e){this.reactor.addEventListener("onScroll",e)}},{key:"removeScrollAction",value:function(e){this.reactor.removeEventListener("onScroll",e)}},{key:"removeAllScrollActions",value:function(){this.reactor.removeAllEventListener("onScroll")}},{key:"setMoveAction",value:function(e){this.removeAllMoveActions(),this.addMoveAction(e)}},{key:"addMoveAction",value:function(e){this.reactor.addEventListener("onMove",e)}},{key:"removeMoveAction",value:function(e){this.reactor.removeEventListener("onMove",e)}},{key:"removeAllMoveActions",value:function(){this.reactor.removeAllEventListener("onMove")}},{key:"setChangeAction",value:function(e){this.removeAllChangeActions(),this.addChangeAction(e)}},{key:"addChangeAction",value:function(e){this.reactor.addEventListener("onChange",e)}},{key:"removeChangeAction",value:function(e){this.reactor.removeEventListener("onChange",e)}},{key:"removeAllChangeActions",value:function(){this.reactor.removeAllEventListener("onChange")}},{key:"setUpAction",value:function(e){this.removeAllUpActions(),this.addUpAction(e)}},{key:"addUpAction",value:function(e){this.reactor.addEventListener("onUp",e)}},{key:"removeUpAction",value:function(e){this.reactor.removeEventListener("onUp",e)}},{key:"removeAllUpActions",value:function(){this.reactor.removeAllEventListener("onUp")}},{key:"height",get:function(){return c()(this,y)},set:function(e){e!=c()(this,y)&&(d()(this,y,e),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"width",get:function(){return c()(this,m)},set:function(e){e!=c()(this,m)&&(d()(this,m,e),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"innerWidth",get:function(){return this.width}},{key:"innerHeight",get:function(){return this.height}},{key:"minWidth",get:function(){return this.width}},{key:"minHeight",get:function(){return this.height}},{key:"x",get:function(){var e=this.parent||this.canvas;if(this.style.alignement&&e){var t=e.width,n=e.style&&e.style.padding||0;if(this.style.alignement==p.default.Alignement.CENTER)return e.x+t/2-this.width/2+this.deltaX;if(this.style.alignement==p.default.Alignement.RIGHT)return e.x+t-this.width-n+this.deltaX;if(this.style.alignement==p.default.Alignement.LEFT)return e.x+n+this.deltaX}else if(e)return e.x+c()(this,v)+this.deltaX;return c()(this,v)+this.deltaX},set:function(e){d()(this,v,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"y",get:function(){var e=this.parent||this.canvas;if(this.style.verticalAlignement&&e){var t=e.height,n=e.style&&e.style.padding||0;if(this.style.verticalAlignement==p.default.VerticalAlignement.BOTTOM)return e.y+t-this.height-n+this.deltaY;if(this.style.verticalAlignement==p.default.VerticalAlignement.CENTER)return e.y+t/2-this.height/2+this.deltaY;if(this.style.verticalAlignement==p.default.VerticalAlignement.TOP)return e.y+n+this.deltaY}else if(e)return e.y+c()(this,b)+this.deltaY;return c()(this,b)+this.deltaY},set:function(e){d()(this,b,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new g.default({padding:p.default.Setting.DEFAULT_PADDING,spaceBetweenComponents:p.default.Setting.DEFAULT_SPACING})}},{key:"style",get:function(){return c()(this,S)||this.defaultStyle},set:function(e){d()(this,S,new g.default),c()(this,S).setAll(this.defaultStyle.getStyles()),e&&e instanceof g.default&&c()(this,S).setAll(e.getStyles()),c()(this,S).component=this,this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"hidden",get:function(){return this.style&&this.style.hidden},set:function(e){e==this.disabled&&e==this.style.hidden||(this.disabled=e,this.style&&this.style.set("hidden",e),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"selected",get:function(){return c()(this,k)},set:function(e){e!=c()(this,k)&&(d()(this,k,e),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"getAllParents",value:function(){for(var e=this.parent,t=[];e;)t.push(e),e=e.parent;return t}},{key:"compareTo",value:function(e){var t=this.style&&this.style.foreground,n=e.style&&e.style.foreground,i=this.style&&this.style.zIndex,s=e.style&&e.style.zIndex;return this.parent==e?1:e.parent==this?-1:t&&!n?1:!t&&n?-1:i>s?1:i<s?-1:e.compareToComponent(this)||-this.compareToComponent(e)}},{key:"compareToComponent",value:function(e){return 0}},{key:"compareToMenu",value:function(e){return-1}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return-1}},{key:"compareToScrollbar",value:function(e){return-1}}],[{key:"compareComponents",value:function(e,t){return e.compareTo(t)}}]),e}()},"./src/Constants.js":function(e,t,n){"use strict";n.r(t),t.default={Setting:{DISABLE_OPTIMIZATIONS:!1,DISABLE_EXPERIMENTAL_OPTIMIZATIONS:!1,DISABLE_IS_COMPONENT_VISIBLE_OPTIMIZATIONS:!0,DISABLE_CONTAINERS_CUTTING:!1,ENABLE_PIXEL_RATIO_RESIZING:!0,PIXEL_RATIO:1,RESOLUTION_SCALE:1,FONT_FAMILY:"sans-serif",FONT_SIZE:28,CANVAS_WIDTH:600,CANVAS_HEIGHT:400,DEFAULT_PADDING:6,DEFAULT_SPACING:6,BUTTON_DEFAULT_BACKGROUND:"rgba(0, 0, 0, 0)",BUTTON_DEFAULT_HOVER_BACKGROUND:"#95A5A6",BUTTON_DEFAULT_CLICK_BACKGROUND:"#727F80",BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND:"#ACBEBF",INPUT_DEFAULT_FONT_COLOR:"#000",INPUT_DEFAULT_BACKGROUND_COLOR:"#fff",INPUT_DEFAULT_BORDER_COLOR:"#000",INPUT_DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",INPUT_DEFAULT_SELECT_COLOR:"#2980b9",LABEL_DEFAULT_FONT_COLOR:"#000",LINK_DEFAULT_COLOR:"#0000EE",LINK_DEFAULT_HOVER_COLOR:"#4D4DFF",LINK_DEFAULT_CLICK_COLOR:"#EE7700",MENU_DEFAULT_BACKGROUND:"rgba(44, 62, 80, 0.75)",MENU_DEFAULT_BLUR_BACKGROUND:!1,NOTIFICATION_DEFAULT_BACKGROUND:"rgba(46, 204, 113, 0.5)",NOTIFICATION_DEFAULT_ANIMATION_DURATION:500,PROGRESS_DEFAULT_BACKGROUND:"#bdc3c7",PROGRESS_DEFAULT_FOREGROUND:"#27ae60",PROGRESS_DEFAULT_ANIMATION_DURATION:2e3,TOOLTIP_DEFAULT_BACKGROUND:"rgba(255, 255, 255, 0.25)",ARROW_DEFAULT_LINE_CAP:"round",ARROW_DEFAULT_COLOR:"#FF0000",ARROW_DEFAULT_LINE_SIZE:8,ARROW_DEFAULT_HEAD_SIZE:20,CROSS_DEFAULT_LINE_CAP:"round",CROSS_DEFAULT_COLOR:"#fff",CROSS_DEFAULT_LINE_SIZE:3,SCROLLBAR_DEFAULT_BACKGROUND:"rgba(149, 165, 166, 0.75)",SCROLLBAR_DEFAULT_HOVER_BACKGROUND:"rgba(149, 165, 166, 0.9)",SCROLLBAR_DEFAULT_CLICK_BACKGROUND:"rgba(149, 165, 166, 0.5)",SCROLLBAR_DEFAULT_SIZE:10,DEFAULT_BORDER_SIZE:3,DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",DEFAULT_ANIMATION_DURATION:2e3,TRIANGLE_DEFAULT_LINE_CAP:"round",TRIANGLE_DEFAULT_COLOR:"#000",TRIANGLE_DEFAULT_FILL_COLOR:"#000",TRIANGLE_DEFAULT_LINE_SIZE:3,TRIANGLE_DEFAULT_FILL:!0,SELECT_DEFAULT_BACKGROUND:"#ecf0f1",SELECT_DEFAULT_HOVER_BACKGROUND:"#bdc3c7",SELECT_DEFAULT_CLICK_BACKGROUND:"#adb2b5",CIRCLE_DEFAULT_LINE_CAP:"round",CIRCLE_DEFAULT_COLOR:"#fff",CIRCLE_DEFAULT_FILL_COLOR:"#000",CIRCLE_DEFAULT_LINE_SIZE:3,CIRCLE_DEFAULT_FILL:!0,ERROR_MENU_BACKGROUND_COLOR:"#3498db"},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13,ECHAP:27,TAB:9},Alignement:{RIGHT:"right",LEFT:"left",CENTER:"center",DEFAULT:"default"},VerticalAlignement:{TOP:"top",CENTER:"center",BOTTOM:"bottom",DEFAULT:"default"},String:{ERROR_MESSAGE_CANVAS:"A fatal error has occurred at the JSGameTools level.",ERROR_MESSAGE_CANVAS_LABEL:":'(\nA fatal error has occurred at the JSGameTools level.",RETRY:"Retry",NOTICE_MESSAGE:"Notice:",WARNING_MESSAGE:"Warning:",ERROR_MESSAGE:"Error:",OPTIMIZATION_DISABLED:"Optimizations are disabled. You may notice low performance.",CONTAINER_CUTTING_DISABLED:"Containers cutting is disabled.",BUTTON_IMAGE_DEPRECATED:"JSGameTools.ButtonImage is deprecated. Please use a Button with an ImageContainer instead.",INPUT_FULLSCREEN:"The use of JSGameTools.Canvas is needed for Input components to properly work in fullscreen mode.",DETAILS:"Details"}}},"./src/Container.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),S=n.n(k),_=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),A=n.n(_),I=n("./src/Box.js"),T=n("./src/Component.js"),w=n("./src/Constants.js"),L=n("./src/ScrollbarHorizontal.js"),C=n("./src/ScrollbarVertical.js"),R=n("./src/Style.js"),O=n("./src/Utils.js");var x=new WeakMap,P=new WeakMap,B=new WeakMap,D=new WeakMap,N=new WeakMap,M=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t,n,o,a){var u,c;s()(this,r),c=i.call(this,e,t,null,null,a),E()(l()(c),"selectable",!1),x.set(l()(c),{writable:!0,value:[]}),P.set(l()(c),{writable:!0,value:0}),B.set(l()(c),{writable:!0,value:0}),D.set(l()(c),{writable:!0,value:0}),N.set(l()(c),{writable:!0,value:0}),E()(l()(c),"eventChangeCallback",(function(){return c.reactor.dispatchEvent("onChange",l()(c))}));for(var h=arguments.length,d=new Array(h>5?h-5:0),p=5;p<h;p++)d[p-5]=arguments[p];return(u=c).addAll.apply(u,d),c.canvasTmp=document.createElement("canvas"),A()(l()(c),P,n),A()(l()(c),B,o),c.scrollbarHorizontal=new L.default(null,null,l()(c)),c.scrollbarVertical=new C.default(null,null,l()(c)),c.addScrollAction((function(e,t){return c.controlScrolling(e,t)})),w.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||c.addChangeAction((function(e){e==c.parent&&c.components.forEach((function(e){return e&&e.reactor.dispatchEvent("onChange",l()(c))}))})),c}return o()(r,[{key:"draw",value:function(e){var t=this;if(!this.hidden){var n=e.canvas,i=n.getContext("2d");if(i.save(),this.isCutting){var s=this.canvasTmp.getContext("2d");this.canvasTmp.width=O.default.getCanvasWidth(n)*w.default.Setting.PIXEL_RATIO,this.canvasTmp.height=O.default.getCanvasHeight(n)*w.default.Setting.PIXEL_RATIO,this.canvasTmp.style.width=O.default.getCanvasWidth(n),this.canvasTmp.style.height=O.default.getCanvasHeight(n),O.default.clear(s)}this.components.forEach((function(e){t.canvas&&(e.canvas=t.canvas)})),this.controlScrolling(0,0),d()(v()(r.prototype),"draw",this).call(this,e),i.restore()}}},{key:"drawVerticalScrollBar",value:function(e){this.scrollbarVertical&&(this.scrollbarVertical.canvas=this.canvas,this.scrollbarVertical.draw(e))}},{key:"drawHorizontalScrollBar",value:function(e){this.scrollbarHorizontal&&(this.scrollbarHorizontal.canvas=this.canvas,this.scrollbarHorizontal.draw(e))}},{key:"drawScrollbars",value:function(e){this.style.scrollXDisabled||this.drawHorizontalScrollBar(e),this.style.scrollYDisabled||this.drawVerticalScrollBar(e)}},{key:"set",value:function(){for(var e=this,t=!1,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i.length==this.components.length?i.forEach((function(n,i){e.components[i]!=n&&(t=!0)})):t=!0,t&&(this.clear(),this.addAll.apply(this,i))}},{key:"add",value:function(e){S()(this,x).push(e),e.parent=this,this.canvas&&(e.canvas=this.canvas),e.addChangeAction(this.eventChangeCallback),this.reactor.dispatchEvent("onChange",this)}},{key:"addAll",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){return e.add(t)}))}},{key:"remove",value:function(e){-1!=S()(this,x).indexOf(e)&&(e.removeChangeAction(this.eventChangeCallback),A()(this,x,S()(this,x).filter((function(t){return e!=t}))),this.reactor.dispatchEvent("onChange",this))}},{key:"clear",value:function(){var e=this;S()(this,x).forEach((function(t){return e.remove(t)})),this.reactor.dispatchEvent("onChange",this)}},{key:"components",get:function(){var e=[];return S()(this,x).forEach((function(t){return e.push(t)})),e}},{key:"allComponents",get:function(){var e=this.components;return e.push(this.scrollbarHorizontal),e.push(this.scrollbarVertical),e}},{key:"getComponentsTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n={component:t,childs:[]};return t.allComponents&&t.allComponents.forEach((function(t){return n.childs.push(e.getComponentsTree(t))})),n}},{key:"disable",value:function(){var e=d()(v()(r.prototype),"disable",this).call(this);S()(this,x).forEach((function(t){t&&t.disable&&t.disable()&&(e=!0)})),e&&this.reactor.dispatchEvent("onChange",this)}},{key:"enable",value:function(){var e=d()(v()(r.prototype),"enable",this).call(this);S()(this,x).forEach((function(t){t&&t.enable&&t.enable()&&(e=!0)})),e&&this.reactor.dispatchEvent("onChange",this)}},{key:"width",get:function(){var e=this.parent&&this.parent.width,t=null!=this.maxWidth?Math.min(this.maxWidth,e):null;return null!=this.minWidth?Math.max(this.minWidth,null!=t?t:e):e}},{key:"height",get:function(){var e=this.parent&&this.parent.height,t=null!=this.maxWidth?Math.min(this.maxHeight,e):null;return null!=this.minHeight?Math.max(this.minHeight,null!=t?t:e):e}},{key:"maxWidth",get:function(){return S()(this,P)},set:function(e){e!=S()(this,P)&&(A()(this,P,e),this.reactor.dispatchEvent("onChange",this))}},{key:"maxHeight",get:function(){return S()(this,B)},set:function(e){e!=S()(this,B)&&(A()(this,B,e),this.reactor.dispatchEvent("onChange",this))}},{key:"minWidth",get:function(){return S()(this,D)},set:function(e){e!=S()(this,D)&&(A()(this,D,e),this.reactor.dispatchEvent("onChange",this))}},{key:"minHeight",get:function(){return S()(this,N)},set:function(e){e!=S()(this,N)&&(A()(this,N,e),this.reactor.dispatchEvent("onChange",this))}},{key:"updateInnerHeight",value:function(){}},{key:"updateInnerWidth",value:function(){}},{key:"canvas",get:function(){return d()(v()(r.prototype),"canvas",this)},set:function(e){var t=this;e!=this.canvas&&(c()(v()(r.prototype),"canvas",e,this,!0),S()(this,x).forEach((function(n){n.canvas=e,n.reactor&&n.reactor.dispatchEvent("onChange",t)})),this.reactor.dispatchEvent("onChange",this))}},{key:"getComponentId",value:function(e){var t=null;return S()(this,x).forEach((function(n,i){n==e&&(t=i)})),t}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.width}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.height}},{key:"controlScrolling",value:function(e,t){if(this.style.scrollYDisabled)this.offsetScrollY-=t;else if(this.scrollAreaSizeY<=0)this.offsetScrollY=0;else{var n=this.offsetScrollY/this.scrollAreaSizeY;n<=0&&t<=0?this.offsetScrollY=Math.min(0,this.y):n>1&&t>=0&&(this.offsetScrollY=this.scrollAreaSizeY)}if(this.style.scrollXDisabled)this.offsetScrollX-=e;else if(this.scrollAreaSizeX<=0)this.offsetScrollX=0;else{var i=this.offsetScrollX/this.scrollAreaSizeX;i<=0&&e<=0?this.offsetScrollX=Math.min(0,this.x):i>1&&e>=0&&(this.offsetScrollX=this.scrollAreaSizeX)}}},{key:"isComponentVisible",value:function(e){if(w.default.Setting.DISABLE_OPTIMIZATIONS)return!0;if(e instanceof T.default&&!e.hidden){if(!w.default.Setting.DISABLE_IS_COMPONENT_VISIBLE_OPTIMIZATIONS&&this.parent&&this.parent.isComponentVisible&&!this.parent.isComponentVisible(e))return!1;var t=this.width,n=this.height,i=e.width,s=e.height,r=this.canvas&&this.canvas.width||t,o=this.canvas&&this.canvas.height||n;if(e.x+i>=this.x&&e.x<=this.x+t&&e.y+s>=this.y&&e.y<=this.y+n&&e.x+i>=0&&e.x<=r&&e.y+s>=0&&e.y<=o)return!0}return!1}},{key:"isCutting",get:function(){return!w.default.Setting.DISABLE_CONTAINERS_CUTTING&&(this.maxWidth&&this.innerWidth>this.maxWidth||this.maxHeight&&this.innerHeight>this.maxHeight)&&null!=this.canvasTmp}},{key:"defaultStyle",get:function(){return new R.default({padding:0,spaceBetweenComponents:w.default.Setting.DEFAULT_SPACING})}}],[{key:"sortComponentsTree",value:function(e,t){return e.component.compareTo(t.component)}}]),r}(I.default)},"./src/Cross.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Component.js"),S=n("./src/Constants.js"),_=n("./src/Utils.js"),A=n("./src/Style.js");var I=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t,n,o,a){var u;return s()(this,r),u=i.call(this,e,t,n,o,a),E()(l()(u),"selectable",!1),u}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){d()(v()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");_.default.drawCross(t,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return d()(v()(r.prototype),"width",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"width",e,this,!0)}},{key:"height",get:function(){return d()(v()(r.prototype),"height",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new A.default({lineWidth:S.default.Setting.CROSS_DEFAULT_LINE_SIZE,color:S.default.Setting.CROSS_DEFAULT_COLOR,lineCap:S.default.Setting.CROSS_DEFAULT_LINE_CAP})}}]),r}(k.default)},"./src/EasingFunctions.js":function(e,t,n){"use strict";n.r(t),t.default={easeInCubic:function(e){return e*e*e},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInOutBack:function(e){var t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}}},"./src/ErrorScreen.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(h),p=n("./src/Scene.js"),g=n("./src/Constants.js"),f=n("./src/Style.js"),m=n("./src/Menu.js"),y=n("./src/Label.js"),v=n("./src/Button.js"),b=n("./src/Row.js");var E=function(e){l()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return c()(this,e)});function r(e){var t;s()(this,r),(t=i.call(this)).canvas=e,t.labelDetailsSceneError=new y.default("",null,null,new f.default({fontColor:"white",alignement:"center",fontSize:g.default.Setting.FONT_SIZE/1.75})),t.labelDetailsSceneError.hidden=!0;var n=new v.default(null,null,null,null,new f.default({backgroundColor:g.default.Setting.BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND}),new y.default(g.default.String.RETRY,null,null,new f.default({fontColor:"white",alignement:"center"}))),o=new v.default(null,null,null,null,new f.default({backgroundColor:g.default.Setting.BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND}),new y.default(g.default.String.DETAILS,null,null,new f.default({fontColor:"white",alignement:"center"}))),a=new b.default(null,null,null,0,new f.default({alignement:"center"}),t.labelDetailsSceneError),l=new m.default(new f.default({spaceBetweenComponents:15,backgroundColor:g.default.Setting.ERROR_MENU_BACKGROUND_COLOR}),new y.default(g.default.String.ERROR_MESSAGE_CANVAS_LABEL,null,null,new f.default({fontColor:"white",alignement:"center"})),a,new b.default(null,null,null,null,new f.default({alignement:"center"}),n,o));return l.enable(),n.addClickAction((function(){t.canvas.hasError=!1,t.canvas.scene=t.canvas.scenePrevious,t.labelDetailsSceneError.hidden=!0,a.maxHeight=0})),o.addClickAction((function(){t.labelDetailsSceneError.hidden=!t.labelDetailsSceneError.hidden,a.maxHeight=t.labelDetailsSceneError.hidden?0:100})),t.add(l),t}return o()(r,[{key:"errorText",get:function(){return this.labelDetailsSceneError.text},set:function(e){this.labelDetailsSceneError.text=e}}]),r}(p.default)},"./src/Event.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=function(){function e(t){s()(this,e),this.name=t,this.callbacks=[]}return o()(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}},{key:"removeCallback",value:function(e){this.callbacks.filter((function(t){return t!=e}))}},{key:"removeAllCallbacks",value:function(){this.callbacks=[]}}]),e}()},"./src/FPSMeter.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y);var b=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o){var a;return s()(this,r),a=i.call(this,null,t,n,o),v()(l()(a),"selectable",!1),a.displayFrames=e||!1,a.frames=0,a.lastFrame=0,a.currentFPS=0,a.intervalCountFPS=setInterval((function(){return a.countFPS()}),1e3),a}return o()(r,[{key:"draw",value:function(e){this.hidden||(this.text="FPS: "+this.currentFPS+(this.displayFrames?" / Frames: "+this.frames:""),c()(m()(r.prototype),"draw",this).call(this,e),this.frames++)}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frames-this.lastFrame),this.lastFrame=this.frames}}]),r}(n("./src/Label.js").default)},"./src/ImageContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Utils.js");var S=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t,n,o,a,u,c){var h;return s()(this,r),h=i.call(this,t,n,o,a,u),E()(l()(h),"selectable",!1),h.image,h.imgSrc,h.imageLoader=c,e instanceof Image?(h.image=e,h.imgSrc=e.src):h.imgSrc=e,h}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){d()(v()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image&&this.drawImage(t),t.restore()}}},{key:"drawImage",value:function(e){k.default.drawImage(e,this.image,Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"sizes",get:function(){var e=d()(v()(r.prototype),"width",this),t=d()(v()(r.prototype),"height",this);if(this.imageLoader&&this.loadImage(this.imageLoader),this.image&&(this.image.width>d()(v()(r.prototype),"width",this)||this.image.height>d()(v()(r.prototype),"height",this))){var n=this.image.width/this.image.height;e=Math.floor(d()(v()(r.prototype),"width",this)/1.25),t=Math.floor(e/n)}return{width:e,height:t}}},{key:"height",get:function(){return this.sizes.height},set:function(e){c()(v()(r.prototype),"height",e,this,!0)}},{key:"width",get:function(){return this.sizes.width},set:function(e){c()(v()(r.prototype),"width",e,this,!0)}},{key:"loadImage",value:function(e){this.image=e.get(this.imgSrc)}}]),r}(n("./src/Component.js").default)},"./src/ImageLoader.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./src/Utils.js"),l=function(){function e(){s()(this,e),this.images={},this.imagesResized={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}return o()(e,[{key:"load",value:function(e,t){var n=this;if(this.firstImage&&(this.nbImagesToLoad=e.length,this.firstImage=!1),!(e.length>0))return t();this.loadImage(e[0],(function(i){if(1!=i)return n.hasError=!0,t();e.shift(),n.load(e,t)}))}},{key:"loadImage",value:function(e,t){var n=this;this.triedLoading++;var i=new Image;i.src=e,i.onload=function(){return null==n.images?t(!1):(n.images[e]=i,n.triedLoading=0,t(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[e]=i),n.triedLoading=0,t(!1);setTimeout((function(){n.loadImage(e,t)}),250)}}},{key:"get",value:function(e,t,n){if(null!=this.images&&this.images.hasOwnProperty(e)){var i=this.images[e];if(!t&&!n||i.width==t&&i.height==n)return i;var s=Math.round(t),r=Math.round(n),o=e+"@"+s+"-"+r;if(!this.imagesResized.hasOwnProperty(o)){var l=document.createElement("canvas"),u=l.getContext("2d");l.width=s,l.height=r,a.default.drawImage(u,i,0,0,s,r,0,0,i.width,i.height),this.imagesResized[o]=l}return this.imagesResized[o]}return null}},{key:"clear",value:function(){this.images=null}}]),e}()},"./src/Input.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),S=n.n(k),_=n("./src/Constants.js"),A=n("./src/Utils.js"),I=n("./src/Box.js"),T=n("./src/Style.js");var w=new WeakMap,L=new WeakMap,C=new WeakMap,R=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a,u){var c;s()(this,r),c=i.call(this,e,t,n,o,a),v()(l()(c),"selectable",!0),w.set(l()(c),{writable:!0,value:0}),L.set(l()(c),{writable:!0,value:0}),C.set(l()(c),{writable:!0,value:0}),c.text=u||"",S()(l()(c),w,0),S()(l()(c),C,0),S()(l()(c),L,0),c.lastInputText=!1,c.offsetX=0,c.lastTime=0,c.totalTime=0,c.clickCurrentPosition=null,c.textCache=null,c.input=document.createElement("input"),c.input.setAttribute("type","text"),c.input.style.position="absolute",c.input.style.left="-9999px",c.input.tabIndex=-1,c.input.value=c.text,c.input.addEventListener("blur",(function(){return c.selected=!1})),c.input.addEventListener("focus",(function(){return c.selected=!0})),c.input.addEventListener("input",(function(){c.totalTime=0,c.lastInputText=!0,c.positionStart=c.input.selectionStart,c.positionEnd=c.input.selectionEnd})),document.body.appendChild(c.input),c.appendToCanvas=!1,c.noticeLogged=!1,c.canvasTmp=document.createElement("canvas");var h=function(e,t,n){if(n){var i=c.getLetterClicked(n);null!=i&&(i>c.positionStartClick?c.setSelectionRange(c.positionStartClick,i,"forward"):i<c.positionStartClick&&c.setSelectionRange(i,c.positionStartClick,"backward"))}};return c.addDownAction((function(e){var t=c.getLetterClicked(e);null!=t&&(c.positionStartClick=t,c.setSelectionRange(t,t,"forward")),c.totalTime=0})),c.addClickAction((function(){return c.click()})),c.addMoveAction(h),c.addScrollAction(h),c}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas,n=t.getContext("2d");n.save(),this.input.selectionEnd!=this.positionEnd&&(this.totalTime=0),this.canvas&&this.canvas.container&&!this.appendToCanvas?(document.body.removeChild(this.input),this.canvas.container.appendChild(this.input),this.appendToCanvas=!0):this.canvas||this.noticeLogged||(console&&console.warn&&console.warn(_.default.String.WARNING_MESSAGE+" "+_.default.String.INPUT_FULLSCREEN),this.noticeLogged=!0),this.selected&&!this.disabled?this.click():this.blur(),this.text=this.input.value,this.positionStart=this.input.selectionStart,this.positionEnd=this.input.selectionEnd;var i=performance.now(),s=0;this.lastTime>0&&(s=i-this.lastTime),this.lastTime=i,this.totalTime+=s,this.drawBackground(n),this.drawBorder(n),this.canvasTmp.width=A.default.getCanvasWidth(t)*_.default.Setting.PIXEL_RATIO,this.canvasTmp.height=A.default.getCanvasHeight(t)*_.default.Setting.PIXEL_RATIO,this.canvasTmp.style.width=A.default.getCanvasWidth(t),this.canvasTmp.style.height=A.default.getCanvasHeight(t);var o=this.canvasTmp.getContext("2d");A.default.clear(o),o.scale(_.default.Setting.PIXEL_RATIO,_.default.Setting.PIXEL_RATIO),this.updateTextCache(this.x+5),this.autoScroll(),this.drawText(o,this.x+5),A.default.drawImageData(n,this.canvasTmp,this.x+this.style.borderSize,this.y+this.style.borderSize,this.width-2*this.style.borderSize,this.height-2*this.style.borderSize,(this.x+this.style.borderSize)*_.default.Setting.PIXEL_RATIO,(this.y+this.style.borderSize)*_.default.Setting.PIXEL_RATIO,(this.width-2*this.style.borderSize)*_.default.Setting.PIXEL_RATIO,(this.height-2*this.style.borderSize)*_.default.Setting.PIXEL_RATIO),(this.hovered||this.clicked)&&this.canvas&&(this.canvas.cursor="text"),this.selected||(this.totalTime=0),n.restore()}}},{key:"drawText",value:function(e,t){for(var n=-1;n<this.text.length;n++){if(n>-1){var i=this.textCache.letters[n].sizes,s=t-this.offsetX,r=this.y+this.style.borderSize;this.isLetterVisible(n)&&(this.positionStart!=this.positionEnd&&n>=this.positionStart&&n<this.positionEnd&&this.drawHighlight(e,t,i),A.default.drawText(e,this.text[n],this.style.fontColor,this.style.fontSize,this.style.fontFamily,"default","default",s,r,!1)),t+=i.width+this.style.spaceBetweenComponents}this.positionEnd==n+1&&this.selected&&(this.totalTime<=500?this.drawCursor(e,t):this.totalTime>1e3&&(this.totalTime=0))}return t}},{key:"drawCursor",value:function(e,t){e.strokeStyle=this.style.borderColor,e.lineWidth=1,e.beginPath(),e.moveTo(t-this.offsetX,this.y+3),e.lineTo(t-this.offsetX,this.y+this.style.fontSize),e.stroke()}},{key:"drawHighlight",value:function(e,t,n){e.fillStyle=this.style.selectColor,e.fillRect(t-this.offsetX,this.y+this.style.borderSize,n.width+2,this.height-2*this.style.borderSize-1)}},{key:"updateTextCache",value:function(e){var t=this.canvas?this.canvas.getContext("2d"):null,n=this.canvas&&this.canvas.scene||this.canvas||t&&t.canvas;if(t&&(_.default.Setting.DISABLE_OPTIMIZATIONS||!this.textCache||this.textCache.fontSize!=this.style.fontSize||this.textCache.fontFamily!=this.style.fontFamily||this.text!=this.textCache.text||n&&n.width!=this.textCache.parentWidth)){this.textCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,text:this.text,parentWidth:n.width,letters:[]};for(var i=0;i<this.text.length;i++){var s=A.default.wrapTextLines(t,this.text[i],this.width,this.style.fontSize,this.style.fontFamily,!0);this.textCache.letters[i]={text:this.text[i],currentX:e,sizes:s},e+=s.width+this.style.spaceBetweenComponents}}}},{key:"isClickCurrentPosition",value:function(e,t,n){return e.x+this.offsetX<=t+n.width+this.style.spaceBetweenComponents&&e.x+this.offsetX>=t}},{key:"isClickAfterPosition",value:function(e,t,n){return e.x+this.offsetX>=t+n.width+this.style.spaceBetweenComponents}},{key:"getLetterClicked",value:function(e){if(this.textCache)for(var t=0;t<this.text.length;t++){var n=this.textCache.letters[t];if(this.isClickCurrentPosition(e,Math.round(n.currentX),n.sizes))return t;if(t>=this.text.length-1&&this.isClickAfterPosition(e,Math.round(n.currentX),n.sizes))return t+1}}},{key:"cursorPosition",get:function(){if(this.textCache){var e=this.positionEnd-1;if(this.positionEnd!=this.positionStart&&this.positionEnd==this.positionStartClick&&this.positionStart<this.positionStartClick&&(e=this.positionStart-1),e<0)return{currentLetter:this.textCache.letters[0],x:this.x+this.style.borderSize};var t=this.textCache.letters[e];if(t)return{currentLetter:t,x:t.currentX}}}},{key:"isLetterVisible",value:function(e){if(this.textCache){var t=this.textCache.letters[e];if(t){var n=t.currentX-this.offsetX;if(n>=this.x-t.sizes.width&&n<=this.x+this.width)return!0}}return!1}},{key:"autoScroll",value:function(){if(this.textCache){var e=this.cursorPosition,t=e.currentLetter?e.currentLetter.sizes.width:0,n=e.x+t+this.style.spaceBetweenComponents,i=e.x-t-this.style.spaceBetweenComponents,s=Math.max(0,Math.round(n-this.x-this.width+this.style.borderSize+2*this.style.spaceBetweenComponents)),r=Math.max(0,Math.round(i-this.x-this.style.borderSize-2*this.style.spaceBetweenComponents));if(this.offsetX<0&&(this.offsetX=0),n-this.offsetX>=this.x+this.width-this.style.borderSize)return this.offsetX=s,s;if(i-this.offsetX<=this.x+this.style.borderSize)return this.offsetX=r,r}return!1}},{key:"click",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"positionStart",get:function(){return E()(this,w)},set:function(e){this.input.selectionStart=e,S()(this,w,e)}},{key:"positionStartClick",get:function(){return E()(this,L)},set:function(e){S()(this,L,e)}},{key:"positionEnd",get:function(){return E()(this,C)},set:function(e){this.input.selectionEnd=e,S()(this,C,e)}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n),this.positionStart=e,this.positionEnd=t}},{key:"height",get:function(){var e=this.style&&this.style.borderSize?this.style.borderSize:0;return c()(m()(r.prototype),"height",this)?c()(m()(r.prototype),"height",this):this.style.fontSize+2*e}},{key:"defaultStyle",get:function(){return new T.default({fontSize:Math.floor(_.default.Setting.FONT_SIZE/1.25),fontFamily:_.default.Setting.FONT_FAMILY,fontColor:_.default.Setting.INPUT_DEFAULT_FONT_COLOR,backgroundColor:_.default.Setting.INPUT_DEFAULT_BACKGROUND_COLOR,borderColor:_.default.Setting.INPUT_DEFAULT_BORDER_COLOR,borderColorSelected:_.default.Setting.INPUT_DEFAULT_BORDER_COLOR_SELECTED,selectColor:_.default.Setting.INPUT_DEFAULT_SELECT_COLOR,spaceBetweenComponents:1})}}]),r}(I.default)},"./src/Label.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),S=n.n(k),_=n("./src/Constants.js"),A=n("./src/Utils.js"),I=n("./src/Component.js"),T=n("./src/Style.js");var w=new WeakMap,L=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o){var a;return s()(this,r),a=i.call(this,t,n,null,null,o),v()(l()(a),"selectable",!1),w.set(l()(a),{writable:!0,value:""}),a.text=e,a.sizesCache=null,_.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(a.updateSizes(),a.addChangeAction((function(e){a.updateSizes(),e!=a.parent&&a.parent&&a.parent.reactor&&a.parent.reactor.dispatchEvent("onChange",l()(a))}))),a}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),A.default.drawText(t,this.text,this.style.fontColor,this.style.fontSize,this.style.fontFamily,this.style.alignement,this.style.verticalAlignement,this.x,this.y,this.style.wrap,this.style.bold,this.style.underline,null,this.parent),t.restore()}}},{key:"text",get:function(){return S()(this,w)},set:function(e){e!=S()(this,w)&&(E()(this,w,e),this.reactor.dispatchEvent("onChange",this))}},{key:"updateSizes",value:function(){var e=this.canvas?this.canvas.getContext("2d"):null,t=this.canvas&&this.canvas.scene||this.canvas||e&&e.canvas||this.parent;if(e&&(_.default.Setting.DISABLE_OPTIMIZATIONS||!this.sizesCache||this.sizesCache.fontSize!=this.style.fontSize||this.sizesCache.fontFamily!=this.style.fontFamily||this.sizesCache.wrap!=this.style.wrap||this.text!=this.sizesCache.text||t&&t.width!=this.sizesCache.parentWidth||null==this.sizesCache.value)){var n=A.default.wrapTextLines(e,this.text,null,this.style.fontSize,this.style.fontFamily,!this.style.wrap);t&&(this.sizesCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,wrap:this.style.wrap,text:this.text,parentWidth:t.width,value:n},t.reactor.dispatchEvent("onChange",this))}return this.sizesCache&&this.sizesCache.value}},{key:"sizes",get:function(){return _.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateSizes(),this.sizesCache?this.sizesCache.value:null}},{key:"height",get:function(){var e=this.sizes;return e&&e.height}},{key:"width",get:function(){var e=this.sizes;return e&&e.width}},{key:"defaultStyle",get:function(){return new T.default({fontColor:_.default.Setting.LABEL_DEFAULT_FONT_COLOR,wrap:!0,bold:!1,underline:!1})}}]),r}(I.default)},"./src/Link.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./src/Constants.js"),E=n("./src/Label.js"),k=n("./src/Style.js");n("./src/Utils.js");var S=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o){var a;return s()(this,r),a=i.call(this,e,t,n,o),v()(l()(a),"selectable",!0),a.initialColor=a.style.fontColor,a.initialUnderline=a.style.underline,a}return o()(r,[{key:"draw",value:function(e){this.hidden||(c()(m()(r.prototype),"draw",this).call(this,e),this.clicked?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorDown),this.movable||(this.canvas.cursor="pointer")):this.hovered||this.selected?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorHover),this.hovered&&!this.movable&&(this.canvas.cursor="pointer")):(this.style.set("underline",this.initialUnderline),this.style.set("fontColor",this.initialColor)),this.init=!0)}},{key:"defaultStyle",get:function(){return new k.default({fontColor:b.default.Setting.LINK_DEFAULT_COLOR,fontColorHover:b.default.Setting.LINK_DEFAULT_HOVER_COLOR,fontColorDown:b.default.Setting.LINK_DEFAULT_CLICK_COLOR,wrap:!0,bold:!1,underline:!0})}}]),r}(E.default)},"./src/Menu.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Constants.js"),S=n("./src/Utils.js"),_=n("./src/Component.js"),A=n("./src/Col.js"),I=n("./src/Style.js");var T=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e){var t;s()(this,r);for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t=i.call.apply(i,[this,0,0,null,null,e].concat(o)),E()(l()(t),"selectable",!1),t.lastKey=null==t.lastKey?-1:t.lastKey,t.selectedComponent=null==t.selectedComponent?0:t.selectedComponent,t.disable(),t}return o()(r,[{key:"draw",value:function(e){var t=this;if(!this.hidden){var n=e.canvas.getContext("2d");this.style.blurBackground&&this.drawBlur(n),n.save(),this.drawComponents(n),this.init||(document.addEventListener("keydown",(function(e){t.disabled||(t.lastKey=e.keyCode,t.lastKey!=k.default.Key.UP&&t.lastKey!=k.default.Key.BOTTOM||e.preventDefault())})),this.init=!0);var i=!1;null!=this.components&&(this.lastKey==k.default.Key.UP?(this.select(this.selectedComponent-1),i=!0):this.lastKey==k.default.Key.BOTTOM?(this.select(this.selectedComponent+1),i=!0):this.lastKey==k.default.Key.ECHAP?(this.disable(),i=!0):this.components.forEach((function(e,n){e.selected&&t.select(n)})),this.components.forEach((function(e,n){if(e instanceof _.default){if(i)if(t.selectedComponent==n){if(e.selectable&&(e.selected=!0),!t.isComponentVisible(e)){var s=e.height,r=t.maxHeight-t.offsetScrollY-(e.y+s);t.offsetScrollY=-r,t.controlScrolling(null,-r)}}else e.selected=!1;if(t.selectedComponent==n&&t.lastKey==k.default.Key.ENTER&&e.reactor&&!e.disabled)return t.lastKey=-1,t.selectedComponent=0,void e.reactor.dispatchEvent("onClick")}}))),n.restore(),this.lastKey=-1}}},{key:"drawComponents",value:function(e){d()(v()(r.prototype),"draw",this).call(this,e)}},{key:"drawBlur",value:function(e){S.default.blurCanvas(e,5)}},{key:"drawBackground",value:function(e){e.fillStyle=this.style.backgroundColor,e.fillRect(this.parent?this.parent.x:0,this.parent?this.parent.y:0,this.maxWidth,this.maxHeight)}},{key:"disable",value:function(){d()(v()(r.prototype),"disable",this).call(this),this.components.forEach((function(e){return e&&e.disable&&e.disable()}))}},{key:"enable",value:function(){d()(v()(r.prototype),"enable",this).call(this),this.components.forEach((function(e){return e&&e.enable&&e.enable()}))}},{key:"select",value:function(e){if(this.selectedComponent=e,!(this.components.filter((function(e){return e.selectable})).length<=0)&&(this.selectedComponent>=this.components.length?this.selectedComponent=0:this.selectedComponent<0&&(this.selectedComponent=this.components.length-1),this.components[this.selectedComponent]&&!this.components[this.selectedComponent].selectable)){if(this.lastKey==k.default.Key.UP)return this.select(this.selectedComponent-1);if(this.lastKey==k.default.Key.BOTTOM)return this.select(this.selectedComponent+1)}}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.maxWidth}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.maxHeight}},{key:"maxHeight",get:function(){return d()(v()(r.prototype),"maxHeight",this)||this.canvas&&this.canvas.scene&&this.canvas.scene.height}},{key:"maxWidth",get:function(){return this.canvas&&this.canvas.scene&&this.canvas.scene.width}},{key:"minWidth",get:function(){return this.parent?this.parent.width:0}},{key:"defaultStyle",get:function(){return new I.default({blurBackground:k.default.Setting.MENU_DEFAULT_BLUR_BACKGROUND,backgroundColor:k.default.Setting.MENU_DEFAULT_BACKGROUND,verticalAlignement:k.default.VerticalAlignement.CENTER,scrollXDisabled:!0})}},{key:"compareToComponent",value:function(e){return e.compareToMenu(this)}},{key:"compareToMenu",value:function(e){return 0}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return 1}},{key:"hidden",get:function(){return d()(v()(r.prototype),"hidden",this)||this.disabled},set:function(e){c()(v()(r.prototype),"hidden",e,this,!0),this.disabled=e}},{key:"isInside",value:function(e){return!this.hidden}}]),r}(A.default)},"./src/NotificationMessage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var i=n("./node_modules/@babel/runtime/helpers/construct.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/get.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/set.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/inherits.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),S=n.n(k),_=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),A=n.n(_),I=n("./src/Constants.js"),T=n("./src/Col.js"),w=n("./src/Button.js"),L=n("./src/Cross.js"),C=n("./src/Style.js");var R=function(e){v()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=S()(t);if(n){var s=S()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return E()(this,e)});function r(e,t,n){var s;l()(this,r);for(var o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return s=i.call.apply(i,[this,0,0,null,null,e].concat(a)),A()(d()(s),"selectable",!1),s.delayBeforeClosing=null==t?5:t,s.timeLastFrame=0,s.animationTime=0,s.closed=!0,s.closing=!1,s.easingFunction=n,s.closeButton=new w.default(null,null,null,null,new C.default({alignement:I.default.Alignement.RIGHT,verticalAlignement:I.default.VerticalAlignement.TOP,padding:10}),new L.default(null,null,10,10)),s.add(s.closeButton),s}return c()(r,[{key:"draw",value:function(e){var t=this;if(!this.hidden){this.closeButton.canvas=this.canvas;var n=e.canvas.getContext("2d");n.save(),this.init||(this.timeLastFrame=performance.now()),null!=this.closeButton&&this.closeButton.setClickAction((function(){t.close()}));var i=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.closing?this.style.disableAnimation?this.animationTime=-1:this.animationTime-=i:this.animationTime+=i,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed?this.disableCloseButton():(this.drawComponents(n),null!=this.closeButton&&(this.closeButton.y=this.y+this.style.padding/2,this.closeButton.draw(n)),this.enableCloseButton()),n.restore(),this.init=!0}}},{key:"offsetY",get:function(){var e=1;return this.style.disableAnimation||(e=this.animationTime/this.style.animationDuration,this.easingFunction&&(e=this.easingFunction(e))),e}},{key:"y",get:function(){var e=this.offsetY;return this.style.verticalAlignement==I.default.VerticalAlignement.TOP?this.height*(e<=1?e:1)-this.height:this.canvas.scene.height-this.height*(e<=1?e:1)},set:function(e){m()(S()(r.prototype),"y",e,this,!0)}},{key:"drawComponents",value:function(e){g()(S()(r.prototype),"draw",this).call(this,e)}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.style.animationDuration)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof w.default&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof w.default&&this.closeButton.enable()}},{key:"copy",value:function(){return s()(r,[this.style.copy(),this.delayBeforeClosing,this.easingFunction].concat(o()(this.components)))}},{key:"width",get:function(){return this.canvas&&this.canvas.scene?this.canvas.scene.width:null}},{key:"height",get:function(){return g()(S()(r.prototype),"height",this)-(this.closeButton?this.closeButton.height:0)}},{key:"defaultStyle",get:function(){return new C.default({alignement:I.default.Alignement.CENTER,backgroundColor:I.default.Setting.NOTIFICATION_DEFAULT_BACKGROUND,animationDuration:I.default.Setting.NOTIFICATION_DEFAULT_ANIMATION_DURATION})}},{key:"hidden",get:function(){return g()(S()(r.prototype),"hidden",this)||this.closed},set:function(e){m()(S()(r.prototype),"hidden",e,this,!0),e?this.forceClose():this.open()}},{key:"compareToComponent",value:function(e){return e.compareToNotification(this)}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return 0}},{key:"compareToMenu",value:function(e){return-1}}]),r}(T.default)},"./src/ProgressBar.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),S=n.n(k),_=n("./src/Box.js"),A=n("./src/Constants.js"),I=n("./src/Style.js");var T=new WeakMap,w=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a,u,c){var h;return s()(this,r),h=i.call(this,e,t,n,o,a),T.set(l()(h),{writable:!0,value:0}),v()(l()(h),"selectable",!1),h.percent=null==u?0:u,S()(l()(h),T,h.percent),h.easingFunction=c,h.lastTime=0,h.totalTime=0,h}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save();var n=performance.now(),i=0;E()(this,T)==this.percent||this.style.disableAnimation?(this.totalTime=0,this.lastTime=0):(this.lastTime>0&&(i=n-this.lastTime),this.totalTime+=i,this.totalTime>=this.style.animationDuration?(S()(this,T,this.percent),this.totalTime=0,this.lastTime=0):this.lastTime=n),this.drawBackground(t),this.drawForeground(t,this.widthForeground),t.restore()}}},{key:"animationPercent",get:function(){var e=E()(this,T)==this.percent||this.style.disableAnimation?1:this.totalTime/this.style.animationDuration;return this.easingFunction&&(e=this.easingFunction(e)),e}},{key:"widthForeground",get:function(){return Math.max(0,Math.min(this.width,this.width*(E()(this,T)+(this.percent-E()(this,T))*this.animationPercent)))}},{key:"drawForeground",value:function(e,t){e.save(),e.fillStyle=this.style.foregroundColor,e.fillRect(this.x,this.y,t,this.height),e.restore()}},{key:"defaultStyle",get:function(){return new I.default({backgroundColor:A.default.Setting.PROGRESS_DEFAULT_BACKGROUND,foregroundColor:A.default.Setting.PROGRESS_DEFAULT_FOREGROUND,animationDuration:A.default.Setting.PROGRESS_DEFAULT_ANIMATION_DURATION})}}]),r}(_.default)},"./src/Reactor.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./src/Event.js"),l=function(){function e(){s()(this,e),this.events={}}return o()(e,[{key:"registerEvent",value:function(e){this.events[e]=new a.default(e)}},{key:"dispatchEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].callbacks.forEach((function(e){return e&&e.apply(void 0,n)}))}},{key:"addEventListener",value:function(e,t){this.events[e]&&this.events[e].registerCallback(t)}},{key:"removeEventListener",value:function(e,t){this.events[e]&&this.events[e].removeCallback(t)}},{key:"removeAllEventListener",value:function(e){this.events[e]&&this.events[e].removeAllCallbacks()}}]),e}()},"./src/ReactorCanvas.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(h);var p=function(e){l()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return c()(this,e)});function r(){return s()(this,r),i.apply(this,arguments)}return o()(r,[{key:"registerEvent",value:function(e){this.events[e]||(this.events[e]=[])}},{key:"dispatchEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].forEach((function(e){return e&&e.callback&&e.callback.apply(e,n)}))}},{key:"dispatchEventComponent",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];this.events[e]&&this.events[e].forEach((function(e){return e&&e.callback&&e.component==t&&e.callback.apply(e,i)}))}},{key:"addEventListener",value:function(e,t,n){this.events[e]&&this.events[e].push({component:t,callback:n})}},{key:"removeEventListener",value:function(e,t){this.events[e]&&this.events[e].filter((function(e){return e&&e.callback!=t}))}},{key:"removeEventListenerComponent",value:function(e,t){this.events[e]&&this.events[e].filter((function(e){return e&&e.component!=t}))}},{key:"removeAllEventListener",value:function(){this.events=[]}}]),r}(n("./src/Reactor.js").default)},"./src/Row.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),S=n.n(k),_=n("./src/Component.js"),A=n("./src/Container.js"),I=n("./src/Utils.js"),T=n("./src/Constants.js");var w=new WeakMap,L=new WeakMap,C=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n,o,a){var u;s()(this,r);for(var c=arguments.length,h=new Array(c>5?c-5:0),d=5;d<c;d++)h[d-5]=arguments[d];return u=i.call.apply(i,[this,e,t,n,o,a].concat(h)),v()(l()(u),"selectable",!1),w.set(l()(u),{writable:!0,value:0}),L.set(l()(u),{writable:!0,value:0}),T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(u.updateInnerWidth(),u.updateInnerHeight(),u.addChangeAction((function(){u.updateInnerWidth(),u.updateInnerHeight()}))),u}return o()(r,[{key:"draw",value:function(e){var t=this;if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var n=e.canvas.getContext("2d");n.save();var i=n;if(this.isCutting&&(i=this.canvasTmp.getContext("2d")).scale(T.default.Setting.PIXEL_RATIO,T.default.Setting.PIXEL_RATIO),null!=c()(m()(r.prototype),"components",this)){var s=this.style.padding;c()(m()(r.prototype),"components",this).forEach((function(e){s=t.drawComponent(e,s,i)}))}this.isCutting&&I.default.drawImageData(n,this.canvasTmp,this.x,this.y,this.width,this.height,this.x*T.default.Setting.PIXEL_RATIO,this.y*T.default.Setting.PIXEL_RATIO,this.width*T.default.Setting.PIXEL_RATIO,this.height*T.default.Setting.PIXEL_RATIO),c()(m()(r.prototype),"drawScrollbars",this).call(this,n),n.restore()}}},{key:"drawComponent",value:function(e,t,n){return e instanceof _.default&&(e.x=t-this.offsetScrollX,e.y=this.style.padding-this.offsetScrollY,e.hidden||(this.isComponentVisible(e)&&e.draw(n),t+=e.width+this.style.spaceBetweenComponents)),t}},{key:"updateInnerHeight",value:function(){var e=0;c()(m()(r.prototype),"components",this).forEach((function(t){t.height>e&&!t.hidden&&(e=t.height)})),S()(this,w,e+this.style.padding)}},{key:"updateInnerWidth",value:function(){var e=0;c()(m()(r.prototype),"components",this).forEach((function(t){t.hidden||(e+=t.width)})),S()(this,L,e+this.style.spaceBetweenComponents*(c()(m()(r.prototype),"components",this).length-1)+this.style.padding)}},{key:"innerHeight",get:function(){return T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),E()(this,w)}},{key:"innerWidth",get:function(){return T.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),E()(this,L)}},{key:"width",get:function(){var e=this.innerWidth||this.parent&&this.parent.width,t=null!=this.maxWidth?Math.min(this.maxWidth,e):null;return null!=this.minWidth?Math.max(this.minWidth,null!=t?t:e):null!=t?t:e}},{key:"height",get:function(){var e=this.innerHeight||this.parent&&this.parent.height,t=null!=this.maxHeight?Math.min(this.maxHeight,e):null;return null!=this.minHeight?Math.max(this.minHeight,null!=t?t:e):null!=t?t:e}},{key:"defaultStyle",get:function(){return c()(m()(r.prototype),"defaultStyle",this)}}]),r}(A.default)},"./src/Scene.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=(n("./src/Input.js"),n("./src/Container.js")),E=n("./src/Utils.js"),k=n("./src/Style.js"),S=n("./src/Constants.js");var _=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(){var e,t;return s()(this,r),t=i.call(this),v()(l()(t),"selectable",!1),v()(l()(t),"enableEvents",!1),(e=t).addAll.apply(e,arguments),t}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){c()(m()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),this.canvas.cursor="default";var n=t;(this.maxWidth||this.maxHeight)&&(n=this.canvasTmp.getContext("2d")),this.drawComponents(n),(this.maxWidth||this.maxHeight)&&E.default.drawImageData(t,this.canvasTmp,this.x,this.y,this.width,this.height,this.x,this.y,this.width,this.height),c()(m()(r.prototype),"drawScrollbars",this).call(this,t),t.restore()}}},{key:"drawComponents",value:function(e){this.components.sort(r.compareComponents).forEach((function(t){return t.draw(e)}))}},{key:"defaultStyle",get:function(){return new k.default({padding:S.default.Setting.DEFAULT_PADDING})}}]),r}(b.default)},"./src/Scrollbar.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y),b=n("./src/Constants.js"),E=n("./src/Box.js"),k=n("./src/Style.js");var S=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n){var o;return s()(this,r),o=i.call(this,null,null,null,null,t),v()(l()(o),"selectable",!0),o.parent=n,o.size=e||b.default.Setting.SCROLLBAR_DEFAULT_SIZE,o}return o()(r,[{key:"draw",value:function(e){this.hidden||(this.clicked&&(this.hovered=!0),c()(m()(r.prototype),"draw",this).call(this,e))}},{key:"maxWidthParent",get:function(){return this.parent?this.parent.maxWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"maxHeightParent",get:function(){return this.parent?this.parent.maxHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"innerWidthParent",get:function(){return this.parent?this.parent.innerWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"innerHeightParent",get:function(){return this.parent?this.parent.innerHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"contentRatioX",get:function(){return this.parent?this.maxWidthParent/this.innerWidthParent:0}},{key:"contentRatioY",get:function(){return this.parent?this.maxHeightParent/this.innerHeightParent:0}},{key:"width",get:function(){return this.maxWidthParent*this.contentRatioX}},{key:"height",get:function(){return this.maxHeightParent*this.contentRatioY}},{key:"windowScrollSizeX",get:function(){return this.innerWidthParent-this.maxWidthParent}},{key:"windowScrollSizeY",get:function(){return this.innerHeightParent-this.maxHeightParent}},{key:"percentScrollbarX",get:function(){return this.parent?this.parent.offsetScrollX/this.windowScrollSizeX:0}},{key:"percentScrollbarY",get:function(){return this.parent?this.parent.offsetScrollY/this.windowScrollSizeY:0}},{key:"scrollAreaSizeX",get:function(){return this.maxWidthParent-this.width}},{key:"scrollAreaSizeY",get:function(){return this.maxHeightParent-this.height}},{key:"x",get:function(){return this.parent?Math.abs(this.parent.x)+this.scrollAreaSizeX*this.percentScrollbarX:0}},{key:"y",get:function(){return this.parent?Math.abs(this.parent.y)+this.scrollAreaSizeY*this.percentScrollbarY:0}},{key:"defaultStyle",get:function(){return new k.default({backgroundColor:b.default.Setting.SCROLLBAR_DEFAULT_BACKGROUND,backgroundColorHover:b.default.Setting.SCROLLBAR_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:b.default.Setting.SCROLLBAR_DEFAULT_CLICK_BACKGROUND,borderSize:0})}},{key:"compareToComponent",value:function(e){return e.compareToScrollbar(this)}},{key:"compareToScrollbar",value:function(e){return 0}}]),r}(E.default)},"./src/ScrollbarHorizontal.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y);var b=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n){var o;return s()(this,r),o=i.call(this,e,t,n),v()(l()(o),"selectable",!0),o.addMoveAction((function(e){if(o.parent){var t=Math.abs((o.parent.x-Math.max(o.parent.x,o.x+-e))/(o.parent.width-o.width)),n=o.windowScrollSizeX*t-o.parent.offsetScrollX;o.parent.offsetScrollX+=n,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",n,0)}})),o}return o()(r,[{key:"draw",value:function(e){this.scrollAreaSizeX>0&&c()(m()(r.prototype),"draw",this).call(this,e)}},{key:"height",get:function(){return this.size}},{key:"y",get:function(){return this.parent?this.parent.y+this.parent.height-this.size:null}}]),r}(n("./src/Scrollbar.js").default)},"./src/ScrollbarVertical.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/get.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(y);var b=function(e){d()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=m()(t);if(n){var s=m()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return g()(this,e)});function r(e,t,n){var o;return s()(this,r),o=i.call(this,e,t,n),v()(l()(o),"selectable",!0),o.addMoveAction((function(e,t){if(o.parent){var n=Math.abs((o.parent.y-Math.max(o.parent.y,o.y+-t))/(o.parent.height-o.height)),i=o.windowScrollSizeY*n-o.parent.offsetScrollY;o.parent.offsetScrollY+=i,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",0,i)}})),o}return o()(r,[{key:"draw",value:function(e){this.scrollAreaSizeY>0&&c()(m()(r.prototype),"draw",this).call(this,e)}},{key:"width",get:function(){return this.size}},{key:"x",get:function(){return this.parent?this.parent.x+this.parent.width-this.size:0}}]),r}(n("./src/Scrollbar.js").default)},"./src/Select.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var i=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/set.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/get.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/inherits.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),S=n.n(k),_=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),A=n.n(_),I=n("./src/Label.js"),T=n("./src/Button.js"),w=n("./src/Triangle.js"),L=n("./src/Style.js"),C=n("./src/Constants.js");var R=new WeakMap,O=function(e){m()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=E()(t);if(n){var s=E()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return v()(this,e)});function r(e,t,n,s,a,l,u){var h;return o()(this,r),h=i.call(this,e,t,n,s,a),R.set(c()(h),{writable:!0,value:0}),h.optionContainer=l,u&&(h.selectedOption=u),h.label=new I.default("",e,t,a),h.label.style.setAll({alignement:C.default.Alignement.LEFT,verticalAlignement:C.default.VerticalAlignement.CENTER}),h.triangle=new w.default(null,null,8,8,a),h.triangle.style.setAll({alignement:C.default.Alignement.RIGHT,verticalAlignement:C.default.VerticalAlignement.CENTER}),h.addAll(h.label,h.triangle),h.addClickAction((function(){h.optionContainer&&(h.optionContainer.hidden=!1)})),C.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(h.updateWidth(),h.addChangeAction((function(){return h.updateWidth()}))),h}return l()(r,[{key:"draw",value:function(e){this.hidden||(this.selectedOption&&this.selectedOption.label&&(this.label.text=this.selectedOption.label.text),g()(E()(r.prototype),"draw",this).call(this,e),this.optionContainer&&(this.optionContainer.select=this))}},{key:"selectedOption",get:function(){return this.optionContainer?this.optionContainer.components[this.optionContainer.selectedOption]:null},set:function(e){e!=this.optionContainer.selectedOption&&(this.optionContainer.selectedOption=e,this.reactor.dispatchEvent("onChange",this))}},{key:"text",get:function(){return this.selectedOption&&this.selectedOption.label?this.selectedOption.label.text:null}},{key:"updateWidth",value:function(){var e=this.label.width;this.optionContainer&&this.optionContainer.components.forEach((function(t){var n=t.label;n&&(n.updateSizes&&n.updateSizes(),n.width>e&&(e=n.width))})),A()(this,R,e+this.style.padding+this.triangle.width+15)}},{key:"width",get:function(){return C.default.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateWidth(),S()(this,R)}},{key:"allComponents",get:function(){var e=[];return e.push.apply(e,s()(g()(E()(r.prototype),"allComponents",this))),e}},{key:"defaultStyle",get:function(){return new L.default({backgroundColor:C.default.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:C.default.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:C.default.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:C.default.Setting.DEFAULT_PADDING})}},{key:"selected",get:function(){return g()(E()(r.prototype),"selected",this)||this.optionContainer.selected},set:function(e){d()(E()(r.prototype),"selected",e,this,!0)}}]),r}(T.default)},"./src/SelectOption.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/get.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),g=n.n(p),f=n("./src/Button.js"),m=n("./src/Constants.js"),y=n("./src/Label.js"),v=n("./src/Style.js");var b=function(e){c()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=g()(t);if(n){var s=g()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return d()(this,e)});function r(e,t){var n;s()(this,r);var o=new y.default("Option");return(n=i.call(this,null,null,null,null,t,e||o)).label=e||o,n}return o()(r,[{key:"add",value:function(e){e instanceof y.default&&(this.clear(),l()(g()(r.prototype),"add",this).call(this,e))}},{key:"width",get:function(){return this.parent&&this.parent.width}},{key:"defaultStyle",get:function(){return new v.default({backgroundColor:m.default.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:m.default.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:m.default.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:m.default.Setting.DEFAULT_PADDING})}}]),r}(f.default)},"./src/SelectOptionsContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),S=n.n(k),_=n("./node_modules/@babel/runtime/helpers/classPrivateFieldSet.js"),A=n.n(_),I=n("./src/Col.js"),T=n("./src/Style.js"),w=n("./src/Constants.js");var L=new WeakMap,C=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t){var n;s()(this,r);for(var o=arguments.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=arguments[u];return n=i.call.apply(i,[this,null,null,null,e,t].concat(a)),L.set(l()(n),{writable:!0,value:void 0}),E()(l()(n),"selectable",!1),A()(l()(n),L,0),n.select=null,n}return o()(r,[{key:"draw",value:function(e){d()(v()(r.prototype),"draw",this).call(this,e)}},{key:"x",get:function(){return this.select&&this.select.x}},{key:"y",get:function(){var e=this.select&&this.select.height,t=this.height,n=this.select&&this.select.y;return this.canvas&&this.canvas.scene&&n+e+t>=this.canvas.scene.height?n-t:n+e}},{key:"width",get:function(){return this.select&&this.select.width}},{key:"selectedOption",get:function(){return Math.max(0,Math.min(this.components.length-1,S()(this,L)))},set:function(e){e!=S()(this,L)&&(A()(this,L,e),this.reactor.dispatchEvent("onChange",this))}},{key:"add",value:function(e){var t=this;d()(v()(r.prototype),"add",this).call(this,e),e.addClickAction((function(){A()(t,L,t.getComponentId(e)),t.selected=!1,t.hidden=!0,t.select&&(t.select.selected=!1)}))}},{key:"defaultStyle",get:function(){return new T.default({padding:0,spaceBetweenComponents:0,backgroundColor:w.default.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:null,backgroundColorDown:null,scrollXDisabled:!1,scrollYDisabled:!1})}},{key:"hidden",get:function(){return d()(v()(r.prototype),"hidden",this)||this.select&&!this.select.selected||!this.select},set:function(e){return c()(v()(r.prototype),"hidden",e,this,!0)}}]),r}(I.default)},"./src/Style.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/classPrivateFieldGet.js"),c=n.n(u),h=n("./src/Constants.js"),d=new WeakMap,p=function(){function e(t){s()(this,e),d.set(this,{writable:!0,value:{}}),l()(this,"component",void 0),this.setAll(t)}return o()(e,[{key:"fontColor",get:function(){return c()(this,d).fontColor}},{key:"fontColorHover",get:function(){return c()(this,d).fontColorHover}},{key:"fontColorDown",get:function(){return c()(this,d).fontColorDown}},{key:"fontFamily",get:function(){return null!=c()(this,d).fontFamily?c()(this,d).fontFamily:h.default.Setting.FONT_FAMILY}},{key:"fontSize",get:function(){return null!=c()(this,d).fontSize?c()(this,d).fontSize:h.default.Setting.FONT_SIZE}},{key:"bold",get:function(){return c()(this,d).bold}},{key:"underline",get:function(){return c()(this,d).underline}},{key:"wrap",get:function(){return c()(this,d).wrap}},{key:"backgroundColor",get:function(){return c()(this,d).backgroundColor}},{key:"foregroundColor",get:function(){return c()(this,d).foregroundColor}},{key:"backgroundColorHover",get:function(){return c()(this,d).backgroundColorHover}},{key:"backgroundColorDown",get:function(){return c()(this,d).backgroundColorDown}},{key:"borderColor",get:function(){return c()(this,d).borderColor}},{key:"borderColorHover",get:function(){return c()(this,d).borderColorHover}},{key:"borderColorDown",get:function(){return c()(this,d).borderColorDown}},{key:"borderColorSelected",get:function(){return null!=c()(this,d).borderColorSelected?c()(this,d).borderColorSelected:h.default.Setting.DEFAULT_BORDER_COLOR_SELECTED}},{key:"borderSize",get:function(){return null!=c()(this,d).borderSize?c()(this,d).borderSize:h.default.Setting.DEFAULT_BORDER_SIZE}},{key:"selectColor",get:function(){return c()(this,d).selectColor}},{key:"alignement",get:function(){return c()(this,d).alignement}},{key:"verticalAlignement",get:function(){return c()(this,d).verticalAlignement}},{key:"disableAnimation",get:function(){return c()(this,d).disableAnimation}},{key:"scrollXDisabled",get:function(){return c()(this,d).scrollXDisabled}},{key:"scrollYDisabled",get:function(){return c()(this,d).scrollYDisabled}},{key:"padding",get:function(){return null!=c()(this,d).padding?c()(this,d).padding:h.default.Setting.DEFAULT_PADDING}},{key:"spaceBetweenComponents",get:function(){return null!=c()(this,d).spaceBetweenComponents?c()(this,d).spaceBetweenComponents:h.default.Setting.DEFAULT_SPACING}},{key:"hidden",get:function(){return c()(this,d).hidden}},{key:"blurBackground",get:function(){return c()(this,d).blurBackground}},{key:"lineWidth",get:function(){return c()(this,d).lineWidth}},{key:"animationDuration",get:function(){return null!=c()(this,d).animationDuration?c()(this,d).animationDuration:h.default.Setting.DEFAULT_ANIMATION_DURATION}},{key:"foreground",get:function(){return c()(this,d).foreground}},{key:"zIndex",get:function(){return null!=c()(this,d).zIndex?c()(this,d).zIndex:0}},{key:"lineCap",get:function(){return c()(this,d).lineCap}},{key:"fill",get:function(){return c()(this,d).fill}},{key:"fillColor",get:function(){return c()(this,d).fillColor}},{key:"color",get:function(){return c()(this,d).color}},{key:"movable",get:function(){return c()(this,d).movable||!1}},{key:"set",value:function(e,t){c()(this,d)[e]!=t&&(c()(this,d)[e]=t,this.component&&this.component.reactor&&this.component.reactor.dispatchEvent("onChange",this))}},{key:"setAll",value:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t])}},{key:"copy",value:function(){return new e(c()(this,d))}},{key:"getStyles",value:function(){var e={};for(var t in c()(this,d))c()(this,d).hasOwnProperty(t)&&(e[t]=c()(this,d)[t]);return e}}]),e}()},"./src/Tooltip.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Col.js"),S=n("./src/Constants.js"),_=n("./src/Style.js");var A=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e){var t;s()(this,r);for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t=i.call.apply(i,[this,null,null,null,null,e].concat(o)),E()(l()(t),"selectable",!1),t.disabled=!0,t}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){var t=e.canvas.getContext("2d");t.save(),this.x+this.width+this.style.padding>this.parent.width&&(this.x-=this.width+this.style.padding),this.y+this.height+this.style.padding>this.parent.height&&(this.y-=this.height+this.style.padding),d()(v()(r.prototype),"draw",this).call(this,t),t.restore()}}},{key:"width",get:function(){return d()(v()(r.prototype),"width",this)+this.style.padding},set:function(e){c()(v()(r.prototype),"width",e,this,!0)}},{key:"height",get:function(){return d()(v()(r.prototype),"height",this)+this.style.padding},set:function(e){c()(v()(r.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new _.default({backgroundColor:S.default.Setting.TOOLTIP_DEFAULT_BACKGROUND})}},{key:"compareToComponent",value:function(e){return e.compareToTooltip(this)}},{key:"compareToMenu",value:function(e){return 1}},{key:"compareToTooltip",value:function(e){return 0}},{key:"compareToNotification",value:function(e){return 1}},{key:"hidden",get:function(){return d()(v()(r.prototype),"hidden",this)||this.disabled},set:function(e){c()(v()(r.prototype),"hidden",e,this,!0),this.disabled=e}}]),r}(k.default)},"./src/Triangle.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/set.js"),c=n.n(u),h=n("./node_modules/@babel/runtime/helpers/get.js"),d=n.n(h),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(p),f=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(f),y=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(b),k=n("./src/Component.js"),S=n("./src/Constants.js"),_=n("./src/Utils.js"),A=n("./src/Style.js");var I=function(e){g()(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=v()(t);if(n){var s=v()(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return m()(this,e)});function r(e,t,n,o,a){var u;return s()(this,r),u=i.call(this,e,t,n,o,a),E()(l()(u),"selectable",!1),u}return o()(r,[{key:"draw",value:function(e){if(!this.hidden){d()(v()(r.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");_.default.drawTriangle(t,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return d()(v()(r.prototype),"width",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"width",e,this,!0)}},{key:"height",get:function(){return d()(v()(r.prototype),"height",this)+this.style.lineWidth},set:function(e){c()(v()(r.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new A.default({lineWidth:S.default.Setting.TRIANGLE_DEFAULT_LINE_SIZE,color:S.default.Setting.TRIANGLE_DEFAULT_COLOR,fill:S.default.Setting.TRIANGLE_DEFAULT_FILL,lineCap:S.default.Setting.TRIANGLE_DEFAULT_LINE_CAP,fillColor:S.default.Setting.TRIANGLE_DEFAULT_FILL_COLOR})}}]),r}(k.default)},"./src/Utils.js":function(e,t,n){"use strict";n.r(t);var i=n("./src/Constants.js");t.default={preRenderedFont:{},lastKey:-1,preRenderFont:function(e,t,n,i){e.push("?"),e.push(" "),e.push("A");for(var s=0;s<e.length;s++){var r=document.createElement("canvas"),o=r.getContext("2d");o.font=t+"px "+i;var a=o.measureText(e[s]).width;r.width=a,r.height=t+t/6,o.font=t+"px "+i,o.fillStyle=n,o.textBaseline="top",o.fillText(e[s],0,0),this.preRenderedFont[e[s]]=r}},drawImage:function(e,t,n,i,s,r,o,a,l,u,c,h){this.drawImageWrapper(e,t,n,i,s,r,o,a,l,u,c,h)},drawImageData:function(e,t,n,i,s,r,o,a,l,u,c,h){this.drawImageWrapper(e,t,n,i,s,r,o,a,l,u,c,h)},drawImageWrapper:function(e,t,n,i,s,r,o,a,l,u,c,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),s=null==s||isNaN(s)?null:Math.round(s),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),a=null==a||isNaN(a)?null:Math.round(a),l=null==l||isNaN(l)?null:Math.round(l),u=null==u||isNaN(u)?null:Math.round(u),c=null!=c&&c,null!=(h=null==h||isNaN(h)?null:h)&&(e.save(),e.translate(n+s/2,i+r/2),e.rotate(h*Math.PI/180),n=-s/2,i=-r/2),c&&e.clearRect(n,i,s,r),null!=e&&null!=t&&t.width>0&&t.height>0&&(null!=o&&null!=a&&null!=l&&null!=u?e.drawImage(t,o,a,l,u,n,i,s,r):e.drawImage(t,n,i,s,r)),null!=h&&e.restore()},drawText:function(e,t,n,s,r,o,a,l,u,c,h,d,p,g){if(e){e.save(),Array.isArray(n)||(e.fillStyle=n,e.strokeStyle=n),e.font=(h?"bold ":"")+s+"px "+r,e.textBaseline=p||"bottom",e.filter="none",c&&(t=this.wrapTextLines(e,t).text);var f=t.split("\n"),m=0,y=Math.round(l),v=Math.round(u)+s,b=0;u||(a==i.default.VerticalAlignement.CENTER?v+=Math.round((g&&g.height?g.height:this.getCanvasHeight(e.canvas))/2-s*f.length/2):a==i.default.VerticalAlignement.BOTTOM&&(v+=Math.round((g&&g.height?g.height:this.getCanvasHeight(e.canvas))-s*f.length/2-s/5)));for(var E=0;E<f.length;E++){var k=f[E],S=e.measureText(k).width;if(Array.isArray(n)){var _=E;_>n.length-1&&(_=n.length-1),e.fillStyle=n[_],e.strokeStyle=n[_]}o==i.default.Alignement.CENTER?y=Math.round(g&&g.x?g.x:0)+Math.round((g&&g.width?g.width:this.getCanvasWidth(e.canvas))/2-e.measureText(k).width/2):o==i.default.Alignement.RIGHT&&(y=Math.round(g&&g.x?g.x:0)+Math.round((g&&g.width?g.width:this.getCanvasWidth(e.canvas))-e.measureText(k).width-(g&&g.spaceBetweenComponents?g.spaceBetweenComponents:i.default.Setting.DEFAULT_SPACING))),e.fillText(k,y,v),d&&(e.lineWidth=1,e.beginPath(),e.moveTo(y,v-2),e.lineTo(Math.round(y+S),v-2),e.stroke()),S>m&&(m=S),0==E&&(b=v),v+=s}return e.restore(),{x:y,y:b,height:s*f.length,width:m}}},wrapText:function(e,t){if(e.length>t){for(var n=t;n>0&&" "!=e[n];n--);if(n>0){var i=e.substring(0,n),s=e.substring(n+1);return i+"\n"+this.wrapText(s,t)}}return e},wrapTextLines:function(e,t,n,i,s,r){if(e&&t){e.save(),e.font=Math.round(i)+"px "+s,e.imageSmoothingEnabled=!1;for(var o=t.split("\n"),a="",l=n||e.measureText("A").width,u=Math.round(this.getCanvasWidth(e.canvas)/l),c=0,h=0,d=0;d<o.length;d++){var p=r?o[d]:this.wrapText(o[d],u);a+=p,d<o.length-1&&(a+="\n");for(var g=0;g<p.split("\n").length;g++){var f=e.measureText(p.split("\n")[g]).width;c+=i,f>h&&(h=f)}}return e.restore(),{text:a,height:c,width:h,carWidth:l}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(e,t,n,s,r,o,a,l,u){e.save(),e.lineCap=u||i.default.Setting.ARROW_DEFAULT_LINE_CAP,e.lineWidth=o||i.default.Setting.ARROW_DEFAULT_LINE_SIZE,e.strokeStyle=l||i.default.Setting.ARROW_DEFAULT_COLOR,e.filter="",e.beginPath();var c=a||i.default.Setting.ARROW_DEFAULT_HEAD_SIZE,h=s-t,d=r-n,p=Math.atan2(d,h);e.moveTo(t,n),e.lineTo(s,r),e.moveTo(s,r),e.lineTo(s-c*Math.cos(p-Math.PI/6),r-c*Math.sin(p-Math.PI/6)),e.moveTo(s,r),e.lineTo(s-c*Math.cos(p+Math.PI/6),r-c*Math.sin(p+Math.PI/6)),e.stroke(),e.restore()},drawCross:function(e,t,n,s,r,o,a,l){e.save(),e.lineCap=l||i.default.Setting.CROSS_DEFAULT_LINE_CAP,e.lineWidth=o||i.default.Setting.CROSS_DEFAULT_LINE_SIZE,e.strokeStyle=a||i.default.Setting.CROSS_DEFAULT_COLOR,e.filter="",e.beginPath(),e.moveTo(t,n),e.lineTo(t+s,n+r),e.moveTo(t+s,n),e.lineTo(t,n+r),e.stroke(),e.restore()},drawTriangle:function(e,t,n,s,r,o,a,l){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i.default.Setting.TRIANGLE_DEFAULT_FILL,c=arguments.length>9?arguments[9]:void 0;e.save(),e.lineCap=l||i.default.Setting.TRIANGLE_DEFAULT_LINE_CAP,e.lineWidth=o||i.default.Setting.TRIANGLE_DEFAULT_LINE_SIZE,e.filter="",u?(e.fillStyle=c||i.default.Setting.TRIANGLE_DEFAULT_FILL_COLOR,e.strokeStyle=a||i.default.Setting.TRIANGLE_DEFAULT_COLOR):e.strokeStyle=a||i.default.Setting.TRIANGLE_DEFAULT_COLOR,e.beginPath(),e.moveTo(t,n),e.lineTo(t+s,n),e.lineTo(t+s/2,n+r),e.lineTo(t,n),u?(e.fill(),e.stroke()):e.stroke(),e.restore()},drawCircle:function(e,t,n,s,r,o,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:i.default.Setting.CIRCLE_DEFAULT_FILL,u=arguments.length>8?arguments[8]:void 0;e.save(),e.lineCap=a||i.default.Setting.CIRCLE_DEFAULT_LINE_CAP,e.lineWidth=r||i.default.Setting.CIRCLE_DEFAULT_LINE_SIZE,e.filter="",l?(e.fillStyle=u||i.default.Setting.CIRCLE_DEFAULT_FILL_COLOR,e.strokeStyle=o||i.default.Setting.CIRCLE_DEFAULT_COLOR):e.strokeStyle=o||i.default.Setting.CIRCLE_DEFAULT_COLOR,e.beginPath(),e.arc(t+s/2,n+s/2,s/2,0,2*Math.PI,!1),l?(e.fill(),e.stroke()):e.stroke(),e.restore()},clear:function(e){e.clearRect(0,0,this.getCanvasWidth(e.canvas),this.getCanvasHeight(e.canvas))},isFilterHueAvailable:function(){var e=document.createElement("canvas");e.width=5,e.height=5;var t=e.getContext("2d");t.save(),t.fillStyle="#FF0000",t.filter="hue-rotate(90deg)",t.fillRect(0,0,5,5);var n=t.getImageData(0,0,1,1).data;return t.restore(),255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(e,t){e.save(),e.filter="blur("+t+"px)",this.drawImageData(e,e.canvas,0,0,this.getCanvasWidth(e.canvas),this.getCanvasHeight(e.canvas)),e.restore()},parseNumber:function(e){return e?parseInt(e.match(/\d+/),10):0},getFontSize:function(e){return Math.floor(parseNumber(e.font)/1.25)},getCanvasWidth:function(e){return this.parseNumber(e.style.width)||e.width},getCanvasHeight:function(e){return this.parseNumber(e.style.height)||e.height},autoDPI:function(e){var t=e.getBoundingClientRect();e.width=t.width*i.default.Setting.PIXEL_RATIO,e.height=t.height*i.default.Setting.PIXEL_RATIO,e.style.width=t.width+"px",e.style.height=t.height+"px"},autoResizeCanvas:function(e,t,n,i){if(document.fullscreenElement)document.fullscreenElement==e||document.fullscreenElement==t?(e.width=window.innerWidth,e.height=window.innerHeight,e.style&&(e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"),t&&(t.width=window.innerWidth,t.height=window.innerHeight)):(e.width=n,e.height=i,e.style&&(e.style.width=n+"px",e.style.height=i+"px"));else if(n>=.85*document.documentElement.clientWidth){var s=n/i;e.width=.85*document.documentElement.clientWidth,e.height=e.width/s,e.style&&(e.style.width=e.width+"px",e.style.height=e.height+"px")}else e.width=n,e.height=i,e.style&&(e.style.width=n+"px",e.style.height=i+"px")},enableAutoResizeCanvas:function(e,t,n,i){var s=this;e&&"true"!=e.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(e,t,n,i),window.addEventListener("resize",(function(){e.setAttribute("autoresize-canvas-event","true"),s.autoResizeCanvas(e,t,n,i)})))},autoResizeCanvasFullscreen:function(e,t){document.fullscreenElement!=e&&document.fullscreenElement!=t||(e.width=window.innerWidth,e.height=window.innerHeight,e.style&&(e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"),t&&(t.width=window.innerWidth,t.height=window.innerHeight))},enableAutoResizeCanvasFullscreen:function(e,t){var n=this;e&&"true"!=e.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(e,t),window.addEventListener("resize",(function(){e.setAttribute("autoresizefullscreen-canvas-event","true"),n.autoResizeCanvasFullscreen(e,t)})))},autoResizeCanvasFullpage:function(e,t){e&&"true"==e.getAttribute("fullpage-canvas-enable")&&(e.width=window.innerWidth,e.height=window.innerHeight,e.style&&(e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"),t&&(t.width=window.innerWidth,t.height=window.innerHeight,t.style.margin=0,t.style.padding=0),document.body.style.margin=0,document.body.style.padding=0)},enableAutoResizeCanvasFullpage:function(e,t){var n=this;e&&"true"!=e.getAttribute("autoresizefullpage-canvas-event")&&(this.autoResizeCanvasFullpage(e,t),window.addEventListener("resize",(function(){e.setAttribute("autoresizefullpage-canvas-event","true"),n.autoResizeCanvasFullpage(e,t)})))},toggleFullscreen:function(e,t){if(e){var n=e.width,i=e.height;if(t&&(t.width=n,t.height=i),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(t||e).requestFullscreen?(t||e).requestFullscreen():(t||e).mozRequestFullScreen?(t||e).mozRequestFullScreen():(t||e).webkitRequestFullscreen?(t||e).webkitRequestFullscreen():(t||e).msRequestFullscreen?(t||e).msRequestFullscreen():(t||e).oRequestFullscreen&&(t||e).oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(e,t),"true"!=e.getAttribute("fullscreenchange-canvas-event")){e.setAttribute("fullscreenchange-canvas-event","true");var s=function(){document.fullscreenElement!=(t||e)&&(e.width=n,e.height=i,t&&(t.width=n,t.height=i))};void 0!==document.onfullscreenchange?document.onfullscreenchange=s:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=s:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=s:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=s:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=s)}}},toggleFullpage:function(e,t){if(e){var n=e.width,i=e.height;t&&(t.width=n,t.height=i),e.getAttribute("fullpage-canvas-enable")&&"false"!=e.getAttribute("fullpage-canvas-enable")?e.setAttribute("fullpage-canvas-enable","false"):e.setAttribute("fullpage-canvas-enable","true"),this.enableAutoResizeCanvasFullpage(e,t)}},getMousePos:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}}},"./src/index.js":function(e,t,n){"use strict";n.r(t);var i=n("./src/Constants.js");n.d(t,"Constants",(function(){return i.default}));var s=n("./src/Button.js");n.d(t,"Button",(function(){return s.default}));var r=n("./src/ButtonImage.js");n.d(t,"ButtonImage",(function(){return r.default}));var o=n("./src/ImageLoader.js");n.d(t,"ImageLoader",(function(){return o.default}));var a=n("./src/NotificationMessage.js");n.d(t,"NotificationMessage",(function(){return a.default}));var l=n("./src/Utils.js");n.d(t,"Utils",(function(){return l.default}));var u=n("./src/Menu.js");n.d(t,"Menu",(function(){return u.default}));var c=n("./src/Input.js");n.d(t,"Input",(function(){return c.default}));var h=n("./src/Label.js");n.d(t,"Label",(function(){return h.default}));var d=n("./src/Link.js");n.d(t,"Link",(function(){return d.default}));var p=n("./src/Tooltip.js");n.d(t,"Tooltip",(function(){return p.default}));var g=n("./src/Scene.js");n.d(t,"Scene",(function(){return g.default}));var f=n("./src/FPSMeter.js");n.d(t,"FPSMeter",(function(){return f.default}));var m=n("./src/ProgressBar.js");n.d(t,"ProgressBar",(function(){return m.default}));var y=n("./src/Canvas.js");n.d(t,"Canvas",(function(){return y.default}));var v=n("./src/Component.js");n.d(t,"Component",(function(){return v.default}));var b=n("./src/EasingFunctions.js");n.d(t,"EasingFunctions",(function(){return b.default}));var E=n("./src/Col.js");n.d(t,"Col",(function(){return E.default}));var k=n("./src/Container.js");n.d(t,"Container",(function(){return k.default}));var S=n("./src/Row.js");n.d(t,"Row",(function(){return S.default}));var _=n("./src/ImageContainer.js");n.d(t,"ImageContainer",(function(){return _.default}));var A=n("./src/Arrow.js");n.d(t,"Arrow",(function(){return A.default}));var I=n("./src/Cross.js");n.d(t,"Cross",(function(){return I.default}));var T=n("./src/Scrollbar.js");n.d(t,"Scrollbar",(function(){return T.default}));var w=n("./src/ScrollbarVertical.js");n.d(t,"ScrollbarVertical",(function(){return w.default}));var L=n("./src/ScrollbarHorizontal.js");n.d(t,"ScrollbarHorizontal",(function(){return L.default}));var C=n("./src/Box.js");n.d(t,"Box",(function(){return C.default}));var R=n("./src/Style.js");n.d(t,"Style",(function(){return R.default}));var O=n("./src/Select.js");n.d(t,"Select",(function(){return O.default}));var x=n("./src/SelectOption.js");n.d(t,"SelectOption",(function(){return x.default}));var P=n("./src/SelectOptionsContainer.js");n.d(t,"SelectOptionsContainer",(function(){return P.default}));var B=n("./src/Triangle.js");n.d(t,"Triangle",(function(){return B.default}));var D=n("./src/Circle.js");n.d(t,"Circle",(function(){return D.default}));var N=n("./src/Reactor.js");n.d(t,"Reactor",(function(){return N.default}));var M=n("./src/Event.js");n.d(t,"Event",(function(){return M.default}));var F=n("./src/ReactorCanvas.js");n.d(t,"ReactorCanvas",(function(){return F.default}));var U=n("./src/ErrorScreen.js");n.d(t,"ErrorScreen",(function(){return U.default}))}})},e.exports=t()},391:(e,t,n)=>{var i=n(180),s=n(181),r=n(31),o=n(67),a=n(833),l=n(717),u=n(801);u.alea=i,u.xor128=s,u.xorwow=r,u.xorshift7=o,u.xor4096=a,u.tychei=l,e.exports=u},180:function(e,t,n){var i;!function(e,s){function r(e){var t,n=this,i=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=i(" "),n.s1=i(" "),n.s2=i(" "),n.s0-=i(e),n.s0<0&&(n.s0+=1),n.s1-=i(e),n.s1<0&&(n.s1+=1),n.s2-=i(e),n.s2<0&&(n.s2+=1),i=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),i=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,i&&("object"==typeof i&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.alea=a}(0,e=n.nmd(e),n.amdD)},717:function(e,t,n){var i;!function(e,s){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,s=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^s,s=s-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^s,t.a=s-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.tychei=a}(0,e=n.nmd(e),n.amdD)},181:function(e,t,n){var i;!function(e,s){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.xor128=a}(0,e=n.nmd(e),n.amdD)},833:function(e,t,n){var i;!function(e,s){function r(e){var t=this;t.next=function(){var e,n,i=t.w,s=t.X,r=t.i;return t.w=i=i+1640531527|0,n=s[r+34&127],e=s[r=r+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=s[r]=n^e,t.i=r,n+(i^i>>>16)|0},function(e,t){var n,i,s,r,o,a=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),s=0,r=-32;r<l;++r)t&&(i^=t.charCodeAt((r+32)%t.length)),0===r&&(o=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,r>=0&&(o=o+1640531527|0,s=0==(n=a[127&r]^=i+o)?s+1:0);for(s>=128&&(a[127&(t&&t.length||0)]=-1),s=127,r=512;r>0;--r)i=a[s+34&127],n=a[s=s+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,a[s]=i^n;e.w=o,e.X=a,e.i=s}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&(i.X&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.xor4096=a}(0,e=n.nmd(e),n.amdD)},67:function(e,t,n){var i;!function(e,s){function r(e){var t=this;t.next=function(){var e,n,i=t.x,s=t.i;return e=i[s],n=(e^=e>>>7)^e<<24,n^=(e=i[s+1&7])^e>>>10,n^=(e=i[s+3&7])^e>>>3,n^=(e=i[s+4&7])^e<<7,e=i[s+7&7],n^=(e^=e<<13)^e<<9,i[s]=n,t.i=s+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&(i.x&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.xorshift7=a}(0,e=n.nmd(e),n.amdD)},31:function(e,t,n){var i;!function(e,s){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&o(i,n),s.state=function(){return o(n,{})}),s}s&&s.exports?s.exports=a:n.amdD&&n.amdO?void 0===(i=function(){return a}.call(t,n,t,s))||(s.exports=i):this.xorwow=a}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var i;!function(s,r,o){var a,l=256,u=o.pow(l,6),c=o.pow(2,52),h=2*c,d=255;function p(e,t,n){var i=[],d=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(r)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),v(e)}catch(e){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,v(r)]}}():e,3),i),p=new g(i),b=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),r),(t.pass||n||function(e,t,n,i){return i&&(i.S&&f(i,p),e.state=function(){return f(p,{})}),n?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function g(e){var t,n=e.length,i=this,s=0,r=i.i=i.j=0,o=i.S=[];for(n||(e=[n++]);s<l;)o[s]=s++;for(s=0;s<l;s++)o[s]=o[r=d&r+e[s%n]+(t=o[s])],o[r]=t;(i.g=function(e){for(var t,n=0,s=i.i,r=i.j,o=i.S;e--;)t=o[s=d&s+1],n=n*l+o[d&(o[s]=o[r=d&r+t])+(o[r]=t)];return i.i=s,i.j=r,n})(l)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,i=[],s=typeof e;if(t&&"object"==s)for(n in e)try{i.push(m(e[n],t-1))}catch(e){}return i.length?i:"string"==s?e:e+"\0"}function y(e,t){for(var n,i=e+"",s=0;s<i.length;)t[d&s]=d&(n^=19*t[d&s])+i.charCodeAt(s++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(o.random(),r),e.exports){e.exports=p;try{a=n(234)}catch(e){}}else void 0===(i=function(){return p}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof self?self:this,[],Math)},234:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Event:()=>ve,Game:()=>st,GameConstants:()=>ye,GameController:()=>Ee,GameControllerSocket:()=>Cn,GameControllerWorker:()=>Ge,GameEngine:()=>et,GameGroup:()=>ot,GameUI:()=>Qe,GameUtils:()=>ke,Grid:()=>Te,OnlineClient:()=>Rn,Position:()=>Se,Reactor:()=>be,Snake:()=>je});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{Decoder:()=>bn,Encoder:()=>yn,PacketType:()=>mn,protocol:()=>fn});const t=e=>"string"==typeof e,n=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},i=e=>null==e?"":""+e,s=/###/g,r=e=>e&&e.indexOf("###")>-1?e.replace(s,"."):e,o=e=>!e||t(e),a=(e,n,i)=>{const s=t(n)?n.split("."):n;let a=0;for(;a<s.length-1;){if(o(e))return{};const t=r(s[a]);!e[t]&&i&&(e[t]=new i),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return o(e)?{}:{obj:e,k:r(s[a])}},l=(e,t,n)=>{const{obj:i,k:s}=a(e,t,Object);if(void 0!==i||1===t.length)return void(i[s]=n);let r=t[t.length-1],o=t.slice(0,t.length-1),l=a(e,o,Object);for(;void 0===l.obj&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),l=a(e,o,Object),l&&l.obj&&void 0!==l.obj[`${l.k}.${r}`]&&(l.obj=void 0);l.obj[`${l.k}.${r}`]=n},u=(e,t)=>{const{obj:n,k:i}=a(e,t);if(n)return n[i]},c=(e,n,i)=>{for(const s in n)"__proto__"!==s&&"constructor"!==s&&(s in e?t(e[s])||e[s]instanceof String||t(n[s])||n[s]instanceof String?i&&(e[s]=n[s]):c(e[s],n[s],i):e[s]=n[s]);return e},h=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const p=e=>t(e)?e.replace(/[&<>"'\/]/g,(e=>d[e])):e,g=[" ",",","?","!",";"],f=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(n);let s=e;for(let e=0;e<i.length;){if(!s||"object"!=typeof s)return;let t,r="";for(let o=e;o<i.length;++o)if(o!==e&&(r+=n),r+=i[o],t=s[r],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<i.length-1)continue;e+=o-e+1;break}s=t}return s},y=e=>e&&e.replace("_","-"),v={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class b{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||v,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,i,s){return s&&!this.debug?null:(t(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new b(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new b(this.logger,e)}}var E=new b;class k{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach((e=>{let[t,i]=e;for(let e=0;e<i;e++)t(...n)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((t=>{let[i,s]=t;for(let t=0;t<s;t++)i.apply(i,[e,...n])}))}}class S extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,o=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],i&&(Array.isArray(i)?a.push(...i):t(i)&&r?a.push(...i.split(r)):a.push(i)));const l=u(this.data,a);return!l&&!n&&!i&&e.indexOf(".")>-1&&(e=a[0],n=a[1],i=a.slice(2).join(".")),!l&&o&&t(i)?m(this.data&&this.data[e]&&this.data[e][n],i,r):l}addResource(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),l(this.data,o,i),s.silent||this.emit("added",e,t,n,i)}addResources(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const s in i)(t(i[s])||Array.isArray(i[s]))&&this.addResource(e,n,s,i[s],{silent:!0});s.silent||this.emit("added",e,n,i)}addResourceBundle(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=t,t=o[1]),this.addNamespaces(t);let a=u(this.data,o)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?c(a,n,s):a={...a,...n},l(this.data,o,a),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var _={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,s){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,i,s))})),t}};const A={};class I extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;super(),n=e,i=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{n[e]&&(i[e]=n[e])})),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=E.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,n){let i=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===i&&(i=":");const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let r=n.ns||this.options.defaultNS||[];const o=i&&e.indexOf(i)>-1,a=!(this.options.userDefinedKeySeparator||n.keySeparator||this.options.userDefinedNsSeparator||n.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const i=g.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const s=f.getRegExp(`(${i.map((e=>"?"===e?"\\?":e)).join("|")})`);let r=!s.test(e);if(!r){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(r=!0)}return r})(e,i,s));if(o&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:r};const n=e.split(i);(i!==s||i===s&&this.options.ns.indexOf(n[0])>-1)&&(r=n.shift()),e=n.join(s)}return t(r)&&(r=[r]),{key:e,namespaces:r}}translate(e,n,i){if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n={...n}),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const s=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(c){const e=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${e}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${e}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let d=h&&h.res;const p=h&&h.usedKey||o,g=h&&h.exactUsedKey||o,f=Object.prototype.toString.apply(d),m=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!t(d)&&"boolean"!=typeof d&&"number"!=typeof d;if(!(y&&d&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0)||t(m)&&Array.isArray(d))if(y&&t(m)&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,n,i));else{let s=!1,a=!1;const c=void 0!==n.count&&!t(n.count),p=I.hasDefaultValue(n),g=c?this.pluralResolver.getSuffix(u,n.count,n):"",f=n.ordinal&&c?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",m=c&&!n.ordinal&&0===n.count&&this.pluralResolver.shouldUseIntlApi(),y=m&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${g}`]||n[`defaultValue${f}`]||n.defaultValue;!this.isValidLookup(d)&&p&&(s=!0,d=y),this.isValidLookup(d)||(a=!0,d=o);const v=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:d,b=p&&y!==d&&this.options.updateMissing;if(a||s||b){if(this.logger.log(b?"updateKey":"missingKey",u,l,o,b?y:d),r){const e=this.resolve(o,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const i=(e,t,i)=>{const s=p&&i!==d?i:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,s,b,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,l,t,s,b,n),this.emit("missingKey",e,l,t,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,n);m&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{i([e],o+t,n[`defaultValue${t}`]||y)}))})):i(e,o,y))}d=this.extendTranslation(d,e,n,h,i),a&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${o}`),(a||s)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,s?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(h.res=e,h.usedParams=this.getUsedParamsDetails(n),h):e}if(r){const e=Array.isArray(d),t=e?[]:{},i=e?g:p;for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e)){const s=`${i}${r}${e}`;t[e]=this.translate(s,{...n,joinArrays:!1,ns:a}),t[e]===s&&(t[e]=d[e])}d=t}}return s?(h.res=d,h.usedParams=this.getUsedParamsDetails(n),h):d}extendTranslation(e,n,i,s,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const a=t(e)&&(i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let u=i.replace&&!t(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,i.lng||this.language||s.usedLng,i),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(i.nest=!1)}!i.lng&&"v1"!==this.options.compatibilityAPI&&s&&s.res&&(i.lng=this.language||s.usedLng),!1!==i.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r&&r[0]===t[0]&&!i.context?(o.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${n[0]}`),null):o.translate(...t,n)}),i)),i.interpolation&&this.interpolator.reset()}const a=i.postProcess||this.options.postProcess,l=t(a)?[a]:a;return null!=e&&l&&l.length&&!1!==i.applyPostProcessor&&(e=_.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let n,i,s,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(n))return;const l=this.extractFromKey(e,a),u=l.key;i=u;let c=l.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const h=void 0!==a.count&&!t(a.count),d=h&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&(t(a.context)||"number"==typeof a.context)&&""!==a.context,g=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);c.forEach((e=>{this.isValidLookup(n)||(o=e,!A[`${g[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(A[`${g[0]}-${e}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((t=>{if(this.isValidLookup(n))return;r=t;const i=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(i,u,t,e,a);else{let e;h&&(e=this.pluralResolver.getSuffix(t,a.count,a));const n=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(i.push(u+e),a.ordinal&&0===e.indexOf(s)&&i.push(u+e.replace(s,this.options.pluralSeparator)),d&&i.push(u+n)),p){const t=`${u}${this.options.contextSeparator}${a.context}`;i.push(t),h&&(i.push(t+e),a.ordinal&&0===e.indexOf(s)&&i.push(t+e.replace(s,this.options.pluralSeparator)),d&&i.push(t+n))}}let o;for(;o=i.pop();)this.isValidLookup(n)||(s=o,n=this.getResource(t,e,o,a))})))}))})),{res:n,usedKey:i,exactUsedKey:s,usedLng:r,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!t(e.replace);let s=i?e.replace:e;if(i&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i){s={...s};for(const e of n)delete s[e]}return s}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}const T=e=>e.charAt(0).toUpperCase()+e.slice(1);class w{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=E.create("languageUtils")}getScriptPartFromCode(e){if(!(e=y(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=y(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(t(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=T(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=T(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=T(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,n){if(!e)return[];if("function"==typeof e&&(e=e(n)),t(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let i=e[n];return i||(i=e[this.getScriptPartFromCode(n)]),i||(i=e[this.formatLanguageCode(n)]),i||(i=e[this.getLanguagePartFromCode(n)]),i||(i=e.default),i||[]}toResolveHierarchy(e,n){const i=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],r=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return t(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):t(e)&&r(this.formatLanguageCode(e)),i.forEach((e=>{s.indexOf(e)<0&&r(this.formatLanguageCode(e))})),s}}let L=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],C={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const R=["v1","v2","v3"],O=["v4"],x={zero:0,one:1,two:2,few:3,many:4,other:5};class P{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=E.create("pluralResolver"),this.options.compatibilityJSON&&!O.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return L.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:C[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{const n=y("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];const r=new Intl.PluralRules(n,{type:i});return this.pluralRulesCache[s]=r,r}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>x[e]-x[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?`_plural_${i.toString()}`:s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!R.includes(this.options.compatibilityJSON)}}const B=function(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=((e,t,n)=>{const i=u(e,n);return void 0!==i?i:u(t,n)})(e,n,i);return!o&&r&&t(i)&&(o=m(e,i,s),void 0===o&&(o=m(n,i,s))),o},D=e=>e.replace(/\$/g,"$$$$");class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=E.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:s,prefixEscaped:r,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:u,unescapePrefix:c,nestingPrefix:d,nestingPrefixEscaped:g,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:y,maxReplaces:v,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:p,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=s?h(s):r||"{{",this.suffix=o?h(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?h(d):g||h("$t("),this.nestingSuffix=f?h(f):m||h(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=v||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,s,r){let o,a,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const t=B(n,u,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(t,void 0,s,{...r,...n,interpolationkey:e}):t}const t=e.split(this.formatSeparator),i=t.shift().trim(),o=t.join(this.formatSeparator).trim();return this.format(B(n,u,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,s,{...r,...n,interpolationkey:i})};this.resetRegExp();const h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>D(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?D(this.escape(e)):D(e)}].forEach((n=>{for(l=0;o=n.regex.exec(e);){const s=o[1].trim();if(a=c(s),void 0===a)if("function"==typeof h){const n=h(e,o,r);a=t(n)?n:""}else if(r&&Object.prototype.hasOwnProperty.call(r,s))a="";else{if(d){a=o[0];continue}this.logger.warn(`missed to pass in variable ${s} for interpolating ${e}`),a=""}else t(a)||this.useRawValueToEscape||(a=i(a));const u=n.safeValue(a);if(e=e.replace(o[0],u),d?(n.regex.lastIndex+=a.length,n.regex.lastIndex-=o[0].length):n.regex.lastIndex=0,l++,l>=this.maxReplaces)break}})),e}nest(e,n){let s,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const i=e.split(new RegExp(`${n}[ ]*{`));let s=`{${i[1]}`;e=i[0],s=this.interpolate(s,o);const r=s.match(/'/g),a=s.match(/"/g);(r&&r.length%2==0&&!a||a.length%2!=0)&&(s=s.replace(/'/g,'"'));try{o=JSON.parse(s),t&&(o={...t,...o})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${s}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;s=this.nestingRegexp.exec(e);){let u=[];o={...a},o=o.replace&&!t(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(-1!==s[0].indexOf(this.formatSeparator)&&!/{.*}/.test(s[1])){const e=s[1].split(this.formatSeparator).map((e=>e.trim()));s[1]=e.shift(),u=e,c=!0}if(r=n(l.call(this,s[1].trim(),o),o),r&&s[0]===e&&!t(r))return r;t(r)||(r=i(r)),r||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),r=""),c&&(r=u.reduce(((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:s[1].trim()})),r.trim())),e=e.replace(s[0],r),this.regexp.lastIndex=0}return e}}const M=e=>{const t={};return(n,i,s)=>{let r=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(r={...r,[s.interpolationkey]:void 0});const o=i+JSON.stringify(r);let a=t[o];return a||(a=e(y(i),s),t[o]=a),a(n)}};class F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=E.create("formatter"),this.options=e,this.formats={number:M(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:M(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:M(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:M(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:M(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=M(t)}format(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find((e=>e.indexOf(")")>-1))){const e=s.findIndex((e=>e.indexOf(")")>-1));s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce(((e,t)=>{const{formatName:s,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const s=i[1].substring(0,i[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),s=i.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=s),"false"===s&&(n[r]=!1),"true"===s&&(n[r]=!0),isNaN(s)||(n[r]=parseInt(s,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[s]){let t=e;try{const o=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},a=o.locale||o.lng||i.locale||i.lng||n;t=this.formats[s](e,a,{...r,...i,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${s}`),e}),e)}}class U extends k{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=E.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const s={},r={},o={},a={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===r[o]&&(r[o]=!0):(this.state[o]=1,i=!1,void 0===r[o]&&(r[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))})),i||(o[e]=!0)})),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const i=e.split("|"),s=i[0],r=i[1];t&&this.emit("failedLoading",s,r,t),!t&&n&&this.store.addResourceBundle(s,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:i,k:s}=a(e,t,Object);i[s]=i[s]||[],i[s].push(n)})(n.loaded,[s],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:s,callback:r});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*s,r)}),s):r(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then((e=>o(null,e))).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();t(e)&&(e=this.languageUtils.toResolveHierarchy(e)),t(n)&&(n=[n]);const r=this.queueLoad(e,n,i,s);if(!r.toLoad.length)return r.pending.length||s(),null;r.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,((n,r)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,r),this.loaded(e,n,r)}))}saveMissing(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const a={...r,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,n,i,a):l(e,t,n,i),s&&"function"==typeof s.then?s.then((e=>o(null,e))).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,n,i,o,a)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}}const j=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let n={};if("object"==typeof e[1]&&(n=e[1]),t(e[1])&&(n.defaultValue=e[1]),t(e[2])&&(n.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const t=e[3]||e[2];Object.keys(t).forEach((e=>{n[e]=t[e]}))}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),H=e=>(t(e.ns)&&(e.ns=[e.ns]),t(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),t(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),G=()=>{};class z extends k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=H(e),this.services={},this.logger=E,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof i&&(s=i,i={}),!i.defaultNS&&!1!==i.defaultNS&&i.ns&&(t(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const r=j();this.options={...r,...this.options,...H(i)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==i.keySeparator&&(this.options.userDefinedKeySeparator=i.keySeparator),void 0!==i.nsSeparator&&(this.options.userDefinedNsSeparator=i.nsSeparator);const o=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?E.init(o(this.modules.logger),this.options):E.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=F);const n=new w(this.options);this.store=new S(this.options.resources,this.options);const i=this.services;i.logger=E,i.resourceStore=this.store,i.languageUtils=n,i.pluralResolver=new P(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(i.formatter=o(t),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new N(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new U(o(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e.emit(t,...i)})),this.modules.languageDetector&&(i.languageDetector=o(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=o(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new I(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,s||(s=G),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const a=n(),l=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),s(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),a}loadResources(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const i=t(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};i?t(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>t(e))),this.options.preload&&this.options.preload.forEach((e=>t(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)}))}else n(null)}reloadResources(e,t,i){const s=n();return"function"==typeof e&&(i=e,e=void 0),"function"==typeof t&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=G),this.services.backendConnector.reload(e,t,(e=>{s.resolve(),i(e)})),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&_.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,i){var s=this;this.isLanguageChangingTo=e;const r=n();this.emit("languageChanging",e);const o=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(e,t)=>{t?(o(t),this.translator.changeLanguage(t),this.isLanguageChangingTo=void 0,this.emit("languageChanged",t),this.logger.log("languageChanged",t)):this.isLanguageChangingTo=void 0,r.resolve((function(){return s.t(...arguments)})),i&&i(e,(function(){return s.t(...arguments)}))},l=n=>{e||n||!this.services.languageDetector||(n=[]);const i=t(n)?n:this.services.languageUtils.getBestMatchFromCodes(n);i&&(this.language||o(i),this.translator.language||this.translator.changeLanguage(i),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(i)),this.loadResources(i,(e=>{a(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e):l(this.services.languageDetector.detect()),r}getFixedT(e,n,i){var s=this;const r=function(e,t){let n;if("object"!=typeof t){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];n=s.options.overloadTranslationOptionHandler([e,t].concat(a))}else n={...t};n.lng=n.lng||r.lng,n.lngs=n.lngs||r.lngs,n.ns=n.ns||r.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||i||r.keyPrefix);const u=s.options.keySeparator||".";let c;return c=n.keyPrefix&&Array.isArray(e)?e.map((e=>`${n.keyPrefix}${u}${e}`)):n.keyPrefix?`${n.keyPrefix}${u}${e}`:e,s.t(c,n)};return t(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=i,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!r(n,e)||i&&!r(s,e)))}loadNamespaces(e,i){const s=n();return this.options.ns?(t(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{s.resolve(),i&&i(e)})),s):(i&&i(),Promise.resolve())}loadLanguages(e,i){const s=n();t(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return o.length?(this.options.preload=r.concat(o),this.loadResources((e=>{s.resolve(),i&&i(e)})),s):(i&&i(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new w(j());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new z(i);return void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e)),["store","services","language"].forEach((e=>{s[e]=this[e]})),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new S(this.store.data,i),s.services.resourceStore=s.store),s.translator=new I(s.services,i),s.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];s.emit(e,...n)})),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const V=z.createInstance();V.createInstance=z.createInstance,V.createInstance,V.dir,V.init,V.loadResources,V.reloadResources,V.use,V.changeLanguage,V.getFixedT,V.t,V.exists,V.setDefaultNamespace,V.hasLoadedNamespace,V.loadNamespaces,V.loadLanguages;const{slice:W,forEach:Y}=[],K=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,q={create(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+60*n*1e3)),i&&(s.domain=i),document.cookie=((e,t,n)=>{const i=n||{};i.path=i.path||"/";let s=`${e}=${encodeURIComponent(t)}`;if(i.maxAge>0){const e=i.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(e)}`}if(i.domain){if(!K.test(i.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${i.domain}`}if(i.path){if(!K.test(i.path))throw new TypeError("option path is invalid");s+=`; Path=${i.path}`}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");s+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s})(e,encodeURIComponent(t),s)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},remove(e){this.create(e,"",-1)}};var X={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return q.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:i,cookieDomain:s,cookieOptions:r}=t;n&&"undefined"!=typeof document&&q.create(n,e,i,s,r)}},$={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let e=0;e<i.length;e++){const s=i[e].indexOf("=");s>0&&i[e].substring(0,s)===n&&(t=i[e].substring(s+1))}}return t}};let J=null;const Z=()=>{if(null!==J)return J;try{J="undefined"!==window&&null!==window.localStorage;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){J=!1}return J};var Q={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Z())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Z()&&window.localStorage.setItem(n,e)}};let ee=null;const te=()=>{if(null!==ee)return ee;try{ee="undefined"!==window&&null!==window.sessionStorage;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){ee=!1}return ee};var ne={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&te())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&te()&&window.sessionStorage.setItem(n,e)}},ie={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:n,language:i}=navigator;if(e)for(let n=0;n<e.length;n++)t.push(e[n]);n&&t.push(n),i&&t.push(i)}return t.length>0?t:void 0}},se={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const i=n||("undefined"!=typeof document?document.documentElement:null);return i&&"function"==typeof i.getAttribute&&(t=i.getAttribute("lang")),t}},re={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if("undefined"==typeof window)return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;const i="number"==typeof t?t:0;return n[i]?.replace("/","")}},oe={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const n="number"==typeof t?t+1:1,i="undefined"!=typeof window&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[n]}};class ae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=function(e){return Y.call(W.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(X),this.addDetector($),this.addDetector(Q),this.addDetector(ne),this.addDetector(ie),this.addDetector(se),this.addDetector(re),this.addDetector(oe)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.map((e=>this.options.convertDetectedLanguage(e))),this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e,t){t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e){var t=function(e){if("object"!=ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ue(t)?t:t+""}function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ce(i.key),i)}}function de(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pe(e,t){if(t&&("object"==ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}ae.type="languageDetector",V.use(ae).init({fallbackLng:["en","fr"],load:"languageOnly",detection:{order:["localStorage","querystring","navigator","htmlTag"],lookupQuerystring:"lng",lookupLocalStorage:"i18nextLng",caches:["localStorage"]}}),V.addResourceBundle("fr","translation",{debugModeEnabled:"Mode de debug activé",lang:{fr:"Français",en:"English"},update:{updateAvailable:"Une mise à jour du jeu est disponible",version:"Version",of:"du",current:"Vous disposez actuellement de la version",versionDate:"{{date, DD/MM/YYYY}}",download:"Télécharger la mise à jour",getURL:"Obtenir l'adresse URL du téléchargement",getChanges:"Obtenir la liste des changements",URLToDownload:"Adresse URL menant au téléchargement :",noChanges:"Aucun changement renseigné.",changes:"Changements de la nouvelle version :"},menu:{selectGame:"Sélectionnez un mode de jeu :",soloAi:"IA solo",soloPlayer:"Joueur solo",playerVsAi:"Joueur VS IA",aiVsAi:"IA VS IA",battleRoyale:"Battle Royale",onlineBattleRoyale:"Battle Royale en ligne",levelsSoloPlayer:"Niveaux (joueur solo)",levelsSoloAI:"Niveaux (IA solo)",version:"Version",versionDate:"{{date, DD/MM/YYYY}}",by:"Par",infos:"Plus d'infos",readme:"Fichier Lisez-moi",source:"Télécharger la source",language:"Langue :",othersSettings:"Paramètres",enableAnimations:"Activer les animations",showDebugInfo:"Activer le mode de débogage",renderBlur:"Activer le rendu de flou",enableMultithreading:"Activer le multi-threading",onlineEnableClientSidePredictions:"Activer les prédictions côté client pour le jeu en ligne",settingNotAvailable:"Ce paramètre est actuellement indisponible.",multithreadingInfos:"Si activé, le moteur de jeu et le moteur graphique seront exécutés de manière indépendante ce qui améliorera les performances du jeu.",onlineEnableClientSidePredictionsInfos:"Si activé, les performances du mode de jeu en ligne seront plus stables. Fonctionnalité expérimentale.",highDpi:"Activer le rendu en mode haut DPI",highDpiInfos:"Si votre appareil a un écran avec une résolution à haut DPI, cela améliorera la résolution du rendu afin d'obtenir une image plus nette. Cela peut cependant réduire les performances.",textOutput:"Activer le rendu en mode texte",graphicSkin:"Skin graphique :",flat:"Flat (par défaut)",tropical:"Tropical",pixel:"Pixel",maxFPS:"FPS maximum :"},settings:{title:"Paramètres de la partie :",possibleFailInitGame:"Il est possible que l'initialisation de la partie échoue avec vos paramètres car il n'y aura pas assez d'espace pour placer tous les Snake. Dans ce cas, un message « Une erreur est survenue » peut s'afficher. Essayez avec d'autres paramètres.",gridSize:"Taille de la grille :",placeholderHeight:"Hauteur",placeholderWidth:"Largeur",invalidSize:"Cette valeur doit être comprise entre {{min}} et {{max}}",options:"Autres options :",borderWalls:"Entourer la grille de murs",generateWalls:"Générer des murs à des positions aléatoires",mazeGrid:"Générer un labyrinthe",sameGrid:"Partie sur la même grille",speed:"Vitesse du jeu :",speedSelect:{1:"1 – La plus rapide",3:"3 – Rapide",5:"5 – Moyenne",8:"8 – Normale",10:"10 – Assez lente",15:"15 – Lente",20:"20 – Très lente",25:"25 – Extrêmement lente",custom:"Vitesse personnalisée…"},invalidSpeed:"Cette valeur doit être comprise entre {{min}} et {{max}}",progressiveSpeed:"Augmenter la vitesse progressivement",customSpeed:"Vitesse personnalisée :",placeholderCustomSpeed:"Entrez la vitesse…",customSpeedHelp:"Plus le nombre est élevé, plus la vitesse du jeu est lente, et inversement",playerSettings:"Options du joueur :",aiAssistant:"Activer l'assistant IA",aiAssistantInfos:"En activant cette option, une IA tentera de corriger votre trajectoire si vous êtes sur le point de vous écraser sur un obstacle. Réduit la difficulté du jeu.",aiLevel:"Niveau de l'IA :",aiLevelSelect:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Élevé",ultra:"Ultra"},invalidaiLevel:"Cette valeur est invalide",autoRetry:"Faire que l'IA recommence auto sa partie après un Game Over",numberIA:"Nombre d'IA :",placeholderNumberIA:"Entrez le nombre…",invalidIANumber:"Cette valeur doit être comprise entre 2 et 100",battleAgainstAIs:"Jouer contre les IA",validate:"Valider",reset:"Réinitialiser",backToMenu:"Retour au menu",privateGame:"Garder la partie privée",enableAI:"Activer les IA",seedGrid:"Valeur aléatoire grille :",seedGame:"Valeur aléatoire jeu :",advancedSettings:"Paramètres avancés…",invalidValue:"Cette valeur est invalide."},game:{backToMenu:"Retour au menu",currentMode:"Mode de jeu actuel :",confirmQuit:"Êtes-vous sûr de vouloir retourner au menu ?",equalityPlayerVSAI:"Vous avez fini ex-aequo avec l'IA !",winPlayerVSAI:"Bravo, vous avez gagné !",losePlayerVSAI:"Dommage, l'IA vous a battu avec un score supérieur !",oneWinnerAIVSAI:"L'IA n°{{numWinner}} a gagné !",equalityAIVSAI:"Les deux IA ont fini ex-aequo !",oneWinnerBattleRoyale:"L'IA n°{{numWinner}} a gagné avec un score de {{score}} !",winnersBattleRoyale:"Les IA",winnerAIBattleRoyale:"L'IA",winnersNumBattleRoyale:"n°{{numWinner}}",andWinnersBattleRoyale:"et",andPlayerWinnersBattleRoyale:"ainsi que vous",winScoreBattleRoyale:"ont gagné avec un score de {{score}} !",winPlayerScoreBattleRoyale:"avez gagné avec un score de {{score}} !",playerWinnerBattleRoyale:"Vous avez gagné avec un score de {{score}} !"},levels:{default:"Niveaux par défaut",downloaded:"Niveaux téléchargés",titlePlayer:"Niveaux (joueur solo)",titleAI:"Niveaux (IA solo)",emptyList:"Aucun niveau trouvé…",download:"Télécharger des niveaux",downloadLink:"Les niveaux seront téléchargés depuis {{url}}",editDownloadURL:"Modifier l'URL de téléchargement",editDownloadURLPrompt:"Entrez l'URL de téléchargement des niveaux.\n* Variables disponibles :\n{player} - type de joueur (humain, IA)\n{appVersion} - version de l'application.\n\nLa modification de ce paramètre peut faire planter le jeu ou vous exposer à des problèmes de sécurité. Ne la modifiez que si vous savez ce que vous faites. Ce paramètre n'est pas persistant et sera effacé si vous rechargez l'application.",downloading:"Téléchargement en cours, veuillez patienter… Si le bouton reste grisé après plus de 10 secondes, cliquez sur le bouton ci-dessous pour le débloquer et réessayer le téléchargement :",buttonDeblock:"Débloquer le téléchargement",disabledLevel:"Niveau bloqué. Terminez les niveaux précédents pour le débloquer.",notCompatible:"Ce niveau n'est pas compatible avec cette version du jeu. Mettez-le à jour.",goalAchieved:"Objectif atteint ! Vous pouvez passer au prochain niveau.",goalNotAchieved:"Objectif raté ! Essayez à nouveau.",level:"Niveau",reachScore:"Atteignez au moins le score de {{value}} pour passer ce niveau !",reachScoreTime:"Atteignez le score de {{value}} en moins de {{count}} seconde !",reachScoreTime_plural:"Atteignez le score de {{value}} en moins de {{count}} secondes !",reachMaxScore:"Atteignez le score maximal pour cette grille pour passer ce niveau !",multiBestScore:"Terminez cette partie en obtenant un meilleur score que l'adversaire pour passer ce niveau !",multiBestScore_plural:"Terminez cette partie en obtenant un meilleur score que les adversaires pour passer ce niveau !",multiReachScoreFirst:"Atteignez le score de {{value}} avant l'adversaire pour passer ce niveau !",multiReachScoreFirst_plural:"Atteignez le score de {{value}} avant les adversaires pour passer ce niveau !",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour passer ce niveau.\nLe Snake n'avance pas automatiquement.",bestScore:"Meilleur score : {{count}}",bestTime:"Meilleur temps : {{count}} seconde",bestTime_plural:"Meilleur temps : {{count}} secondes",bestScoreShort:"× {{count}}",bestTimeShort:"{{count}} seconde",bestTimeShort_plural:"{{count}} secondes",timerRemaining:"Il reste {{count}} seconde",timerRemaining_plural:"Il reste {{count}} secondes",localstorageDisabled:"Les cookies sont désactivés sur votre navigateur. Vous perdrez votre progression au prochain rechargement de la page. Activez-les puis rechargez la page pour éviter cela.",difficulty:"Difficulté :",levelBonusShop:"Boutique des bonus",displayBonusShop:"Afficher la boutique…",bonusNotApplicable:"Ce bonus n'est pas applicable.",notEnoughFruits:"Vous n'avez pas assez de crédit pour acheter ce bonus.",bonusAlreadyEquipped:"Vous êtes déjà équipé d'un bonus. Utilisez-le en jouant à un niveau ou vendez-le.",bonusEquipped:"Bonus équipé :",none:"aucun",sellBonus:"Vendre le bonus",bonus:{passLevel:"Passer un niveau",passLevelInfo:"Ce bonus vous permet de passer un niveau. Achetez-le, puis sélectionnez un niveau : celui-ci sera automatiquement passé, comme si vous l'aviez réussi.",aiAssistant:"Mode assistant IA",aiAssistantInfo:"Ce bonus permet d'activer le mode assistant IA. Achetez-le, puis sélectionnez un niveau : le mode assistant IA sera activé. Ne fonctionne pas pour certains niveaux, comme les labyrinthes.",unlockAllLevels:"Débloquer tous les niveaux",unlockAllLevelsInfo:"Ce bonus vous permet de débloquer tous les niveaux, qu'ils soient présents ou futurs.",increaseGoldFruits:"Augmenter la fréquence d'apparition des pommes dorées",increaseGoldFruitsInfo:"Ce bonus vous permet d'augmenter la fréquence d'apparition des pommes dorées : la chance d'apparition passe de 1 chance sur 100 à 1 chance sur 3.",destroyAis:"Détruire les IAs adverses",destroyAisInfo:"Ce bonus vous permet de détruire les IAs adverses, ce qui rend les niveaux contenant des IAs plus faciles.",unknown:"Bonus inconnu",unknownInfo:"Ce bonus est inconnu. Peut-être a-t-il été acheté sur une version plus récente du jeu. Voulez-vous le vendre quand même, sachant que son prix est inconnu ? Autrement dit, vous ne serez pas remboursé.",noTimeLimit:"Pas de limite de temps",noTimeLimitInfo:"Désactive la limite de temps pour les niveaux qui en ont une."}},servers:{serverList:"Liste des serveurs",selectInfo:"Sélectionnez un serveur :",noServerFound:"Aucun serveur trouvé…",loadingList:"Chargement de la liste des serveurs… Veuillez patienter.",noRoomound:"Aucune salle trouvée…",infos:"{{width}}×{{height}} – Vitesse : {{speed}}",infosBorderWalls:"Grille entourée de murs",infosGenerateWalls:"Murs générés aléatoirement",infosPlayers:"{{count}} joueur/{{max}}",infosPlayers_plural:"{{count}} joueurs/{{max}}",infosSpectators:"{{count}} spectateur",infosSpectators_plural:"{{count}} spectateurs",backToList:"Retour à la liste des serveurs",roomsListTitle:"Liste des salles",roomsListInfos:"Sélectionnez une salle :",loadingRooms:"Chargement de la liste des salles… Veuillez patienter.",createRoom:"Créer une salle",connectionError:"Une erreur est survenue lors de la connexion au serveur. Veuillez réessayer.",errorLoadingRooms:"Une erreur est survenue lors du chargement de la liste des salles. Veuillez réessayer.",creatingRoom:"Création de la salle… Veuillez patienter.",room:"Salle n°{{number}}",errorRoomCreation:"Une erreur est survenue lors de la création de la salle. Veuillez réessayer.",joinPrivateRoom:"Rejoindre une salle privée",enterCode:"Entrez le code de la salle :",customServer:"Serveur personnalisé…",enterCustomServer:"Entrez l'adresse du serveur :",connectingToServer:"Connexion au serveur… Veuillez patienter.",cancel:"Annuler",refreshRooms:"Actualiser la liste",joinRoom:"Connexion à la salle… Veuillez patienter.",errorRoomJoin:"Une erreur est survenue lors de la connexion à la salle. Veuillez réessayer.",errorReason:"Raison de l'erreur :",errorReason_unknown:"Inconnue",errorRoomJoinReason_roomNotFound:"La salle n'a pas été trouvée.",errorRoomJoinReason_roomAlreadyJoined:"Vous avez déjà rejoint cette salle.",errorRoomCreationReason_maxRoomLimitReached:"Le nombre maximal de salles que le serveur peut gérer a été atteint.",errorRoomCreationReason_invalidSettings:"Paramètres invalides.",errorRoomCreationReason_alreadyCreatedRoom:"Vous avez déjà créé une salle ou vous avez déjà rejoint une salle.",errorServerVersion:"La version de ce serveur ({{server_version}}) est différente de votre version du jeu ({{client_version}}). Vous risquez de rencontrer des problèmes.",addressLabel:"Adresse du serveur :",roomCode:"Code de la salle :",untitled:"Sans titre",searchingPlayers:"(recherche de joueurs)",started:"(partie démarrée)",starting:"(démarrage en cours)",authenticationServer:"Authentification au serveur",linkAuthenticationServer:"Si le formulaire ne s'affiche pas, cliquez ici",disconnectedError:"Vous avez été déconnecté du serveur. Veuillez réessayer."}},!0,!1),V.addResourceBundle("en","translation",{debugModeEnabled:"Debug mode enabled",lang:{fr:"Français",en:"English"},update:{updateAvailable:"An update of the game is available",version:"Version",of:"of",current:"You currently have the version",versionDate:"{{date, MM/DD/YYYY}}",download:"Download the update",getURL:"Get the URL to the download",getChanges:"Get the list of changes",URLToDownload:"Download URL:",noChanges:"No change provided.",changes:"Changes in the new version:"},menu:{selectGame:"Select a game mode:",soloAi:"Single AI",soloPlayer:"Single player",playerVsAi:"Player VS AI",aiVsAi:"AI VS AI",battleRoyale:"Battle Royale",onlineBattleRoyale:"Online Battle Royale",levelsSoloPlayer:"Levels (single player)",levelsSoloAI:"Levels (single AI)",version:"Version",versionDate:"{{date, MM/DD/YYYY}}",by:"By",infos:"More informations",readme:"Readme file",source:"Download the source",language:"Language:",othersSettings:"Settings",enableAnimations:"Enable the animations",showDebugInfo:"Enable the debug mode",renderBlur:"Enable the blur rendering",enableMultithreading:"Enable the multithreading",onlineEnableClientSidePredictions:"Enable the client-side predictions for online game",settingNotAvailable:"This setting is currently unavailable.",multithreadingInfos:"If enabled, the game engine and the graphics engine will run independently which will improve game performance.",onlineEnableClientSidePredictionsInfos:"If enabled, the performance of the online game mode will be more stable. Experimental functionality.",highDpi:"Enable rendering in high DPI mode",highDpiInfos:"If your device has a screen with high DPI resolution, this will improve the rendering resolution for a sharper image. This may, however, reduce performance.",textOutput:"Enable the text mode rendering",graphicSkin:"Graphic skin:",flat:"Flat (by default)",tropical:"Tropical",pixel:"Pixel",maxFPS:"Maximum FPS:"},settings:{title:"Game settings:",possibleFailInitGame:'It\'s possible that the initialization of the game fails with your settings because there will not be enough space to place all the Snake. In this case, a message "An error has occurred" may be displayed. Try with other settings.',gridSize:"Grid size:",placeholderHeight:"Height",placeholderWidth:"Width",invalidSize:"This value must be between {{min}} and {{max}}",options:"Others options:",borderWalls:"Surround the grid with walls",generateWalls:"Generate walls at random positions",mazeGrid:"Generate a maze",sameGrid:"Game on the same grid",speed:"Speed:",speedSelect:{1:"1 – Fastest",3:"3 – Fast",5:"5 – Medium",8:"8 – Normal",10:"10 – Quite slow",15:"15 – Slow",20:"20 – Very slow",25:"25 – Extremely slow",custom:"Custom speed…"},invalidSpeed:"This value must be between {{min}} and {{max}}",progressiveSpeed:"Increase the speed progressively",customSpeed:"Custom speed:",placeholderCustomSpeed:"Enter the speed…",customSpeedHelp:"The higher the number, the slower the game speed, and vice versa",playerSettings:"Player options:",aiAssistant:"Enable the AI assistant",aiAssistantInfos:"By enabling this option, an AI ​​will try to correct your trajectory if you are about to crash into an obstacle. Reduces the difficulty of the game.",aiLevel:"AI level:",aiLevelSelect:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},invalidaiLevel:"This value is invalid",autoRetry:"Make the AI restarts its game after a Game Over",numberIA:"Number of AI:",placeholderNumberIA:"Enter the number…",invalidIANumber:"This value must be between 2 and 100",battleAgainstAIs:"Play against AIs",validate:"Validate",reset:"Reset",backToMenu:"Back to the menu",privateGame:"Keep the game private",enableAI:"Enable the AIs",seedGrid:"Grid random value:",seedGame:"Game random value:",advancedSettings:"Advanced settings…",invalidValue:"This value is invalid."},game:{backToMenu:"Back to the menu",currentMode:"Current game mode:",confirmQuit:"Are you sure that you want to go back to the menu?",equalityPlayerVSAI:"You finished tied with AI!",winPlayerVSAI:"Congratulations, you won!",losePlayerVSAI:"Too bad, the AI ​​beat you with a higher score!",oneWinnerAIVSAI:"The AI n°{{numWinner}} won!",equalityAIVSAI:"The two AIs finished tied!",oneWinnerBattleRoyale:"The AI n°{{numWinner}} won with a score of {{score}}!",winnersBattleRoyale:"The AIs",winnerAIBattleRoyale:"The AI",winnersNumBattleRoyale:"n°{{numWinner}}",andWinnersBattleRoyale:"and",andPlayerWinnersBattleRoyale:"as well as you",winScoreBattleRoyale:"won with a score of {{score}}!",winPlayerScoreBattleRoyale:"won with a score of {{score}}!",playerWinnerBattleRoyale:"You won with a score of {{score}}!"},levels:{default:"Default levels",downloaded:"Downloaded levels",titlePlayer:"Levels (single player)",titleAI:"Levels (single AI)",emptyList:"No level found…",download:"Download levels",downloadLink:"The levels will be downloaded from {{url}}",editDownloadURL:"Edit the download URL",editDownloadURLPrompt:"Enter the download URL of the levels.\n* Available variables:\n{player} - player type (human, AI)\n{appVersion} - version of the application.\n\nChanging this setting may cause the game to crash or expose you to security issues. Only change it if you know what you are doing. This setting is not persistent and will be erased if you reload the application.",downloading:"Downloading, please wait… If the button remains gray after more than 10 seconds, click on the button below to unblock and try again:",buttonDeblock:"Unlock the download",disabledLevel:"Level locked. Complete the previous levels to unlock it.",notCompatible:"This level is not compatible with this version of the game. Update it.",goalAchieved:"Goal achieved! You can move to the next level.",goalNotAchieved:"Goal missed! Try again.",level:"Level",reachScore:"Reach at least the score of {{value}} to pass this level!",reachScoreTime:"Reach the score of {{value}} in less than {{count}} second!",reachScoreTime_plural:"Reach the score of {{value}} in less than {{count}} seconds!",reachMaxScore:"Reach the maximum score for this grid to pass this level!",multiBestScore:"Finish this game by getting a better score than the opponent to pass this level!",multiBestScore_plural:"Finish this game by getting a better score than the opponents to pass this level!",multiReachScoreFirst:"Reach the score of {{value}} before the opponent to pass this level!",multiReachScoreFirst_plural:"Reach the score of {{value}} before the opponents to pass this level!",mazeMode:"Maze mode! Find the path to the apple to pass this level.\nThe Snake doesn't move automatically.",bestScore:"Best score: {{count}}",bestTime:"Best time: {{count}} second",bestTime_plural:"Best time: {{count}} seconds",timerRemaining:"{{count}} second left",timerRemaining_plural:"{{count}} seconds left",bestScoreShort:"× {{count}}",bestTimeShort:"{{count}} second",bestTimeShort_plural:"{{count}} seconds",localstorageDisabled:"Cookies are disabled on your browser. You will lose your progress the next time you reload the page. Activate them and reload the page to avoid this.",difficulty:"Difficulty :",levelBonusShop:"Bonus shop",displayBonusShop:"Display the shop…",bonusNotApplicable:"This bonus is not applicable.",notEnoughFruits:"You don't have enough credit to buy this bonus.",bonusAlreadyEquipped:"You are already equipped with a bonus. Use it while playing a level or sell it.",bonusEquipped:"Equipped bonus:",none:"none",sellBonus:"Sell the bonus",bonus:{passLevel:"Pass a level",passLevelInfo:"This bonus allows you to pass a level. Buy it, then select a level: it will be automatically passed, as if you had succeeded it.",aiAssistant:"Assistant AI mode",aiAssistantInfo:"This bonus enables the AI ​​assistant mode to be activated. Buy it, then select a level: AI assistant mode will be activated. Does not work for some levels, like mazes.",unlockAllLevels:"Unlock all levels",unlockAllLevelsInfo:"This bonus allows you to unlock all levels, whether present or future.",increaseGoldFruits:"Increase the frequency of appearance of golden apples",increaseGoldFruitsInfo:"This bonus allows you to increase the frequency of appearance of golden apples: the chance of appearing is reduced from 1 in 100 to 1 in 3.",destroyAis:"Destroy opponent AIs",destroyAisInfo:"This bonus allows you to destroy enemy AIs, which makes levels with AIs easier.",unknown:"Unknown bonus",unknownInfo:"This bonus is unknown. Perhaps it was purchased on a newer version of the game. Do you want to sell it anyway, knowing that its price is unknown? In other words, you will not be refunded.",noTimeLimit:"No time limit",noTimeLimitInfo:"Disables the time limit for levels that have one."}},servers:{serverList:"Servers list",selectInfo:"Select a server:",noServerFound:"No server found…",loadingList:"Loading servers list… Please wait.",noRoomound:"No room found…",infos:"{{width}}×{{height}} – Speed: {{speed}}",infosBorderWalls:"Grid bordered by walls",infosGenerateWalls:"Random walls",infosPlayers:"{{count}} player/{{max}}",infosPlayers_plural:"{{count}} players/{{max}}",infosSpectators:"{{count}} spectator",infosSpectators_plural:"{{count}} spectators",backToList:"Back to the servers list",roomsListTitle:"Rooms list",roomsListInfos:"Select a room:",loadingRooms:"Loading the rooms list… Please wait.",createRoom:"Create a room",connectionError:"An error has occurred when connecting to the server. Please retry.",errorLoadingRooms:"An error has occurred when loading the rooms list. Please retry.",creatingRoom:"Creating the room… Please wait.",room:"Room n°{{number}}",errorRoomCreation:"An error has occurred when creating the room. Please retry.",joinPrivateRoom:"Join a private room",enterCode:"Enter the code of the room:",customServer:"Custom server…",enterCustomServer:"Enter the address of the server:",connectingToServer:"Connecting to the server… Please wait.",cancel:"Cancel",refreshRooms:"Refresh the list",joinRoom:"Joining the room… Please wait.",errorRoomJoin:"An error has occurred when joining the room. Please retry.",errorReason:"Error reason:",errorReason_unknown:"Unknown",errorRoomJoinReason_roomNotFound:"The room was not found.",errorRoomJoinReason_roomAlreadyJoined:"You already joined this room.",errorRoomCreationReason_maxRoomLimitReached:"The maximum number of rooms the server can manage has been reached.",errorRoomCreationReason_invalidSettings:"Invalid settings.",errorRoomCreationReason_alreadyCreatedRoom:"You have already created a room or you have already joined a room.",errorServerVersion:"This server version ({{server_version}}) is different from your version of the game ({{client_version}}). You may encounter issues.",addressLabel:"Server address:",roomCode:"Room code:",untitled:"Untitled",searchingPlayers:"(searching players)",started:"(game started)",starting:"(game starting)",authenticationServer:"Server authentication",linkAuthenticationServer:"If the form does not appear, click here",disconnectedError:"You have been disconnected from the server. Please retry."}},!0,!1),V.addResourceBundle("fr","translation",{engine:{score:"Score",num:"n°",initFailed:"Échec de l'initialisation du jeu : le Snake est plus grand que la grille",continue:"Reprendre",reset:"Recommencer la partie",retryInit:"Réessayer",exit:"Quitter",yes:"Oui",no:"Non",ok:"OK",about:"À propos…",infosGame:"Infos partie",player:"Joueur :",playerHuman:"Vous",playerAI:"IA",aiLevel:"Niveau de l'IA :",aiLevelList:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Élevé",ultra:"Ultra",custom:"Personnalisé",mock:"Mock"},sizeGrid:"Taille de la grille :",currentSpeed:"Vitesse actuelle :",progressiveSpeed:"Vitesse progressive",loading:"Chargement des ressources…",exited:"Cette partie a été définitivement quittée. En attente de la fin des autres parties…",error:"Une erreur est survenue !",errorLoading:"Une erreur est survenue lors du chargement des ressources. Vérifiez votre connexion Internet.",exitConfirm:"Êtes-vous sûr de vouloir quitter la partie ?",resetConfirm:"Êtes-vous sûr de vouloir recommencer la partie ?",scoreMax:"Score maximal atteint !",gameOver:"Game Over !",gameFinished:"Partie terminée !",pause:"Pause",playerMin:"J",aiMin:"IA",aboutScreen:{title:"SnakeIA par Eliastik",versionAndDate:"Version {{version}} ({{date, DD/MM/YYYY}})"},debug:{fps:"IPS :",frames:"Images :",ticks:"Tours :",speed:"Vit. :",paused:"En pause"},colors:{white:"Blanc",gray:"Gris",black:"Noir",red:"Rouge",brown:"Marron",orange:"Orange",yellow:"Jaune",green:"Vert",blue:"Bleu",purple:"Mauve",pink:"Rose"},colorPlayer:"Vous êtes le Snake\nen {{color}}",arrowPlayer:"Vous êtes le Snake\nindiqué par la\nflèche",ready:"Partez !",assistAI:"Assistant IA",exitFullScreen:"Quitter plein-écran",enterFullScreen:"Mode plein-écran",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour réussir la partie.\nLe Snake n'avance pas automatiquement.",mazeWin:"Bien joué !",mazeModeMin:"Mode labyrinthe",onlineMode:"Jeu en ligne",ranking:"Classement",infosGameAdvanced:"Avancé…",seedGrid:"Valeur aléatoire grille :",seedGame:"Valeur aléatoire jeu :",ping:"Ping :",aiStuck:"Toutes les IAs sont bloquées. La partie se terminera si les IAs restent bloquées.",servers:{errorConnection:"Une erreur est survenue lors de la connexion au serveur.",waitingPlayers:"En attente de joueurs…",gameStart:"Début de la partie\ndans",nextGameStart:"Prochaine partie\ndans",spectatorMode:"Mode spectateur",startGame:"Commencer la partie"},loadingWorker:"Chargement…",errorJSGameToolsConsole:"Une erreur fatale est survenue au niveau du moteur JSGameTools.",errorJSGameTools:":'(\nUne erreur fatale est survenue au niveau du moteur JSGameTools."}},!0,!1),V.addResourceBundle("en","translation",{engine:{score:"Score",num:"n°",initFailed:"Game init failed: the Snake is bigger than the grid",continue:"Continue",reset:"Reset the game",retryInit:"Retry",exit:"Exit",yes:"Yes",no:"No",ok:"OK",about:"About…",infosGame:"Game infos",player:"Player:",playerHuman:"You",playerAI:"AI",aiLevel:"AI level:",aiLevelList:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra",custom:"Custom",mock:"Mock"},sizeGrid:"Grid size:",currentSpeed:"Current speed:",progressiveSpeed:"Progressive speed",loading:"Loading resources…",exited:"This game has been definitively exited. Waiting for the end of the other games…",error:"An error has occurred!",errorLoading:"An error occurred while loading resources. Check your Internet connection.",exitConfirm:"Are you sure that you want to exit the game?",resetConfirm:"Are you sure that you want to reset the game?",scoreMax:"Maximum score reached!",gameFinished:"Game finished!",gameOver:"Game Over!",pause:"Pause",playerMin:"P",aiMin:"AI",aboutScreen:{title:"SnakeIA by Eliastik",versionAndDate:"Version {{version}} ({{date, MM/DD/YYYY}})"},debug:{fps:"FPS:",frames:"Frames:",ticks:"Ticks:",speed:"Speed:",paused:"Paused"},colors:{white:"White",gray:"Gray",black:"Black",red:"Red",brown:"Brown",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"},colorPlayer:"You are the Snake\nin {{color}}",arrowPlayer:"You are the Snake\npointed by the\narrow",ready:"Go!",assistAI:"AI assistant",exitFullScreen:"Exit fullscreen",enterFullScreen:"Fullscreen mode",mazeMode:"Maze mode! Find the path to the apple to finish this game.\nThe Snake doesn't move automatically.",mazeWin:"Good game!",mazeModeMin:"Maze mode",onlineMode:"Online game",ranking:"Ranking",infosGameAdvanced:"Advanced…",seedGrid:"Grid random value:",seedGame:"Game random value:",ping:"Ping:",aiStuck:"All the AIs are stuck. The game will end if the AIs remain stuck.",servers:{errorConnection:"An error has occurred when connecting to the server.",waitingPlayers:"Waiting for players…",gameStart:"Start of the game\nin",nextGameStart:"Next game\nin",spectatorMode:"Spectator mode",startGame:"Start the game"},loadingWorker:"Loading…",errorJSGameToolsConsole:"A fatal error has occurred at the JSGameTools engine level.",errorJSGameTools:":'(\nA fatal error has occurred at the JSGameTools engine level."}},!0,!1);const ye={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6,CROSSED:7},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA",CUSTOM:"AI_LEVEL_CUSTOM",MOCK:"AI_LEVEL_MOCK"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:28,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","×"],APP_VERSION:"2.2",DATE_VERSION:"10/18/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50,INFO_NOTIF_COLOR:"rgba(52, 152, 219, 0.5)",ERROR_NOTIF_COLOR:"rgba(231, 76, 60, 0.5)"},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},Error:{ROOM_NOT_FOUND:"ROOM_NOT_FOUND",ROOM_ALREADY_JOINED:"ROOM_ALREADY_JOINED",INVALID_SETTINGS:"INVALID_SETTINGS",MAX_ROOM_LIMIT_REACHED:"MAX_ROOM_LIMIT_REACHED",AUTHENTICATION_REQUIRED:"AUTHENTICATION_REQUIRED",ALREADY_CREATED_ROOM:"ALREADY_CREATED_ROOM",BANNED:"BANNED",DISCONNECTED:"DISCONNECTED"},GameState:{STARTING:"STARTING",STARTED:"STARTED",SEARCHING_PLAYERS:"SEARCHING_PLAYERS",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS"}};var ve=function(){return de((function e(t){le(this,e),this.name=t,this.callbacks=[]}),[{key:"registerCallback",value:function(e){this.callbacks.push(e)}}])}(),be=function(){return de((function e(){le(this,e),this.events={}}),[{key:"registerEvent",value:function(e){this.events[e]=new ve(e)}},{key:"dispatchEvent",value:function(e,t){for(var n=this.events[e].callbacks,i=0,s=n.length;i<s;i++)n[i](t)}},{key:"addEventListener",value:function(e,t){this.events[e].registerCallback(t)}}])}(),Ee=function(){return de((function e(t,n){le(this,e),this.gameUI=n,this.gameEngine=t,this.grid=null,this.snakes=null,this.lastKey=-1,this.paused=!1,this.isReseted=!1,this.exited=!1,this.gameOver=!1,this.starting=!1,this.scoreMax=!1,this.gameFinished=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.currentPlayer=null,this.onlineMode=!1,this.reactor=new be,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}),[{key:"init",value:function(){var e=this;this.update("init",{snakes:this.gameEngine.snakes,grid:this.gameEngine.grid,enablePause:this.gameEngine.enablePause,enableRetry:this.gameEngine.enableRetry,progressiveSpeed:this.gameEngine.progressiveSpeed,offsetFrame:this.gameEngine.speed*ye.Setting.TIME_MULTIPLIER,errorOccurred:this.gameEngine.errorOccurred}),this.gameEngine.onReset((function(){e.update("reset",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred,offsetFrame:e.gameEngine.speed*ye.Setting.TIME_MULTIPLIER,aiStuck:e.gameEngine.aiStuck,precAiStuck:!1}),e.reactor.dispatchEvent("onReset")})),this.gameEngine.onStart((function(){e.update("start",{snakes:e.gameEngine.snakes,grid:e.gameEngine.grid,starting:e.gameEngine.starting,countBeforePlay:e.gameEngine.countBeforePlay,paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStart")})),this.gameEngine.onPause((function(){e.update("pause",{paused:e.gameEngine.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onPause")})),this.gameEngine.onContinue((function(){e.update("continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onContinue")})),this.gameEngine.onStop((function(){e.update("stop",{paused:e.gameEngine.paused,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStop")})),this.gameEngine.onExit((function(){e.update("exit",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,exited:e.gameEngine.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onExit")})),this.gameEngine.onKill((function(){e.update("kill",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,killed:e.gameEngine.killed,snakes:e.gameEngine.snakes,gameFinished:e.gameEngine.gameFinished,grid:e.gameEngine.grid,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onKill")})),this.gameEngine.onScoreIncreased((function(){e.reactor.dispatchEvent("onScoreIncreased")})),this.gameEngine.onUpdate((function(){e.update("update",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,offsetFrame:0,errorOccurred:e.gameEngine.errorOccurred,aiStuck:e.gameEngine.aiStuck}),e.reactor.dispatchEvent("onUpdate")})),this.gameEngine.onUpdateCounter((function(){e.update("updateCounter",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onUpdateCounter")}))}},{key:"reset",value:function(){this.gameEngine.reset()}},{key:"start",value:function(){this.gameEngine.start()}},{key:"stop",value:function(){this.gameEngine.stop()}},{key:"finish",value:function(e){this.gameEngine.stop(e)}},{key:"pause",value:function(){this.gameEngine.pause()}},{key:"kill",value:function(){this.gameEngine.kill()}},{key:"tick",value:function(){this.gameEngine.paused=!1,this.gameEngine.countBeforePlay=-1,this.gameEngine.tick()}},{key:"exit",value:function(){this.gameEngine.exit()}},{key:"forceStart",value:function(){this.gameEngine.forceStart()}},{key:"updateEngine",value:function(e,t){this.gameEngine[e]=t}},{key:"setDisplayFPS",value:function(e){this.gameUI.setDisplayFPS(e)}},{key:"setNotification",value:function(e){this.gameUI.setNotification(e)}},{key:"closeRanking",value:function(){this.gameUI.gameRanking&&this.gameUI.gameRanking.forceClose()}},{key:"setTimeToDisplay",value:function(e){this.gameUI.setTimeToDisplay(e)}},{key:"setBestScore",value:function(e){this.gameUI.setBestScore(e)}},{key:"destroySnakes",value:function(e,t){this.gameEngine.destroySnakes(e,t)}},{key:"key",value:function(e){this.gameEngine.lastKey=e,this.lastKey=e;var t=this.snakes[this.getCurrentPlayer()];null!=t&&null!=t.lastKey&&(t.lastKey=e)}},{key:"getCurrentPlayer",value:function(){if(null!=this.snakes)for(var e=this.getNBPlayer(ye.PlayerType.HUMAN),t=this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI),n=0;n<this.snakes.length;n++)if(null==this.currentPlayer&&e<=1&&t<=1&&this.snakes[n]&&(this.snakes[n].player==ye.PlayerType.HUMAN||this.snakes[n].player==ye.PlayerType.HYBRID_HUMAN_AI)||this.currentPlayer==n+1)return n;return-1}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n]&&this.snakes[n].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i]&&this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null}},{key:"update",value:function(e,t,n){if(null!=this.gameUI&&null!=t){for(var i=Object.keys(t),s=0;s<i.length;s++)(!this.clientSidePredictionsMode&&!this.onlineMode||this.clientSidePredictionsMode&&("snakes"==i[s]||"grid"==i[s]||"offsetFrame"==i[s]||"gameOver"==i[s])&&(!this.onlineMode||this.onlineMode&&"errorOccurred"!=i[s])||!this.clientSidePredictionsMode&&this.onlineMode&&"errorOccurred"!=i[s])&&(Object.prototype.hasOwnProperty.call(this.gameUI,i[s])&&"function"!=typeof t[i[s]]&&"function"!=typeof this.gameUI[i[s]]&&(this.gameUI[i[s]]=t[i[s]]),n&&(t.snakes&&t.snakes[this.getCurrentPlayer()]&&(t.snakes[this.getCurrentPlayer()].lastKey=this.lastKey,this.lastKey=-1),t.grid&&(t.grid.rngGame=null,t.grid.rngGrid=null),this.updateEngine(i[s],t[i[s]])),Object.prototype.hasOwnProperty.call(this,i[s])&&"function"!=typeof t[i[s]]&&"function"!=typeof this[i[s]]&&(this[i[s]]=t[i[s]]));Object.prototype.hasOwnProperty.call(t,"killed")&&t.killed&&this.gameUI&&this.gameUI.setKill&&this.gameUI.setKill()}}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}}])}();const ke={randRange:function(e,t,n){return Math.floor((n?n():Math.random())*(t-e+1))+e},addHue:function(e,t){var n=e+t;return n>360?n-360:n<0?360+n:n},shuffle:function(e,t){for(var n,i,s=e.length-1;s>0;s--)n=Math.floor((t?t():Math.random())*(s+1)),i=e[s],e[s]=e[n],e[n]=i;return e},millisecondsFormat:function(e){return e/=1e3,("0"+Math.trunc(e/60)).slice(-2)+":"+("0"+Math.trunc(e%60)).slice(-2)},secondsFormat:function(e){return this.millisecondsFormat(1e3*e)}};var Se=function(){function e(t,n,i){le(this,e),this.x=t,this.y=n,this.direction=i}return de(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.direction)}},{key:"convertToKeyDirection",value:function(){switch(this.direction){case ye.Direction.UP:return ye.Key.UP;case ye.Direction.RIGHT:return ye.Key.RIGHT;case ye.Direction.LEFT:return ye.Key.LEFT;case ye.Direction.BOTTOM:return ye.Key.BOTTOM;default:return this.direction}}},{key:"convertToSimpleDirection",value:function(){switch(this.direction){case ye.Key.UP:return ye.Direction.UP;case ye.Key.RIGHT:return ye.Direction.RIGHT;case ye.Key.LEFT:return ye.Direction.LEFT;case ye.Key.BOTTOM:return ye.Direction.BOTTOM;default:return this.direction}}},{key:"equals",value:function(e){return null!=e&&this.x==e.x&&this.y==e.y}}])}(),_e=__webpack_require__(391),Ae=__webpack_require__.n(_e),Ie=__webpack_require__(293),Te=function(){return de((function e(t,n,i,s,r,o,a,l,u,c){le(this,e),this.width=null==t?20:t,this.height=null==n?20:n,this.generateWalls=null!=i&&i,this.borderWalls=null!=s&&s,this.maze=null!=r&&r,this.mazeFirstPosition=new Se(1,1,ye.Direction.RIGHT),this.mazeForceAuto=null!=a&&a,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.customGrid=o,this.seedGrid=l?""+parseInt(l):void 0,this.seedGame=l?""+parseInt(u):void 0,this.rngGrid,this.rngGame,this.probGoldFruitIncrease=null!=c&&c}),[{key:"init",value:function(){if(null!=this.customGrid||null!=this.initialGrid){var e;e=null!=this.initialGrid?this.initialGrid:this.customGrid,this.height=e.length,this.width=e[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var t=0;t<this.height;t++)this.initialGrid[t]=e[t].slice(),this.grid[t]=e[t].slice()}else{this.grid=new Array(this.height);for(var n=0;n<this.height;n++){this.grid[n]=new Array(this.width);for(var i=0;i<this.width;i++)this.borderWalls&&(0==n||n==this.height-1||0==i||i==this.width-1)||this.generateWalls&&this.rngGrid&&this.rngGrid()>.65||this.maze?this.grid[n][i]=ye.CaseType.WALL:this.grid[n][i]=ye.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null}},{key:"reset",value:function(){this.grid=void 0,this.initialGrid=void 0,this.fruitPos=void 0,this.fruitPosGold=void 0,this.rngGrid=new(Ae())(this.seedGrid),this.rngGame=new(Ae())(this.seedGame)}},{key:"fixWalls",value:function(e){var t,n,i,s;e?(t=1,i=this.height-1,n=1,s=this.width-1):(t=0,i=this.height,n=0,s=this.width);for(var r=t;r<i;r++)for(var o=n;o<s;o++){var a=new Se(o,r),l=this.getNextPosition(a,ye.Direction.UP),u=this.getNextPosition(l,ye.Direction.LEFT),c=this.getNextPosition(l,ye.Direction.RIGHT),h=this.getNextPosition(a,ye.Direction.BOTTOM),d=this.getNextPosition(h,ye.Direction.LEFT),p=this.getNextPosition(h,ye.Direction.RIGHT);this.get(u)!=ye.CaseType.WALL&&this.get(c)!=ye.CaseType.WALL&&this.get(d)!=ye.CaseType.WALL&&this.get(p)!=ye.CaseType.WALL||this.set(ye.CaseType.EMPTY,a)}}},{key:"maze_recursion",value:function(e,t){for(var n=ke.shuffle([ye.Direction.UP,ye.Direction.RIGHT,ye.Direction.BOTTOM,ye.Direction.LEFT],this.rngGrid),i=0;i<n.length;i++)switch(n[i]){case ye.Direction.UP:if(e-2<=0)continue;this.get(new Se(t,e-2))!=ye.CaseType.EMPTY&&(this.set(ye.CaseType.EMPTY,new Se(t,e-2)),this.set(ye.CaseType.EMPTY,new Se(t,e-1)),this.maze_recursion(e-2,t));break;case ye.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new Se(t+2,e))!=ye.CaseType.EMPTY&&(this.set(ye.CaseType.EMPTY,new Se(t+2,e)),this.set(ye.CaseType.EMPTY,new Se(t+1,e)),this.maze_recursion(e,t+2));break;case ye.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new Se(t,e+2))!=ye.CaseType.EMPTY&&(this.set(ye.CaseType.EMPTY,new Se(t,e+2)),this.set(ye.CaseType.EMPTY,new Se(t,e+1)),this.maze_recursion(e+2,t));break;case ye.Direction.LEFT:if(t-2<=0)continue;this.get(new Se(t-2,e))!=ye.CaseType.EMPTY&&(this.set(ye.CaseType.EMPTY,new Se(t-2,e)),this.set(ye.CaseType.EMPTY,new Se(t-1,e)),this.maze_recursion(e,t-2))}}},{key:"generateMaze",value:function(){this.mazeFirstPosition=new Se(1,1,ye.Direction.RIGHT),this.set(ye.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)}},{key:"set",value:function(e,t){this.grid[t.y][t.x]=e}},{key:"get",value:function(e){return this.grid[e.y][e.x]}},{key:"valToChar",value:function(e){switch(e){case ye.CaseType.EMPTY:return"-";case ye.CaseType.SNAKE:return"o";case ye.CaseType.SNAKE_DEAD:return"O";case ye.CaseType.FRUIT:return"x";case ye.CaseType.WALL:return"#";case ye.CaseType.SURROUNDED:return"/";case ye.CaseType.FRUIT_GOLD:return"X"}}},{key:"getImageCase",value:function(e){switch(this.get(e)){case ye.CaseType.WALL:return"wall.png";case ye.CaseType.FRUIT:return"fruit.png";case ye.CaseType.FRUIT_GOLD:return"fruit_gold.png";case ye.CaseType.EMPTY:case ye.CaseType.SNAKE:case ye.CaseType.SNAKE_DEAD:case ye.CaseType.SURROUNDED:case ye.CaseType.CROSSED:return""}return"unknown.png"}},{key:"getGraph",value:function(e){for(var t=new Array(this.height),n=0;n<this.height;n++){t[n]=new Array(this.width);for(var i=0;i<this.width;i++){var s=new Se(i,n);e&&this.get(s)==ye.CaseType.SNAKE?t[n][i]=0:this.isDeadPosition(s)?t[n][i]=1:t[n][i]=0}}return t}},{key:"getRandomPosition",value:function(){return new Se(ke.randRange(0,this.width-1,this.rngGame),ke.randRange(0,this.height-1,this.rngGame))}},{key:"setFruit",value:function(e,t){var n,i,s=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=ye.CaseType.FRUIT||this.set(ye.CaseType.EMPTY,this.fruitPos),!(this.getTotal(ye.CaseType.EMPTY)>0))return!!(this.getTotal(ye.CaseType.EMPTY)<=0&&this.fruitPosGold);do{if(n=this.getRandomPosition(),(i=this.detectCorridor(n))&&this.get(n)==ye.CaseType.EMPTY&&this.set(ye.CaseType.SURROUNDED,n),this.getTotal(ye.CaseType.EMPTY)<=0)return!!this.fruitPosGold}while(this.get(n)!=ye.CaseType.EMPTY||this.isFruitSurrounded(n,!0)||this.maze&&!this.testFruitMaze(n,s)||i);return t?(this.fruitPosGold=n,this.set(ye.CaseType.FRUIT_GOLD,n)):(this.fruitPos=n,this.set(ye.CaseType.FRUIT,n)),this.maze||null!=this.fruitPosGold||1!=ke.randRange(1,this.probGoldFruitIncrease?3:e>1?ye.Setting.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:ye.Setting.PROB_GOLD_FRUIT_1_PLAYER,this.rngGame)||this.setFruit(e,!0),!0}},{key:"testFruitMaze",value:function(e,t){var n=this.getGraph(!0);return new Ie.Astar.Configuration(n,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:function(e,t){return 1==t?null:1}}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(ye.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)}},{key:"isCaseSurrounded",value:function(e,t,n,i){if(!e)return!1;for(var s=JSON.parse(JSON.stringify(this.grid)),r=[e];r.length>0;){var o=r[0];r.shift();for(var a=[this.getNextPosition(o,ye.Direction.UP),this.getNextPosition(o,ye.Direction.BOTTOM),this.getNextPosition(o,ye.Direction.LEFT),this.getNextPosition(o,ye.Direction.RIGHT)],l=0;l<a.length;l++)if(s[a[l].y][a[l].x]!=ye.CaseType.CROSSED&&i.indexOf(this.get(a[l]))>-1){if(r.push(a[l]),n.indexOf(this.get(a[l]))>-1)return!1;t&&this.get(a[l])==ye.CaseType.EMPTY?(this.set(ye.CaseType.SURROUNDED,a[l]),s[a[l].y][a[l].x]=ye.CaseType.SURROUNDED):s[a[l].y][a[l].x]=ye.CaseType.CROSSED}}return(t&&(this.get(e)==ye.CaseType.EMPTY||this.get(e)==ye.CaseType.FRUIT)||this.get(e)==ye.CaseType.FRUIT_GOLD)&&this.set(ye.CaseType.SURROUNDED,e),!0}},{key:"isFruitSurrounded",value:function(e,t){var n=this.isCaseSurrounded(e,!1,[ye.CaseType.SNAKE],[ye.CaseType.EMPTY,ye.CaseType.SNAKE]);return n&&t&&this.isCaseSurrounded(e,!0,[ye.CaseType.SNAKE],[ye.CaseType.EMPTY,ye.CaseType.SNAKE]),n}},{key:"detectCorridor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.grid?JSON.parse(JSON.stringify(this.grid)):null;if(this.maze||!e||!t)return!1;var n=this.getNextPosition(e,ye.Direction.TOP),i=this.getNextPosition(e,ye.Direction.BOTTOM),s=this.getNextPosition(e,ye.Direction.RIGHT),r=this.getNextPosition(e,ye.Direction.LEFT),o=this.isDeadPosition(n,!0,!0)+this.isDeadPosition(i,!0,!0)+this.isDeadPosition(s,!0,!0)+this.isDeadPosition(r,!0,!0);if(o<=1||this.isDeadPosition(e,!0))return!1;if(o>=3)return!0;t[e.y][e.x]=ye.CaseType.CROSSED;var a=t[n.y][n.x]!=ye.CaseType.CROSSED&&this.detectCorridor(n,t),l=t[i.y][i.x]!=ye.CaseType.CROSSED&&this.detectCorridor(i,t),u=t[r.y][r.x]!=ye.CaseType.CROSSED&&this.detectCorridor(r,t),c=t[s.y][s.x]!=ye.CaseType.CROSSED&&this.detectCorridor(s,t);return!!(l||a||u||c)}},{key:"getOnLine",value:function(e,t){for(var n=0,i=0;i<this.width;i++)this.get(new Se(i,t))==e&&n++;return n}},{key:"getTotal",value:function(e){for(var t=0,n=0;n<this.height;n++)t+=this.getOnLine(e,n);return t}},{key:"getNextPosition",value:function(e,t){var n=new Se(e.x,e.y,t);switch(t){case ye.Direction.LEFT:n.x--,n.direction=ye.Direction.LEFT;break;case ye.Direction.UP:n.y--,n.direction=ye.Direction.UP;break;case ye.Direction.RIGHT:n.x++,n.direction=ye.Direction.RIGHT;break;case ye.Direction.BOTTOM:n.y++,n.direction=ye.Direction.BOTTOM;break;case ye.Key.LEFT:n.x--,n.direction=ye.Key.LEFT;break;case ye.Key.UP:n.y--,n.direction=ye.Key.UP;break;case ye.Key.RIGHT:n.x++,n.direction=ye.Direction.RIGHT;break;case ye.Key.BOTTOM:n.y++,n.direction=ye.Direction.BOTTOM}return n.x<0?n.x=this.width-1:n.x>=this.width&&(n.x=0),n.y<0?n.y=this.height-1:n.y>=this.height&&(n.y=0),n}},{key:"getDirectionTo",value:function(e,t){return this.getNextPosition(e,ye.Direction.UP).equals(t)?ye.Direction.UP:this.getNextPosition(e,ye.Direction.BOTTOM).equals(t)?ye.Direction.BOTTOM:this.getNextPosition(e,ye.Direction.RIGHT).equals(t)?ye.Direction.RIGHT:this.getNextPosition(e,ye.Direction.LEFT).equals(t)?ye.Direction.LEFT:-1}},{key:"invertDirection",value:function(e){return e==ye.Direction.UP?ye.Direction.BOTTOM:e==ye.Direction.BOTTOM?ye.Direction.UP:e==ye.Direction.RIGHT?ye.Direction.LEFT:e==ye.Direction.LEFT?ye.Direction.RIGHT:null}},{key:"isDeadPosition",value:function(e,t,n){return!t&&this.get(e)==ye.CaseType.SNAKE||this.get(e)==ye.CaseType.WALL||this.get(e)==ye.CaseType.SNAKE_DEAD||!!n&&this.get(e)==ye.CaseType.SURROUNDED}},{key:"toString",value:function(){for(var e="",t=0;t<this.height;t++){for(var n=0;n<this.width;n++)e+=this.valToChar(this.get(new Se(n,t)))+" ";e+="\n"}return e}}])}(),we=function(){return de((function e(){le(this,e),this.aiFruitGoal=ye.CaseType.FRUIT,this._aiLevelText="custom"}),[{key:"ai",value:function(e){var t=e.getHeadPosition(),n=e.grid.fruitPos,i=e.grid.fruitPosGold;if(n&&e.grid.get(n)==ye.CaseType.FRUIT){var s=Math.abs(n.x-t.x)+Math.abs(n.y-t.y),r=i?Math.abs(i.x-t.x)+Math.abs(i.y-t.y):-1;i&&e.grid.get(i)==ye.CaseType.FRUIT_GOLD&&this.aiFruitGoal==ye.CaseType.FRUIT?this.aiFruitGoal=r<=s?ye.CaseType.FRUIT_GOLD:ye.CaseType.FRUIT:i&&e.grid.get(i)==ye.CaseType.FRUIT_GOLD||(this.aiFruitGoal=ye.CaseType.FRUIT)}else n&&e.grid.get(n)==ye.CaseType.FRUIT||!i||e.grid.get(i)!=ye.CaseType.FRUIT_GOLD||(this.aiFruitGoal=ye.CaseType.FRUIT_GOLD);return null}},{key:"aiLevelText",get:function(){return this._aiLevelText}}])}();function Le(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ge(e)););return e}function Ce(){return Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=Le(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(arguments.length<3?e:n):s.value}},Ce.apply(null,arguments)}function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}var Oe=function(e){function t(){var e,n,i,s;return le(this,t),n=this,i=ge(i=t),(e=pe(n,Re()?Reflect.construct(i,[],ge(n).constructor):i.apply(n,s)))._aiLevelText="random",e}return me(t,e),de(t,[{key:"ai",value:function(e){var n,i;(n=this,"function"==typeof(i=Ce(ge(t.prototype),"ai",n))?function(e){return i.apply(n,e)}:i)([e]);var s=e.getHeadPosition(),r=e.grid.isDeadPosition(e.getNextPosition(s,ye.Key.UP)),o=e.grid.isDeadPosition(e.getNextPosition(s,ye.Key.LEFT)),a=e.grid.isDeadPosition(e.getNextPosition(s,ye.Key.BOTTOM)),l=e.grid.isDeadPosition(e.getNextPosition(s,ye.Key.RIGHT));if(r&&o&&a&&l)return ye.Key.UP;for(var u=null;null==u||e.grid.isDeadPosition(e.getNextPosition(s,u));)switch(ke.randRange(1,4,e.grid?e.grid.rngGame:null)){case 1:u=ye.Key.UP;break;case 2:u=ye.Key.LEFT;break;case 3:u=ye.Key.BOTTOM;break;case 4:u=ye.Key.RIGHT}return u}}])}(we);function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}var Pe=function(e){function t(){var e,n,i,s;return le(this,t),n=this,i=ge(i=t),(e=pe(n,xe()?Reflect.construct(i,[],ge(n).constructor):i.apply(n,s)))._aiLevelText="low",e}return me(t,e),de(t,[{key:"ai",value:function(e){if((u=this,"function"==typeof(c=Ce(ge(t.prototype),"ai",u))?function(e){return c.apply(u,e)}:c)([e]),null!=e.grid.fruitPos){var n=e.getHeadPosition(),i=this.aiFruitGoal==ye.CaseType.FRUIT_GOLD?e.grid.fruitPosGold:e.grid.fruitPos,s=ye.Key.RIGHT;i.x>n.x?s=i.x-n.x>e.grid.width/2?ye.Key.LEFT:ye.Key.RIGHT:i.x<n.x?s=n.x-i.x>e.grid.width/2?ye.Key.RIGHT:ye.Key.LEFT:i.y<n.y?s=n.y-i.y>e.grid.height/2?ye.Key.BOTTOM:ye.Key.UP:i.y>n.y&&(s=i.y-n.y>e.grid.height/2?ye.Key.UP:ye.Key.BOTTOM);var r=e.getNextPosition(n,s);if(e.grid.isDeadPosition(r)){for(var o=this.direction,a=null,l=1;l<e.queue.length;l++)if(e.get(l).direction!=o){a=e.get(l).direction;break}r=e.getNextPosition(n,a),e.grid.isDeadPosition(r)?e.grid.isDeadPosition(e.getNextPosition(n,ye.Key.UP))?e.grid.isDeadPosition(e.getNextPosition(n,ye.Key.RIGHT))?e.grid.isDeadPosition(e.getNextPosition(n,ye.Key.BOTTOM))?e.grid.isDeadPosition(e.getNextPosition(n,ye.Key.LEFT))||(s=ye.Key.LEFT):s=ye.Key.BOTTOM:s=ye.Key.RIGHT:s=ye.Key.UP:s=r.convertToKeyDirection()}return s}var u,c}}])}(we);function Be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Be=function(){return!!e})()}var De=function(e){function t(e){var n,i,s,r;return le(this,t),i=this,s=ge(s=t),(n=pe(i,Be()?Reflect.construct(s,[],ge(i).constructor):s.apply(i,r))).enableTorus=e,n._aiLevelText="normal",n}return me(t,e),de(t,[{key:"ai",value:function(e){var n,i;(n=this,"function"==typeof(i=Ce(ge(t.prototype),"ai",n))?function(e){return i.apply(n,e)}:i)([e]);var s=e.getHeadPosition(),r=e.grid.fruitPos,o=e.grid.fruitPosGold,a=r;if(s&&(r||o)){var l=e.grid.getGraph(!1),u=new Ie.Astar.Configuration(l,{order:"yx",torus:!!this.enableTorus,diagonals:!1,cutting:!1,static:!0,cost:function(e,t){return 1==t?null:1}});o&&this.aiFruitGoal==ye.CaseType.FRUIT_GOLD&&(a=o);var c=u.path({x:s.x,y:s.y},{x:a?a.x:null,y:a?a.y:null});if(c.length<1&&(this.aiFruitGoal!=ye.CaseType.FRUIT_GOLD&&o||(a=r),c=u.path({x:s.x,y:s.y},{x:a?a.x:null,y:a?a.y:null})),c.length>1){var h=new Se(c[1].x,c[1].y);return new Se(null,null,e.getDirectionTo(s,h)).convertToKeyDirection()}c=null}return null}}])}(we);function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}var Me=function(e){function t(e){var n,i,s,r;return le(this,t),i=this,r=[!0],s=ge(s=t),(n=pe(i,Ne()?Reflect.construct(s,r||[],ge(i).constructor):s.apply(i,r))).aiLow=new Pe(e),n._aiLevelText="high",n}return me(t,e),de(t,[{key:"ai",value:function(e){var n,i;return(n=this,"function"==typeof(i=Ce(ge(t.prototype),"ai",n))?function(e){return i.apply(n,e)}:i)([e])||this.aiLow.ai(e)}}])}(De);function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}var Ue=function(e){function t(){var e,n,i,s;return le(this,t),n=this,i=ge(i=t),(e=pe(n,Fe()?Reflect.construct(i,[],ge(n).constructor):i.apply(n,s)))._aiLevelText="mock",e}return me(t,e),de(t,[{key:"ai",value:function(){return null}}])}(we),je=function(){function e(t,n,i,s,r,o,a,l){le(this,e),this.direction=null==t?ye.Direction.RIGHT:t,this.initialDirection=this.direction,this.initialLength=null==n?3:n,this.initTriedDirections=[],this.errorInit=!1,this.grid=i||new Te,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.ticksDead=0,this.player=null==s?ye.PlayerType.HUMAN:s,this.aiLevel=null==r?ye.AiLevel.DEFAULT:r,this.autoRetry=null!=o&&o,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==a?"Snake":a,this.snakeAI=new we,this.customAI=l,this.ticksWithoutAction=0,this.initAI()}return de(e,[{key:"init",value:function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==ye.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(ye.Direction.RIGHT)||this.initialDirection==ye.Direction.LEFT&&-1==this.initTriedDirections.indexOf(ye.Direction.LEFT)){for(var n=0;n<this.grid.height;n++)for(var i=0,s=0;s<this.grid.width;s++)if(this.grid.get(new Se(s,n))==ye.CaseType.EMPTY?i++:i=0,i>=this.initialLength){e++;break}}else if(this.initialDirection==ye.Direction.UP&&-1==this.initTriedDirections.indexOf(ye.Direction.UP)||this.initialDirection==ye.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(ye.Direction.BOTTOM))for(var r=0;r<this.grid.width;r++)for(var o=0,a=0;a<this.grid.height;a++)if(this.grid.get(new Se(r,a))==ye.CaseType.EMPTY?o++:o=0,o>=this.initialLength){t++;break}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==ye.Direction.RIGHT||this.initialDirection==ye.Direction.LEFT)||t<=0&&(this.initialDirection==ye.Direction.UP||this.initialDirection==ye.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(ye.Direction.RIGHT)?(this.initialDirection=ye.Direction.RIGHT,this.direction=ye.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(ye.Direction.LEFT)?(this.initialDirection=ye.Direction.LEFT,this.direction=ye.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(ye.Direction.UP)?(this.initialDirection=ye.Direction.UP,this.direction=ye.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(ye.Direction.BOTTOM)?(this.initialDirection=ye.Direction.BOTTOM,this.direction=ye.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var l,u,c=!0,h=[];c;){if(c=!1,!(l=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition()))return this.errorInit=!0,!1;u=new Se(l.x,l.y,this.initialDirection),h=[];for(var d=this.initialLength-1;d>=0;d--)d<this.initialLength-1&&(this.initialDirection==ye.Direction.RIGHT?u=this.grid.getNextPosition(new Se(u.x,u.y,this.initialDirection),ye.Direction.RIGHT):this.initialDirection==ye.Direction.LEFT?u=this.grid.getNextPosition(new Se(u.x,u.y,this.initialDirection),ye.Direction.LEFT):this.initialDirection==ye.Direction.BOTTOM?u=this.grid.getNextPosition(new Se(u.x,u.y,this.initialDirection),ye.Direction.BOTTOM):this.initialDirection==ye.Direction.UP&&(u=this.grid.getNextPosition(new Se(u.x,u.y,this.initialDirection),ye.Direction.UP))),this.grid.get(u)!=ye.CaseType.EMPTY?c=!0:h.push(new Se(u.x,u.y,u.direction));if(this.grid.maze&&c)return this.init()}var p=!1;if(!this.grid.maze){var g=new Se(h[h.length-1].x,h[h.length-1].y,this.direction);(this.grid.isDeadPosition(this.grid.getNextPosition(g,ye.Direction.UP),!1)&&this.direction==ye.Direction.UP||this.grid.isDeadPosition(this.grid.getNextPosition(g,ye.Direction.BOTTOM),!1)&&this.direction==ye.Direction.BOTTOM||this.grid.isDeadPosition(this.grid.getNextPosition(g,ye.Direction.LEFT),!1)&&this.direction==ye.Direction.LEFT||this.grid.isDeadPosition(this.grid.getNextPosition(g,ye.Direction.RIGHT),!1)&&this.direction==ye.Direction.RIGHT)&&(p=!0,this.direction=this.grid.invertDirection(this.direction))}for(var f=0;f<h.length;f++)if(p){var m=h[h.length-f-1];m.direction=this.grid.invertDirection(m.direction),this.insert(h[h.length-f-1])}else this.insert(h[f]);return this.grid.maze&&this.player==ye.PlayerType.HYBRID_HUMAN_AI&&(this.player=ye.PlayerType.HUMAN),this.player==ye.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=ye.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0}},{key:"initAI",value:function(){if(this.customAI)this.snakeAI=this.customAI,this.aiLevel=ye.AiLevel.CUSTOM;else switch(this.aiLevel){case ye.AiLevel.RANDOM:this.snakeAI=new Oe;break;case ye.AiLevel.LOW:this.snakeAI=new Pe;break;case ye.AiLevel.DEFAULT:this.snakeAI=new De;break;case ye.AiLevel.HIGH:case ye.AiLevel.ULTRA:this.snakeAI=new Me;break;case ye.AiLevel.MOCK:this.snakeAI=new Ue;break;default:this.snakeAI=new De}}},{key:"reset",value:function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.errorInit=!1,this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastTail=void 0,this.lastKey=-1,this.ticksDead=0,this.ticksWithoutAction=0,this.snakeAI&&(this.snakeAI.aiFruitGoal=ye.CaseType.FRUIT)}},{key:"insert",value:function(e){this.queue.unshift(e),this.grid.set(ye.CaseType.SNAKE,e)}},{key:"remove",value:function(){var e=this.queue.pop();this.grid.set(ye.CaseType.EMPTY,e),this.lastTail=e}},{key:"length",value:function(){return this.queue.length}},{key:"get",value:function(e){return null!=this.queue[e]?this.queue[e].copy():null}},{key:"set",value:function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)}},{key:"getHeadPosition",value:function(){return this.get(0)}},{key:"getTailPosition",value:function(){return this.get(this.length()-1)}},{key:"hasMaxScore",value:function(){return this.grid.getTotal(ye.CaseType.EMPTY)<=0&&!this.grid.fruitPosGold&&!this.grid.fruitPos}},{key:"setGameOver",value:function(e){this.gameOver=!0,this.ticksDead=e;for(var t=0;t<this.length();t++)this.grid.set(ye.CaseType.SNAKE_DEAD,this.get(t))}},{key:"kill",value:function(){this.autoRetry=!1,this.grid=null,this.queue=null}},{key:"keyToDirection",value:function(e){return e==ye.Key.LEFT&&this.direction!=ye.Direction.RIGHT&&this.direction!=ye.Direction.LEFT?ye.Direction.LEFT:e==ye.Key.UP&&this.direction!=ye.Direction.BOTTOM&&this.direction!=ye.Direction.UP?ye.Direction.UP:e==ye.Key.RIGHT&&this.direction!=ye.Direction.LEFT&&this.direction!=ye.Direction.RIGHT?ye.Direction.RIGHT:e==ye.Key.BOTTOM&&this.direction!=ye.Direction.UP&&this.direction!=ye.Direction.BOTTOM?ye.Direction.BOTTOM:null}},{key:"moveTo",value:function(e){var t=this.keyToDirection(e);null!=t&&(this.direction=t)}},{key:"getNextPosition",value:function(e,t){return this.grid.getNextPosition(e,t)}},{key:"getDirectionTo",value:function(e,t){return this.grid.getDirectionTo(e,t)}},{key:"getGraphicDirectionFor",value:function(e,t,n){if(null==t||null==n)return e.direction;var i=this.getDirectionTo(e,n),s=this.getDirectionTo(e,t);return i==ye.Direction.LEFT&&s==ye.Direction.BOTTOM||i==ye.Direction.BOTTOM&&s==ye.Direction.LEFT?ye.Direction.ANGLE_1:i==ye.Direction.RIGHT&&s==ye.Direction.BOTTOM||i==ye.Direction.BOTTOM&&s==ye.Direction.RIGHT?ye.Direction.ANGLE_2:i==ye.Direction.UP&&s==ye.Direction.RIGHT||i==ye.Direction.RIGHT&&s==ye.Direction.UP?ye.Direction.ANGLE_3:i==ye.Direction.UP&&s==ye.Direction.LEFT||i==ye.Direction.LEFT&&s==ye.Direction.UP?ye.Direction.ANGLE_4:e.direction}},{key:"getGraphicDirection",value:function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))}},{key:"copy",value:function(){for(var t=new e(this.direction,3,new Te(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),n=0;n<t.grid.height;n++)for(var i=0;i<t.grid.width;i++)t.grid.set(this.grid.get(new Se(i,n)),new Se(i,n));t.queue=[];for(var s=0;s<this.queue.length;s++)t.queue.push(JSON.parse(JSON.stringify(this.queue[s])));return t}},{key:"ai",value:function(){if(this.snakeAI&&this.snakeAI.ai){var e=this.snakeAI.ai(this);return e&&this.keyToDirection(e)!=this.direction?this.ticksWithoutAction=0:this.ticksWithoutAction++,e}return null}},{key:"isAIStuck",value:function(e,t){if(this.snakeAI&&this.snakeAI.ai){if((this.direction==ye.Direction.LEFT||this.direction==ye.Direction.RIGHT)&&this.ticksWithoutAction>=this.grid.width*e)return!0;if((this.direction==ye.Direction.UP||this.direction==ye.Direction.BOTTOM)&&this.ticksWithoutAction>=this.grid.height*t)return!0}return!1}},{key:"getAILevelText",value:function(){return this.snakeAI?this.snakeAI.aiLevelText:"???"}}])}();function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}var Ge=function(e){function t(e,n){var i,s,r,o;return le(this,t),s=this,o=[e,n],r=ge(r=t),(i=pe(s,He()?Reflect.construct(r,o||[],ge(s).constructor):r.apply(s,o))).worker,i.workerReady=!1,i.messageQueue=[],i}return me(t,e),de(t,[{key:"init",value:function(){var e=this;if(window.Worker){try{this.worker=new Worker("dist/GameEngineWorker.js")}catch(e){return void this.update("init",{errorOccurred:!0})}this.update("init",{engineLoading:!0}),this.worker instanceof Worker?(this.gameEngine&&this.gameEngine.grid&&this.gameEngine.grid.rngGrid&&(this.gameEngine.grid.rngGrid=null),this.gameEngine&&this.gameEngine.grid&&this.gameEngine.grid.rngGame&&(this.gameEngine.grid.rngGame=null),this.worker.onmessage=function(t){var n=t.data;if("ready"==n)e.workerReady=!0,e.update("init",{engineLoading:!1}),e.worker.postMessage(["init",e.gameEngine]),e.passQueuedMessages();else if(n.length>1){var i=e.gameUI.grid;if(Object.prototype.hasOwnProperty.call(n[1],"grid")&&null!=n[1].grid&&(i=Object.assign(new Te,n[1].grid),n[1].grid=i),Object.prototype.hasOwnProperty.call(n[1],"snakes")&&null!=n[1].snakes)for(var s=0;s<n[1].snakes.length;s++){n[1].snakes[s].grid=i,n[1].snakes[s]=Object.assign(new je,n[1].snakes[s]);for(var r=0;r<n[1].snakes[s].queue.length;r++)n[1].snakes[s].queue[r]=Object.assign(new Se,n[1].snakes[s].queue[r])}switch(e.update(n[0],n[1]),n[0]){case"reset":e.reactor.dispatchEvent("onReset");break;case"start":e.reactor.dispatchEvent("onStart");break;case"pause":e.reactor.dispatchEvent("onPause");break;case"continue":e.reactor.dispatchEvent("onContinue");break;case"stop":e.reactor.dispatchEvent("onStop");break;case"exit":e.reactor.dispatchEvent("onExit");break;case"kill":e.reactor.dispatchEvent("onKill"),e.worker.terminate();break;case"scoreIncreased":e.reactor.dispatchEvent("onScoreIncreased");break;case"update":e.reactor.dispatchEvent("onUpdate");break;case"updateCounter":e.reactor.dispatchEvent("onUpdateCounter")}}}):null!=this.gameUI&&this.update("init",{errorOccurred:!0})}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})}},{key:"reset",value:function(){this.passMessage(["reset"])}},{key:"start",value:function(){this.passMessage(["start"])}},{key:"stop",value:function(){this.passMessage(["stop"])}},{key:"finish",value:function(e){this.passMessage([e?"finish":"stop"])}},{key:"pause",value:function(){this.passMessage(["pause"])}},{key:"kill",value:function(){this.passMessage(["kill"])}},{key:"tick",value:function(){this.passMessage(["tick"])}},{key:"exit",value:function(){this.passMessage(["exit"])}},{key:"key",value:function(e){this.passMessage(["key",e])}},{key:"forceStart",value:function(){this.passMessage(["forceStart"])}},{key:"updateEngine",value:function(e,t){this.passMessage(["update",{key:e,data:t}])}},{key:"destroySnakes",value:function(e,t){this.passMessage(["destroySnakes",e,t])}},{key:"passMessage",value:function(e){this.workerReady&&this.worker instanceof Worker?this.worker.postMessage(e):this.messageQueue.push(e)}},{key:"passQueuedMessages",value:function(){var e=this;this.workerReady&&this.worker instanceof Worker&&(this.messageQueue.forEach((function(t){e.worker.postMessage(t)})),this.messageQueue=[])}}])}(Ee);var ze=__webpack_require__(386);function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}var We=function(e){function t(e,n,i,s,r,o,a,l,u,c){var h,d,p,g;return le(this,t),d=this,p=t,g=[null,null,null,null,new ze.Style({backgroundColor:o||"rgba(75, 75, 75, 0.35)",scrollbarColor:a||"rgba(44, 62, 80, 0.8)",fontFamily:s||ye.Setting.FONT_FAMILY,fontSize:i||Math.floor(ye.Setting.FONT_SIZE/1.25)})],p=ge(p),(h=pe(d,Ve()?Reflect.construct(p,g||[],ge(d).constructor):p.apply(d,g))).snakes=e,h.headerHeight=r||ye.Setting.HEADER_HEIGHT_DEFAULT,h.closed=!1,h.closing=!1,h.opening=!1,h.forceClosing=!1,h.overflow=!1,h.back=!1,h.lastLine=!1,h.timeLastFrame=0,h.offsetX=0,h.totalTimeX=0,h.totalTime=0,h.disableAnimation=l,h.imageLoader=u,h.currentPlayer=n,h.spectatorMode=c,h.title=new ze.Label(V.t("engine.ranking"),null,null,new ze.Style({fontColor:"rgba(255, 255, 255, 0.5)",fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,alignement:"center",bold:!0})),h.add(h.title),h.createdComponents=[],h.addScrollAction((function(e,t){h.lastLine&&t>0&&(h.offsetScrollY-=t,h.back=!1,h.overflow=!1),h.totalTime=0,h.timeLastFrame=0})),h}return me(t,e),de(t,[{key:"draw",value:function(e){if(null==this.snakes||this.closed)this.overflow=!1,this.back=!1,this.timeLastFrame=performance.now(),this.offsetScrollY=0,this.totalTime=0;else{this.createdComponents.length<=0&&this.update(),(i=this,"function"==typeof(s=Ce(ge(t.prototype),"draw",i))?function(e){return s.apply(i,e)}:s)([e]),this.timeLastFrame<=0&&(this.timeLastFrame=performance.now());var n=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now(),this.back?(this.totalTime+=n,this.totalTime>5e3&&(this.offsetScrollY>0?this.offsetScrollY-=n/20:(this.back=!1,this.totalTime=0))):this.overflow&&(this.offsetScrollY+=n/20),this.disableAnimation&&this.closing?(this.closing=!1,this.closed=!0):this.closing?(this.forceClosing?this.offsetX=this.width:this.offsetX+=n/3,this.offsetX>=this.width&&(this.closing=!1,this.closed=!0,this.forceClosing=!1)):this.opening&&(this.offsetX-=n/3,this.offsetX<=0&&(this.offsetX=0,this.opening=!1,this.closed=!1))}var i,s}},{key:"close",value:function(){this.closing=!0,this.opening=!1,this.forceClosing=!1}},{key:"forceClose",value:function(){this.closing=!0,this.opening=!1,this.forceClosing=!0}},{key:"open",value:function(){this.closing=!1,this.opening=!0,this.closed=!1,this.forceClosing=!1}},{key:"set",value:function(e,t,n,i,s,r){this.snakes=e,this.headerHeight=n,this.currentPlayer=i,this.imageLoader=s,this.spectatorMode=r,t!=this.style.fontSize&&(this.style.set("fontSize",t),this.update())}},{key:"scores",get:function(){var e=[],t=this.canvas.getContext("2d"),n=0,i=0;if(this.snakes){for(var s=0;s<this.snakes.length;s++){var r=this.snakes[s];r.player==ye.PlayerType.HUMAN||r.player==ye.PlayerType.HYBRID_HUMAN_AI?n++:i++;var o=r.name+" × "+r.score+" ("+(this.currentPlayer!=s||this.spectatorMode?this.snakes[s].player==ye.PlayerType.HUMAN||this.snakes[s].player==ye.PlayerType.HYBRID_HUMAN_AI?V.t("engine.playerMin")+n:V.t("engine.aiMin")+i:V.t("engine.playerHuman"))+")",a=t.measureText(o).width+30;e[s]={username:r.name,score:r.score,gameOver:r.gameOver,sizeText:a,text:o,rank:0,id:s}}return e}return null}},{key:"rank",get:function(){var e=this.scores;if(e){for(var t=e.sort((function(e,t){return t.score-e.score})),n=0,i=0,s=0;s<t.length;s++)t[s].score<i&&n++,t[s].rank=n,i=t[s].score;return t}return null}},{key:"createComponents",value:function(e){for(var t=0;t<e;t++){var n={},i=new ze.Style({fontColor:"rgba(255, 255, 255, 0.5)",fontSize:this.style.fontSize/1.5,fontFamily:this.style.FONT_FAMILY,verticalAlignement:"center"}),s=new ze.Row(null,null,null,null,new ze.Style({spaceBetweenComponents:15,padding:0}));n.row=s;var r=new ze.ImageContainer("assets/images/trophy.png",null,null,this.style.fontSize,this.style.fontSize,null,this.imageLoader);r.hidden=!0,n.trophy=r,s.add(r);var o=new ze.ImageContainer("assets/images/trophy_silver.png",null,null,this.style.fontSize,this.style.fontSize,null,this.imageLoader);o.hidden=!0,n.trophySilver=o,s.add(o);var a=new ze.ImageContainer("assets/images/trophy_bronze.png",null,null,this.style.fontSize,this.style.fontSize,null,this.imageLoader);a.hidden=!0,n.trophyBronze=a,s.add(a);var l=new ze.Label("",null,null,i);l.style.set("fontSize",this.style.fontSize),n.labelRank=l,s.add(l);var u=new ze.Label("",null,null,i);n.labelName=u,s.add(u),this.add(s),this.createdComponents.push(n)}}},{key:"update",value:function(){var e=this.rank;if(e){e.length>this.createdComponents.length&&this.createComponents(e.length-this.createdComponents.length),this.title.style.set("fontSize",this.style.fontSize);for(var t=0;t<e.length;t++){var n=this.createdComponents[t];if(n.trophy.hidden=!0,n.trophySilver.hidden=!0,n.trophyBronze.hidden=!0,n.labelRank.hidden=!0,n.trophy.width=this.style.fontSize,n.trophy.height=this.style.fontSize,n.trophySilver.width=this.style.fontSize,n.trophySilver.height=this.style.fontSize,n.trophyBronze.width=this.style.fontSize,n.trophyBronze.height=this.style.fontSize,e[t].rank>=0&&e[t].rank<3&&e[t].score>0)switch(e[t].rank){case 0:n.trophy.hidden=!1;break;case 1:n.trophySilver.hidden=!1;break;case 2:n.trophyBronze.hidden=!1}else n.labelRank.hidden=!1,n.labelRank.text=""+(e[t].rank+1),n.labelRank.style.set("fontSize",this.style.fontSize);n.labelName.hidden=!1,n.labelName.text=e[t].text,n.labelName.style.set("fontSize",this.style.fontSize/1.5),e[t].gameOver?n.labelName.style.set("fontColor","rgba(231, 76, 60, 0.5)"):n.labelName.style.set("fontColor","rgba(255, 255, 255, 0.5)")}this.reactor.dispatchEvent("onUpdate",this)}}},{key:"minHeight",get:function(){return this.maxHeight}},{key:"maxHeight",get:function(){return this.canvas.height-this.headerHeight}},{key:"x",get:function(){return-ze.EasingFunctions.easeInOutCubic(this.offsetX/this.width)*this.width}},{key:"y",get:function(){return this.headerHeight}},{key:"defaultStyle",get:function(){return new ze.Style({backgroundColor:"rgba(75, 75, 75, 0.35)",scrollbarColor:"rgba(44, 62, 80, 0.8)",fontFamily:ye.Setting.FONT_FAMILY,fontSize:Math.floor(ye.Setting.FONT_SIZE/1.25),padding:20,spaceBetweenComponents:5})}}])}(ze.Col);function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Ke=function(e){function t(e,n,i,s,r,o,a,l,u,c,h,d,p,g){var f,m,y,v;return le(this,t),m=this,y=ge(y=t),(f=pe(m,Ye()?Reflect.construct(y,[],ge(m).constructor):y.apply(m,v))).snakes=e,f.grid=n,f.speed=i,f.disableAnimation=s,f.isFilterHueAvailable=o,f.headerHeight=a,f.imageLoader=l,f.graphicSkin=r,f.currentPlayer=u,f.gameFinished=c,f.offsetFrame=0,f.countBeforePlay=h,f.spectatorMode=d,f.ticks=p,f.gameOver=g,f.canvasTmp=document.createElement("canvas"),f}return me(t,e),de(t,[{key:"draw",value:function(e){if(this.grid&&this.grid.grid){(h=this,"function"==typeof(d=Ce(ge(t.prototype),"draw",h))?function(e){return d.apply(h,e)}:d)([e]);var n=e.canvas;this.canvasTmp.width=ze.Utils.getCanvasWidth(n)*ze.Constants.Setting.PIXEL_RATIO,this.canvasTmp.height=ze.Utils.getCanvasHeight(n)*ze.Constants.Setting.PIXEL_RATIO,this.canvasTmp.style.width=ze.Utils.getCanvasWidth(n),this.canvasTmp.style.height=ze.Utils.getCanvasHeight(n),e.save();var i=Math.floor((ze.Utils.getCanvasHeight(n)-this.headerHeight)/this.grid.height),s=Math.floor(ze.Utils.getCanvasWidth(n)/this.grid.width),r=(s=s>(i=i>s?s:i)?i:s)*this.grid.width,o=i*this.grid.height;this.width=r,this.height=o;for(var a=0;a<this.grid.height;a++)for(var l=0;l<this.grid.width;l++){var u=Math.floor(l*s+(ze.Utils.getCanvasWidth(n)-r)/2),c=this.headerHeight+a*i;0==a&&0==l&&(this.x=u,this.y=c),e.fillStyle=a%2==0&&l%2==0||a%2==1&&l%2==1?"rgba(127, 140, 141, 0.75)":"rgba(44, 62, 80, 0.75)",e.fillRect(u,c,s,i),ze.Utils.drawImage(e,this.imageLoader.get("assets/images/skin/"+this.graphicSkin+"/"+this.grid.getImageCase(new Se(l,a)),Math.round(s),Math.round(i)),Math.round(u),Math.round(c),Math.round(s),Math.round(i))}this.drawSnake(e,s,i,r,this.currentPlayer),this.canvasTmp.width=0,this.canvasTmp.height=0,e.restore()}var h,d}},{key:"drawSnake",value:function(e,t,n,i,s){if(null!=this.snakes){var r=e.canvas,o=this.canvasTmp.getContext("2d");o.scale(ze.Constants.Setting.PIXEL_RATIO,ze.Constants.Setting.PIXEL_RATIO);for(var a=0;a<this.snakes.length;a++){o.clearRect(0,0,this.canvasTmp.width,this.canvasTmp.height),null!=this.snakes[a].color&&(o.filter="hue-rotate("+this.snakes[a].color+"deg)");for(var l=this.snakes[a].length()-1;l>=-1&&this.snakes[a].length()>1||l>=0;l--){var u,c=0,h=0,d=(u=-1==l?this.snakes[a].get(this.snakes[a].length()-1):this.snakes[a].get(l)).direction,p=0,g="",f=!0;if(d=0==l?this.snakes[a].getHeadPosition().direction:-1==l?this.disableAnimation||this.snakes[a].gameOver||this.snakes[a].scoreMax||this.gameFinished||!this.snakes[a].lastTailMoved?this.snakes[a].get(this.snakes[a].length()-2).direction:this.snakes[a].getTailPosition().direction:this.snakes[a].getGraphicDirection(l),!this.disableAnimation&&(0==l||-1==l&&this.snakes[a].lastTailMoved)&&!this.snakes[a].scoreMax&&(!this.gameFinished&&!this.gameOver||this.snakes[a].gameOver)&&(!this.snakes[a].gameOver||this.snakes[a].gameOver&&this.ticks<this.snakes[a].ticksDead+2)){var m=this.offsetFrame/(this.speed*ye.Setting.TIME_MULTIPLIER);this.snakes[a].gameOver&&this.snakes[a].ticksDead&&(this.ticks<=this.snakes[a].ticksDead?(m=1-m,m=ze.EasingFunctions.easeInCubic(m)):m=ze.EasingFunctions.easeOutBounce(m));var y=t*(m=Math.max(0,Math.min(1,m)))-t,v=n*m-n,b=u,E=void 0;switch(0==l?E=this.snakes[a].length()>1?this.snakes[a].getGraphicDirection(1):this.snakes[a].getGraphicDirection(0):-1==l&&(E=this.snakes[a].getGraphicDirectionFor(this.snakes[a].getTailPosition(),this.snakes[a].lastTail,this.snakes[a].get(this.snakes[a].length()-2))),-1==l&&this.snakes[a].length()>1&&(b=this.snakes[a].get(this.snakes[a].length()-1)),0!=l&&-1!=l||E!=ye.Direction.ANGLE_1&&E!=ye.Direction.ANGLE_2&&E!=ye.Direction.ANGLE_3&&E!=ye.Direction.ANGLE_4||(0==l&&(p=-90),0==l?p+=-128.073*Math.pow(m,2)+222.332*m-5.47066:-1==l&&(p+=126.896*Math.pow(m,2)+-33.6471*m+1.65942),(0==l&&(E==ye.Direction.ANGLE_4&&d==ye.Direction.UP||E==ye.Direction.ANGLE_1&&d==ye.Direction.LEFT||E==ye.Direction.ANGLE_2&&d==ye.Direction.BOTTOM||E==ye.Direction.ANGLE_3&&d==ye.Direction.RIGHT)||-1==l&&(E==ye.Direction.ANGLE_4&&d==ye.Direction.RIGHT||E==ye.Direction.ANGLE_3&&d==ye.Direction.BOTTOM||E==ye.Direction.ANGLE_1&&d==ye.Direction.UP||E==ye.Direction.ANGLE_2&&d==ye.Direction.LEFT))&&(p=-p),f=!1),b.direction){case ye.Direction.UP:h-=v;break;case ye.Direction.BOTTOM:h+=v;break;case ye.Direction.RIGHT:c+=y;break;case ye.Direction.LEFT:c-=y}}l==this.snakes[a].length()-1&&(d=this.snakes[a].getGraphicDirectionFor(u,this.snakes[a].get(l-1),this.snakes[a].lastTail));var k=u.x,S=u.y;if(c+=Math.floor(k*t+(ze.Utils.getCanvasWidth(r)-i)/2),h+=this.headerHeight+S*n,0==l)if(this.snakes[a].gameOver&&!this.snakes[a].scoreMax)switch(d){case ye.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/snake_dead.png";break;case ye.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_2.png";break;case ye.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_3.png";break;case ye.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_4.png"}else switch(d){case ye.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/snake.png";break;case ye.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/snake_2.png";break;case ye.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/snake_3.png";break;case ye.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/snake_4.png"}else if(-1==l)switch(d){case ye.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/body_end.png";break;case ye.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/body_2_end.png";break;case ye.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/body_3_end.png";break;case ye.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/body_4_end.png"}else switch(d){case ye.Direction.UP:case ye.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/body.png";break;case ye.Direction.RIGHT:case ye.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/body_2.png";break;case ye.Direction.ANGLE_1:g="assets/images/skin/"+this.graphicSkin+"/body_angle_1.png";break;case ye.Direction.ANGLE_2:g="assets/images/skin/"+this.graphicSkin+"/body_angle_2.png";break;case ye.Direction.ANGLE_3:g="assets/images/skin/"+this.graphicSkin+"/body_angle_3.png";break;case ye.Direction.ANGLE_4:g="assets/images/skin/"+this.graphicSkin+"/body_angle_4.png"}ze.Utils.drawImage(o,this.imageLoader.get(g,Math.round(t),Math.round(n)),Math.round(c),Math.round(h),Math.round(t),Math.round(n),null,null,null,null,f,Math.round(p))}ze.Utils.drawImageData(e,this.canvasTmp,Math.round((ze.Utils.getCanvasWidth(r)-i)/2),this.headerHeight,i,Math.round(n*this.grid.height),Math.floor((ze.Utils.getCanvasWidth(r)-i)/2)*ze.Constants.Setting.PIXEL_RATIO,this.headerHeight*ze.Constants.Setting.PIXEL_RATIO,i*ze.Constants.Setting.PIXEL_RATIO,Math.round(n*this.grid.height)*ze.Constants.Setting.PIXEL_RATIO),o.filter="none"}this.snakes.length>1&&this.drawSnakeInfos(e,i,t,n,s)}}},{key:"drawSnakeInfos",value:function(e,t,n,i,s){for(var r=e.canvas,o=0,a=0,l=0;l<this.snakes.length;l++){this.snakes[l].player==ye.PlayerType.HUMAN||this.snakes[l].player==ye.PlayerType.HYBRID_HUMAN_AI?o++:a++;var u=this.snakes[l].get(0);if(null!=u){var c=u.x,h=u.y,d=Math.floor(c*n+(ze.Utils.getCanvasWidth(r)-t)/2),p=this.headerHeight+h*i;if(!(this.disableAnimation||this.snakes[l].gameOver||this.gameFinished||this.gameOver)){var g=this.offsetFrame/(this.speed*ye.Setting.TIME_MULTIPLIER),f=n*(g=g>1?1:g)-n,m=i*g-i;switch(u.direction){case ye.Direction.UP:p-=m;break;case ye.Direction.BOTTOM:p+=m;break;case ye.Direction.RIGHT:d+=f;break;case ye.Direction.LEFT:d-=f}}ze.Utils.drawText(e,(this.snakes[l].player==ye.PlayerType.HUMAN||this.snakes[l].player==ye.PlayerType.HYBRID_HUMAN_AI?V.t("engine.playerMin")+o:V.t("engine.aiMin")+a)+"\n× "+this.snakes[l].score,"rgb(255, 255, 255)",Math.round(i/2),ye.Setting.FONT_FAMILY,null,null,d,p-Math.round(i),!1,!0),!this.spectatorMode&&s==l&&this.countBeforePlay>=0&&(null!=s||this.isFilterHueAvailable&&this.snakes.length>2||!this.isFilterHueAvailable&&this.snakes.length>1)&&ze.Utils.drawArrow(e,Math.round(d+n/2),Math.round(p-2*i),Math.round(d+n/2),Math.round(p-5))}}}},{key:"set",value:function(e,t,n,i,s,r,o,a,l,u,c,h){this.snakes=e,this.grid=t,this.speed=n,this.headerHeight=s,this.imageLoader=r,this.currentPlayer=o,this.gameFinished=a,this.offsetFrame=i,this.countBeforePlay=l,this.spectatorMode=u,this.ticks=c,this.gameOver=h}}])}(ze.Component);function qe(e,t,n,i){return qe="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var s,r=Le(e,t);if(r){if((s=Object.getOwnPropertyDescriptor(r,t)).set)return s.set.call(i,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(i,t)){if(!s.writable)return!1;s.value=n,Object.defineProperty(i,t,s)}else!function(e,t,n){(t=ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,t,n);return!0},qe(e,t,n,i)}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function $e(e,t,n,i,s,r){return function(e,t,n,i,s){if(!qe(e,t,n,i||e)&&s)throw new TypeError("failed to set property");return n}(ge(r?e.prototype:e),t,n,i,s)}function Je(e,t,n,i){var s=Ce(ge(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof s?function(e){return s.apply(n,e)}:s}var Ze=function(e){function t(e,n,i,s,r,o,a,l,u,c,h){var d,p,g,f;return le(this,t),p=this,g=t,f=[0,0,null,null,new ze.Style({backgroundColor:n||"#27AE60"})],g=ge(g),(d=pe(p,Xe()?Reflect.construct(g,f||[],ge(p).constructor):g.apply(p,f))).rowButtons=new ze.Row(null,null,null,null,new ze.Style({alignement:"right",spaceBetweenComponents:5,verticalAlignement:"center"})),d.colScores=new ze.Col(null,null,null,null,new ze.Style({alignement:"left",spaceBetweenComponents:5,verticalAlignement:"center"})),d.fruitImage=new ze.ImageContainer("assets/images/skin/flat/fruit.png"),d.labelScore=new ze.Label("",null,null,new ze.Style({verticalAlignement:"center"})),d.rowScore=new ze.Row,d.rowScore.addAll(d.fruitImage,d.labelScore),d.trophyImage=new ze.ImageContainer("assets/images/trophy.png"),d.labelBestScore=new ze.Label("",null,null,new ze.Style({verticalAlignement:"center"})),d.rowBestScore=new ze.Row,d.rowBestScore.addAll(d.trophyImage,d.labelBestScore),d.colScores.addAll(d.rowScore,d.rowBestScore),d.setButtons(r,o,a),Je(t,"addAll",d,3)([d.colScores,d.rowButtons]),d.minHeight=e,d.snakes=i,d.btnFullScreen=r,d.btnPause=o,d.btnRank=a,d.enablePause=s,d.gameRanking=l,d.bestScoreToDisplay=u,d.numFruit=c,d.imageLoader=h,d}return me(t,e),de(t,[{key:"draw",value:function(e){var n=e.canvas;e.save(),this.minWidth=ze.Utils.getCanvasWidth(n),this.fruitImage&&(this.fruitImage.width=Math.round(.85*this.height*(this.bestScoreToDisplay?.5:1)),this.trophyImage.width=Math.round(.85*this.height*(this.bestScoreToDisplay?.5:1))),this.btnPause&&(this.btnPause.width=.85*this.height,this.btnPause.height=.85*this.height,this.btnPause.style.set("verticalAlignement","center")),this.btnFullScreen&&(this.btnFullScreen.width=.85*this.height,this.btnFullScreen.height=.85*this.height,this.btnFullScreen.style.set("verticalAlignement","center")),this.btnRank&&(this.btnRank.width=.85*this.height,this.btnRank.height=.85*this.height,this.btnRank.style.set("verticalAlignement","center")),this.gameRanking&&(this.gameRanking.closing||this.gameRanking.closed)?this.btnRank.style.set("backgroundColor","rgba(0, 0, 0, 0)"):this.btnRank.style.set("backgroundColor",this.btnRank.style.backgroundColorDown),this.fruitImage.loadImage(this.imageLoader),this.trophyImage.loadImage(this.imageLoader),this.labelBestScore.text=this.bestScoreToDisplay,this.labelScore.style.set("fontSize",Math.round(.43*this.height*(this.bestScoreToDisplay?.75:1))),this.labelBestScore.style.set("fontSize",Math.round(.43*this.height*(this.bestScoreToDisplay?.75:1))),null!=this.snakes&&1==this.snakes.length?(this.labelScore.text="× "+this.snakes[0].score,this.btnRank.hidden=!0):(this.labelScore.text=V.t("engine.num")+(null!=this.numFruit?this.numFruit:"???"),this.btnRank.hidden=!1),this.bestScoreToDisplay?this.rowBestScore.hidden=!1:this.rowBestScore.hidden=!0,Je(t,"draw",this,3)([e]),e.restore()}},{key:"set",value:function(e,t,n,i,s,r){this.enablePause=r,this.snakes=e,this.imageLoader=t,this.bestScoreToDisplay=n,this.minHeight=i,this.numFruit=s}},{key:"setButtons",value:function(e,t,n){this.rowButtons.clear(),this.btnFullScreen=e,this.btnPause=t,this.btnRank=n,n&&this.rowButtons.add(n),t&&this.rowButtons.add(t),e&&this.rowButtons.add(e)}},{key:"minHeight",set:function(e){$e(t,"minHeight",e,this,1,1),$e(t,"maxHeight",e,this,1,1)}},{key:"height",get:function(){return this.minHeight||this.maxHeight||Je(t,"height",this,1)||0}},{key:"defaultStyle",get:function(){return new ze.Style({backgroundColor:"#27AE60",padding:5})}}])}(ze.Row);ze.Constants.Setting.FONT_FAMILY=ye.Setting.FONT_FAMILY;var Qe=function(){return de((function e(t,n,i,s,r,o,a){le(this,e),this.imageLoader=new ze.ImageLoader,this.assetsLoaded=!1,this.controller=t,this.appendTo=n,this.displayFPS=null!=r&&r,this.outputType=null==o?ye.OutputType.GRAPHICAL:o,this.outputType=a&&a.textOutput?ye.OutputType.TEXT:this.outputType,this.disableAnimation=a&&!a.enableAnimations,this.renderBlur=a&&a.renderBlur,this.graphicSkin=a&&a.graphicSkin||"flat",this.maxFPS=a&&a.maxFPS||-1,this.enableHighDpiRendering=a&&a.enableHighDpiRendering||!1,this.lastKey=-1,this.frame=0,this.lastFrame=0,this.offsetFrame=0,this.lastFrameTime=0,this.currentFPS=0,this.engineLoading=!1,this.touchEventStartX,this.touchEventStartY,this.touchEventStartTimestamp,this.touchEventOffsetX=0,this.touchEventOffsetY=0,this.grid=null,this.snakes=null,this.speed=8,this.initialSpeed=8,this.ticks=0,this.countBeforePlay=-1,this.numFruit=0,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.enablePause=!1,this.enableRetry=!1,this.progressiveSpeed=!1,this.aiStuck=!1,this.precAiStuck=!1,this.errorOccurred=!1,this.fullscreen=!1,this.onlineMode=!1,this.enableRetryPauseMenu=!0,this.searchingPlayers=!1,this.playerNumber=0,this.maxPlayers=0,this.timeStart=0,this.lastTime=0,this.currentPlayer=null,this.spectatorMode=null,this.onlineMaster=!1,this.pingLatency=-1,this.menu=new ze.Menu(new ze.Style({blurBackground:this.renderBlur})),this.confirmReset=!1,this.confirmExit=!1,this.getInfos=!1,this.getInfosGame=!1,this.getAdvancedInfosGame=!1,this.timeoutAutoRetry=null,this.isFilterHueAvailable=ze.Utils.isFilterHueAvailable(),this.gameRanking=new We(this.snakes,null,null,null,ye.Setting.HEADER_HEIGHT_DEFAULT,null,null,this.disableAnimation,this.imageLoader),this.header=new Ze(ye.Setting.HEADER_HEIGHT_DEFAULT,null,this.snakes,this.enablePause,null,null,null,this.gameRanking,this.bestScoreToDisplay,this.numFruit,this.imageLoader),this.gridUI=new Ke(this.snakes,this.grid,this.speed,this.disableAnimation,this.graphicSkin,this.isFilterHueAvailable,this.header.height,this.imageLoader),this.progressBarLoading=new ze.ProgressBar(null,null,this.canvasWidth/4,25,new ze.Style({alignement:"center",disableAnimation:this.disableAnimation})),this.box=new ze.Box(0,0,null,null,new ze.Style({backgroundColor:"rgba(204, 207, 211, 1)"})),this.fpsCounter=new ze.Label("",null,null,new ze.Style({fontColor:"rgba(255, 255, 255, 0.85)",alignement:"right",verticalAlignement:"bottom",foreground:!0})),this.spectatorModeLabel=new ze.Label(V.t("engine.servers.spectatorMode"),null,null,new ze.Style({fontColor:"rgba(255, 255, 255, 0.85)",alignement:"left",verticalAlignement:"bottom"})),this.colArrowButtons=new ze.Col(null,null,null,null,new ze.Style({alignement:"right",verticalAlignement:"bottom",spaceBetweenComponents:0})),this.timerToDisplayLabel=new ze.Label("",null,null,new ze.Style({fontColor:"rgba(0, 0, 0, 0.5)",verticalAlignement:"center"})),this.timerToDisplayImage=new ze.ImageContainer("assets/images/clock.png",null,null,this.fontSize,this.fontSize,new ze.Style({verticalAlignement:"center"}),this.imageLoader),this.timerToDisplayElement=new ze.Row(null,null,null,null,new ze.Style({alignement:"right"}),this.timerToDisplayImage,this.timerToDisplayLabel),this.scene=new ze.Scene(this.box,this.gridUI,this.gameRanking,this.header,this.timerToDisplayElement,this.spectatorModeLabel,this.colArrowButtons,this.menu,this.fpsCounter),this.canvas,this.notificationMessage,this.labelMenus,this.textarea,this.canvas,this.canvasCtx,this.canvasWidth=null==i?ye.Setting.CANVAS_WIDTH:i,this.canvasHeight=null==s?ye.Setting.CANVAS_HEIGHT:s,this.fontSize=ye.Setting.FONT_SIZE,this.timerToDisplay=null,this.bestScoreToDisplay=null,this.intervalCountFPS,this.btnFullScreen,this.btnPause,this.btnContinue,this.btnRetry,this.btnQuit,this.btnYes,this.btnNo,this.btnOK,this.btnAbout,this.btnAdvanced,this.btnInfosGame,this.btnTopArrow,this.btnRightArrow,this.btnLeftArrow,this.btnBottomArrow,this.btnExitFullScreen,this.btnEnterFullScreen,this.btnStartGame,this.btnRank,this.init()}),[{key:"init",value:function(){var e=this;if(this.outputType==ye.OutputType.TEXT)this.textarea=document.createElement("textarea"),this.appendTo.appendChild(this.textarea),this.assetsLoaded=!0;else if(this.outputType==ye.OutputType.GRAPHICAL){ze.Constants.String.ERROR_MESSAGE_CANVAS=V.t("engine.errorJSGameToolsConsole"),ze.Constants.String.ERROR_MESSAGE_CANVAS_LABEL=V.t("engine.errorJSGameTools"),ze.Constants.String.RETRY=V.t("engine.retryInit"),this.canvas=new ze.Canvas(this.scene,document.createElement("canvas"),this.canvasWidth,this.canvasHeight,!0,this.maxFPS),this.appendTo&&this.canvas.appendTo(this.appendTo),this.btnFullScreen=new ze.ButtonImage("assets/images/fullscreen.png",null,null,null,null,64,64),this.btnPause=new ze.ButtonImage("assets/images/pause.png",null,null,null,null,64,64),this.btnRank=new ze.ButtonImage("assets/images/ranking.png",null,null,null,null,64,64);var t=new ze.Style({alignement:"center",backgroundColor:"#3498db",backgroundColorHover:"#246A99",backgroundColorClick:"#184766",padding:10}),n=new ze.Style({fontColor:"white",alignement:"center"});this.btnContinue=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.continue"),null,null,n)),this.btnRetry=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.reset"),null,null,n)),this.btnQuit=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.exit"),null,null,n)),this.btnYes=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.yes"),null,null,n)),this.btnNo=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.no"),null,null,n)),this.btnOK=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.ok"),null,null,n)),this.btnAbout=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.about"),null,null,n)),this.btnInfosGame=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.infosGame"),null,null,n)),this.btnAdvanced=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.infosGameAdvanced"),null,null,n)),this.btnTopArrow=new ze.ButtonImage("assets/images/up.png",null,null,"center","center",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnRightArrow=new ze.ButtonImage("assets/images/right.png",null,null,"right","center",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnLeftArrow=new ze.ButtonImage("assets/images/left.png",null,null,"left","center",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnBottomArrow=new ze.ButtonImage("assets/images/bottom.png",null,null,"center","center",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.colArrowButtons.addAll(new ze.Row(null,null,null,null,new ze.Style({alignement:"center"}),this.btnTopArrow),new ze.Row(null,null,null,null,new ze.Style({alignement:"center",spaceBetweenComponents:32}),this.btnRightArrow,this.btnLeftArrow),new ze.Row(null,null,null,null,new ze.Style({alignement:"center"}),this.btnBottomArrow)),this.btnExitFullScreen=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.exitFullScreen"),null,null,n)),this.btnEnterFullScreen=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.enterFullScreen"),null,null,n)),this.btnStartGame=new ze.Button(null,null,null,null,t,new ze.Label(V.t("engine.servers.startGame"),null,null,n)),this.labelMenus=new ze.Label("",null,null,n),this.header.setButtons(this.btnFullScreen,this.btnPause,this.btnRank),this.btnFullScreen.setClickAction((function(){e.toggleFullscreen(),e.pause()})),this.btnPause.setClickAction((function(){e.pause()})),this.btnRank.setClickAction((function(){e.gameRanking.closing||e.gameRanking.closed?e.gameRanking.open():e.gameRanking.close()})),this.btnTopArrow.setClickAction((function(){e.controller.key(ye.Key.UP)})),this.btnBottomArrow.setClickAction((function(){e.controller.key(ye.Key.BOTTOM)})),this.btnLeftArrow.setClickAction((function(){e.controller.key(ye.Key.LEFT)})),this.btnRightArrow.setClickAction((function(){e.controller.key(ye.Key.RIGHT)})),this.controller.onStart((function(){return e.gameRanking.update()})),this.controller.onReset((function(){return e.gameRanking.update()})),this.controller.onScoreIncreased((function(){return e.gameRanking.update()})),this.canvas&&(this.canvas.addEventListener("touchstart",(function(t){var n=t.changedTouches[0],i=e.getTouchPos(e.canvas,n);e.gameRanking.hovered||(e.touchEventStartX=i.x,e.touchEventStartY=i.y,e.touchEventStartTimestamp=performance.now())})),this.canvas.addEventListener("touchend",(function(){e.touchEventOffsetX=0,e.touchEventOffsetY=0})),this.canvas.addEventListener("touchmove",(function(t){!function(t){var n=t.changedTouches[0],i=e.getTouchPos(e.canvas,n);e.gameRanking.hovered||(e.touchEventOffsetX+=i.x-e.touchEventStartX,e.touchEventOffsetY+=i.y-e.touchEventStartY,performance.now()-e.touchEventStartTimestamp>=250&&(e.touchEventOffsetX=0,e.touchEventOffsetY=0),e.touchEventOffsetX<0&&Math.abs(e.touchEventOffsetX)>50?e.controller.key(ye.Key.LEFT):e.touchEventOffsetX>0&&Math.abs(e.touchEventOffsetX)>50?e.controller.key(ye.Key.RIGHT):e.touchEventOffsetY<0&&Math.abs(e.touchEventOffsetY)>50?e.controller.key(ye.Key.UP):e.touchEventOffsetY>0&&Math.abs(e.touchEventOffsetY)>50&&e.controller.key(ye.Key.BOTTOM),e.touchEventStartX=i.x,e.touchEventStartY=i.y)}(t),t.preventDefault()})))}this.setIntervalCountFPS(),document.addEventListener("keydown",(function(t){if(!e.killed){var n=t.keyCode;90!=n&&87!=n||(n=ye.Key.UP),65!=n&&81!=n||(n=ye.Key.LEFT),83==n&&(n=ye.Key.BOTTOM),68==n&&(n=ye.Key.RIGHT),e.paused?e.countBeforePlay<0&&(e.lastKeyMenu=n):n==ye.Key.ENTER?e.pause():e.controller.key(n),t.preventDefault()}})),this.loadAssets(),this.startDraw()}},{key:"getTouchPos",value:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}},{key:"setIntervalCountFPS",value:function(){var e=this;this.clearIntervalCountFPS(),this.intervalCountFPS=window.setInterval((function(){e.countFPS()}),1e3)}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frame-this.lastFrame),this.lastFrame=this.frame}},{key:"clearIntervalCountFPS",value:function(){clearInterval(this.intervalCountFPS)}},{key:"getNBPlayer",value:function(e){return this.controller.getNBPlayer(e)}},{key:"getPlayer",value:function(e,t){return this.controller.getPlayer(e,t)}},{key:"reset",value:function(){this.controller&&this.controller.reset()}},{key:"start",value:function(){this.controller&&this.controller.start()}},{key:"forceStart",value:function(){this.controller&&this.controller.forceStart()}},{key:"stop",value:function(){this.controller&&this.controller.stop()}},{key:"pause",value:function(){this.controller&&this.controller.pause()}},{key:"kill",value:function(){this.controller&&this.controller.kill()}},{key:"exit",value:function(){this.controller&&this.controller.exit()}},{key:"tick",value:function(){this.controller&&this.controller.tick()}},{key:"setKill",value:function(){this.killed=!0,this.clearIntervalCountFPS(),this.grid=null,this.snakes=null,null!=this.appendTo&&(this.outputType==ye.OutputType.TEXT&&null!=this.textarea?(this.appendTo.removeChild(this.textarea),this.textarea=null):this.outputType==ye.OutputType.GRAPHICAL&&null!=this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas.remove(this.appendTo),this.canvas=null,this.imageLoader.clear()))}},{key:"toggleFullscreen",value:function(){var e=this;if(this.outputType==ye.OutputType.GRAPHICAL&&!this.killed){this.canvas.toggleFullscreen();var t=function(){e.outputType!=ye.OutputType.GRAPHICAL||e.killed||(document.fullscreenElement==e.canvas.canvas||document.fullscreenElement==e.canvas.container?e.fullscreen=!0:e.fullscreen=!1,document.fullscreenElement==e.canvas&&void 0!==screen.orientation&&void 0!==screen.orientation.lock&&screen.orientation.lock("landscape").catch((function(){})))};void 0!==document.onfullscreenchange?document.onfullscreenchange=t:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=t:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=t:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=t:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=t),t()}}},{key:"loadAssets",value:function(){var e=this;this.header.hidden=!0,this.colArrowButtons.hidden=!0,this.errorOccurred||this.outputType==ye.OutputType.TEXT?this.errorOccurred||this.outputType!=ye.OutputType.TEXT||(this.assetsLoaded=!0,this.start()):this.imageLoader.load(["assets/images/skin/"+this.graphicSkin+"/snake_4.png","assets/images/skin/"+this.graphicSkin+"/snake_3.png","assets/images/skin/"+this.graphicSkin+"/snake_2.png","assets/images/skin/"+this.graphicSkin+"/snake.png","assets/images/skin/"+this.graphicSkin+"/body_4_end.png","assets/images/skin/"+this.graphicSkin+"/body_3_end.png","assets/images/skin/"+this.graphicSkin+"/body_2_end.png","assets/images/skin/"+this.graphicSkin+"/body_end.png","assets/images/skin/"+this.graphicSkin+"/body_2.png","assets/images/skin/"+this.graphicSkin+"/body.png","assets/images/skin/"+this.graphicSkin+"/wall.png","assets/images/skin/"+this.graphicSkin+"/fruit.png","assets/images/skin/"+this.graphicSkin+"/body_angle_1.png","assets/images/skin/"+this.graphicSkin+"/body_angle_2.png","assets/images/skin/"+this.graphicSkin+"/body_angle_3.png","assets/images/skin/"+this.graphicSkin+"/body_angle_4.png","assets/images/pause.png","assets/images/fullscreen.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_4.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_3.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_2.png","assets/images/skin/"+this.graphicSkin+"/snake_dead.png","assets/images/up.png","assets/images/left.png","assets/images/right.png","assets/images/bottom.png","assets/images/trophy.png","assets/images/trophy_silver.png","assets/images/trophy_bronze.png","assets/images/clock.png","assets/images/skin/"+this.graphicSkin+"/fruit_gold.png","assets/images/ranking.png","assets/images/skin/flat/fruit.png","assets/images/skin/"+this.graphicSkin+"/unknown.png"],(function(){e.imageLoader.hasError?e.errorOccurred=!0:(e.assetsLoaded=!0,e.btnFullScreen.loadImage(e.imageLoader),e.btnPause.loadImage(e.imageLoader),e.btnRank.loadImage(e.imageLoader),e.btnTopArrow.loadImage(e.imageLoader),e.btnBottomArrow.loadImage(e.imageLoader),e.btnLeftArrow.loadImage(e.imageLoader),e.btnRightArrow.loadImage(e.imageLoader),e.header.hidden=!1,e.colArrowButtons.hidden=!1,e.start())}),this)}},{key:"startDraw",value:function(){var e=this;requestAnimationFrame((function(t){return e.beforeDraw(t)}))}},{key:"beforeDraw",value:function(e){if(!this.killed){document.hasFocus()||this.paused||this.outputType==ye.OutputType.TEXT||this.controller.pause();var t=e-this.lastFrameTime;if(this.maxFPS<1||t>1e3/this.maxFPS){if(this.lastFrameTime=e,this.frame++,this.enableHighDpiRendering){ze.Constants.Setting.ENABLE_PIXEL_RATIO_RESIZING=!0,ze.Constants.Setting.PIXEL_RATIO=window.devicePixelRatio;var n=this.canvas.canvas.getBoundingClientRect();this.canvas.canvas.width=n.width*ze.Constants.Setting.PIXEL_RATIO,this.canvas.canvas.height=n.height*ze.Constants.Setting.PIXEL_RATIO,this.canvas.canvas.style.width=n.width+"px",this.canvas.canvas.style.height=n.height+"px"}else ze.Constants.Setting.ENABLE_PIXEL_RATIO_RESIZING=!1,ze.Constants.Setting.PIXEL_RATIO=1;if(!this.paused&&!this.onlineMode||this.onlineMode||this.gameOver||this.gameFinished){this.offsetFrame+=t;var i=this.offsetFrame/(this.speed*ye.Setting.TIME_MULTIPLIER);(this.gameOver||this.gameFinished)&&i>=.95&&(this.offsetFrame=0,this.ticks++)}this.draw(),this.lastTime=Date.now()}this.startDraw()}}},{key:"draw",value:function(){var e,t,n,i=this;if(this.outputType!=ye.OutputType.TEXT||this.killed){if(this.outputType==ye.OutputType.GRAPHICAL&&!this.killed){var s=!0;this.currentPlayer=this.controller.getCurrentPlayer(),this.fontSize=ye.Setting.FONT_SIZE,this.header.minHeight=ye.Setting.HEADER_HEIGHT_DEFAULT,this.canvas.width<=ye.Setting.CANVAS_WIDTH/1.25?(this.fontSize/=1.25,this.header.minHeight=ye.Setting.HEADER_HEIGHT_DEFAULT/1.25):this.canvas.width>=1.5*ye.Setting.CANVAS_WIDTH&&(this.fontSize*=1.25,this.header.minHeight=1.25*ye.Setting.HEADER_HEIGHT_DEFAULT),ze.Constants.Setting.FONT_SIZE=this.fontSize,this.labelMenus.style.set("fontSize",this.fontSize),this.notificationMessage&&(this.notificationMessage.fontSize=this.fontSize,this.notificationMessage.easingFunction=ze.EasingFunctions.easeInOutCubic),this.gameRanking&&(this.gameRanking.fontSize=this.fontSize),this.box.width=this.canvas.width,this.box.height=this.canvas.height,this.assetsLoaded&&!this.errorOccurred&&(this.header.set(this.snakes,this.imageLoader,this.bestScoreToDisplay,this.header.height,this.numFruit,this.enablePause),null==this.grid||this.grid.maze&&(!this.grid.maze||this.paused&&!this.gameOver&&!this.gameFinished)||this.gridUI.set(this.snakes,this.grid,this.speed,this.offsetFrame,this.header.height,this.imageLoader,this.currentPlayer,this.gameFinished,this.countBeforePlay,this.spectatorMode,this.ticks,this.gameOver),null!=this.timerToDisplay&&null!=this.timerToDisplay&&!isNaN(this.timerToDisplay)&&this.timerToDisplay>=0?(this.timerToDisplayLabel.text=""+ke.secondsFormat(this.timerToDisplay),this.timerToDisplayImage.width=1.5*this.fontSize,this.timerToDisplayImage.height=this.fontSize+1.5,this.timerToDisplayElement.hidden=!1,this.timerToDisplayElement.y=Math.round(this.header.height+15)):this.timerToDisplayElement.hidden=!0),this.aiStuck&&!this.precAiStuck&&(this.precAiStuck=!0,this.setNotification(new rt(V.t("engine.aiStuck"),null,ye.Setting.ERROR_NOTIF_COLOR,10))),null!=this.snakes&&(this.getNBPlayer(ye.PlayerType.HUMAN)>0||this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI)>0)&&(this.getNBPlayer(ye.PlayerType.HUMAN)<=1||this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI)<=1||null!=this.currentPlayer)&&!this.spectatorMode?this.colArrowButtons.hidden=!1:this.colArrowButtons.hidden=!0,null!=this.snakes&&this.snakes.length<=1&&this.gameRanking.forceClose(),this.gameFinished||this.gameOver||!this.assetsLoaded||this.errorOccurred||this.gameRanking.set(this.snakes,this.fontSize,this.header.height,this.currentPlayer,this.imageLoader,this.spectatorMode),this.searchingPlayers&&this.lastTime>0?this.timeStart-=Math.max(0,Date.now()-this.lastTime):this.timeStart=0;var r=this.timeStart>0?"\n\n"+V.t("engine.servers.nextGameStart")+" "+ke.millisecondsFormat(this.timeStart):"";if(this.assetsLoaded)if(this.exited)this.labelMenus.text=V.t("engine.exited"),this.labelMenus.style.set("fontColor","white"),this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus),this.btnExitFullScreen.setClickAction((function(){i.toggleFullscreen()}));else if(this.errorOccurred)this.labelMenus.text=this.imageLoader.hasError?V.t("engine.errorLoading"):V.t("engine.error"),this.labelMenus.style.set("fontColor","#E74C3C"),this.menu.set(this.labelMenus,this.btnQuit),this.btnQuit.setClickAction((function(){i.confirmExit=!1,i.exit()}));else if(this.getInfosGame)this.getAdvancedInfosGame&&this.grid&&(this.grid.seedGrid||this.grid.seedGame)?(this.labelMenus.text=(this.grid.seedGrid?V.t("engine.seedGrid")+"\n"+this.grid.seedGrid:"")+(this.grid.seedGame?"\n"+V.t("engine.seedGame")+"\n"+this.grid.seedGame:""),this.menu.set(this.labelMenus,this.btnOK),this.btnOK.setClickAction((function(){i.getAdvancedInfosGame=!1}))):(this.labelMenus.text=(null!=this.snakes&&this.snakes.length<=1&&!this.spectatorMode?V.t("engine.player")+" "+(null!=this.snakes&&this.snakes[0].player==ye.PlayerType.HUMAN&&!this.spectatorMode||null!=this.snakes&&this.snakes[0].player==ye.PlayerType.HYBRID_HUMAN_AI?V.t("engine.playerHuman"):V.t("engine.playerAI")):"")+(this.getNBPlayer(ye.PlayerType.AI)>0?"\n"+V.t("engine.aiLevel")+" "+V.t("engine.aiLevelList."+this.getPlayer(1,ye.PlayerType.AI).getAILevelText()):"")+"\n"+V.t("engine.sizeGrid")+" "+(null!=this.grid&&this.grid.width?this.grid.width:"???")+"×"+(null!=this.grid&&this.grid.height?this.grid.height:"???")+"\n"+V.t("engine.currentSpeed")+" "+(null!=this.initialSpeed?this.initialSpeed:"???")+(null!=this.snakes&&this.snakes.length<=1&&this.progressiveSpeed?"\n"+V.t("engine.progressiveSpeed"):"")+(null==this.grid||this.grid.maze||null==this.snakes||this.snakes[0].player!=ye.PlayerType.HYBRID_HUMAN_AI?"":"\n"+V.t("engine.assistAI"))+(null!=this.grid&&this.grid.maze?"\n"+V.t("engine.mazeModeMin"):"")+(this.onlineMode?"\n"+V.t("engine.onlineMode"):"")+(this.pingLatency>-1?"\n"+V.t("engine.ping")+" "+this.pingLatency+" ms":""),this.grid&&(this.grid.seedGrid||this.grid.seedGame)?this.menu.set(this.labelMenus,this.btnAdvanced,this.btnOK):this.menu.set(this.labelMenus,this.btnOK),this.btnOK.setClickAction((function(){i.getInfosGame=!1})),this.btnAdvanced.setClickAction((function(){i.getAdvancedInfosGame=!0}))),this.labelMenus.style.set("fontColor","white");else if(this.getInfos)this.labelMenus.text=V.t("engine.aboutScreen.title")+"\nwww.eliastiksofts.com\n\n"+V.t("engine.aboutScreen.versionAndDate",{version:ye.Setting.APP_VERSION,date:new Intl.DateTimeFormat(V.language).format(new Date(ye.Setting.DATE_VERSION)),interpolation:{escapeValue:!1}}),this.labelMenus.style.set("fontColor","white"),this.menu.set(this.labelMenus,this.btnInfosGame,this.btnOK),this.btnInfosGame.setClickAction((function(){i.getInfosGame=!0})),this.btnOK.setClickAction((function(){i.getInfos=!1}));else if(this.confirmExit)this.labelMenus.text=V.t("engine.exitConfirm"),this.labelMenus.style.set("fontColor","#E74C3C"),this.menu.set(this.labelMenus,this.btnNo,this.btnYes),this.btnYes.setClickAction((function(){i.confirmExit=!1,i.exit()})),this.btnNo.setClickAction((function(){i.confirmExit=!1}));else if(this.assetsLoaded&&this.countBeforePlay>=0){var o,a,l;null!=this.snakes&&(this.snakes.length>1&&this.getNBPlayer(ye.PlayerType.HUMAN)<=1&&null!=this.getPlayer(1,ye.PlayerType.HUMAN)||this.snakes.length>1&&this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI)<=1&&null!=this.getPlayer(1,ye.PlayerType.HYBRID_HUMAN_AI)||null!=this.currentPlayer&&this.snakes.length>1)?(this.spectatorMode||(o=null!=this.currentPlayer&&this.currentPlayer>-1?this.getPlayer(this.currentPlayer+1,ye.PlayerType.HUMAN)||this.getPlayer(this.currentPlayer+1,ye.PlayerType.HYBRID_HUMAN_AI):null!=this.getPlayer(1,ye.PlayerType.HUMAN)?this.getPlayer(1,ye.PlayerType.HUMAN):this.getPlayer(1,ye.PlayerType.HYBRID_HUMAN_AI)),null!=o&&(e=ke.addHue(ye.Setting.IMAGE_SNAKE_HUE,o.color),t=ye.Setting.IMAGE_SNAKE_SATURATION,n=ye.Setting.IMAGE_SNAKE_VALUE,a=t<=10&&n>=90?V.t("engine.colors.white"):t<=10&&n<=70||0==t?V.t("engine.colors.gray"):n<=15?V.t("engine.colors.black"):e>=0&&e<=6||e>=350?V.t("engine.colors.red"):e>=7&&e<=42?V.t("engine.colors.orange"):e>=43&&e<=70?V.t("engine.colors.yellow"):e>=71&&e<=156?V.t("engine.colors.green"):e>=157&&e<=221?V.t("engine.colors.blue"):e>=222&&e<=290?V.t("engine.colors.purple"):e>=291&&e<=349?V.t("engine.colors.pink"):"???",l=function(e,t,n){var i,s,r,o=Math.floor(6*e),a=6*e-o,l=n*(1-t),u=n*(1-a*t),c=n*(1-(1-a)*t);switch(o%6){case 0:i=n,s=c,r=l;break;case 1:i=u,s=n,r=l;break;case 2:i=l,s=n,r=c;break;case 3:i=l,s=u,r=n;break;case 4:i=c,s=l,r=n;break;case 5:i=n,s=l,r=u}return[Math.round(255*i),Math.round(255*s),Math.round(255*r)]}(ke.addHue(ye.Setting.IMAGE_SNAKE_HUE,o.color)/360,ye.Setting.IMAGE_SNAKE_SATURATION/100,ye.Setting.IMAGE_SNAKE_VALUE/100)),this.countBeforePlay>0?this.labelMenus.text=""+this.countBeforePlay:this.labelMenus.text=V.t("engine.ready"),this.labelMenus.text+=null!=o?"\n"+(!this.isFilterHueAvailable||"???"==a||"flat"!=this.graphicSkin&&"pixel"!=this.graphicSkin?V.t("engine.arrowPlayer"):V.t("engine.colorPlayer",{color:a})):"",l&&l.length>=3?this.labelMenus.style.set("fontColor",!this.isFilterHueAvailable||"???"==a||"flat"!=this.graphicSkin&&"pixel"!=this.graphicSkin?["white","#3498db"]:["white","rgb("+l[0]+", "+l[1]+", "+l[2]+")"]):this.labelMenus.style.set("fontColor","white")):(this.countBeforePlay>0?this.labelMenus.text=""+this.countBeforePlay:this.labelMenus.text=V.t("engine.ready"),this.labelMenus.style.set("fontColor","white")),this.fullscreen?this.menu.set(this.labelMenus):this.menu.set(this.labelMenus,this.btnEnterFullScreen),this.btnEnterFullScreen.setClickAction((function(){i.toggleFullscreen()}))}else this.confirmReset&&!this.gameOver?(this.labelMenus.text=V.t("engine.resetConfirm"),this.labelMenus.style.set("fontColor","#E74C3C"),this.menu.set(this.labelMenus,this.btnNo,this.btnYes),this.btnYes.setClickAction((function(){i.confirmReset=!1,i.reset()})),this.btnNo.setClickAction((function(){i.confirmReset=!1}))):this.gameFinished?(this.labelMenus.text=this.grid.maze&&this.gameMazeWin?V.t("engine.mazeWin"):V.t("engine.gameFinished")+r,this.labelMenus.style.set("fontColor",this.grid.maze&&this.gameMazeWin?"#2ecc71":"white"),this.enableRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.menu.set(this.labelMenus,this.btnQuit),this.btnRetry.setClickAction((function(){i.reset()})),this.btnQuit.setClickAction((function(){i.confirmExit=!0}))):this.scoreMax&&this.snakes.length<=1?(this.labelMenus.text=V.t("engine.scoreMax")+r,this.labelMenus.style.set("fontColor","#2ecc71"),this.enableRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus,this.btnQuit),this.btnRetry.setClickAction((function(){i.reset()})),this.btnQuit.setClickAction((function(){i.confirmExit=!0})),this.btnExitFullScreen.setClickAction((function(){i.toggleFullscreen()}))):this.gameOver&&this.snakes.length<=1?(this.labelMenus.text=V.t("engine.gameOver")+r,this.labelMenus.style.set("fontColor","#E74C3C"),this.enableRetry&&this.snakes[0]&&!this.snakes[0].autoRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus,this.btnQuit),this.snakes[0]&&this.snakes[0].autoRetry&&null==this.timeoutAutoRetry?this.timeoutAutoRetry=setTimeout((function(){i.reset(),i.timeoutAutoRetry=null}),500):(this.btnRetry.setClickAction((function(){i.reset()})),this.btnQuit.setClickAction((function(){i.confirmExit=!0})),this.btnExitFullScreen.setClickAction((function(){i.toggleFullscreen()})))):this.assetsLoaded&&this.searchingPlayers?(this.labelMenus.text=V.t("engine.servers.waitingPlayers")+"\n"+this.playerNumber+"/"+this.maxPlayers+(this.timeStart>0?"\n\n"+V.t("engine.servers.gameStart")+" "+ke.millisecondsFormat(this.timeStart):""),this.labelMenus.style.set("fontColor","white"),this.onlineMaster?this.menu.set(this.labelMenus,this.btnStartGame,this.btnQuit):this.menu.set(this.labelMenus,this.btnQuit),this.btnQuit.setClickAction((function(){i.confirmExit=!0})),this.btnStartGame.setClickAction((function(){i.forceStart()}))):this.paused&&!this.gameOver&&this.assetsLoaded?(this.labelMenus.text=V.t("engine.pause"),this.labelMenus.style.set("fontColor","white"),this.enablePause?this.enableRetry&&this.enableRetryPauseMenu?this.menu.set(this.labelMenus,this.btnContinue,this.btnRetry,this.btnAbout,this.btnQuit):this.menu.set(this.labelMenus,this.btnContinue,this.btnAbout,this.btnQuit):this.menu.set(this.labelMenus,this.btnContinue,this.btnAbout),this.btnContinue.setClickAction((function(){i.start()})),this.btnRetry.setClickAction((function(){i.confirmReset=!0})),this.btnQuit.setClickAction((function(){i.confirmExit=!0})),this.btnAbout.setClickAction((function(){i.getInfos=!0}))):s=!1;else{var u=Math.floor(100*Object.keys(this.imageLoader.images).length/this.imageLoader.nbImagesToLoad);this.labelMenus.text=V.t("engine.loading")+"\n"+u+"%",this.labelMenus.style.set("fontColor","white"),this.progressBarLoading.percent=u/100,this.progressBarLoading.width=this.canvas.width/4,this.menu.set(this.labelMenus,this.progressBarLoading)}this.assetsLoaded&&this.engineLoading&&(this.labelMenus.text=V.t("engine.loadingWorker"),this.labelMenus.style.set("fontColor","white"),this.menu.set(this.labelMenus),s=!0),(this.gameFinished||this.gameOver)&&null!=this.snakes&&this.snakes.length>1&&!this.errorOccurred?(this.gameRanking.open(),this.gameRanking.style.set("foreground",!0)):this.gameRanking.style.set("foreground",!1),this.displayFPS?(this.fpsCounter.text=this.getDebugText(),this.fpsCounter.style.set("fontSize",this.fontSize/1.5),this.fpsCounter.hidden=!1):this.fpsCounter.hidden=!0,this.spectatorMode?(this.spectatorModeLabel.hidden=!1,this.spectatorModeLabel.style.set("fontSize",this.fontSize)):this.spectatorModeLabel.hidden=!0,s?this.menu.enable():this.menu.disable(),this.canvas.draw()}}else null!=this.grid&&(this.textarea.style.width=16.5*this.grid.width+"px",this.textarea.style.height=16*this.grid.height+100+"px"),this.textarea.innerHTML=this.toString()}},{key:"setDisplayFPS",value:function(e){this.displayFPS=e}},{key:"setNotification",value:function(e){null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof rt&&(this.notificationMessage.close(),this.scene.remove(this.notificationMessage)),this.notificationMessage=e,this.notificationMessage instanceof rt&&this.disableAnimation&&(this.notificationMessage.disableAnimation=!0),this.notificationMessage&&(this.scene.add(this.notificationMessage),this.notificationMessage.open())}},{key:"setTimeToDisplay",value:function(e){this.timerToDisplay=e}},{key:"setBestScore",value:function(e){null!=e&&null!=e&&""!=e.trim()&&(this.bestScoreToDisplay=e)}},{key:"getDebugText",value:function(){return V.t("engine.debug.fps")+" "+this.currentFPS+" / "+V.t("engine.debug.frames")+" "+this.frame+" / "+V.t("engine.debug.ticks")+" "+this.ticks+" / "+V.t("engine.debug.speed")+" "+this.speed+(this.pingLatency>-1?" / "+V.t("engine.ping")+" "+this.pingLatency+" ms":"")}},{key:"toString",value:function(){return(null!=this.grid?this.grid.toString():"")+"\n"+(null!=this.snakes&&this.snakes.length<=1?V.t("engine.score")+" : "+(null!=this.snakes?this.snakes[0].score:""):"")+(this.displayFPS?"\n"+this.getDebugText():"")+(this.gameOver&&!this.scoreMax?"\n"+V.t("engine.gameOver"):"")+(this.scoreMax?"\n"+V.t("engine.scoreMax"):"")+(!this.gameOver&&this.paused?"\n"+V.t("engine.debug.paused"):"")+(this.countBeforePlay>0?"\n"+this.countBeforePlay:"")}}])}(),et=function(){return de((function e(t,n,i,s,r,o,a){le(this,e),this.grid=t,this.snakes=n,this.speed=null==i?8:i,this.initialSpeed=null==i?8:i,this.initialSpeedUntouched=null==i?8:i,this.enablePause=null==s||s,this.enableRetry=null==r||r,this.progressiveSpeed=null!=o&&o,this.aiStuckLimit=null==a?3:a,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.aiStuck=!1,this.intervalPlay,this.reactor=new be,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}),[{key:"init",value:function(){if(!this.clientSidePredictionsMode)if(null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes],this.grid instanceof Te==0)this.errorOccurred=!0;else if(!this.errorOccurred){this.initGridAndSnakes();for(var e=ke.randRange(0,360,this.grid?new(Ae())(this.grid.seedGame):null),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof je==0?this.errorOccurred=!0:(e=ke.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e)}}},{key:"initGridAndSnakes",value:function(){if(this.grid.reset(),this.grid.init(),null!=this.snakes){for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();for(var t=0;t<this.snakes.length;t++)this.snakes[t].init()}this.grid.setFruit(this.snakes.length)}},{key:"reset",value:function(){this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.aiStuck=!1,this.grid.seedGrid&&(this.grid.seedGrid=""+(parseInt(this.grid.seedGrid)+1)),this.grid.seedGame&&(this.grid.seedGame=""+(parseInt(this.grid.seedGame)+1)),this.initGridAndSnakes(),this.reactor.dispatchEvent("onReset"),this.start()}},{key:"start",value:function(){var e=this;if(this.reactor.dispatchEvent("onUpdateCounter"),!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&e.forceStart()}),1e3))}}},{key:"forceStart",value:function(){this.clearIntervalPlay(),this.countBeforePlay=-1,this.paused=!1,this.isReseted=!1,this.firstStart=!1,this.starting=!1,this.reactor.dispatchEvent("onStart"),this.tick()}},{key:"clearIntervalPlay",value:function(){clearInterval(this.intervalPlay)}},{key:"continue",value:function(){this.clientSidePredictionsMode||(this.start(),this.reactor.dispatchEvent("onContinue"))}},{key:"stop",value:function(e){this.gameOver||this.clientSidePredictionsMode||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))}},{key:"pause",value:function(){this.paused||this.clientSidePredictionsMode||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))}},{key:"kill",value:function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}}},{key:"exit",value:function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))}},{key:"destroySnakes",value:function(e,t){for(var n=0;n<this.snakes.length;n++)e&&Array.isArray(e)&&e.indexOf(n)<0&&t.indexOf(this.snakes[n].player)>-1&&this.snakes[n].setGameOver(this.ticks)}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null}},{key:"tick",value:function(){var e=this;setTimeout((function(){e.doTick()}),this.initialSpeed*ye.Setting.TIME_MULTIPLIER)}},{key:"doTick",value:function(){if(!this.paused&&!this.killed){this.ticks++;var e,t=!1;if(this.grid&&(!this.grid.maze||this.grid.mazeForceAuto||this.grid.maze&&this.getNBPlayer(ye.PlayerType.HUMAN)<=0&&this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI)<=0||this.grid.maze&&(this.getNBPlayer(ye.PlayerType.HUMAN)>0||this.getNBPlayer(ye.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=(this.getPlayer(1,ye.PlayerType.HYBRID_HUMAN_AI)||this.getPlayer(1,ye.PlayerType.HUMAN)).lastKey)){for(var n=0;n<this.snakes.length;n++){var i=this.snakes[n].direction,s=!1,r=!1;if(t=!1,this.snakes[n].lastTailMoved=!1,!this.snakes[n].gameOver&&!this.snakes[n].scoreMax){this.snakes[n].player==ye.PlayerType.HUMAN||this.snakes[n].player==ye.PlayerType.HYBRID_HUMAN_AI?(this.snakes[n].moveTo(this.snakes[n].lastKey),this.snakes[n].lastKey=-1):this.snakes[n].player==ye.PlayerType.AI&&(!this.clientSidePredictionsMode||this.clientSidePredictionsMode&&this.snakes[n].aiLevel!=ye.AiLevel.RANDOM)&&this.snakes[n].moveTo(this.snakes[n].ai());var o=this.snakes[n].getHeadPosition();this.snakes[n].player==ye.PlayerType.HYBRID_HUMAN_AI&&this.grid.isDeadPosition(this.snakes[n].getNextPosition(o,this.snakes[n].direction))&&(this.snakes[n].direction=i,this.snakes[n].moveTo(this.snakes[n].ai()),this.snakes[n].lastKey=-1),o=this.snakes[n].getNextPosition(o,this.snakes[n].direction),this.grid.isDeadPosition(o)?this.snakes[n].setGameOver(this.ticks):this.grid.get(o)==ye.CaseType.FRUIT||this.grid.get(o)==ye.CaseType.FRUIT_GOLD?(this.grid.get(o)==ye.CaseType.FRUIT?(this.snakes[n].score++,this.grid.set(ye.CaseType.EMPTY,this.grid.fruitPos),this.grid.fruitPos=null):this.grid.get(o)==ye.CaseType.FRUIT_GOLD&&(this.snakes[n].score+=3,this.grid.set(ye.CaseType.EMPTY,this.grid.fruitPosGold),this.grid.fruitPosGold=null,r=!0),e=!0,this.snakes[n].insert(o),this.grid.maze?(this.gameMazeWin=!0,this.gameFinished=!0,this.stop()):this.snakes[n].hasMaxScore()&&this.snakes.length<=1?(this.scoreMax=!0,this.snakes[n].scoreMax=!0,this.stop()):(this.numFruit++,r||(s=!0)),this.snakes.length<=1&&this.progressiveSpeed&&this.snakes[n].score>0&&this.initialSpeed>1&&(this.initialSpeed=Math.ceil(-this.initialSpeedUntouched/100*this.snakes[n].score+this.initialSpeedUntouched),this.initialSpeed=this.initialSpeed<1?1:this.initialSpeed)):(this.snakes[n].insert(o),this.grid.maze||(this.snakes[n].remove(),this.snakes[n].lastTailMoved=!0))}this.scoreMax||!s||this.clientSidePredictionsMode||(t=!this.grid.setFruit(this.snakes.length))}this.scoreMax||t||!this.grid.detectCorridor(this.grid.fruitPos)&&!this.grid.isFruitSurrounded(this.grid.fruitPos,!0)||this.clientSidePredictionsMode||(t=!this.grid.setFruit(this.snakes.length)),this.scoreMax||null==this.grid.fruitPosGold||!this.grid.detectCorridor(this.grid.fruitPosGold)&&!this.grid.isFruitSurrounded(this.grid.fruitPosGold,!0)||(this.grid.set(ye.CaseType.EMPTY,this.grid.fruitPosGold),this.grid.fruitPosGold=null);for(var a=0,l=0;l<this.snakes.length;l++)(this.snakes[l].gameOver||this.snakes[l].scoreMax)&&a++;for(var u=!1,c=0;c<this.snakes.length;c++)if(!this.snakes[c].gameOver&&this.snakes[c].isAIStuck(1,1))this.aiStuck=!0,u=!!this.snakes[c].isAIStuck(this.aiStuckLimit,this.aiStuckLimit);else if((this.snakes[c].player==ye.PlayerType.HUMAN||this.snakes[c].player==ye.PlayerType.HYBRID_HUMAN_AI)&&!this.snakes[c].gameOver||this.snakes[c].player==ye.PlayerType.AI&&!this.snakes[c].gameOver){this.aiStuck=!1,u=!1;break}(a>=this.snakes.length||t||u)&&(this.stop(),this.snakes.length>1&&(this.gameFinished=!0)),this.reactor.dispatchEvent("onUpdate"),e&&this.reactor.dispatchEvent("onScoreIncreased")}this.tick()}}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"onUpdate",value:function(e){this.reactor.addEventListener("onUpdate",e)}},{key:"onUpdateCounter",value:function(e){this.reactor.addEventListener("onUpdateCounter",e)}}])}();function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tt=function(){return!!e})()}function nt(e){if("undefined"!=typeof window)try{if(!window.Worker)throw"Workers not supported";var t=new Worker("dist/GameEngineWorker.js");t&&(t.postMessage("ping"),t.onmessage=function(n){if("pong"==n.data)return t.terminate(),e(!0)})}catch(t){return e(!1)}}"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame),"undefined"!=typeof document&&void 0===document.fullscreenElement&&Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.oFullscreenElement}}),"undefined"!=typeof document&&(document.exitFullscreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var it=!1;function st(e,t,n,i,s,r,o,a,l,u,c,h,d,p){var g,f=new et(e,t,n,s,r,o);return f.init(),(g=it&&h.enableMultithreading?new Ge(f):new Ee(f)).gameUI=d||new Qe(g,i,a,l,u,c,h),p&&(g.onlineMode=!0),g.init(),g}nt((function(e){it=e}));var rt=function(e){function t(e,n,i,s,r,o,a,l,u){var c,h,d,p;return le(this,t),h=this,d=t,p=[new ze.Style({backgroundColor:i||"rgba(46, 204, 113, 0.5)",foreground:l,disableAnimation:u}),s],d=ge(d),(c=pe(h,tt()?Reflect.construct(d,p||[],ge(h).constructor):d.apply(h,p))).label=new ze.Label(e,null,null,new ze.Style({fontSize:o,fontFamily:a,fontColor:n||"white",alignement:"center",verticalAlignement:"center"})),c.add(c.label),c}return me(t,e),de(t,[{key:"fontSize",get:function(){return this.label?this.label.style.fontSize:0},set:function(e){this.label&&this.label.style.set("fontSize",e)}}])}(ze.NotificationMessage);"undefined"!=typeof window&&(window.PLAYER_AI=ye.PlayerType.AI,window.PLAYER_HUMAN=ye.PlayerType.HUMAN,window.PLAYER_HYBRID_HUMAN_AI=ye.PlayerType.HYBRID_HUMAN_AI,window.AI_LEVEL_RANDOM=ye.AiLevel.RANDOM,window.AI_LEVEL_LOW=ye.AiLevel.LOW,window.AI_LEVEL_DEFAULT=ye.AiLevel.DEFAULT,window.AI_LEVEL_HIGH=ye.AiLevel.HIGH,window.AI_LEVEL_ULTRA=ye.AiLevel.ULTRA,window.UP=ye.Direction.UP,window.RIGHT=ye.Direction.RIGHT,window.BOTTOM=ye.Direction.BOTTOM,window.LEFT=ye.Direction.LEFT,window.ANGLE_1=ye.Direction.ANGLE_1,window.ANGLE_2=ye.Direction.ANGLE_2,window.ANGLE_3=ye.Direction.ANGLE_3,window.ANGLE_4=ye.Direction.ANGLE_4,window.APP_VERSION=ye.Setting.APP_VERSION,window.DATE_VERSION=ye.Setting.DATE_VERSION);var ot=function(){return de((function e(t){le(this,e),this.games=null==t?[]:t,this.reactor=new be,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onScoreIncreased"),this.init()}),[{key:"init",value:function(){for(var e=this,t=0;t<this.games.length;t++)0==t&&(this.games[t].enableKeyMenu=!0),this.games[t].onPause(function(t){e.pauseAll(t)}.bind(null,t)),this.games[t].onContinue(function(t){e.startAll(t)}.bind(null,t)),this.games[t].onExit(function(t){e.checkExit(t)}.bind(null,t)),this.games[t].onStop(function(t){e.checkStop(t)}.bind(null,t)),this.games[t].onReset(function(t){e.resetAll(t)}.bind(null,t)),this.games[t].onScoreIncreased(function(t){e.checkOnScoreIncreased(t)}.bind(null,t))}},{key:"start",value:function(){this.startAll(null)}},{key:"startAll",value:function(e){for(var t=0;t<this.games.length;t++)!this.games[t].paused||this.games[t].starting||null!=e&&t==e||this.games[t].start();this.reactor.dispatchEvent("onStart")}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"pauseAll",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].paused||null!=e&&t==e||this.games[t].pause();this.reactor.dispatchEvent("onPause")}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"resetAll",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].isReseted||null!=e&&t==e||this.games[t].reset();this.reactor.dispatchEvent("onReset")}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"checkExit",value:function(e){for(var t=!0,n=0;n<this.games.length;n++)this.games[n].exited||(t=!1);t?this.reactor.dispatchEvent("onExit"):this.startAll(e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"checkStop",value:function(){for(var e=!0,t=0;t<this.games.length;t++)this.games[t].gameOver||(e=!1);e&&this.reactor.dispatchEvent("onStop")}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"stopAll",value:function(e){for(var t=0;t<this.games.length;t++)e?this.games[t].finish(!0):this.games[t].stop()}},{key:"killAll",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].kill()}},{key:"checkOnScoreIncreased",value:function(){this.reactor.dispatchEvent("onScoreIncreased")}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"setDisplayFPS",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].setDisplayFPS(e)}},{key:"setNotification",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].setNotification(e.copy())}},{key:"closeNotification",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].setNotification(null)}},{key:"errorOccurred",value:function(){for(var e=0;e<this.games.length;e++)if(this.games[e].errorOccurred)return!0;return!1}},{key:"closeRanking",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].closeRanking();return!1}},{key:"destroySnakes",value:function(e,t){for(var n=0;n<this.games.length;n++)if(this.games[n].destroySnakes(e,t),e&&Array.isArray(e))for(var i=0;i<e.length;i++)e[i]-=1}},{key:"getWinners",value:function(){for(var e=[],t=[],n=-1,i=0;i<this.games.length;i++)for(var s=0;s<this.games[i].snakes.length;s++)this.games[i].snakes[s].score>n&&(n=this.games[i].snakes[s].score);if(n>=0)for(var r=0,o=0;o<this.games.length;o++)for(var a=0;a<this.games[o].snakes.length;a++)this.games[o].snakes[a].score>=n&&(e.push(this.games[o].snakes[a]),t.push(r)),r++;return{winners:e,score:n,index:t}}}])}();const at=Object.create(null);at.open="0",at.close="1",at.ping="2",at.pong="3",at.message="4",at.upgrade="5",at.noop="6";const lt=Object.create(null);Object.keys(at).forEach((e=>{lt[at[e]]=e}));const ut={type:"error",data:"parser error"},ct="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ht="function"==typeof ArrayBuffer,dt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,pt=({type:e,data:t},n,i)=>ct&&t instanceof Blob?n?i(t):gt(t,i):ht&&(t instanceof ArrayBuffer||dt(t))?n?i(t):gt(new Blob([t]),i):i(at[e]+(t||"")),gt=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function ft(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let mt;const yt="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)yt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const vt="function"==typeof ArrayBuffer,bt=(e,t)=>{if("string"!=typeof e)return{type:"message",data:kt(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:Et(e.substring(1),t)}:lt[n]?e.length>1?{type:lt[n],data:e.substring(1)}:{type:lt[n]}:ut},Et=(e,t)=>{if(vt){const n=(e=>{let t,n,i,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const u=new ArrayBuffer(o),c=new Uint8Array(u);for(t=0;t<a;t+=4)n=yt[e.charCodeAt(t)],i=yt[e.charCodeAt(t+1)],s=yt[e.charCodeAt(t+2)],r=yt[e.charCodeAt(t+3)],c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|s>>2,c[l++]=(3&s)<<6|63&r;return u})(e);return kt(n,t)}return{base64:!0,data:e}},kt=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,St=String.fromCharCode(30);let _t;function At(e){return e.reduce(((e,t)=>e+t.length),0)}function It(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let s=0;s<t;s++)n[s]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function Tt(e){if(e)return function(e){for(var t in Tt.prototype)e[t]=Tt.prototype[t];return e}(e)}Tt.prototype.on=Tt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Tt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Tt.prototype.off=Tt.prototype.removeListener=Tt.prototype.removeAllListeners=Tt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<i.length;s++)if((n=i[s])===t||n.fn===t){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},Tt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var s=(n=n.slice(0)).length;i<s;++i)n[i].apply(this,t)}return this},Tt.prototype.emitReserved=Tt.prototype.emit,Tt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Tt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const wt="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Lt="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Ct(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Rt=Lt.setTimeout,Ot=Lt.clearTimeout;function xt(e,t){t.useNativeTimers?(e.setTimeoutFn=Rt.bind(Lt),e.clearTimeoutFn=Ot.bind(Lt)):(e.setTimeoutFn=Lt.setTimeout.bind(Lt),e.clearTimeoutFn=Lt.clearTimeout.bind(Lt))}function Pt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Bt extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Dt extends Tt{constructor(e){super(),this.writable=!1,xt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Bt(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=bt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Nt extends Dt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(St),i=[];for(let e=0;e<n.length;e++){const s=bt(n[e],t);if(i.push(s),"error"===s.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let s=0;e.forEach(((e,r)=>{pt(e,!1,(e=>{i[r]=e,++s===n&&t(i.join(St))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Pt()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Mt=!1;try{Mt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const Ft=Mt;function Ut(){}class jt extends Nt{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Ht extends Tt{constructor(e,t,n){super(),this.createRequest=e,xt(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Ct(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=Ht.requestsCount++,Ht.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Ut,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Ht.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function Gt(){for(let e in Ht.requests)Ht.requests.hasOwnProperty(e)&&Ht.requests[e].abort()}Ht.requestsCount=0,Ht.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Gt):"function"==typeof addEventListener&&addEventListener("onpagehide"in Lt?"pagehide":"unload",Gt,!1));const zt=function(){const e=Vt({xdomain:!1});return e&&null!==e.responseType}();function Vt(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Ft))return new XMLHttpRequest}catch(e){}if(!t)try{return new(Lt[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const Wt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Yt extends Dt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Wt?{}:Ct(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;pt(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}i&&wt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Pt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Kt=Lt.WebSocket||Lt.MozWebSocket,qt={websocket:class extends Yt{createSocket(e,t,n){return Wt?new Kt(e,t,n):t?new Kt(e,t):new Kt(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Dt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){_t||(_t=new TextDecoder);const n=[];let i=0,s=-1,r=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===i){if(At(n)<1)break;const e=It(n,1);r=!(128&~e[0]),s=127&e[0],i=s<126?3:126===s?1:2}else if(1===i){if(At(n)<2)break;const e=It(n,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(At(n)<8)break;const e=It(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),r=t.getUint32(0);if(r>Math.pow(2,21)-1){a.enqueue(ut);break}s=r*Math.pow(2,32)+t.getUint32(4),i=3}else{if(At(n)<s)break;const e=It(n,s);a.enqueue(bt(r?e:_t.decode(e),t)),i=0}if(0===s||s>e){a.enqueue(ut);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=new TransformStream({transform(e,t){!function(e,t){ct&&e.data instanceof Blob?e.data.arrayBuffer().then(ft).then(t):ht&&(e.data instanceof ArrayBuffer||dt(e.data))?t(ft(e.data)):pt(e,!1,(e=>{mt||(mt=new TextEncoder),t(mt.encode(e))}))}(e,(n=>{const i=n.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(n)}))}});i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),s())})).catch((e=>{}))};s();const r={type:"open"};this.query.sid&&(r.data=`{"sid":"${this.query.sid}"}`),this._writer.write(r).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then((()=>{i&&wt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends jt{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=zt&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ht(Vt,this.uri(),e)}}},Xt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Jt(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let s=Xt.exec(e||""),r={},o=14;for(;o--;)r[$t[o]]=s[o]||"";return-1!=n&&-1!=i&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,r.path),r.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,r.query),r}const Zt="function"==typeof addEventListener&&"function"==typeof removeEventListener,Qt=[];Zt&&addEventListener("offline",(()=>{Qt.forEach((e=>e()))}),!1);class en extends Tt{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=Jt(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Jt(t.host).host);xt(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,i=n.length;e<i;e++){let i=n[e].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}(this.opts.query)),Zt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Qt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&en.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",en.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"==typeof(t=i)?function(e){let t=0,n=0;for(let i=0,s=e.length;i<s;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,wt((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(en.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Zt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Qt.indexOf(this._offlineEventListener);-1!==e&&Qt.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}en.protocol=4;class tn extends en{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;en.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;en.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function s(){n||(n=!0,u(),t.close(),t=null)}const r=e=>{const n=new Error("probe error: "+e);n.transport=t.name,s(),this.emitReserved("upgradeError",n)};function o(){r("transport closed")}function a(){r("socket closed")}function l(e){t&&e.name!==t.name&&s()}const u=()=>{t.removeListener("open",i),t.removeListener("error",r),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",r),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class nn extends tn{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>qt[e])).filter((e=>!!e))),super(e,n)}}const sn="function"==typeof ArrayBuffer,rn=Object.prototype.toString,on="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===rn.call(Blob),an="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===rn.call(File);function ln(e){return sn&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||on&&e instanceof Blob||an&&e instanceof File}function un(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(un(e[t]))return!0;return!1}if(ln(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return un(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&un(e[t]))return!0;return!1}function cn(e){const t=[],n=e.data,i=e;return i.data=hn(n,t),i.attachments=t.length,{packet:i,buffers:t}}function hn(e,t){if(!e)return e;if(ln(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=hn(e[i],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=hn(e[i],t));return n}return e}function dn(e,t){return e.data=pn(e.data,t),delete e.attachments,e}function pn(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=pn(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=pn(e[n],t));return e}const gn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fn=5;var mn;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(mn||(mn={}));class yn{constructor(e){this.replacer=e}encode(e){return e.type!==mn.EVENT&&e.type!==mn.ACK||!un(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===mn.EVENT?mn.BINARY_EVENT:mn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==mn.BINARY_EVENT&&e.type!==mn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=cn(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function vn(e){return"[object Object]"===Object.prototype.toString.call(e)}class bn extends Tt{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===mn.BINARY_EVENT;n||t.type===mn.BINARY_ACK?(t.type=n?mn.EVENT:mn.ACK,this.reconstructor=new En(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!ln(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===mn[n.type])throw new Error("unknown packet type "+n.type);if(n.type===mn.BINARY_EVENT||n.type===mn.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(i,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!bn.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case mn.CONNECT:return vn(t);case mn.DISCONNECT:return void 0===t;case mn.CONNECT_ERROR:return"string"==typeof t||vn(t);case mn.EVENT:case mn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===gn.indexOf(t[0]));case mn.ACK:case mn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class En{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=dn(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function kn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Sn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _n extends Tt{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[kn(e,"open",this.onopen.bind(this)),kn(e,"packet",this.onpacket.bind(this)),kn(e,"error",this.onerror.bind(this)),kn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,s;if(Sn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const r={type:mn.EVENT,data:t,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),r.id=e}const o=null===(i=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===i?void 0:i.writable,a=this.connected&&!(null===(s=this.io.engine)||void 0===s?void 0:s._hasPingExpired());return this.flags.volatile&&!o||(a?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var n;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),i),r=(...e)=>{this.io.clearTimeoutFn(s),t.apply(this,e)};r.withError=!0,this.acks[e]=r}emitWithAck(e,...t){return new Promise(((n,i)=>{const s=(e,t)=>e?i(e):n(t);s.withError=!0,t.push(s),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...i)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:mn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case mn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mn.EVENT:case mn.BINARY_EVENT:this.onevent(e);break;case mn.ACK:case mn.BINARY_ACK:this.onack(e);break;case mn.DISCONNECT:this.ondisconnect();break;case mn.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:mn.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function An(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}An.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},An.prototype.reset=function(){this.attempts=0},An.prototype.setMin=function(e){this.ms=e},An.prototype.setMax=function(e){this.max=e},An.prototype.setJitter=function(e){this.jitter=e};class In extends Tt{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,xt(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new An({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||e;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new nn(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=kn(t,"open",(function(){n.onopen(),e&&e()})),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},r=kn(t,"error",s);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),s(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(kn(e,"ping",this.onping.bind(this)),kn(e,"data",this.ondata.bind(this)),kn(e,"error",this.onerror.bind(this)),kn(e,"close",this.onclose.bind(this)),kn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){wt((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new _n(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Tn={};function wn(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let i=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),i=Jt(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+t,i.href=i.protocol+"://"+s+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,s=n.id,r=n.path,o=Tn[s]&&r in Tn[s].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new In(i,t):(Tn[s]||(Tn[s]=new In(i,t)),a=Tn[s]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function Ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ln=function(){return!!e})()}Object.assign(wn,{Manager:In,Socket:_n,io:wn,connect:wn});var Cn=function(e){function t(e,n,i,s){var r,o,a,l;return le(this,t),o=this,a=t,l=[new st(null,null,null,null,null,null,null,null,null,null,null,s,n,!0),n],a=ge(a),(r=pe(o,Ln()?Reflect.construct(a,l||[],ge(o).constructor):a.apply(o,l))).enableClientSidePredictions=i||!1,r.socket=e,r.pingLatency=-1,r}return me(t,e),de(t,[{key:"parseData",value:function(e,t,n){var i=[e,t];if(i.length>1){var s=this.grid;if(Object.prototype.hasOwnProperty.call(i[1],"grid")&&null!=i[1].grid&&null!=i[1].grid.grid&&(s=Object.assign(new Te,i[1].grid),i[1].grid=s),Object.prototype.hasOwnProperty.call(i[1],"snakes")&&null!=i[1].snakes)for(var r=0;r<i[1].snakes.length;r++){i[1].snakes[r].grid=s,i[1].snakes[r]=Object.assign(new je,i[1].snakes[r]);for(var o=0;o<i[1].snakes[r].queue.length;o++)i[1].snakes[r].queue[o]=Object.assign(new Se,i[1].snakes[r].queue[o])}this.update(i[0],i[1],n)}}},{key:"init",value:function(){var e=this;this.socket.on("init",(function(t){e.parseData("init",t,e.enableClientSidePredictions),e.gameEngine.update("update",{engineLoading:!1},!0),e.enableClientSidePredictions&&(e.gameEngine.update("update",{clientSidePredictionsMode:!0},!0),t&&t.currentPlayer&&(e.gameEngine.currentPlayer=t.currentPlayer),t&&t.countBeforePlay<0&&e.gameEngine.forceStart())})),this.socket.on("reset",(function(t){e.parseData("reset",t,e.enableClientSidePredictions),e.reactor.dispatchEvent("onReset")})),this.socket.on("start",(function(t){e.parseData("start",t),e.reactor.dispatchEvent("onStart")})),this.socket.on("pause",(function(t){e.parseData("pause",t),e.reactor.dispatchEvent("onPause")})),this.socket.on("continue",(function(t){e.parseData("continue",t),e.reactor.dispatchEvent("onContinue")})),this.socket.on("stop",(function(t){e.parseData("stop",t,e.enableClientSidePredictions),e.reactor.dispatchEvent("onStop")})),this.socket.on("exit",(function(t){e.parseData("exit",t),e.gameEngine.exit(),e.reactor.dispatchEvent("onExit")})),this.socket.on("kill",(function(t){e.parseData("kill",t),e.gameEngine.kill(),e.reactor.dispatchEvent("onKill")})),this.socket.on("scoreIncreased",(function(t){e.parseData("scoreIncreased",t),e.reactor.dispatchEvent("onScoreIncreased")})),this.socket.on("update",(function(t){e.parseData("update",t,e.enableClientSidePredictions),e.gameEngine.clientSidePredictionsMode||(e.gameUI.offsetFrame=0),e.reactor.dispatchEvent("onUpdate")})),this.socket.on("updateCounter",(function(t){e.parseData("updateCounter",t),t&&t.countBeforePlay<0&&e.enableClientSidePredictions&&e.gameEngine.forceStart(),e.reactor.dispatchEvent("onUpdateCounter")})),this.socket.on("notification",(function(t,n,i,s,r){e.gameUI.setNotification(new ze.NotificationMessage(t,i,s,n,null,null,null,r))})),this.socket.once("error",(function(){e.gameUI.setNotification(new ze.NotificationMessage(V.t("engine.servers.errorConnection"),null,ye.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("connect_error",(function(){e.gameUI.setNotification(new ze.NotificationMessage(V.t("engine.servers.errorConnection"),null,ye.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("connect_timeout",(function(){e.gameUI.setNotification(new ze.NotificationMessage(V.t("engine.servers.errorConnection"),null,ye.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("reconnect_error",(function(){e.gameUI.setNotification(new ze.NotificationMessage(V.t("engine.servers.errorConnection"),null,ye.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))}))}},{key:"reset",value:function(){this.socket.emit("reset")}},{key:"start",value:function(){this.socket.emit("start")}},{key:"stop",value:function(){this.socket.emit("stop")}},{key:"finish",value:function(e){this.socket.emit(e?"finish":"stop")}},{key:"pause",value:function(){this.socket.emit("pause")}},{key:"kill",value:function(){this.socket.emit("kill")}},{key:"tick",value:function(){this.socket.emit("tick")}},{key:"exit",value:function(){this.socket.emit("exit")}},{key:"key",value:function(e){this.socket.emit("key",e),this.gameEngine.key(e),this.lastKey=this.gameEngine.lastKey}},{key:"forceStart",value:function(){this.socket.emit("forceStart")}},{key:"updateEngine",value:function(e,t){this.gameEngine.updateEngine(e,t)}}])}(Ee),Rn=function(){return de((function e(){le(this,e),this.url,this.port,this.socket,this.token,this.id,this.serverSettings,this.currentRoom,this.game,this.serverVersion,this.engineServerVersion,this.intervalReconnect,this.disconnected=!1,this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1,this.pingLatency=-1,this.ui}),[{key:"connect",value:function(e,t,n){var i=this;this.disconnect(),this.disconnected=!1,this.url=e,this.port=t,null!=this.url&&"/"==this.url.charAt(this.url.length-1)&&(this.url=this.url.substring(0,this.url.length-1)),this.socket=new wn(this.getURL()+(this.token?"?token="+this.token:"")),this.socket.once("connect",(function(){i.socket.once("authent",(function(e){e==ye.GameState.AUTHENTICATION_SUCCESS?n(!0):n(!1,e,i.socket.id)})),i.socket.once("token",(function(e){i.token=e,i.connect(i.url,i.port,n)}))})),this.socket.on("error",(function(e){n(!1,e),i.disconnect()})),this.socket.on("connect_error",(function(e){n(!1,e),i.disconnect()})),this.socket.once("disconnect",(function(){i.disconnected||(n(!1,ye.Error.DISCONNECTED),i.disconnect())})),this.socket.on("pong",(function(e){i.pingLatency=e,i.ui&&(i.ui.pingLatency=e)}))}},{key:"disconnect",value:function(){null!=this.socket&&(this.disconnected=!0,this.stopGame(),this.socket.close(),this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1,this.pingLatency=-1)}},{key:"stopGame",value:function(){null!=this.game&&null!=this.game.gameUI&&(this.game.kill(),this.game.gameUI.setKill(),this.ui=null)}},{key:"displayRooms",value:function(e){var t=this;if(this.loadingRooms)e(!1,null);else{this.loadingRooms=!0;var n=new wn(this.getURL()+"/rooms"+(this.token?"?token="+this.token:""));n.once("rooms",(function(i){e(!0,i),n.close(),t.loadingRooms=!1,t.serverSettings=i.settings})),n.once("error",(function(i){e(!1,i),n.close(),t.loadingRooms=!1})),n.once("authent",(function(i){i==ye.Error.AUTHENTICATION_REQUIRED&&(e(!1,i),n.close(),t.loadingRooms=!1)})),n.once("connect_error",(function(){e(!1,null),n.close(),t.loadingRooms=!1}))}}},{key:"createRoom",value:function(e,t){var n=this;if(this.creatingRoom)t({success:!1,connection_error:!1});else{this.creatingRoom=!0;var i=new wn(this.getURL()+"/createRoom"+(this.token?"?token="+this.token:""));i.once("connect",(function(){i.emit("create",e)})),i.once("process",(function(e){null!=e.success?t({success:e.success,connection_error:!1,code:e.code,errorCode:e.errorCode}):t({success:!1,connection_error:!0,code:null,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1})),i.once("error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1})),i.once("authent",(function(e){e==ye.Error.AUTHENTICATION_REQUIRED&&(t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1)})),i.once("connect_error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1}))}}},{key:"joinRoom",value:function(e,t){var n=this;this.joiningRoom?t({success:!1}):(this.joiningRoom=!0,null!=this.socket&&(this.socket.emit("join-room",{code:e,version:ye.Setting.APP_VERSION}),this.socket.once("join-room",(function(i){n.currentRoom=e,t(i),n.joiningRoom=!1}))))}},{key:"getGame",value:function(e){if(null!=this.socket&&this.currentRoom)return this.game=null,this.stopGame(),this.game=new Cn(this.socket,null,e&&e.onlineEnableClientSidePredictions&&this.engineServerVersion==ye.Setting.APP_VERSION,e),this.game}},{key:"setUI",value:function(e){e.pingLatency=this.pingLatency,this.game.gameUI=e,this.ui=e}},{key:"getURL",value:function(){return null!=this.port&&""!=this.port.trim()?this.url+":"+this.port:this.url}}])}(),On=function(){return de((function e(t){le(this,e),this.inMemoryStorage={},this._isSupported;try{this.storage=t||window.localStorage}catch(e){this.storage=null}try{var n="__some_random_key_you_are_not_going_to_use__";this.storage.setItem(n,n),this.storage.removeItem(n),this._isSupported=!0}catch(e){this._isSupported=!1}}),[{key:"isSupported",get:function(){return this._isSupported}},{key:"clear",value:function(){this.isSupported?this.storage.clear():this.inMemoryStorage={}}},{key:"getItem",value:function(e){return this.isSupported?this.storage.getItem(e):Object.prototype.hasOwnProperty.call(this.inMemoryStorage,e)?this.inMemoryStorage[e]:null}},{key:"key",value:function(e){return this.isSupported?this.storage.key(e):Object.keys(this.inMemoryStorage)[e]||null}},{key:"removeItem",value:function(e){this.isSupported?this.storage.removeItem(e):delete this.inMemoryStorage[e]}},{key:"setItem",value:function(e,t){this.isSupported?this.storage.setItem(e,t):this.inMemoryStorage[e]=String(t)}},{key:"length",value:function(){return this.isSupported?this.storage.length:Object.keys(this.inMemoryStorage).length}}])}(),xn=function(){return de((function e(t,n,i){le(this,e),this.callback=t,this.delay=n,this.timerInterval=i,this.remaining=n,this.timerId,this.start}),[{key:"pause",value:function(){clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.remaining-=Date.now()-this.start}},{key:"resume",value:function(){this.start=Date.now(),clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.timerId=setTimeout(this.callback,this.remaining),null!=this.timerInterval&&null!=this.timerInterval.start&&this.timerInterval.start()}},{key:"reset",value:function(){clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.remaining=this.delay}},{key:"getTime",value:function(){return this.remaining-(Date.now()-this.start)}}])}(),Pn=function(){return de((function e(t){le(this,e),this.callback=t,this.interval}),[{key:"start",value:function(){this.interval=setInterval(this.callback,1e3)}},{key:"stop",value:function(){clearInterval(this.interval)}}])}();window.SOLO_AI="SOLO_AI",window.SOLO_PLAYER="SOLO_PLAYER",window.PLAYER_VS_AI="PLAYER_VS_AI",window.AI_VS_AI="AI_VS_AI",window.BATTLE_ROYALE="BATTLE_ROYALE",window.BATTLE_ROYALE_ONLINE="BATTLE_ROYALE_ONLINE",window.UPDATER_URI="https://www.eliastiksofts.com/snakeia/update/",window.SERVERS_LIST_URI="https://www.eliastiksofts.com/snakeia/serversList/",window.LEVEL_REACH_SCORE="LEVEL_REACH_SCORE",window.LEVEL_REACH_MAX_SCORE="LEVEL_REACH_MAX_SCORE",window.LEVEL_MULTI_BEST_SCORE="LEVEL_MULTI_BEST_SCORE",window.LEVEL_MULTI_REACH_SCORE_FIRST="LEVEL_MULTI_REACH_SCORE_FIRST",window.LEVEL_REACH_SCORE_ON_TIME="LEVEL_REACH_SCORE_ON_TIME",window.LEVEL_MAZE_WIN="LEVEL_MAZE_WIN",window.DEFAULT_LEVEL="DEFAULT_LEVEL",window.DOWNLOADED_LEVEL="DOWNLOADED_LEVEL",window.DEFAULT_LEVELS_SOLO_PLAYER={1:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ye.Setting.APP_VERSION},2:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ye.Setting.APP_VERSION},3:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:15,version:ye.Setting.APP_VERSION},4:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,60],version:ye.Setting.APP_VERSION},5:{settings:[10,10,!0,!1,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ye.Setting.APP_VERSION},6:{settings:[15,15,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ye.Setting.APP_VERSION},7:{settings:[15,15,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,45],version:ye.Setting.APP_VERSION},8:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:35,version:ye.Setting.APP_VERSION},9:{settings:[15,15,!1,!1,!1,null,!1,null,1],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:ye.Setting.APP_VERSION},10:{settings:[10,10,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[10,15],version:ye.Setting.APP_VERSION},11:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ye.Setting.APP_VERSION},12:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ye.Setting.APP_VERSION},13:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:ye.Setting.APP_VERSION},14:{settings:[20,20,!0,!1,!0,5,!0,null,0],type:LEVEL_REACH_SCORE,typeValue:30,version:ye.Setting.APP_VERSION},15:{settings:[15,15,!1,!1,!0,null,!1,null,1],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:ye.Setting.APP_VERSION},16:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:75,version:ye.Setting.APP_VERSION},17:{settings:[15,15,!0,!1,!0,15,!1,null,2],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:ye.Setting.APP_VERSION},18:{settings:[5,5,!0,!1,!0,25,!1,null,0],type:LEVEL_REACH_MAX_SCORE,typeValue:null,version:ye.Setting.APP_VERSION},19:{settings:[5,5,!1,!0,!0,10,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:10,version:ye.Setting.APP_VERSION},20:{settings:[20,20,!1,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ye.Setting.APP_VERSION}},window.SOLO_PLAYER_SAVE="snakeia_solo_player_",window.DEFAULT_LEVELS_SOLO_AI=DEFAULT_LEVELS_SOLO_PLAYER,window.SOLO_AI_SAVE="snakeia_solo_ai_",window.DOWNLOAD_DEFAULT_URI="https://www.eliastiksofts.com/snakeia/downloadLevels/?player={player}&ver={appVersion}",window.SOLO_PLAYER_DOWNLOAD_LEVELS_TO="snakeia_solo_player_downloadedLevels",window.SOLO_AI_DOWNLOAD_LEVELS_TO="snakeia_solo_ai_downloadedLevels";var Bn=new Rn,Dn=new On,Nn=SOLO_AI,Mn={},Fn=!1;function Un(){Mn={enableAnimations:!0,onlineEnableClientSidePredictions:!1,renderBlur:!1,enableMultithreading:!0,showDebugInfo:!1,textOutput:!1,graphicSkin:"flat",maxFPS:-1,unlockAllLevels:!1,enableHighDpiRendering:!1}}function jn(){Dn.setItem("snakeia_settings",JSON.stringify(Mn)),Gn()}function Hn(){return Dn.getItem("snakeia_settings")&&JSON.parse(Dn.getItem("snakeia_settings"))||Mn}function Gn(){var e=Hn();document.getElementById("enableAnimations").checked=!1,document.getElementById("renderBlur").checked=!1,document.getElementById("enableMultithreading").checked=!1,document.getElementById("onlineEnableClientSidePredictions").checked=!1,document.getElementById("showDebugInfo").checked=!1,document.getElementById("textOutput").checked=!1,document.getElementById("highDpi").checked=!1,e.enableAnimations&&(document.getElementById("enableAnimations").checked=!0),e.renderBlur&&(document.getElementById("renderBlur").checked=!0),e.enableMultithreading&&Fn&&(document.getElementById("enableMultithreading").checked=!0),e.onlineEnableClientSidePredictions&&(document.getElementById("onlineEnableClientSidePredictions").checked=!0),e.showDebugInfo&&(document.getElementById("showDebugInfo").checked=!0),e.textOutput&&(document.getElementById("textOutput").checked=!0),e.enableHighDpiRendering&&(document.getElementById("highDpi").checked=!0),document.getElementById("graphicSkin").value=e.graphicSkin,Fn?(document.getElementById("enableMultithreading").disabled=!1,document.getElementById("multithreadingNotAvailable").style.display="none"):(document.getElementById("enableMultithreading").disabled=!0,document.getElementById("multithreadingNotAvailable").style.display="inline-block"),e.maxFPS&&!isNaN(e.maxFPS)?document.getElementById("maxFPS").value=e.maxFPS:document.getElementById("maxFPS").value=-1}function zn(e,t){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",Bn.connect(e,t,(function(e,t,n){if(document.getElementById("connectingToServer").style.display="none",e)Xn();else if(t==ye.Error.AUTHENTICATION_REQUIRED||t==ye.Error.BANNED){document.getElementById("authenticationServerContainer").innerHTML="";var i=document.createElement("iframe");i.id="authent_frame",i.src=Bn.getURL()+"/authentication?lang="+V.language.substr(0,2)+(n?"&id="+n:""),i.classList.add("frame-responsive"),document.getElementById("authenticationServerContainer").appendChild(i),document.getElementById("linkAuthenticationServer").href=Bn.getURL()+"/authentication?lang="+V.language.substr(0,2)+(n?"&id="+n:""),Kn(),document.getElementById("menu").style.display="none",document.getElementById("authenticationServer").style.display="block"}else t==ye.Error.DISCONNECTED?(alert(V.t("servers.disconnectedError")),qn()):(alert(V.t("servers.connectionError")),qn())}))}function Vn(){document.getElementById("loadingRoomsOnlineList").style.display="inline-block",document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("refreshRooms").disabled="disabled",document.getElementById("errorRoomJoin").style.display="none",document.getElementById("errorServerVersion").style.display="none",Bn.displayRooms((function(e,t){if(document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("errorRoomsList").style.display="none",document.getElementById("refreshRooms").disabled="",e)if(null!=t.rooms&&Object.keys(t.rooms).length>0)for(var n=function(){var e=t.rooms[Object.keys(t.rooms)[i]],n=e.code,s=document.createElement("a");s.classList.add("list-group-item"),s.classList.add("list-group-item-action"),s.textContent=V.t("servers.room",{number:i+1})+(null!=e.state?" "+(e.state==ye.GameState.SEARCHING_PLAYERS?V.t("servers.searchingPlayers"):e.state==ye.GameState.STARTING?V.t("servers.starting"):e.state==ye.GameState.STARTED?V.t("servers.started"):""):""),s.onclick=function(){Wn(n)};var r=document.createElement("div");r.classList.add("small"),r.classList.add("text-muted"),r.textContent=V.t("servers.infos",{width:e.width,height:e.height,speed:e.speed});var o=document.createElement("div");o.classList.add("small"),o.classList.add("text-muted"),o.textContent=e.borderWalls?V.t("servers.infosBorderWalls"):"";var a=document.createElement("div");a.classList.add("small"),a.classList.add("text-muted"),a.textContent=e.generateWalls?V.t("servers.infosGenerateWalls"):"";var l=document.createElement("div");if(l.classList.add("small"),l.classList.add("text-muted"),l.textContent=V.t("servers.infosPlayers",{count:e.players,max:e.maxPlayers}),s.appendChild(r),s.appendChild(o),s.appendChild(a),s.appendChild(l),e.spectators>0){var u=document.createElement("div");u.classList.add("small"),u.classList.add("text-muted"),u.textContent=V.t("servers.infosSpectators",{count:e.spectators}),s.appendChild(u)}document.getElementById("roomsOnlineListGroup").appendChild(s)},i=0;i<Object.keys(t.rooms).length;i++)n();else{var s=document.createElement("strong");s.textContent=V.t("servers.noRoomound"),document.getElementById("roomsOnlineListGroup").appendChild(s)}else t==ye.Error.AUTHENTICATION_REQUIRED?zn(Bn.url,Bn.port):document.getElementById("errorRoomsList").style.display="block";t&&t.version&&(Bn.engineServerVersion=t.version,Bn.serverVersion=t.serverVersion,t.version!=ye.Setting.APP_VERSION&&(document.getElementById("errorServerVersion").style.display="block",document.getElementById("errorServerVersionText").textContent=V.t("servers.errorServerVersion",{server_version:t.version,client_version:ye.Setting.APP_VERSION}))),document.getElementById("loadingRoomsOnlineList").style.display="none",document.getElementById("serverAddress").textContent=Bn.url+(null!=Bn.port&&""!=Bn.port.trim()?":"+Bn.port:"")}))}function Wn(e){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="block",document.getElementById("authenticationServer").style.display="none",document.getElementById("errorRoomJoin").style.display="none",Bn.joinRoom(e,(function(t){if(document.getElementById("roomsOnlineJoin").style.display="none",t.success){var n=Bn.getGame(Mn),i=new Qe(n,document.getElementById("gameContainer"),null,null,!!Mn.showDebugInfo,null,Mn);Bn.setUI(i),n.init(),document.getElementById("gameContainer").style.display="block",document.getElementById("titleGame").innerHTML=V.t("game.currentMode")+" "+V.t("menu.onlineBattleRoyale"),document.getElementById("gameOrder").textContent=V.t("servers.roomCode")+" "+e,document.getElementById("gameStatus").textContent="",document.getElementById("gameStatusError").textContent="",null!=i.canvas&&i.canvas.canvas&&i.canvas.canvas.scrollIntoView(),n.onExit((function(){Bn.stopGame(),Xn()})),n.onKill((function(){Bn.stopGame(),Xn()})),document.getElementById("backToMenuGame").onclick=function(){confirm(V.t("game.confirmQuit"))&&(Bn.stopGame(),Xn())}}else{var s="";switch(t.errorCode){case ye.Error.ROOM_NOT_FOUND:s=V.t("servers.errorRoomJoinReason_roomNotFound");break;case ye.Error.ROOM_ALREADY_JOINED:s=V.t("servers.errorRoomJoinReason_roomAlreadyJoined");break;case ye.Error.ALREADY_CREATED_ROOM:s=V.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:s=V.t("servers.errorReason_unknown")}document.getElementById("errorRoomJoinReason").textContent=s,document.getElementById("errorRoomJoin").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block"}}))}function Yn(e){(Nn=e)==SOLO_PLAYER?document.getElementById("iaSettings").style.display="none":document.getElementById("iaSettings").style.display="block",Nn==SOLO_AI?document.getElementById("autoRetrySettings").style.display="block":document.getElementById("autoRetrySettings").style.display="none",Nn==BATTLE_ROYALE?document.getElementById("numberIASettings").style.display="block":document.getElementById("numberIASettings").style.display="none",Nn==PLAYER_VS_AI||Nn==AI_VS_AI||Nn==BATTLE_ROYALE?document.getElementById("sameGridDiv").style.display="block":document.getElementById("sameGridDiv").style.display="none",Nn==SOLO_AI||Nn==SOLO_PLAYER?document.getElementById("mazeGridDiv").style.display="block":document.getElementById("mazeGridDiv").style.display="none",Nn==BATTLE_ROYALE_ONLINE?(document.getElementById("sameGridDiv").style.display="none",document.getElementById("mazeGridDiv").style.display="none",document.getElementById("autoRetrySettings").style.display="none",document.getElementById("progressiveSpeedDiv").style.display="none",document.getElementById("privateGameDiv").style.display="block",document.getElementById("iaSettings").style.display="none",document.getElementById("seedSettings").style.display="none",Bn.serverSettings&&Bn.serverSettings.enableAI?document.getElementById("enableAIDiv").style.display="block":document.getElementById("enableAIDiv").style.display="none"):(document.getElementById("progressiveSpeedDiv").style.display="block",document.getElementById("seedSettings").style.display="block",document.getElementById("privateGameDiv").style.display="none",document.getElementById("enableAIDiv").style.display="none"),Kn(),document.getElementById("settings").style.display="block",document.getElementById("menu").style.display="none",ii(!1,!0),Nn==BATTLE_ROYALE_ONLINE?document.getElementById("backToMenu").onclick=function(){Xn()}:document.getElementById("backToMenu").onclick=function(){Kn()}}function Kn(){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("menu").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("parameters").style.display="none"}function qn(){var e;Yn(BATTLE_ROYALE_ONLINE),Kn(),document.getElementById("menu").style.display="none",document.getElementById("serverListContainer").style.display="block",(e=document.createElement("script")).src=SERVERS_LIST_URI,document.getElementsByTagName("head")[0].appendChild(e),document.getElementById("loadingServersList").style.display="inline-block",document.getElementById("serverListGroup").innerHTML=""}function Xn(){Kn(),document.getElementById("menu").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block",Vn()}function $n(e){Kn(),document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="block",document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementById("bonusList").innerHTML="",e==PLAYER_HUMAN?(document.getElementById("titleLevelList").innerHTML=V.t("levels.titlePlayer"),document.getElementById("levelListDefault").innerHTML=yi(PLAYER_HUMAN,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="none",document.getElementById("levelListDownloadPlayer").style.display="block",document.getElementById("levelListDownloadPlayer").innerHTML=yi(PLAYER_HUMAN,DOWNLOADED_LEVEL),document.getElementById("fruitNumberCount").innerHTML=mi(PLAYER_HUMAN),document.getElementById("bonusList").appendChild(vi(PLAYER_HUMAN))):e==PLAYER_AI&&(document.getElementById("titleLevelList").innerHTML=V.t("levels.titleAI"),document.getElementById("levelListDefault").innerHTML=yi(PLAYER_AI,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="block",document.getElementById("levelListDownloadPlayer").style.display="none",document.getElementById("levelListDownloadAI").innerHTML=yi(PLAYER_AI,DOWNLOADED_LEVEL),document.getElementById("fruitNumberCount").innerHTML=mi(PLAYER_AI),document.getElementById("bonusList").appendChild(vi(PLAYER_AI)))}function Jn(){!document.getElementById("sameGrid").checked||Nn!=PLAYER_VS_AI&&Nn!=AI_VS_AI&&Nn!=BATTLE_ROYALE?(document.getElementById("progressiveSpeed").disabled=!1,document.getElementById("autoRetry").disabled=!1):(document.getElementById("progressiveSpeed").checked=!1,document.getElementById("progressiveSpeed").disabled=!0,document.getElementById("autoRetry").checked=!1,document.getElementById("autoRetry").disabled=!0)}function Zn(){"custom"==document.getElementById("gameSpeed").value?document.getElementById("customSpeedSettings").style.display="block":document.getElementById("customSpeedSettings").style.display="none"}function Qn(){Nn==SOLO_PLAYER||Nn==PLAYER_VS_AI||Nn==BATTLE_ROYALE&&document.getElementById("battleAgainstAIs").checked?document.getElementById("playerSettings").style.display="block":document.getElementById("playerSettings").style.display="none"}function ei(){!document.getElementById("mazeGrid").checked||Nn!=SOLO_AI&&Nn!=SOLO_PLAYER?(document.getElementById("borderWalls").disabled=!1,document.getElementById("generateWalls").disabled=!1,document.getElementById("aiAssistant").disabled=!1):(document.getElementById("borderWalls").checked=!1,document.getElementById("borderWalls").disabled=!0,document.getElementById("generateWalls").checked=!1,document.getElementById("generateWalls").disabled=!0,document.getElementById("aiAssistant").checked=!1,document.getElementById("aiAssistant").disabled=!0)}function ti(){Nn==BATTLE_ROYALE_ONLINE&&document.getElementById("enableAI").checked&&Bn.serverSettings&&Bn.serverSettings.enableAI||Nn!=BATTLE_ROYALE_ONLINE&&Nn!=SOLO_PLAYER?document.getElementById("iaSettings").style.display="block":document.getElementById("iaSettings").style.display="none"}function ni(){if(document.getElementById("possibleFailInitGame").style.display="none",si(!0)){var e=document.getElementById("heightGrid").value,t=document.getElementById("widthGrid").value,n=document.getElementById("borderWalls").checked,i=document.getElementById("generateWalls").checked,s=document.getElementById("sameGrid").checked,r=document.getElementById("numberIA").value,o=document.getElementById("battleAgainstAIs").checked,a=1;Nn==PLAYER_VS_AI||Nn==AI_VS_AI?s&&(a=2):Nn==BATTLE_ROYALE&&s&&(a=o?parseInt(r)+1:r),function(e,t,n,i,s){var r=(e=parseInt(e))*(t=parseInt(t));return n&&(r-=2*(t+e)-4),i&&(r-=n?e*t*.1:e*t*.1675),!(r>=5*s)}(e,t,n,i,a)&&(document.getElementById("possibleFailInitGame").style.display="block")}}function ii(e,t){document.getElementById("invalidHeight").style.display="none",document.getElementById("invalidWidth").style.display="none",document.getElementById("heightGrid").classList.remove("is-invalid"),document.getElementById("widthGrid").classList.remove("is-invalid"),document.getElementById("gameSpeed").classList.remove("is-invalid"),document.getElementById("invalidSpeed").style.display="none",document.getElementById("customSpeed").classList.remove("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="none",document.getElementById("aiLevel").classList.remove("is-invalid"),document.getElementById("invalidaiLevel").style.display="none",document.getElementById("numberIA").classList.remove("is-invalid"),document.getElementById("invalidIANumber").style.display="none",document.getElementById("seedGrid").classList.remove("is-invalid"),document.getElementById("invalidSeedGrid").style.display="none",document.getElementById("seedGame").classList.remove("is-invalid"),document.getElementById("invalidSeedGame").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",t&&(document.getElementById("seedGrid").value=new(Ae())(Date.now()).int32(),document.getElementById("seedGame").value=new(Ae())(Date.now()+1).int32()),e&&(document.getElementById("heightGrid").value=20,document.getElementById("widthGrid").value=20,document.getElementById("borderWalls").checked=!1,document.getElementById("generateWalls").checked=!1,document.getElementById("mazeGrid").checked=!1,document.getElementById("sameGrid").checked=!0,document.getElementById("gameSpeed").value=8,document.getElementById("progressiveSpeed").checked=!1,document.getElementById("customSpeed").value=8,document.getElementById("customSpeedSettings").style.display="none",document.getElementById("aiLevel").value="normal",document.getElementById("autoRetry").checked=!1,document.getElementById("numberIA").value=20,document.getElementById("battleAgainstAIs").checked=!1,document.getElementById("aiAssistant").checked=!1,document.getElementById("privateGame").checked=!1,document.getElementById("enableAI").checked=!1),Jn(),Zn(),Qn(),ni(),ei(),ti()}function si(e){e||ii(!1,!1);var t,n=document.getElementById("heightGrid").value,i=document.getElementById("widthGrid").value,s=document.getElementById("borderWalls").checked,r=document.getElementById("generateWalls").checked,o=document.getElementById("mazeGrid").checked,a=document.getElementById("sameGrid").checked,l=document.getElementById("gameSpeed").value,u=document.getElementById("progressiveSpeed").checked,c=document.getElementById("customSpeed").value,h=document.getElementById("aiLevel").value,d=document.getElementById("autoRetry").checked,p=document.getElementById("numberIA").value,g=document.getElementById("battleAgainstAIs").checked,f=document.getElementById("seedGrid").value,m=document.getElementById("seedGame").value,y=5,v=100,b=1,E=100,k=!0;if(Nn==BATTLE_ROYALE_ONLINE&&Bn.serverSettings){var S=Bn.serverSettings;y=null!=S.minGridSize?S.minGridSize:y,v=null!=S.maxGridSize?S.maxGridSize:v,b=null!=S.minSpeed?S.minSpeed:b,E=null!=S.maxSpeed?S.maxSpeed:E,k=S.enableAI}document.getElementById("invalidHeight").textContent=V.t("settings.invalidSize",{min:y,max:v}),document.getElementById("invalidWidth").textContent=V.t("settings.invalidSize",{min:y,max:v}),document.getElementById("invalidSpeed").textContent=V.t("settings.invalidSpeed",{min:b,max:E}),document.getElementById("invalidCustomSpeed").textContent=V.t("settings.invalidSpeed",{min:b,max:E}),t=document.getElementById("aiAssistant").checked?PLAYER_HYBRID_HUMAN_AI:PLAYER_HUMAN;var _=!0;if(""==n.trim()||isNaN(n)||n<y||n>v?(_=!1,e||(document.getElementById("heightGrid").classList.add("is-invalid"),document.getElementById("invalidHeight").style.display="block")):n=parseInt(n),""==i.trim()||isNaN(i)||i<y||i>v?(_=!1,e||(document.getElementById("widthGrid").classList.add("is-invalid"),document.getElementById("invalidWidth").style.display="block")):i=parseInt(i),"custom"!=l&&(""==l.trim()||isNaN(l)||l<b||l>E)?(_=!1,e||(document.getElementById("gameSpeed").classList.add("is-invalid"),document.getElementById("invalidSpeed").style.display="block")):"custom"!=l&&(l=parseInt(l)),"custom"==l&&(""==c.trim()||isNaN(c)||c<b||c>E)?(_=!1,e||(document.getElementById("customSpeed").classList.add("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="block")):"custom"==l&&(l=parseInt(c)),Nn!=SOLO_PLAYER&&Nn!=BATTLE_ROYALE_ONLINE&&"low"!=h&&"normal"!=h&&"high"!=h&&"random"!=h)_=!1,e||(document.getElementById("aiLevel").classList.add("is-invalid"),document.getElementById("invalidaiLevel").style.display="block");else if(Nn!=SOLO_PLAYER&&Nn!=BATTLE_ROYALE_ONLINE||Nn==BATTLE_ROYALE_ONLINE&&document.getElementById("enableAI").checked)switch(h){case"random":h=AI_LEVEL_RANDOM;break;case"low":h=AI_LEVEL_LOW;break;case"normal":default:h=AI_LEVEL_DEFAULT;break;case"high":h=AI_LEVEL_HIGH;break;case"ultra":h=AI_LEVEL_ULTRA}if(Nn==BATTLE_ROYALE&&(""==p.trim()||isNaN(p)||p<2||p>100)?(_=!1,e||(document.getElementById("numberIA").classList.add("is-invalid"),document.getElementById("invalidIANumber").style.display="block")):Nn==BATTLE_ROYALE&&(p=parseInt(p)),Nn==BATTLE_ROYALE_ONLINE||""!=f.trim()&&!isNaN(f)||(_=!1,e||(document.getElementById("seedGrid").classList.add("is-invalid"),document.getElementById("invalidSeedGrid").style.display="block")),Nn==BATTLE_ROYALE_ONLINE||""!=m.trim()&&!isNaN(m)||(_=!1,e||(document.getElementById("seedGame").classList.add("is-invalid"),document.getElementById("invalidSeedGame").style.display="block")),Nn!=SOLO_AI&&(d=!1),e)return _;if(_)if(document.getElementById("roomsOnlineCreation").style.display="block",document.getElementById("settings").style.display="none",document.getElementById("errorRoomCreation").style.display="none",Nn==BATTLE_ROYALE_ONLINE)Bn.createRoom({speed:l,heightGrid:n,widthGrid:i,borderWalls:s,generateWalls:r,customSpeed:c,private:document.getElementById("privateGame").checked,enableAI:!!k&&document.getElementById("enableAI").checked,levelAI:h},(function(e){var t=e.errorCode;if(e.connection_error)t==ye.Error.AUTHENTICATION_REQUIRED?zn(Bn.url,Bn.port):e==ye.Error.DISCONNECTED?(alert(V.t("servers.disconnectedError")),qn()):(alert(V.t("servers.connectionError")),qn());else if(e.success)Wn(e.code);else if(t==ye.Error.AUTHENTICATION_REQUIRED)zn(Bn.url,Bn.port);else{var n="";switch(t){case ye.Error.INVALID_SETTINGS:n=V.t("servers.errorRoomCreationReason_invalidSettings");break;case ye.Error.MAX_ROOM_LIMIT_REACHED:n=V.t("servers.errorRoomCreationReason_maxRoomLimitReached");break;case ye.Error.ALREADY_CREATED_ROOM:n=V.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:n=V.t("servers.errorReason_unknown")}document.getElementById("errorRoomCreation").style.display="block",document.getElementById("errorRoomCreationReason").textContent=n,Xn()}}));else{document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none";var A="";switch(Nn){case SOLO_AI:A=V.t("menu.soloAi");break;case SOLO_PLAYER:A=V.t("menu.soloPlayer");break;case PLAYER_VS_AI:A=V.t("menu.playerVsAi");break;case AI_VS_AI:A=V.t("menu.aiVsAi");break;case BATTLE_ROYALE:A=V.t("menu.battleRoyale")}document.getElementById("titleGame").innerHTML=V.t("game.currentMode")+" "+A;var I=[];if(Nn==SOLO_AI){var T=new Te(i,n,r,s,o,null,!1,f,m),w=new je(RIGHT,3,T,PLAYER_AI,h,d);I.push(new st(T,w,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}else if(Nn==SOLO_PLAYER){var L=new Te(i,n,r,s,o,null,!1,f,m),C=new je(RIGHT,3,L,t);I.push(new st(L,C,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}else if(Nn==PLAYER_VS_AI){var R=new Te(i,n,r,s,!1,null,!1,f,m),O=new je(RIGHT,3,R,t);if(a){var x=new je(RIGHT,3,R,PLAYER_AI,h,d);I.push(new st(R,[O,x],l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}else{var P=new Te(i,n,r,s,!1,null,!1,parseInt(f)+1,parseInt(m)+1),B=new je(RIGHT,3,P,PLAYER_AI,h,d);I.push(new st(R,O,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn)),I.push(new st(P,B,l,document.getElementById("gameContainer"),!1,!1,u,null,null,null,null,Mn))}}else if(Nn==AI_VS_AI){var D=new Te(i,n,r,s,!1,null,!1,f,m),N=new je(RIGHT,3,D,PLAYER_AI,h,d);if(a){var M=new je(RIGHT,3,D,PLAYER_AI,h,d);I.push(new st(D,[N,M],l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}else{var F=new Te(i,n,r,s,!1,null,!1,parseInt(f)+1,parseInt(m)+1),U=new je(RIGHT,3,F,PLAYER_AI,h,d);I.push(new st(D,N,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn)),I.push(new st(F,U,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}}else if(Nn==BATTLE_ROYALE)if(a){var j=new Te(i,n,r,s,!1,null,!1,f,m),H=[];g&&H.push(new je(RIGHT,3,j,t,h,d));for(var G=0;G<p;G++)H.push(new je(RIGHT,3,j,PLAYER_AI,h,d));I.push(new st(j,H,l,document.getElementById("gameContainer"),!0,!0,u,null,null,null,null,Mn))}else{if(g){var z=new Te(i,n,r,s,!1,null,!1,f,m),W=new je(RIGHT,3,z,t,h,d);I.push(new st(z,W,l,document.getElementById("gameContainer"),!0,!1,u,350,250,null,null,Mn))}for(var Y=0;Y<p;Y++){f++,m++;var K=new Te(i,n,r,s,!1,null,!1,f,m),q=new je(RIGHT,3,K,PLAYER_AI,h,d);I.push(new st(K,q,l,document.getElementById("gameContainer"),!0,!1,u,350,250,null,null,Mn))}}var X=new ot(I);X.setDisplayFPS(!!Mn.showDebugInfo),X.start(),null!=X.games[0].canvas&&X.games[0].canvas.scrollIntoView(),!o||Nn!=SOLO_AI&&Nn!=SOLO_PLAYER||X.setNotification(new rt(V.t("engine.mazeMode"),null,ye.Setting.INFO_NOTIF_COLOR,5,null,null,null,!0)),document.getElementById("backToMenuGame").onclick=function(){confirm(V.t("game.confirmQuit"))&&(X.killAll(),Kn())},X.onStop((function(){if(Nn==PLAYER_VS_AI||Nn==AI_VS_AI||Nn==BATTLE_ROYALE&&!X.errorOccurred()){var e="",t=X.getWinners();if(Nn==PLAYER_VS_AI)2==t.index.length?e=V.t("game.equalityPlayerVSAI"):0==t.index[0]?e=V.t("game.winPlayerVSAI"):1==t.index[0]&&(e=V.t("game.losePlayerVSAI"));else if(Nn==AI_VS_AI)1==t.index.length?e=V.t("game.oneWinnerAIVSAI",{numWinner:t.index[0]+1}):2==t.index.length&&(e=V.t("game.equalityAIVSAI"));else if(Nn==BATTLE_ROYALE)if(1==t.index.length)e=g&&0==t.index[0]?V.t("game.playerWinnerBattleRoyale",{score:t.score}):V.t("game.oneWinnerBattleRoyale",{numWinner:g?t.index[0]:t.index[0]+1,score:t.score});else if(g&&2==t.index.length&&0==t.index[0])e=V.t("game.winnerAIBattleRoyale")+" "+V.t("game.winnersNumBattleRoyale",{numWinner:t.index[1]})+" "+V.t("game.andPlayerWinnersBattleRoyale")+" "+V.t("game.winPlayerScoreBattleRoyale",{score:t.score});else if(t.index.length>1){var n=!1;e=V.t("game.winnersBattleRoyale")+" ";for(var i=0;i<t.index.length;i++)g&&0==t.index[i]?n=!0:(e+=V.t("game.winnersNumBattleRoyale",{numWinner:g?t.index[i]:t.index[i]+1}),i+1<t.index.length-1?e+=", ":i+1==t.index.length-1&&(e=e+" "+V.t("game.andWinnersBattleRoyale")+" "));e=g&&n?e+" "+V.t("game.andPlayerWinnersBattleRoyale")+" "+V.t("game.winPlayerScoreBattleRoyale",{score:t.score}):e+" "+V.t("game.winScoreBattleRoyale",{score:t.score})}""!=e.trim()&&(document.getElementById("gameOrder").innerHTML=e,X.setNotification(new rt(e,null,ye.Setting.INFO_NOTIF_COLOR,15,null,null,null,!0)))}})),X.onExit((function(){(Nn==SOLO_AI||Nn==SOLO_PLAYER||Nn==AI_VS_AI||Nn==PLAYER_VS_AI&&a||Nn==BATTLE_ROYALE&&a)&&(X.killAll(),Kn())})),X.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",X.closeNotification()}))}}document.getElementById("versionTxt").innerHTML=ye.Setting.APP_VERSION,document.getElementById("appVersion").innerHTML=ye.Setting.APP_VERSION,document.getElementById("dateTxt").innerHTML=DATE_VERSION,document.getElementById("appUpdateDate").innerHTML=DATE_VERSION,String.prototype.strcmp=function(e){return this==e?0:this>e?1:-1},Dn.isSupported||(document.getElementById("localstorageDisabled").style.display="block"),nt((function(e){Fn=e,Gn()})),Un(),Mn=Hn(),Gn(),document.getElementById("enableAnimations").onchange=function(){Mn.enableAnimations=this.checked,jn()},document.getElementById("renderBlur").onchange=function(){Mn.renderBlur=this.checked,jn()},document.getElementById("enableMultithreading").onchange=function(){Mn.enableMultithreading=this.checked,jn()},document.getElementById("onlineEnableClientSidePredictions").onchange=function(){Mn.onlineEnableClientSidePredictions=this.checked,jn()},document.getElementById("showDebugInfo").onchange=function(){Mn.showDebugInfo=this.checked,jn()},document.getElementById("textOutput").onclick=function(){Mn.textOutput=this.checked,jn()},document.getElementById("highDpi").onclick=function(){Mn.enableHighDpiRendering=this.checked,jn()},document.getElementById("graphicSkin").onchange=function(){Mn.graphicSkin=this.value,jn()},document.getElementById("maxFPS").oninput=function(){Mn.maxFPS=this.value,jn()},document.getElementById("resetParameters").onclick=function(){Un(),jn()},window.updateCallback=function(e){if(null!=e&&void 0!==e.version&&null!==e.version&&ye.Setting.APP_VERSION.strcmp(e.version)<0){document.getElementById("updateAvailable").style.display="block",document.getElementById("appUpdateVersion").textContent=e.version;var t=DATE_VERSION;void 0!==e.date&&null!==e.date&&(t=e.date),document.getElementById("appUpdateDate").textContent=t;var n="http://eliastiksofts.com/snakeia/downloads/";void 0!==e.url&&null!==e.url&&(n=e.url),document.getElementById("appDownloadLink").onclick=function(){window.open(n,"_blank")},document.getElementById("appDownloadURLGet").onclick=function(){prompt(V.t("update.URLToDownload"),n)};var i=V.t("update.noChanges");void 0!==e.changes&&null!==e.changes&&(i=e.changes),document.getElementById("appUpdateChanges").onclick=function(){alert(V.t("update.changes")+"\n"+i)},Ei()}},window.listServersCallback=function(e){if(document.getElementById("serverListGroup").innerHTML="",null!=e&&e.length>0){for(var t=0;t<e.length;t++)if(null!=e[t].url){var n=e[t].url,i=e[t].port,s=e[t].name,r=document.createElement("a");r.classList.add("list-group-item"),r.classList.add("list-group-item-action"),r.textContent=null!=s?s:V.t("servers.untitled"),r.onclick=function(e,t){zn(e,t)}.bind(null,n,i);var o=document.createElement("div");o.classList.add("small"),o.classList.add("text-muted"),null!=i&&""!=i.trim()?o.textContent=n+":"+i:o.textContent=n,r.appendChild(o),document.getElementById("serverListGroup").appendChild(r)}}else{var a=document.createElement("strong");a.textContent=V.t("servers.noServerFound"),document.getElementById("serverListGroup").appendChild(a)}document.getElementById("loadingServersList").style.display="none"},document.getElementById("linkCustomServer").onclick=function(){var e=prompt(V.t("servers.enterCustomServer"),"http://");null!=e&&""!=e.trim()&&zn(e)},document.getElementById("cancelConnectingToServer").onclick=function(){document.getElementById("connectingToServer").style.display="none",Bn.disconnect(),qn()},document.getElementById("cancelAuthenticationToServer").onclick=function(){document.getElementById("authenticationServerContainer").innerHTML="",document.getElementById("connectingToServer").style.display="none",Bn.disconnect(),qn()},document.getElementById("refreshRooms").onclick=function(){Vn()},document.getElementById("joinPrivateRoom").onclick=function(){var e=prompt(V.t("servers.enterCode"));null!=e&&Wn(e)},document.getElementById("soloAi").onclick=function(){Yn(SOLO_AI)},document.getElementById("soloPlayer").onclick=function(){Yn(SOLO_PLAYER)},document.getElementById("playerVsAi").onclick=function(){Yn(PLAYER_VS_AI)},document.getElementById("aiVsAi").onclick=function(){Yn(AI_VS_AI)},document.getElementById("battleRoyale").onclick=function(){Yn(BATTLE_ROYALE)},document.getElementById("createRoom").onclick=function(){Yn(BATTLE_ROYALE_ONLINE)},document.getElementById("backToMenu").onclick=function(){Kn()},document.getElementById("backToMenuLevelList").onclick=function(){Kn()},document.getElementById("backToMenuParameters").onclick=function(){Kn()},document.getElementById("othersSettings").onclick=function(){Kn(),document.getElementById("menu").style.display="none",document.getElementById("parameters").style.display="block"},document.getElementById("backToMenuServerList").onclick=function(){Bn.disconnect(),Kn()},document.getElementById("collapseSeedSettingsBtn").onclick=function(e){var t=document.getElementById("collapseSeedSettings");t&&t.classList.contains("show")?t.classList.remove("show"):t&&t.classList.add("show"),e.preventDefault(),e.stopPropagation()},document.getElementById("collapseLevelBonusShopLink").onclick=function(e){var t=document.getElementById("collapseLevelBonusShop");t&&t.classList.contains("show")?t.classList.remove("show"):t&&t.classList.add("show"),e.preventDefault(),e.stopPropagation()},document.getElementById("onlineBattleRoyale").onclick=function(){qn()},document.getElementById("backToServersRoomsList").onclick=function(){Bn.disconnect(),qn()},document.getElementById("levelsSoloPlayer").onclick=function(){$n(PLAYER_HUMAN)},document.getElementById("levelsSoloAI").onclick=function(){$n(PLAYER_AI)},document.getElementById("gameSpeed").onchange=function(){Zn()},document.getElementById("heightGrid").onchange=function(){ni()},document.getElementById("widthGrid").onchange=function(){ni()},document.getElementById("borderWalls").onchange=function(){ni()},document.getElementById("generateWalls").onchange=function(){ni()},document.getElementById("sameGrid").onchange=function(){Jn(),Zn(),ni()},document.getElementById("numberIA").onchange=function(){ni()},document.getElementById("battleAgainstAIs").onchange=function(){Qn(),ni()},document.getElementById("mazeGrid").onchange=function(){ei()},document.getElementById("enableAI").onchange=function(){ti()},document.getElementById("resetSeeds").onclick=function(e){ii(!1,!0),e.preventDefault(),e.stopPropagation()},document.getElementById("resetSettings").onclick=function(){ii(!0,!0)},document.getElementById("validateSettings").onclick=function(){si()};var ri={BONUS_AI_ASSISTANT:{text:"levels.bonus.aiAssistant",information:"levels.bonus.aiAssistantInfo",price:25,applicableTo:[ye.PlayerType.HUMAN]},BONUS_INCREASE_GOLD_FRUIT_PROB:{text:"levels.bonus.increaseGoldFruits",information:"levels.bonus.increaseGoldFruitsInfo",price:50,applicableTo:[ye.PlayerType.AI,ye.PlayerType.HUMAN]},BONUS_NO_TIME_LIMIT:{text:"levels.bonus.noTimeLimit",information:"levels.bonus.noTimeLimitInfo",price:75,applicableTo:[ye.PlayerType.AI,ye.PlayerType.HUMAN]},BONUS_DESTROY_AIS:{text:"levels.bonus.destroyAis",information:"levels.bonus.destroyAisInfo",price:75,applicableTo:[ye.PlayerType.AI,ye.PlayerType.HUMAN]},BONUS_PASS_LEVEL:{text:"levels.bonus.passLevel",information:"levels.bonus.passLevelInfo",price:100,applicableTo:[ye.PlayerType.AI,ye.PlayerType.HUMAN]},BONUS_UNLOCK_ALL_LEVELS:{text:"levels.bonus.unlockAllLevels",information:"levels.bonus.unlockAllLevelsInfo",price:1e3,applicableTo:[ye.PlayerType.AI,ye.PlayerType.HUMAN]}};function oi(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return SOLO_PLAYER_SAVE+"defautLevelsSave";if(e==PLAYER_AI)return SOLO_AI_SAVE+"defautLevelsSave"}else if(t==DOWNLOADED_LEVEL){if(e==PLAYER_HUMAN)return SOLO_PLAYER_SAVE+"downloadedLevelsSave";if(e==PLAYER_AI)return SOLO_AI_SAVE+"downloadedLevelsSave"}return null}function ai(e,t){null==Dn.getItem(oi(e,t))&&hi(e,t,!1);try{return JSON.parse(Dn.getItem(oi(e,t)))}catch(n){return hi(e,t,!0),ai(e,t)}}function li(e,t,n){return ai(t,n)[e]}function ui(e,t,n,i){var s=oi(n,i),r=ai(n,i),o=di(n,i);return null!=r&&(Array.isArray(e)&&e.length>=2&&Array.isArray(r[t])&&r[t].length>=2&&1==r[t][0]&&(o[t].type!=LEVEL_REACH_SCORE_ON_TIME&&o[t].type!=LEVEL_MULTI_REACH_SCORE_FIRST&&o[t].type!=LEVEL_MAZE_WIN?e[1]<r[t][1]&&(e[1]=r[t][1]):e[1]>r[t][1]&&(e[1]=r[t][1])),r[t]=e,Dn.setItem(s,JSON.stringify(r)),!0)}function ci(e,t){var n=oi(e,DEFAULT_LEVEL),i=ai(e,DEFAULT_LEVEL);return null!=i&&(i.numFruits&&!isNaN(i.numFruits)||(i.numFruits=0),i.numFruits+=t,Dn.setItem(n,JSON.stringify(i)),!0)}function hi(e,t,n){if("undefined"!=typeof Storage){var i=oi(e,t);return(null==Dn.getItem(i)||n)&&(Dn.setItem(i,JSON.stringify({version:ye.Setting.APP_VERSION,numFruits:0,currentBonus:null,unlockAllLevels:!1})),ui([!1,0],1,e,t)),!1}return!1}function di(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return DEFAULT_LEVELS_SOLO_PLAYER;if(e==PLAYER_AI)return DEFAULT_LEVELS_SOLO_AI}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)try{return JSON.parse(Dn.getItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO))}catch(e){return null}else if(e==PLAYER_AI)try{return JSON.parse(Dn.getItem(SOLO_AI_DOWNLOAD_LEVELS_TO))}catch(e){return null}return null}function pi(e,t,n){if(Mn.unlockAllLevels)return!0;if(ai(t,DEFAULT_LEVEL).unlockAllLevels)return!0;var i=!0,s=di(t,n);if(null==s)return!1;for(var r=1;r<e;r++){var o=li(r,t,n);(null==o||!o[0]&&gi(s[r].type,s[r].version))&&(i=!1)}return i}function gi(e,t){return!(e!=LEVEL_REACH_SCORE&&e!=LEVEL_REACH_MAX_SCORE&&e!=LEVEL_MULTI_BEST_SCORE&&e!=LEVEL_REACH_SCORE_ON_TIME&&e!=LEVEL_MULTI_REACH_SCORE_FIRST&&e!=LEVEL_MAZE_WIN||ye.Setting.APP_VERSION.strcmp(t)<0)}function fi(e,t,n,i,s){var r="",o=li(e,t,i);return null==o||(o=o[1])<=0?"":(s?n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?r=V.t("levels.bestScoreShort",{count:o}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(r=V.t("levels.bestTimeShort",{count:Math.round(o)})):n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?r=V.t("levels.bestScore",{count:o}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(r=V.t("levels.bestTime",{count:Math.round(o)})),r)}function mi(e){var t=ai(e,DEFAULT_LEVEL);return null!=t&&(t.numFruits&&!isNaN(t.numFruits)||(t.numFruits=0),t.numFruits)}function yi(e,t){var n=di(e,t),i="";if(t==DOWNLOADED_LEVEL&&(i+='<div class="row mb-3"><div class="col text-center"><button class="btn btn-lg btn-warning" onclick="downloadLevels('+e+', this);"><span class="fui-plus-circle"></span>&nbsp; '+V.t("levels.download")+'</button><br /><a href="#null" onclick="editDownloadURL();" class="small"><span class="fui-new"></span>&nbsp; '+V.t("levels.editDownloadURL")+"</a></div></div>"),null==n)return i+"<strong>"+V.t("levels.emptyList")+"</strong>";var s=1,r=!0;for(var o in n){var a=void 0;Object.prototype.hasOwnProperty.call(n,o)&&(a=pi(o,e,t)?gi(n[o].type,n[o].version)?'<button class="btn btn-lg btn-primary btn-block-85" onclick="playLevel('+o+", "+e+", "+t+');" '+(""!=fi(o,e,n[o].type,t).trim()?'aria-label="'+fi(o,e,n[o].type,t)+'" data-balloon-length="fit" data-balloon-pos="up"':"")+">"+V.t("levels.level")+" "+s+"</button>":'<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+V.t("levels.notCompatible")+'" data-balloon-length="fit" data-balloon-pos="up">'+V.t("levels.level")+" "+s+"</button>":'<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+V.t("levels.disabledLevel")+'" data-balloon-length="fit" data-balloon-pos="up">'+V.t("levels.level")+" "+s+"</button>",1==s&&(i+='<div class="row mb-2">'),i+=s%2==0?'<div class="col pl-0 justify-content-center">'+a+'</div></div><div class="row mb-2">':'<div class="col pr-0 justify-content-center">'+a+"</div>",r=!1),s++}return r?i+"<strong>"+V.t("levels.emptyList")+"</strong>":(s%2==0&&(i+='<div class="col pr-0 justify-content-center"></div>'),i+"</div>")}function vi(e){var t=ai(e,DEFAULT_LEVEL),n=document.createElement("div"),i=document.createElement("p");i.classList.add("mb-1");var s=document.createElement("strong");s.textContent=V.t("levels.bonusEquipped")+" ";var r=document.createElement("span");if(r.textContent=t.currentBonus?ri[t.currentBonus]?V.t(ri[t.currentBonus].text):V.t("levels.bonus.unknown"):V.t("levels.none"),i.appendChild(s),i.appendChild(r),t.currentBonus){var o=document.createElement("a");o.addEventListener("click",(function(){return function(e){var t=oi(e,DEFAULT_LEVEL),n=ai(e,DEFAULT_LEVEL);return!(null==n.currentBonus||!ri[n.currentBonus]&&!confirm(V.t("levels.bonus.unknownInfo")))&&(ri[n.currentBonus]&&(n.numFruits+=ri[n.currentBonus].price),n.currentBonus=null,Dn.setItem(t,JSON.stringify(n)),$n(e),!0)}(e)})),o.setAttribute("aria-label",V.t("levels.sellBonus")),o.setAttribute("data-balloon-length","medium"),o.classList.add("text-danger","ml-2"),o.style.cursor="pointer";var a=document.createElement("span");a.classList.add("fui-cross"),o.appendChild(a),i.appendChild(o)}n.appendChild(i);var l=function(i){var s=document.createElement("div");s.classList.add("m-2");var r=document.createElement("div");r.classList.add("btn-group","flex-wrap");var o=document.createElement("button");o.classList.add("btn","btn-primary"),o.textContent=V.t(ri[i].text),o.style.width="250px",o.setAttribute("data-balloon-length","large"),ri[i].applicableTo.indexOf(e)<0||t.unlockAllLevels&&("BONUS_UNLOCK_ALL_LEVELS"==i||"BONUS_PASS_LEVEL"==i)?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",V.t("levels.bonusNotApplicable"))):ri[i].price>mi(e)?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",V.t("levels.notEnoughFruits"))):null!=t.currentBonus?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",V.t("levels.bonusAlreadyEquipped"))):o.addEventListener("click",(function(){return bi(i,e)}));var a=document.createElement("div");a.classList.add("btn","btn-info"),a.setAttribute("aria-label",V.t(ri[i].information)),a.setAttribute("data-balloon-length","large");var l=document.createElement("span");l.classList.add("fui-question-circle"),a.appendChild(l);var u=document.createElement("div");u.style.width="125px";var c=document.createElement("img");c.classList.add("align-text-bottom"),c.src="assets/images/skin/flat/fruit.png",c.width=24,c.height=24;var h=document.createElement("span");h.textContent=" × "+ri[i].price,u.appendChild(c),u.appendChild(h),r.appendChild(o),r.appendChild(a),r.appendChild(u),s.appendChild(r),n.appendChild(s)};for(var u in ri)l(u);return n}function bi(e,t){var n=oi(t,DEFAULT_LEVEL),i=ai(t,DEFAULT_LEVEL);if(null==e)i.currentBonus=null,Dn.setItem(n,JSON.stringify(i));else if(ri[e].applicableTo.indexOf(t)<0||i.unlockAllLevels&&("BONUS_UNLOCK_ALL_LEVELS"==e||"BONUS_PASS_LEVEL"==e))alert(V.t("levels.bonusNotApplicable"));else if(ri[e].price>mi(t))alert(V.t("levels.notEnoughFruits"));else{if(null==i.currentBonus)return i.numFruits-=ri[e].price,"BONUS_UNLOCK_ALL_LEVELS"==e?i.unlockAllLevels=!0:i.currentBonus=e,Dn.setItem(n,JSON.stringify(i)),$n(t),!0;alert(V.t("levels.bonusAlreadyEquipped"))}return!1}function Ei(){!function(e){if(null!=e){document.getElementById("languageSelect").disabled=!0,document.getElementById("languageSelect").innerHTML="";for(var t=0;t<e.length;t++)document.getElementById("languageSelect").innerHTML=document.getElementById("languageSelect").innerHTML+'<option data-i18n="lang.'+e[t]+'" value="'+e[t]+'"></option>';document.getElementById("languageSelect").value=V.language.substr(0,2),document.getElementById("languageSelect").disabled=!1}}(V.languages);for(var e=document.querySelectorAll("[data-i18n]"),t=0,n=e.length;t<n;t++)e[t].innerHTML=V.t(e[t].dataset.i18n);document.getElementById("dateTxt").innerHTML=V.t("menu.versionDate",{date:new Intl.DateTimeFormat(V.language.substr(0,2)).format(new Date(DATE_VERSION))}),document.getElementById("heightGrid").placeholder=V.t("settings.placeholderHeight"),document.getElementById("widthGrid").placeholder=V.t("settings.placeholderWidth"),document.getElementById("customSpeed").placeholder=V.t("settings.placeholderCustomSpeed"),document.getElementById("numberIA").placeholder=V.t("settings.placeholderNumberIA"),document.getElementById("appDownloadURLGet").setAttribute("aria-label",V.t("update.getURL")),document.getElementById("appUpdateChanges").setAttribute("aria-label",V.t("update.getChanges")),document.getElementById("appUpdateDateLocalized").innerHTML=V.t("update.versionDate",{date:new Intl.DateTimeFormat(V.language.substr(0,2)).format(new Date(document.getElementById("appUpdateDate").innerHTML))}),document.getElementById("aiAssistantInfos").setAttribute("aria-label",V.t("settings.aiAssistantInfos")),document.getElementById("multithreadingInfos").setAttribute("aria-label",V.t("menu.multithreadingInfos")),document.getElementById("onlineEnableClientSidePredictionsInfos").setAttribute("aria-label",V.t("menu.onlineEnableClientSidePredictionsInfos")),document.getElementById("highDpiInfos").setAttribute("aria-label",V.t("menu.highDpiInfos")),document.querySelectorAll(".settingNotAvailable").forEach((function(e){e.setAttribute("aria-label",V.t("menu.settingNotAvailable"))}))}window.playLevel=function(e,t,n){var i=li(e,t,n),s=ai(t,DEFAULT_LEVEL).currentBonus,r=di(t,n);if(null==r)return!1;if(null==r[e])return!1;var o=function(){p.setBestScore(fi(e,t,u,n,!0)),u==LEVEL_REACH_SCORE?j=V.t("levels.reachScore",{value:c}):u==LEVEL_REACH_SCORE_ON_TIME?(j=V.t("levels.reachScoreTime",{value:c[0],count:c[1]}),c[1]>=0&&(document.getElementById("gameStatus").innerHTML=V.t("levels.timerRemaining",{count:c[1]})),p.setTimeToDisplay(c[1])):u==LEVEL_REACH_MAX_SCORE?j=V.t("levels.reachMaxScore"):u==LEVEL_MULTI_BEST_SCORE?j=V.t("levels.multiBestScore",{count:S}):u==LEVEL_MULTI_REACH_SCORE_FIRST?j=V.t("levels.multiReachScoreFirst",{value:c,count:S}):u==LEVEL_MAZE_WIN&&(j=V.t("levels.mazeMode",{value:c,count:S})),document.getElementById("gameOrder").innerHTML=j.replace("\n","<br />")},a=r[e],l=a.settings,u=a.type,c=a.typeValue,h=a.version;if(!gi(u,h))return alert(V.t("levels.notCompatible")),!1;if(!pi(e,t,n))return alert(V.t("levels.disabledLevel")),!1;if("BONUS_PASS_LEVEL"==s&&(!i||1!=i[0]))return ui([!0,Array.isArray(c)&&c.length>=2?c[1]:c],e,t,n),bi(null,t),$n(t),!0;"BONUS_NO_TIME_LIMIT"==s&&u==LEVEL_REACH_SCORE_ON_TIME&&(c=[c[0],-1],bi(null,t));var d,p,g=l[0],f=l[1],m=l[2],y=l[3],v=l[4],b=l[5],E=l[6],k=l[7],S=l[8],_=l[9],A=l[10],I=l[11],T=l[12],w=l[13],L=!1,C=[],R=new Te(f,g,y,m,_,A,I,T,w,!_&&"BONUS_INCREASE_GOLD_FRUIT_PROB"==s);if(_||"BONUS_INCREASE_GOLD_FRUIT_PROB"!=s||bi(null,t),t==PLAYER_AI?d=new je(RIGHT,3,R,t,AI_LEVEL_HIGH):t==PLAYER_HUMAN&&("BONUS_AI_ASSISTANT"!=s||_?d=new je(RIGHT,3,R,t):(d=new je(RIGHT,3,R,ye.PlayerType.HYBRID_HUMAN_AI),bi(null,t))),v){for(var O=[d],x=0;x<S;x++)O.push(new je(RIGHT,3,R,PLAYER_AI,k)),L="BONUS_DESTROY_AIS"==s;p=new st(R,O,b,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,Mn),C.push(p)}else{var P,B;S+1<=2?(P=null,B=null):(P=350,B=250),p=new st(R,d,b,document.getElementById("gameContainer"),!0,!0,E,P,B,null,null,Mn),C.push(p);for(var D=0;D<S;D++){var N=new Te(f,g,y,m,_,A,I,T,w),M=new je(RIGHT,3,N,PLAYER_AI,k,!1);L="BONUS_DESTROY_AIS"==s,C.push(new st(N,M,b,document.getElementById("gameContainer"),!1,!1,E,P,B,null,null,Mn))}}document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",document.getElementById("titleGame").innerHTML=V.t("levels.level")+" "+e;var F=new ot(C);F.setDisplayFPS(!!Mn.showDebugInfo),F.start(),F.closeRanking(),document.getElementById("gameOrder").scrollIntoView();var U,j,H=new xn(null,0),G=!1,z=!1,W=ye.Setting.ERROR_NOTIF_COLOR,Y=ye.Setting.INFO_NOTIF_COLOR;document.getElementById("backToMenuGame").onclick=function(){confirm(V.t("game.confirmQuit"))&&(H.pause(),F.killAll(),$n(t))},function(){var i=0;if(u==LEVEL_REACH_SCORE)p.onScoreIncreased((function(){ci(t,p.snakes[0].score-i),i=p.snakes[0].score,p.snakes[0].score>=c&&(ui([!0,p.snakes[0].score],e,t,n),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"))),G=!0))})),p.onStop((function(){i=0,p.snakes[0].score<c&&(G||(p.setNotification(new rt(V.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),G=!0))})),p.onReset((function(){i=0}));else if(u==LEVEL_REACH_SCORE_ON_TIME)c[1]>=0&&(H=new xn((function(){p.setTimeToDisplay(0),document.getElementById("gameStatus").innerHTML=V.t("levels.timerRemaining",{count:0}),G||(p.setNotification(new rt(V.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),G=!0),F.stopAll(!0)}),1e3*c[1]-1,new Pn((function(){document.getElementById("gameStatus").innerHTML=V.t("levels.timerRemaining",{count:Math.round(H.getTime()/1e3)}),p.setTimeToDisplay(Math.round(H.getTime()/1e3))})))),p.onStart((function(){H.resume()})),p.onPause((function(){H.pause()})),p.onReset((function(){H.reset()})),p.onStop((function(){H.pause()})),p.onScoreIncreased((function(){if(p.snakes[0].score>=c[0]){var i=1e3*c[1]-H.getTime();H.reset(),F.stopAll(!0),ui([!0,i/1e3],e,t,n),ci(t,p.snakes[0].score),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),G=!0)}}));else if(u==LEVEL_REACH_MAX_SCORE)p.onStop((function(){p.scoreMax?(ui([!0,p.snakes[0].score],e,t,n),ci(t,p.snakes[0].score),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),G=!0)):G||(p.setNotification(new rt(V.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),G=!0)}));else if(u==LEVEL_MULTI_BEST_SCORE)F.onStop((function(){for(var i=F.getWinners(),s=!1,r=0;r<i.winners.length;r++)i.winners[r]==p.snakes[0]&&(s=!0,ui([!0,p.snakes[0].score],e,t,n),ci(t,p.snakes[0].score),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),G=!0));s||G||(p.setNotification(new rt(V.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),G=!0)}));else if(u==LEVEL_MULTI_REACH_SCORE_FIRST){var s=0,r=new Pn((function(){s++}));p.onStart((function(){r.start()})),p.onPause((function(){r.stop()})),p.onReset((function(){s=0,r.stop()})),p.onStop((function(){r.stop()})),F.onScoreIncreased((function(){for(var i=0;i<F.games.length;i++)for(var r=0;r<F.games[i].snakes.length;r++)F.games[i].snakes[r].score>=c&&(F.games[i].snakes[r]==p.snakes[0]?(F.stopAll(!0),ui([!0,s],e,t,n),ci(t,p.snakes[0].score),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),G=!0)):(F.stopAll(!0),G||(p.setNotification(new rt(V.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),G=!0)))}))}else if(u==LEVEL_MAZE_WIN){var o=0,a=new Pn((function(){o++}));p.onStart((function(){a.start()})),p.onPause((function(){a.stop()})),p.onReset((function(){o=0,a.stop()})),p.onStop((function(){a.stop()})),p.onScoreIncreased((function(){p.snakes[0].score>=1&&(ui([!0,o],e,t,n),ci(t,Math.round(p.grid.width*p.grid.height/50)),p.setBestScore(fi(e,t,u,n,!0)),G||(p.setNotification(new rt(V.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),G=!0))}))}}(),o(),F.onExit((function(){H.pause(),F.killAll(),$n(t)})),F.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",G=!1,z=!1,o()})),p.onStart((function(){G||z||(U=new rt(j,null,Y,10),p.setNotification(U),z=!0),L&&(F.destroySnakes([0],[ye.PlayerType.AI]),bi(null,t))}))},window.editDownloadURL=function(){var e=window.prompt(V.t("levels.editDownloadURLPrompt"),DOWNLOAD_DEFAULT_URI);null!=e&&(DOWNLOAD_DEFAULT_URI=e)},window.downloadLevels=function(e,t){var n=DOWNLOAD_DEFAULT_URI;n=(n=n.replace("{player}",e)).replace("{appVersion}",ye.Setting.APP_VERSION);var i=document.createElement("script");i.src=n;var s=!1;window.callbackDownloadLevels=function(e,t){s||(e==PLAYER_HUMAN?Dn.setItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO,JSON.stringify(t)):e==PLAYER_AI&&Dn.setItem(SOLO_AI_DOWNLOAD_LEVELS_TO,JSON.stringify(t)),$n(e)),document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML=""},t.disabled=!0;var r=document.createElement("button");r.classList="btn btn-lg btn-warning",r.innerHTML=V.t("levels.buttonDeblock"),document.getElementById("levelDownloading").innerHTML="<strong>"+V.t("levels.downloading")+"</strong>",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].appendChild(i),r.onclick=function(){s=!0,function(e,t){e.disabled=!1,t.src=null,document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].removeChild(t)}(t,i)},document.getElementById("btnDeblockDiv").appendChild(r)},document.getElementById("languageSelect").onchange=function(){V.changeLanguage(document.getElementById("languageSelect").value,(function(){Ei()}))},window.addEventListener("load",(function(){setTimeout((function(){var e;Ei(),(e=document.createElement("script")).src=UPDATER_URI,document.getElementsByTagName("head")[0].appendChild(e)}),250)})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")})(),__webpack_exports__})()));