!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SnakeIA=t():e.SnakeIA=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=78)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var i=n(12);function r(t,n,s){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(n):s.value}},r(t,n,s||t)}e.exports=r},function(e,t){e.exports=function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(13);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,n){var i=n(16),r=n(3);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}},function(e,t,n){var i=n(12),r=n(8);function s(e,t,n,o){return(s="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,s){var o,a=i(e,t);if(a){if((o=Object.getOwnPropertyDescriptor(a,t)).set)return o.set.call(s,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(s,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(s,t,o)}else r(s,t,n);return!0})(e,t,n,o)}e.exports=function(e,t,n,i,r){if(!s(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}},function(e,t,n){var i=n(18),r=n(19),s=n(20),o=n(21);e.exports=function(e){return i(e)||r(e)||s(e)||o()}},function(e,t,n){var i=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},function(e,t,n){var i=n(13),r=n(17);function s(t,n,o){return r()?e.exports=s=Reflect.construct:e.exports=s=function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&i(s,n.prototype),s},s.apply(null,arguments)}e.exports=s},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var i=n(14);e.exports=function(e){if(Array.isArray(e))return i(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,n){var i=n(14);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Constants",(function(){return i})),n.d(t,"Button",(function(){return Q})),n.d(t,"ButtonImage",(function(){return ee})),n.d(t,"ImageLoader",(function(){return te})),n.d(t,"NotificationMessage",(function(){return ue})),n.d(t,"Utils",(function(){return z})),n.d(t,"Menu",(function(){return he})),n.d(t,"Input",(function(){return pe})),n.d(t,"Label",(function(){return ye})),n.d(t,"Link",(function(){return ve})),n.d(t,"Tooltip",(function(){return Ee})),n.d(t,"Scene",(function(){return ke})),n.d(t,"FPSMeter",(function(){return be})),n.d(t,"ProgressBar",(function(){return Ae})),n.d(t,"Canvas",(function(){return Le})),n.d(t,"Component",(function(){return B})),n.d(t,"EasingFunctions",(function(){return Re})),n.d(t,"Col",(function(){return le})),n.d(t,"Container",(function(){return q})),n.d(t,"Row",(function(){return Z})),n.d(t,"ImageContainer",(function(){return $})),n.d(t,"Arrow",(function(){return _e})),n.d(t,"Cross",(function(){return ce})),n.d(t,"Scrollbar",(function(){return U})),n.d(t,"ScrollbarVertical",(function(){return G})),n.d(t,"ScrollbarHorizontal",(function(){return H})),n.d(t,"Box",(function(){return N})),n.d(t,"Style",(function(){return C})),n.d(t,"Select",(function(){return Pe})),n.d(t,"SelectOption",(function(){return De})),n.d(t,"SelectOptionsContainer",(function(){return Me})),n.d(t,"Triangle",(function(){return xe})),n.d(t,"Circle",(function(){return Fe})),n.d(t,"Reactor",(function(){return I})),n.d(t,"Event",(function(){return T})),n.d(t,"ReactorCanvas",(function(){return we}));var i={Setting:{DISABLE_OPTIMIZATIONS:!1,DISABLE_EXPERIMENTAL_OPTIMIZATIONS:!0,DISABLE_CONTAINERS_CUTTING:!1,FONT_FAMILY:"sans-serif",FONT_SIZE:28,CANVAS_WIDTH:600,CANVAS_HEIGHT:400,DEFAULT_PADDING:6,DEFAULT_SPACING:6,BUTTON_DEFAULT_BACKGROUND:"rgba(0, 0, 0, 0)",BUTTON_DEFAULT_HOVER_BACKGROUND:"#95A5A6",BUTTON_DEFAULT_CLICK_BACKGROUND:"#727F80",BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND:"#ACBEBF",INPUT_DEFAULT_FONT_COLOR:"#000",INPUT_DEFAULT_BACKGROUND_COLOR:"#fff",INPUT_DEFAULT_BORDER_COLOR:"#000",INPUT_DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",INPUT_DEFAULT_SELECT_COLOR:"#2980b9",LABEL_DEFAULT_FONT_COLOR:"#000",LINK_DEFAULT_COLOR:"#0000EE",LINK_DEFAULT_HOVER_COLOR:"#4D4DFF",LINK_DEFAULT_CLICK_COLOR:"#EE7700",MENU_DEFAULT_BACKGROUND:"rgba(44, 62, 80, 0.75)",MENU_DEFAULT_BLUR_BACKGROUND:!1,NOTIFICATION_DEFAULT_BACKGROUND:"rgba(46, 204, 113, 0.5)",NOTIFICATION_DEFAULT_ANIMATION_DURATION:500,PROGRESS_DEFAULT_BACKGROUND:"#bdc3c7",PROGRESS_DEFAULT_FOREGROUND:"#27ae60",PROGRESS_DEFAULT_ANIMATION_DURATION:2e3,TOOLTIP_DEFAULT_BACKGROUND:"rgba(255, 255, 255, 0.25)",ARROW_DEFAULT_LINE_CAP:"round",ARROW_DEFAULT_COLOR:"#FF0000",ARROW_DEFAULT_LINE_SIZE:8,ARROW_DEFAULT_HEAD_SIZE:20,CROSS_DEFAULT_LINE_CAP:"round",CROSS_DEFAULT_COLOR:"#fff",CROSS_DEFAULT_LINE_SIZE:3,SCROLLBAR_DEFAULT_BACKGROUND:"rgba(149, 165, 166, 0.75)",SCROLLBAR_DEFAULT_HOVER_BACKGROUND:"rgba(149, 165, 166, 0.9)",SCROLLBAR_DEFAULT_CLICK_BACKGROUND:"rgba(149, 165, 166, 0.5)",SCROLLBAR_DEFAULT_SIZE:10,DEFAULT_BORDER_SIZE:3,DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",DEFAULT_ANIMATION_DURATION:2e3,TRIANGLE_DEFAULT_LINE_CAP:"round",TRIANGLE_DEFAULT_COLOR:"#000",TRIANGLE_DEFAULT_FILL_COLOR:"#000",TRIANGLE_DEFAULT_LINE_SIZE:3,TRIANGLE_DEFAULT_FILL:!0,SELECT_DEFAULT_BACKGROUND:"#ecf0f1",SELECT_DEFAULT_HOVER_BACKGROUND:"#bdc3c7",SELECT_DEFAULT_CLICK_BACKGROUND:"#adb2b5",CIRCLE_DEFAULT_LINE_CAP:"round",CIRCLE_DEFAULT_COLOR:"#fff",CIRCLE_DEFAULT_FILL_COLOR:"#000",CIRCLE_DEFAULT_LINE_SIZE:3,CIRCLE_DEFAULT_FILL:!0},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13,ECHAP:27,TAB:9},Alignement:{RIGHT:"right",LEFT:"left",CENTER:"center",DEFAULT:"default"},VerticalAlignement:{TOP:"top",CENTER:"center",BOTTOM:"bottom",DEFAULT:"default"},String:{ERROR_MESSAGE_CANVAS:"A fatal error has occurred at the JSGameTools level.",ERROR_MESSAGE_CANVAS_LABEL:":'(\nA fatal error has occurred at the JSGameTools level.",RETRY:"Retry",NOTICE_MESSAGE:"Notice:",WARNING_MESSAGE:"Warning:",ERROR_MESSAGE:"Error:",OPTIMIZATION_DISABLED:"Optimizations are disabled. You may notice low performance.",CONTAINER_CUTTING_DISABLED:"Containers cutting is disabled.",BUTTON_IMAGE_DEPRECATED:"JSGameTools.ButtonImage is deprecated. Please use a Button with an ImageContainer instead.",INPUT_FULLSCREEN:"The use of JSGameTools.Canvas is needed for Input components to properly work in fullscreen mode."}},r=n(4),s=n.n(r),o=n(5),a=n.n(o),l=n(3),c=n.n(l),u=n(1),h=n.n(u),d=n(6),f=n.n(d),g=n(7),p=n.n(g),m=n(0),y=n.n(m),v=n(8),E=n.n(v),k=n(2),b=n.n(k),S=n(9),A=n.n(S),w=new WeakMap,C=function(){function e(t){s()(this,e),w.set(this,{writable:!0,value:{}}),E()(this,"component",void 0),this.setAll(t)}return a()(e,[{key:"set",value:function(e,t){b()(this,w)[e]=t,this.component&&this.component.reactor&&this.component.reactor.dispatchEvent("onChange",this)}},{key:"setAll",value:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t])}},{key:"copy",value:function(){return new e(b()(this,w))}},{key:"getStyles",value:function(){var e={};for(var t in b()(this,w))b()(this,w).hasOwnProperty(t)&&(e[t]=b()(this,w)[t]);return e}},{key:"fontColor",get:function(){return b()(this,w).fontColor}},{key:"fontColorHover",get:function(){return b()(this,w).fontColorHover}},{key:"fontColorDown",get:function(){return b()(this,w).fontColorDown}},{key:"fontFamily",get:function(){return null!=b()(this,w).fontFamily?b()(this,w).fontFamily:i.Setting.FONT_FAMILY}},{key:"fontSize",get:function(){return null!=b()(this,w).fontSize?b()(this,w).fontSize:i.Setting.FONT_SIZE}},{key:"bold",get:function(){return b()(this,w).bold}},{key:"underline",get:function(){return b()(this,w).underline}},{key:"wrap",get:function(){return b()(this,w).wrap}},{key:"backgroundColor",get:function(){return b()(this,w).backgroundColor}},{key:"foregroundColor",get:function(){return b()(this,w).foregroundColor}},{key:"backgroundColorHover",get:function(){return b()(this,w).backgroundColorHover}},{key:"backgroundColorDown",get:function(){return b()(this,w).backgroundColorDown}},{key:"borderColor",get:function(){return b()(this,w).borderColor}},{key:"borderColorHover",get:function(){return b()(this,w).borderColorHover}},{key:"borderColorDown",get:function(){return b()(this,w).borderColorDown}},{key:"borderColorSelected",get:function(){return null!=b()(this,w).borderColorSelected?b()(this,w).borderColorSelected:i.Setting.DEFAULT_BORDER_COLOR_SELECTED}},{key:"borderSize",get:function(){return null!=b()(this,w).borderSize?b()(this,w).borderSize:i.Setting.DEFAULT_BORDER_SIZE}},{key:"selectColor",get:function(){return b()(this,w).selectColor}},{key:"alignement",get:function(){return b()(this,w).alignement}},{key:"verticalAlignement",get:function(){return b()(this,w).verticalAlignement}},{key:"disableAnimation",get:function(){return b()(this,w).disableAnimation}},{key:"scrollXDisabled",get:function(){return b()(this,w).scrollXDisabled}},{key:"scrollYDisabled",get:function(){return b()(this,w).scrollYDisabled}},{key:"padding",get:function(){return null!=b()(this,w).padding?b()(this,w).padding:i.Setting.DEFAULT_PADDING}},{key:"spaceBetweenComponents",get:function(){return null!=b()(this,w).spaceBetweenComponents?b()(this,w).spaceBetweenComponents:i.Setting.DEFAULT_SPACING}},{key:"hidden",get:function(){return b()(this,w).hidden}},{key:"blurBackground",get:function(){return b()(this,w).blurBackground}},{key:"lineWidth",get:function(){return b()(this,w).lineWidth}},{key:"animationDuration",get:function(){return null!=b()(this,w).animationDuration?b()(this,w).animationDuration:i.Setting.DEFAULT_ANIMATION_DURATION}},{key:"foreground",get:function(){return b()(this,w).foreground}},{key:"zIndex",get:function(){return null!=b()(this,w).zIndex?b()(this,w).zIndex:0}},{key:"lineCap",get:function(){return b()(this,w).lineCap}},{key:"fill",get:function(){return b()(this,w).fill}},{key:"fillColor",get:function(){return b()(this,w).fillColor}},{key:"color",get:function(){return b()(this,w).color}},{key:"movable",get:function(){return b()(this,w).movable||!1}}]),e}(),T=function(){function e(t){s()(this,e),this.name=t,this.callbacks=[]}return a()(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}},{key:"removeCallback",value:function(e){this.callbacks.filter((function(t){return t!=e}))}},{key:"removeAllCallbacks",value:function(){this.callbacks=[]}}]),e}(),I=function(){function e(){s()(this,e),this.events={}}return a()(e,[{key:"registerEvent",value:function(e){this.events[e]=new T(e)}},{key:"dispatchEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.events[e]){var r=this.events[e].callbacks;r.forEach((function(e){return e&&e.apply(void 0,n)}))}}},{key:"addEventListener",value:function(e,t){this.events[e]&&this.events[e].registerCallback(t)}},{key:"removeEventListener",value:function(e,t){this.events[e]&&this.events[e].removeCallback(t)}},{key:"removeAllEventListener",value:function(e){this.events[e]&&this.events[e].removeAllCallbacks()}}]),e}(),L=new WeakMap,R=new WeakMap,_=new WeakMap,x=new WeakMap,O=new WeakMap,P=new WeakMap,D=new WeakMap,B=function(){function e(t,n,i,r,o){s()(this,e),E()(this,"selectable",!0),L.set(this,{writable:!0,value:0}),R.set(this,{writable:!0,value:0}),_.set(this,{writable:!0,value:0}),x.set(this,{writable:!0,value:0}),O.set(this,{writable:!0,value:!1}),P.set(this,{writable:!0,value:!1}),D.set(this,{writable:!0,value:void 0}),A()(this,_,t||0),A()(this,x,n||0),A()(this,L,i),A()(this,R,r),this.canvas,this.parent,this.style=o,this.reactor=new I,this.reactor.registerEvent("onClick"),this.reactor.registerEvent("onHover"),this.reactor.registerEvent("onDown"),this.reactor.registerEvent("onScroll"),this.reactor.registerEvent("onMove"),this.reactor.registerEvent("onUp"),this.reactor.registerEvent("onChange"),this.init=!1,this.hasInitEvents=!1,A()(this,P,!1),this.clicked=!1,this.hovered=!1,A()(this,O,!1),this.offsetScrollX=0,this.offsetScrollY=0,this.offsetMoveX=0,this.offsetMoveY=0,this.moveEventStartX=0,this.moveEventStartY=0,this.touchEventStartX=0,this.touchEventStartY=0,this.touchEventStartTimestamp=0,this.tooltip,this.initEvents()}return a()(e,[{key:"initEvents",value:function(){var e=this;if(!this.hasInitEvents&&null!=this.canvas){this.canvas.addEventListener("mousemove",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1,e.tooltip&&e.tooltip.disable();else{var i=e.getMousePos(t);if(e.clicked){var r=-t.movementX,s=-t.movementY;e.offsetMoveX+=r,e.offsetMoveY+=s,e.reactor&&e.reactor.dispatchEvent("onMove",r,s,i),e.moveEventStartX=i.x,e.moveEventStartY=i.y}n?(e.reactor&&!e.disabled&&e.reactor.dispatchEvent("onHover",i),e.tooltip&&(e.tooltip.x=i.x+10,e.tooltip.y=i.y+10,e.tooltip.enable()),e.hovered=!0):(e.hovered=!1,e.tooltip&&e.tooltip.disable())}})),this.canvas.addEventListener("click",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(t);n&&e.hovered?(e.reactor&&e.reactor.dispatchEvent("onClick",i),e.selected=!0):(e.clicked=!1,e.selected=!1)}})),this.canvas.addEventListener("mousedown",this,(function(t,n){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(t);n&&(e.reactor&&e.reactor.dispatchEvent("onDown",i),e.clicked=!0,e.moveEventStartX=i.x,e.moveEventStartY=i.y)}})),this.canvas.addEventListener("mouseup",this,(function(t){if(!e.disabled){var n=e.getMousePos(t);e.reactor&&e.reactor.dispatchEvent("onUp",n),e.clicked=!1}})),this.canvas.addEventListener("wheel",this,(function(t){!e.hovered||e.disabled||e.scrollDisabled||(e.offsetScrollX+=t.deltaX,e.offsetScrollY+=t.deltaY,e.reactor&&e.reactor.dispatchEvent("onScroll",t.deltaX,t.deltaY))}));var t=function(t,n){var i=t.changedTouches[0],r=e.getMousePos(i);n?(e.hovered=!0,e.selected=!0):(e.hovered=!1,e.selected=!1),e.hovered&&!e.disabled&&(e.touchEventStartX=r.x,e.touchEventStartY=r.y,e.touchEventStartTimestamp=t.timestamp)};this.canvas.addEventListener("touchstart",this,t),this.canvas.addEventListener("touchend",this,t),this.canvas.addEventListener("touchmove",this,(function(t){!function(t){var n=t.changedTouches[0],i=e.getMousePos(n);if(e.hovered&&!e.disabled&&!e.scrollDisabled){var r=e.touchEventStartX-i.x,s=e.touchEventStartY-i.y;e.offsetScrollX+=r,e.offsetScrollY+=s,e.reactor&&e.reactor.dispatchEvent("onScroll",r,s,i),e.touchEventStartX=i.x,e.touchEventStartY=i.y}}(t),t.preventDefault()})),this.hasInitEvents=!0}}},{key:"draw",value:function(e){this.hidden||(this.initEvents(),this.disabled&&(this.selected=!1,this.clicked=!1,this.hovered=!1,this.tooltip&&(this.tooltip.disabled=!0)))}},{key:"getMousePos",value:function(e){return this.canvas.getMousePos(e)}},{key:"isInside",value:function(e){return e.x>this.x&&e.x<this.x+this.width&&e.y<this.y+this.height&&e.y>this.y}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"setClickAction",value:function(e){this.removeAllClickActions(),this.addClickAction(e)}},{key:"addClickAction",value:function(e){this.reactor.addEventListener("onClick",e)}},{key:"removeClickAction",value:function(e){this.reactor.removeEventListener("onClick",e)}},{key:"removeAllClickActions",value:function(){this.reactor.removeAllEventListener("onClick")}},{key:"setHoverAction",value:function(e){this.removeAllHoverActions(),this.addHoverAction(e)}},{key:"addHoverAction",value:function(e){this.reactor.addEventListener("onHover",e)}},{key:"removeHoverAction",value:function(e){this.reactor.removeEventListener("onHover",e)}},{key:"removeAllHoverActions",value:function(){this.reactor.removeAllEventListener("onHover")}},{key:"setDownAction",value:function(e){this.removeAllDownActions(),this.addDownAction(e)}},{key:"addDownAction",value:function(e){this.reactor.addEventListener("onDown",e)}},{key:"removeDownAction",value:function(e){this.reactor.removeEventListener("onDown",e)}},{key:"removeAllDownActions",value:function(){this.reactor.removeAllEventListener("onDown")}},{key:"setScrollAction",value:function(e){this.removeAllScrollActions(),this.addScrollAction(e)}},{key:"addScrollAction",value:function(e){this.reactor.addEventListener("onScroll",e)}},{key:"removeScrollAction",value:function(e){this.reactor.removeEventListener("onScroll",e)}},{key:"removeAllScrollActions",value:function(){this.reactor.removeAllEventListener("onScroll")}},{key:"setMoveAction",value:function(e){this.removeAllMoveActions(),this.addMoveAction(e)}},{key:"addMoveAction",value:function(e){this.reactor.addEventListener("onMove",e)}},{key:"removeMoveAction",value:function(e){this.reactor.removeEventListener("onMove",e)}},{key:"removeAllMoveActions",value:function(){this.reactor.removeAllEventListener("onMove")}},{key:"setChangeAction",value:function(e){this.removeAllChangeActions(),this.addChangeAction(e)}},{key:"addChangeAction",value:function(e){this.reactor.addEventListener("onChange",e)}},{key:"removeChangeAction",value:function(e){this.reactor.removeEventListener("onChange",e)}},{key:"removeAllChangeActions",value:function(){this.reactor.removeAllEventListener("onChange")}},{key:"setUpAction",value:function(e){this.removeAllUpActions(),this.addUpAction(e)}},{key:"addUpAction",value:function(e){this.reactor.addEventListener("onUp",e)}},{key:"removeUpAction",value:function(e){this.reactor.removeEventListener("onUp",e)}},{key:"removeAllUpActions",value:function(){this.reactor.removeAllEventListener("onUp")}},{key:"getAllParents",value:function(){for(var e=this.parent,t=[];e;)t.push(e),e=e.parent;return t}},{key:"compareTo",value:function(e){var t=this.style&&this.style.foreground,n=e.style&&e.style.foreground,i=this.style&&this.style.zIndex,r=e.style&&e.style.zIndex;return this.parent==e?1:e.parent==this?-1:t&&!n?1:!t&&n?-1:i>r?1:i<r?-1:e.compareToComponent(this)||-this.compareToComponent(e)}},{key:"compareToComponent",value:function(e){return 0}},{key:"compareToMenu",value:function(e){return-1}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return-1}},{key:"compareToScrollbar",value:function(e){return-1}},{key:"disabled",get:function(){return b()(this,O)||this.parent&&this.parent.disabled},set:function(e){A()(this,O,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"height",get:function(){return b()(this,R)},set:function(e){A()(this,R,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"width",get:function(){return b()(this,L)},set:function(e){A()(this,L,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"innerWidth",get:function(){return this.width}},{key:"innerHeight",get:function(){return this.height}},{key:"minWidth",get:function(){return this.width}},{key:"minHeight",get:function(){return this.height}},{key:"x",get:function(){var e=this.parent||this.canvas;if(this.style.alignement&&e){var t=e.width,n=e.style&&e.style.padding||0;if(this.style.alignement==i.Alignement.CENTER)return e.x+t/2-this.width/2;if(this.style.alignement==i.Alignement.RIGHT)return e.x+t-this.width-n;if(this.style.alignement==i.Alignement.LEFT)return e.x+n}else if(e)return e.x+b()(this,_);return b()(this,_)},set:function(e){A()(this,_,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"y",get:function(){var e=this.parent||this.canvas;if(this.style.verticalAlignement&&e){var t=e.height,n=e.style&&e.style.padding||0;if(this.style.verticalAlignement==i.VerticalAlignement.BOTTOM)return e.y+t-this.height-n;if(this.style.verticalAlignement==i.VerticalAlignement.CENTER)return e.y+t/2-this.height/2;if(this.style.verticalAlignement==i.VerticalAlignement.TOP)return e.y+n}else if(e)return e.y+b()(this,x);return b()(this,x)},set:function(e){A()(this,x,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new C({padding:i.Setting.DEFAULT_PADDING,spaceBetweenComponents:i.Setting.DEFAULT_SPACING})}},{key:"style",get:function(){return b()(this,D)||this.defaultStyle},set:function(e){A()(this,D,new C),b()(this,D).setAll(this.defaultStyle.getStyles()),e&&e instanceof C&&b()(this,D).setAll(e.getStyles()),b()(this,D).component=this,this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"hidden",get:function(){return this.style&&this.style.hidden||this.parent&&this.parent.hidden},set:function(e){this.disabled=e,this.style&&this.style.set("hidden",e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"selected",get:function(){return b()(this,P)},set:function(e){A()(this,P,e),this.reactor&&this.reactor.dispatchEvent("onChange",this)}}],[{key:"compareComponents",value:function(e,t){return e.compareTo(t)}}]),e}(),M=n(10),F=n.n(M),N=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a){var l;return s()(this,n),l=t.call(this,e,i,r,o,a),E()(c()(l),"selectable",!1),l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),this.drawBackground(t),this.drawBorder(t),t.restore()}}},{key:"drawBackground",value:function(e){var t=this.backgroundColor;t&&(e.save(),e.fillStyle=t,e.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),e.restore())}},{key:"drawBorder",value:function(e){var t=this.borderColor;t&&this.style.borderSize>0&&(e.save(),e.strokeStyle=t,e.lineWidth=this.style.borderSize,e.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width-this.style.borderSize/2),Math.round(this.height-this.style.borderSize/2)),e.restore())}},{key:"backgroundColor",get:function(){return this.hovered&&this.clicked&&null!=this.style.backgroundColorDown?this.style.backgroundColorDown:this.hovered&&null!=this.style.backgroundColorHover?this.style.backgroundColorHover:this.style.backgroundColor}},{key:"borderColor",get:function(){return this.clicked&&this.hovered&&null!=this.style.borderColorDown?this.style.borderColorDown:!this.clicked&&this.hovered&&null!=this.style.borderColorHover?this.style.borderColorHover:this.selectable&&this.selected&&null!=this.style.borderColorSelected?this.style.borderColorSelected:this.style.borderColor}}]),n}(B),U=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o){var a;return s()(this,n),a=t.call(this,null,null,null,null,r),E()(c()(a),"selectable",!0),a.parent=o,a.size=e||i.Setting.SCROLLBAR_DEFAULT_SIZE,a}return a()(n,[{key:"draw",value:function(e){this.hidden||(this.clicked&&(this.hovered=!0),h()(y()(n.prototype),"draw",this).call(this,e))}},{key:"compareToComponent",value:function(e){return e.compareToScrollbar(this)}},{key:"compareToScrollbar",value:function(e){return 0}},{key:"maxWidthParent",get:function(){return this.parent?this.parent.maxWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"maxHeightParent",get:function(){return this.parent?this.parent.maxHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"innerWidthParent",get:function(){return this.parent?this.parent.innerWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"innerHeightParent",get:function(){return this.parent?this.parent.innerHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"contentRatioX",get:function(){return this.parent?this.maxWidthParent/this.innerWidthParent:0}},{key:"contentRatioY",get:function(){return this.parent?this.maxHeightParent/this.innerHeightParent:0}},{key:"width",get:function(){return this.maxWidthParent*this.contentRatioX}},{key:"height",get:function(){return this.maxHeightParent*this.contentRatioY}},{key:"windowScrollSizeX",get:function(){return this.innerWidthParent-this.maxWidthParent}},{key:"windowScrollSizeY",get:function(){return this.innerHeightParent-this.maxHeightParent}},{key:"percentScrollbarX",get:function(){return this.parent?this.parent.offsetScrollX/this.windowScrollSizeX:0}},{key:"percentScrollbarY",get:function(){return this.parent?this.parent.offsetScrollY/this.windowScrollSizeY:0}},{key:"scrollAreaSizeX",get:function(){return this.maxWidthParent-this.width}},{key:"scrollAreaSizeY",get:function(){return this.maxHeightParent-this.height}},{key:"x",get:function(){return this.parent?Math.abs(this.parent.x)+this.scrollAreaSizeX*this.percentScrollbarX:0}},{key:"y",get:function(){return this.parent?Math.abs(this.parent.y)+this.scrollAreaSizeY*this.percentScrollbarY:0}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.SCROLLBAR_DEFAULT_BACKGROUND,backgroundColorHover:i.Setting.SCROLLBAR_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:i.Setting.SCROLLBAR_DEFAULT_CLICK_BACKGROUND,borderSize:0})}}]),n}(N),H=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r){var o;return s()(this,n),o=t.call(this,e,i,r),E()(c()(o),"selectable",!0),o.addMoveAction((function(e){o.parent&&(o.parent.offsetScrollX-=e,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",-e,0))})),o}return a()(n,[{key:"draw",value:function(e){this.scrollAreaSizeX>0&&h()(y()(n.prototype),"draw",this).call(this,e)}},{key:"height",get:function(){return this.size}},{key:"y",get:function(){return this.parent?this.parent.y+this.parent.height-this.size:null}}]),n}(U),G=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r){var o;return s()(this,n),o=t.call(this,e,i,r),E()(c()(o),"selectable",!0),o.addMoveAction((function(e,t){o.parent&&(o.parent.offsetScrollY-=t,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",0,-t))})),o}return a()(n,[{key:"draw",value:function(e){this.scrollAreaSizeY>0&&h()(y()(n.prototype),"draw",this).call(this,e)}},{key:"width",get:function(){return this.size}},{key:"x",get:function(){return this.parent?this.parent.x+this.parent.width-this.size:0}}]),n}(U),z={preRenderedFont:{},lastKey:-1,preRenderFont:function(e,t,n,i){e.push("?"),e.push(" "),e.push("A");for(var r=0;r<e.length;r++){var s=document.createElement("canvas"),o=s.getContext("2d");o.font=t+"px "+i;var a=o.measureText(e[r]).width;s.width=a,s.height=t+t/6,o.font=t+"px "+i,o.fillStyle=n,o.textBaseline="top",o.fillText(e[r],0,0),this.preRenderedFont[e[r]]=s}},drawImage:function(e,t,n,i,r,s,o,a,l,c,u,h){this.drawImageWrapper(e,t,n,i,r,s,o,a,l,c,u,h)},drawImageData:function(e,t,n,i,r,s,o,a,l,c,u,h){this.drawImageWrapper(e,t,n,i,r,s,o,a,l,c,u,h)},drawImageWrapper:function(e,t,n,i,r,s,o,a,l,c,u,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),r=null==r||isNaN(r)?null:Math.round(r),s=null==s||isNaN(s)?null:Math.round(s),o=null==o||isNaN(o)?null:Math.round(o),a=null==a||isNaN(a)?null:Math.round(a),l=null==l||isNaN(l)?null:Math.round(l),c=null==c||isNaN(c)?null:Math.round(c),u=null!=u&&u,null!=(h=null==h||isNaN(h)?null:h)&&(e.save(),e.translate(n+r/2,i+s/2),e.rotate(h*Math.PI/180),n=-r/2,i=-s/2),u&&e.clearRect(n,i,r,s),null!=e&&null!=t&&(null!=o&&null!=a&&null!=l&&null!=c?e.drawImage(t,o,a,l,c,n,i,r,s):e.drawImage(t,n,i,r,s)),null!=h&&e.restore()},drawText:function(e,t,n,r,s,o,a,l,c,u,h,d,f,g){if(e){e.save(),Array.isArray(n)||(e.fillStyle=n,e.strokeStyle=n),e.font=(h?"bold ":"")+r+"px "+s,e.textBaseline=f||"bottom",e.filter="none",u&&(t=this.wrapTextLines(e,t).text);var p=t.split("\n"),m=0,y=Math.round(l),v=Math.round(c)+r,E=0;c||(a==i.VerticalAlignement.CENTER?v+=Math.round((g&&g.height?g.height:e.canvas.height)/2-r*p.length/2):a==i.VerticalAlignement.BOTTOM&&(v+=Math.round((g&&g.height?g.height:e.canvas.height)-r*p.length/2-r/5)));for(var k=0;k<p.length;k++){var b=p[k],S=e.measureText(b).width;if(Array.isArray(n)){var A=k;A>n.length-1&&(A=n.length-1),e.fillStyle=n[A],e.strokeStyle=n[A]}o==i.Alignement.CENTER?y=Math.round(g&&g.x?g.x:0)+Math.round((g&&g.width?g.width:e.canvas.width)/2-e.measureText(b).width/2):o==i.Alignement.RIGHT&&(y=Math.round(g&&g.x?g.x:0)+Math.round((g&&g.width?g.width:e.canvas.width)-e.measureText(b).width-(g&&g.spaceBetweenComponents?g.spaceBetweenComponents:i.Setting.DEFAULT_SPACING))),e.fillText(b,y,v),d&&(e.lineWidth=1,e.beginPath(),e.moveTo(y,v-2),e.lineTo(Math.round(y+S),v-2),e.stroke()),S>m&&(m=S),0==k&&(E=v),v+=r}return e.restore(),{x:y,y:E,height:r*p.length,width:m}}},wrapText:function(e,t){if(e.length>t){for(var n=t;n>0&&" "!=e[n];n--);if(n>0){var i=e.substring(0,n),r=e.substring(n+1);return i+"\n"+this.wrapText(r,t)}}return e},wrapTextLines:function(e,t,n,i,r,s){if(e&&t){e.save(),e.font=Math.round(i)+"px "+r,e.imageSmoothingEnabled=!1;for(var o=t.split("\n"),a="",l=n||e.measureText("A").width,c=Math.round(e.canvas.width/l),u=0,h=0,d=0;d<o.length;d++){var f=s?o[d]:this.wrapText(o[d],c);a+=f,d<o.length-1&&(a+="\n");for(var g=0;g<f.split("\n").length;g++){var p=e.measureText(f.split("\n")[g]).width;u+=i,p>h&&(h=p)}}return e.restore(),{text:a,height:u,width:h,carWidth:l}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(e,t,n,r,s,o,a,l,c){e.save(),e.lineCap=c||i.Setting.ARROW_DEFAULT_LINE_CAP,e.lineWidth=o||i.Setting.ARROW_DEFAULT_LINE_SIZE,e.strokeStyle=l||i.Setting.ARROW_DEFAULT_COLOR,e.filter="",e.beginPath();var u=a||i.Setting.ARROW_DEFAULT_HEAD_SIZE,h=r-t,d=s-n,f=Math.atan2(d,h);e.moveTo(t,n),e.lineTo(r,s),e.moveTo(r,s),e.lineTo(r-u*Math.cos(f-Math.PI/6),s-u*Math.sin(f-Math.PI/6)),e.moveTo(r,s),e.lineTo(r-u*Math.cos(f+Math.PI/6),s-u*Math.sin(f+Math.PI/6)),e.stroke(),e.restore()},drawCross:function(e,t,n,r,s,o,a,l){e.save(),e.lineCap=l||i.Setting.CROSS_DEFAULT_LINE_CAP,e.lineWidth=o||i.Setting.CROSS_DEFAULT_LINE_SIZE,e.strokeStyle=a||i.Setting.CROSS_DEFAULT_COLOR,e.filter="",e.beginPath(),e.moveTo(t,n),e.lineTo(t+r,n+s),e.moveTo(t+r,n),e.lineTo(t,n+s),e.stroke(),e.restore()},drawTriangle:function(e,t,n,r,s,o,a,l){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i.Setting.TRIANGLE_DEFAULT_FILL,u=arguments.length>9?arguments[9]:void 0;e.save(),e.lineCap=l||i.Setting.TRIANGLE_DEFAULT_LINE_CAP,e.lineWidth=o||i.Setting.TRIANGLE_DEFAULT_LINE_SIZE,e.filter="",c?(e.fillStyle=u||i.Setting.TRIANGLE_DEFAULT_FILL_COLOR,e.strokeStyle=a||i.Setting.TRIANGLE_DEFAULT_COLOR):e.strokeStyle=a||i.Setting.TRIANGLE_DEFAULT_COLOR,e.beginPath(),e.moveTo(t,n),e.lineTo(t+r,n),e.lineTo(t+r/2,n+s),e.lineTo(t,n),c?(e.fill(),e.stroke()):e.stroke(),e.restore()},drawCircle:function(e,t,n,r,s,o,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:i.Setting.CIRCLE_DEFAULT_FILL,c=arguments.length>8?arguments[8]:void 0;e.save(),e.lineCap=a||i.Setting.CIRCLE_DEFAULT_LINE_CAP,e.lineWidth=s||i.Setting.CIRCLE_DEFAULT_LINE_SIZE,e.filter="",l?(e.fillStyle=c||i.Setting.CIRCLE_DEFAULT_FILL_COLOR,e.strokeStyle=o||i.Setting.CIRCLE_DEFAULT_COLOR):e.strokeStyle=o||i.Setting.CIRCLE_DEFAULT_COLOR,e.beginPath(),e.arc(t+r/2,n+r/2,r/2,0,2*Math.PI,!1),l?(e.fill(),e.stroke()):e.stroke(),e.restore()},clear:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},isFilterHueAvailable:function(){var e=document.createElement("canvas");e.width=5,e.height=5;var t=e.getContext("2d");t.save(),t.fillStyle="#FF0000",t.filter="hue-rotate(90deg)",t.fillRect(0,0,5,5);var n=t.getImageData(0,0,1,1).data;return t.restore(),255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(e,t){e.save(),e.filter="blur("+t+"px)",this.drawImageData(e,e.canvas,0,0,e.canvas.width,e.canvas.height),e.restore()},getFontSize:function(e){return Math.floor(parseInt(e.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(e,t,n){if(document.fullscreenElement)document.fullscreenElement==e?(e.width=window.innerWidth,e.height=window.innerHeight):(e.width=t,e.height=n);else if(t>=.85*document.documentElement.clientWidth){var i=t/n;e.width=.85*document.documentElement.clientWidth,e.height=e.width/i}else e.width=t,e.height=n},enableAutoResizeCanvas:function(e,t,n){var i=this;e&&"true"!=e.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(e,t,n),window.addEventListener("resize",(function(){e.setAttribute("autoresize-canvas-event","true"),i.autoResizeCanvas(e,t,n)})))},autoResizeCanvasFullscreen:function(e,t){document.fullscreenElement==(t||e)&&(e.width=window.innerWidth,e.height=window.innerHeight,t&&(t.width=window.innerWidth,t.height=window.innerHeight))},enableAutoResizeCanvasFullscreen:function(e,t){var n=this;e&&"true"!=e.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(e,t),window.addEventListener("resize",(function(){e.setAttribute("autoresizefullscreen-canvas-event","true"),n.autoResizeCanvasFullscreen(e,t)})))},autoResizeCanvasFullpage:function(e,t){e&&"true"==e.getAttribute("fullpage-canvas-enable")&&(e.width=window.innerWidth,e.height=window.innerHeight,t&&(t.width=window.innerWidth,t.height=window.innerHeight,t.style.margin=0,t.style.padding=0),document.body.style.margin=0,document.body.style.padding=0)},enableAutoResizeCanvasFullpage:function(e,t){var n=this;e&&"true"!=e.getAttribute("autoresizefullpage-canvas-event")&&(this.autoResizeCanvasFullpage(e,t),window.addEventListener("resize",(function(){e.setAttribute("autoresizefullpage-canvas-event","true"),n.autoResizeCanvasFullpage(e,t)})))},toggleFullscreen:function(e,t){if(e){var n=e.width,i=e.height;if(t&&(t.width=n,t.height=i),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(t||e).requestFullscreen?(t||e).requestFullscreen():(t||e).mozRequestFullScreen?(t||e).mozRequestFullScreen():(t||e).webkitRequestFullscreen?(t||e).webkitRequestFullscreen():(t||e).msRequestFullscreen?(t||e).msRequestFullscreen():(t||e).oRequestFullscreen&&(t||e).oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(e,t),"true"!=e.getAttribute("fullscreenchange-canvas-event")){e.setAttribute("fullscreenchange-canvas-event","true");var r=function(){document.fullscreenElement!=(t||e)&&(e.width=n,e.height=i,t&&(t.width=n,t.height=i))};void 0!==document.onfullscreenchange?document.onfullscreenchange=r:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=r:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=r:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=r:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=r)}}},toggleFullpage:function(e,t){if(e){var n=e.width,i=e.height;t&&(t.width=n,t.height=i),e.getAttribute("fullpage-canvas-enable")&&"false"!=e.getAttribute("fullpage-canvas-enable")?e.setAttribute("fullpage-canvas-enable","false"):e.setAttribute("fullpage-canvas-enable","true"),this.enableAutoResizeCanvasFullpage(e,t)}},getMousePos:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}},V=new WeakMap,Y=new WeakMap,W=new WeakMap,j=new WeakMap,K=new WeakMap,q=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a,l){var u,h;s()(this,n),h=t.call(this,e,r,null,null,l),E()(c()(h),"selectable",!1),V.set(c()(h),{writable:!0,value:[]}),Y.set(c()(h),{writable:!0,value:0}),W.set(c()(h),{writable:!0,value:0}),j.set(c()(h),{writable:!0,value:0}),K.set(c()(h),{writable:!0,value:0}),E()(c()(h),"eventChangeCallback",(function(){return h.reactor.dispatchEvent("onChange",c()(h))}));for(var d=arguments.length,f=new Array(d>5?d-5:0),g=5;g<d;g++)f[g-5]=arguments[g];return(u=h).addAll.apply(u,f),h.canvasTmp=document.createElement("canvas"),A()(c()(h),Y,o),A()(c()(h),W,a),h.scrollbarHorizontal=new H(null,null,c()(h)),h.scrollbarVertical=new G(null,null,c()(h)),h.addScrollAction((function(e,t){return h.controlScrolling(e,t)})),i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||h.addChangeAction((function(e){e==h.parent&&h.components.forEach((function(e){return e&&e.reactor.dispatchEvent("onChange",c()(h))}))})),h}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){var i=e.canvas,r=i.getContext("2d");r.save(),this.isCutting&&(this.canvasTmp.width=i.width,this.canvasTmp.height=i.height,z.clear(this.canvasTmp.getContext("2d"))),this.components.forEach((function(e){t.canvas&&(e.canvas=t.canvas)})),this.controlScrolling(0,0),h()(y()(n.prototype),"draw",this).call(this,e),r.restore()}}},{key:"drawVerticalScrollBar",value:function(e){this.scrollbarVertical&&(this.scrollbarVertical.canvas=this.canvas,this.scrollbarVertical.draw(e))}},{key:"drawHorizontalScrollBar",value:function(e){this.scrollbarHorizontal&&(this.scrollbarHorizontal.canvas=this.canvas,this.scrollbarHorizontal.draw(e))}},{key:"drawScrollbars",value:function(e){this.style.scrollXDisabled||this.drawHorizontalScrollBar(e),this.style.scrollYDisabled||this.drawVerticalScrollBar(e)}},{key:"set",value:function(){this.clear(),this.addAll.apply(this,arguments),this.enable()}},{key:"add",value:function(e){b()(this,V).push(e),e.parent=this,this.canvas&&(e.canvas=this.canvas),e.addChangeAction(this.eventChangeCallback),this.reactor.dispatchEvent("onChange",this)}},{key:"addAll",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){return e.add(t)}))}},{key:"remove",value:function(e){-1!=b()(this,V).indexOf(e)&&e.removeChangeAction(this.eventChangeCallback),A()(this,V,b()(this,V).filter((function(t){return e!=t}))),this.reactor.dispatchEvent("onChange",this)}},{key:"clear",value:function(){var e=this;b()(this,V).forEach((function(t){return e.remove(t)})),this.reactor.dispatchEvent("onChange",this)}},{key:"getComponentsTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n={component:t,childs:[]};return t.allComponents&&t.allComponents.forEach((function(t){return n.childs.push(e.getComponentsTree(t))})),n}},{key:"disable",value:function(){h()(y()(n.prototype),"disable",this).call(this),b()(this,V).forEach((function(e){return e&&e.disable&&e.disable()})),this.reactor.dispatchEvent("onChange",this)}},{key:"enable",value:function(){h()(y()(n.prototype),"enable",this).call(this),b()(this,V).forEach((function(e){return e&&e.enable&&e.enable()})),this.reactor.dispatchEvent("onChange",this)}},{key:"updateInnerHeight",value:function(){}},{key:"updateInnerWidth",value:function(){}},{key:"getComponentId",value:function(e){var t=null;return b()(this,V).forEach((function(n,i){n==e&&(t=i)})),t}},{key:"controlScrolling",value:function(e,t){if(this.style.scrollYDisabled)this.offsetScrollY-=t;else if(this.scrollAreaSizeY<=0)this.offsetScrollY=0;else{var n=this.offsetScrollY/this.scrollAreaSizeY;n<=0&&t<=0?this.offsetScrollY=Math.min(0,this.y):n>1&&t>=0&&(this.offsetScrollY=this.scrollAreaSizeY)}if(this.style.scrollXDisabled)this.offsetScrollX-=e;else if(this.scrollAreaSizeX<=0)this.offsetScrollX=0;else{var i=this.offsetScrollX/this.scrollAreaSizeX;i<=0&&e<=0?this.offsetScrollX=Math.min(0,this.x):i>1&&e>=0&&(this.offsetScrollX=this.scrollAreaSizeX)}}},{key:"isComponentVisible",value:function(e){if(i.Setting.DISABLE_OPTIMIZATIONS)return!0;if(e instanceof B&&!e.hidden){var t=this.width,n=this.height,r=e.width,s=e.height,o=this.canvas&&this.canvas.width||t,a=this.canvas&&this.canvas.height||n;if(e.x+r>=this.x&&e.x<=this.x+t&&e.y+s>=this.y&&e.y<=this.y+n&&e.x+r>=0&&e.x<=o&&e.y+s>=0&&e.y<=a)return!0}return!1}},{key:"components",get:function(){var e=[];return b()(this,V).forEach((function(t){return e.push(t)})),e}},{key:"allComponents",get:function(){var e=this.components;return e.push(this.scrollbarHorizontal),e.push(this.scrollbarVertical),e}},{key:"width",get:function(){var e=this.parent&&this.parent.width,t=this.maxWidth?Math.min(this.maxWidth,e):null;return this.minWidth?Math.max(this.minWidth,t||e):e}},{key:"height",get:function(){var e=this.parent&&this.parent.height,t=this.maxWidth?Math.min(this.maxHeight,e):null;return this.minHeight?Math.max(this.minHeight,t||e):e}},{key:"maxWidth",get:function(){return b()(this,Y)},set:function(e){A()(this,Y,e),this.reactor.dispatchEvent("onChange",this)}},{key:"maxHeight",get:function(){return b()(this,W)},set:function(e){A()(this,W,e),this.reactor.dispatchEvent("onChange",this)}},{key:"minWidth",get:function(){return b()(this,j)},set:function(e){A()(this,j,e),this.reactor.dispatchEvent("onChange",this)}},{key:"minHeight",get:function(){return b()(this,K)},set:function(e){A()(this,K,e),this.reactor.dispatchEvent("onChange",this)}},{key:"canvas",set:function(e){F()(y()(n.prototype),"canvas",e,this,!0),b()(this,V).forEach((function(t){t.canvas=e}))},get:function(){return h()(y()(n.prototype),"canvas",this)}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.width}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.height}},{key:"isCutting",get:function(){return!i.Setting.DISABLE_CONTAINERS_CUTTING&&(this.maxWidth&&this.innerWidth>this.maxWidth||this.maxHeight&&this.innerHeight>this.maxHeight)&&null!=this.canvasTmp}},{key:"defaultStyle",get:function(){return new C({padding:0,spaceBetweenComponents:i.Setting.DEFAULT_SPACING})}}],[{key:"sortComponentsTree",value:function(e,t){return e.component.compareTo(t.component)}}]),n}(N),X=new WeakMap,J=new WeakMap,Z=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a,l){var u;s()(this,n);for(var h=arguments.length,d=new Array(h>5?h-5:0),f=5;f<h;f++)d[f-5]=arguments[f];return u=t.call.apply(t,[this,e,r,o,a,l].concat(d)),E()(c()(u),"selectable",!1),X.set(c()(u),{writable:!0,value:0}),J.set(c()(u),{writable:!0,value:0}),i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(u.updateInnerWidth(),u.updateInnerHeight(),u.addChangeAction((function(){u.updateInnerWidth(),u.updateInnerHeight()}))),u}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var i=e.canvas.getContext("2d");i.save();var r=i;if(this.isCutting&&(r=this.canvasTmp.getContext("2d")),null!=h()(y()(n.prototype),"components",this)){var s=this.style.padding;h()(y()(n.prototype),"components",this).forEach((function(e){s=t.drawComponent(e,s,r)}))}this.isCutting&&z.drawImageData(i,this.canvasTmp,this.x,this.y,this.width,this.height,this.x,this.y,this.width,this.height),h()(y()(n.prototype),"drawScrollbars",this).call(this,i),i.restore()}}},{key:"drawComponent",value:function(e,t,n){return e instanceof B&&(e.x=t-this.offsetScrollX,e.y=this.style.padding-this.offsetScrollY,this.isComponentVisible(e)?(e.enable(),e.draw(n)):e.disable(),t+=e.width+this.style.spaceBetweenComponents),t}},{key:"updateInnerHeight",value:function(){var e=0;h()(y()(n.prototype),"components",this).forEach((function(t){t.height>e&&!t.hidden&&(e=t.height)})),A()(this,X,e+this.style.padding)}},{key:"updateInnerWidth",value:function(){var e=0;h()(y()(n.prototype),"components",this).forEach((function(t){t.hidden||(e+=t.width)})),A()(this,J,e+this.style.spaceBetweenComponents*(h()(y()(n.prototype),"components",this).length-1)+this.style.padding)}},{key:"innerHeight",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),b()(this,X)}},{key:"innerWidth",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),b()(this,J)}},{key:"width",get:function(){var e=this.innerWidth||this.parent&&this.parent.width,t=this.maxWidth?Math.min(this.maxWidth,e):null;return this.minWidth?Math.max(this.minWidth,t||e):t||e}},{key:"height",get:function(){var e=this.innerHeight||this.parent&&this.parent.height,t=this.maxHeight?Math.min(this.maxHeight,e):null;return this.minHeight?Math.max(this.minHeight,t||e):t||e}},{key:"defaultStyle",get:function(){return h()(y()(n.prototype),"defaultStyle",this)}}]),n}(q),Q=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a){var l;s()(this,n);for(var u=arguments.length,h=new Array(u>5?u-5:0),d=5;d<u;d++)h[d-5]=arguments[d];return l=t.call.apply(t,[this,e,i,r,o,a].concat(h)),E()(c()(l),"selectable",!0),l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),this.drawComponents(t),t.restore()}}},{key:"drawComponents",value:function(e){h()(y()(n.prototype),"draw",this).call(this,e)}},{key:"height",get:function(){return(this.maxHeight||h()(y()(n.prototype),"height",this))+this.style.padding}},{key:"width",get:function(){return(this.maxWidth||h()(y()(n.prototype),"width",this))+this.style.padding}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:i.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:i.Setting.BUTTON_DEFAULT_CLICK_BACKGROUND,scrollXDisabled:!0,scrollYDisabled:!0})}}]),n}(Z),$=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a,l,u){var h;return s()(this,n),h=t.call(this,i,r,o,a,l),E()(c()(h),"selectable",!1),h.image,h.imgSrc,h.imageLoader=u,e instanceof Image?(h.image=e,h.imgSrc=e.src):h.imgSrc=e,h}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image&&this.drawImage(t),t.restore()}}},{key:"drawImage",value:function(e){z.drawImage(e,this.image,Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"loadImage",value:function(e){this.image=e.get(this.imgSrc)}},{key:"sizes",get:function(){var e=h()(y()(n.prototype),"width",this),t=h()(y()(n.prototype),"height",this);if(this.imageLoader&&this.loadImage(this.imageLoader),this.image&&(this.image.width>h()(y()(n.prototype),"width",this)||this.image.height>h()(y()(n.prototype),"height",this))){var i=this.image.width/this.image.height;e=Math.floor(h()(y()(n.prototype),"width",this)/1.25),t=Math.floor(e/i)}return{width:e,height:t}}},{key:"height",get:function(){return this.sizes.height},set:function(e){F()(y()(n.prototype),"height",e,this,!0)}},{key:"width",get:function(){return this.sizes.width},set:function(e){F()(y()(n.prototype),"width",e,this,!0)}}]),n}(B),ee=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a,l,c,u,h,d,f){var g;s()(this,n);var p=new C({alignement:a,verticalAlignement:l,backgroundColor:h||i.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:d||i.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND});return(g=t.call(this,r,o,c,u,p)).image=new $(e,r,o,c,u,new C({alignement:"center",verticalAlignement:"center"}),f),g.add(g.image),console&&console.warn&&console.warn(i.String.NOTICE_MESSAGE+" "+i.String.BUTTON_IMAGE_DEPRECATED),g}return a()(n,[{key:"loadImage",value:function(e){this.components[0]instanceof $&&this.components[0].loadImage(e)}},{key:"minWidth",set:function(e){this.image.width=e,F()(y()(n.prototype),"minWidth",e,this,!0)},get:function(){return h()(y()(n.prototype),"minWidth",this)}},{key:"minHeight",set:function(e){this.image.height=e,F()(y()(n.prototype),"minHeight",e,this,!0)},get:function(){return h()(y()(n.prototype),"minHeight",this)}},{key:"maxWidth",set:function(e){this.image.width=e,F()(y()(n.prototype),"maxWidth",e,this,!0)},get:function(){return h()(y()(n.prototype),"maxWidth",this)}},{key:"maxHeight",set:function(e){this.image.height=e,F()(y()(n.prototype),"maxHeight",e,this,!0)},get:function(){return h()(y()(n.prototype),"maxHeight",this)}},{key:"width",set:function(e){this.minWidth=e,this.maxWidth=e},get:function(){return h()(y()(n.prototype),"width",this)}},{key:"height",set:function(e){this.minHeight=e,this.maxHeight=e},get:function(){return h()(y()(n.prototype),"height",this)}}]),n}(Q),te=function(){function e(){s()(this,e),this.images={},this.imagesResized={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}return a()(e,[{key:"load",value:function(e,t){var n=this;if(this.firstImage&&(this.nbImagesToLoad=e.length,this.firstImage=!1),!(e.length>0))return t();this.loadImage(e[0],(function(i){if(1!=i)return n.hasError=!0,t();e.shift(),n.load(e,t)}))}},{key:"loadImage",value:function(e,t){var n=this;this.triedLoading++;var i=new Image;i.src=e,i.onload=function(){return null==n.images?t(!1):(n.images[e]=i,n.triedLoading=0,t(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[e]=i),n.triedLoading=0,t(!1);setTimeout((function(){n.loadImage(e,t)}),250)}}},{key:"get",value:function(e,t,n){if(null!=this.images&&this.images.hasOwnProperty(e)){var i=this.images[e];if(!t&&!n||i.width==t&&i.height==n)return i;var r=Math.round(t),s=Math.round(n),o=e+"@"+r+"-"+s;if(!this.imagesResized.hasOwnProperty(o)){var a=document.createElement("canvas"),l=a.getContext("2d");a.width=r,a.height=s,z.drawImage(l,i,0,0,r,s,0,0,i.width,i.height),this.imagesResized[o]=a}return this.imagesResized[o]}return null}},{key:"clear",value:function(){this.images=null}}]),e}(),ne=n(15),ie=n.n(ne),re=n(11),se=n.n(re),oe=new WeakMap,ae=new WeakMap,le=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a,l){var u;s()(this,n);for(var h=arguments.length,d=new Array(h>5?h-5:0),f=5;f<h;f++)d[f-5]=arguments[f];return u=t.call.apply(t,[this,e,r,o,a,l].concat(d)),E()(c()(u),"selectable",!1),oe.set(c()(u),{writable:!0,value:0}),ae.set(c()(u),{writable:!0,value:0}),i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(u.updateInnerWidth(),u.updateInnerHeight(),u.addChangeAction((function(){u.updateInnerWidth(),u.updateInnerHeight()}))),u}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var i=e.canvas.getContext("2d");i.save();var r=i;if(this.isCutting&&(r=this.canvasTmp.getContext("2d")),null!=h()(y()(n.prototype),"components",this)){var s=this.style.padding;h()(y()(n.prototype),"components",this).forEach((function(e){s=t.drawComponent(e,s,r)}))}this.isCutting&&z.drawImageData(i,this.canvasTmp,this.x,this.y,this.width,this.height,this.x,this.y,this.width,this.height),h()(y()(n.prototype),"drawScrollbars",this).call(this,i),i.restore()}}},{key:"drawComponent",value:function(e,t,n){return e instanceof B&&(e.x=this.style.padding-this.offsetScrollX,e.y=t-this.offsetScrollY,this.isComponentVisible(e)?(e.enable(),e.draw(n)):e.disable(),t+=e.height+this.style.spaceBetweenComponents),t}},{key:"updateInnerHeight",value:function(){var e=0;h()(y()(n.prototype),"components",this).forEach((function(t){t.hidden||(e+=t.height)})),A()(this,oe,e+this.style.spaceBetweenComponents*(h()(y()(n.prototype),"components",this).length-1)+this.style.padding)}},{key:"updateInnerWidth",value:function(){var e=0;h()(y()(n.prototype),"components",this).forEach((function(t){t.width>e&&!t.hidden&&(e=t.width)})),A()(this,ae,e+this.style.padding)}},{key:"innerHeight",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),b()(this,oe)}},{key:"innerWidth",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),b()(this,ae)}},{key:"width",get:function(){var e=this.innerWidth||this.parent&&this.parent.width,t=this.maxWidth?Math.min(this.maxWidth,e):null;return this.minWidth?Math.max(this.minWidth,t||e):t||e}},{key:"height",get:function(){var e=this.innerHeight||this.parent&&this.parent.height,t=this.maxHeight?Math.min(this.maxHeight,e):null;return this.minHeight?Math.max(this.minHeight,t||e):t||e}},{key:"defaultStyle",get:function(){return h()(y()(n.prototype),"defaultStyle",this)}}]),n}(q),ce=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a){var l;return s()(this,n),l=t.call(this,e,i,r,o,a),E()(c()(l),"selectable",!1),l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");z.drawCross(t,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return h()(y()(n.prototype),"width",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"width",e,this,!0),this.reactor.dispatchEvent("onChange",this)}},{key:"height",get:function(){return h()(y()(n.prototype),"height",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"height",e,this,!0),this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new C({lineWidth:i.Setting.CROSS_DEFAULT_LINE_SIZE,color:i.Setting.CROSS_DEFAULT_COLOR,lineCap:i.Setting.CROSS_DEFAULT_LINE_CAP})}}]),n}(B),ue=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o){var a;s()(this,n);for(var l=arguments.length,u=new Array(l>3?l-3:0),h=3;h<l;h++)u[h-3]=arguments[h];return a=t.call.apply(t,[this,0,0,null,null,e].concat(u)),E()(c()(a),"selectable",!1),a.delayBeforeClosing=null==r?5:r,a.timeLastFrame=0,a.animationTime=0,a.closed=!0,a.closing=!1,a.easingFunction=o,a.closeButton=new Q(null,null,null,null,new C({alignement:i.Alignement.RIGHT,verticalAlignement:i.VerticalAlignement.TOP,padding:10}),new ce(null,null,10,10)),a.add(a.closeButton),a}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){this.closeButton.canvas=this.canvas;var n=e.canvas.getContext("2d");n.save(),this.init||(this.timeLastFrame=performance.now()),null!=this.closeButton&&this.closeButton.setClickAction((function(){t.close()}));var i=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.closing?this.style.disableAnimation?this.animationTime=-1:this.animationTime-=i:this.animationTime+=i,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed?this.disableCloseButton():(this.drawComponents(n),null!=this.closeButton&&(this.closeButton.y=this.y+this.style.padding/2,this.closeButton.draw(n)),this.enableCloseButton()),n.restore(),this.init=!0}}},{key:"drawComponents",value:function(e){h()(y()(n.prototype),"draw",this).call(this,e)}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.style.animationDuration)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof Q&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof Q&&this.closeButton.enable()}},{key:"copy",value:function(){return ie()(n,[this.style.copy(),this.delayBeforeClosing,this.easingFunction].concat(se()(this.components)))}},{key:"compareToComponent",value:function(e){return e.compareToNotification(this)}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return 0}},{key:"compareToMenu",value:function(e){return-1}},{key:"offsetY",get:function(){var e=1;return this.style.disableAnimation||(e=this.animationTime/this.style.animationDuration,this.easingFunction&&(e=this.easingFunction(e))),e}},{key:"y",get:function(){var e=this.offsetY;return this.style.verticalAlignement==i.VerticalAlignement.TOP?this.height*(e<=1?e:1)-this.height:this.canvas.scene.height-this.height*(e<=1?e:1)},set:function(e){F()(y()(n.prototype),"y",e,this,!0)}},{key:"width",get:function(){return this.canvas&&this.canvas.scene?this.canvas.scene.width:null}},{key:"height",get:function(){return h()(y()(n.prototype),"height",this)-(this.closeButton?this.closeButton.height:0)}},{key:"defaultStyle",get:function(){return new C({alignement:i.Alignement.CENTER,backgroundColor:i.Setting.NOTIFICATION_DEFAULT_BACKGROUND,animationDuration:i.Setting.NOTIFICATION_DEFAULT_ANIMATION_DURATION})}},{key:"hidden",get:function(){return h()(y()(n.prototype),"hidden",this)||this.closed},set:function(e){F()(y()(n.prototype),"hidden",e,this,!0),e?this.forceClose():this.open()}}]),n}(le),he=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e){var i;s()(this,n);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return i=t.call.apply(t,[this,0,0,null,null,e].concat(o)),E()(c()(i),"selectable",!1),i.lastKey=null==i.lastKey?-1:i.lastKey,i.selectedComponent=null==i.selectedComponent?0:i.selectedComponent,i.disable(),i}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){var n=e.canvas.getContext("2d");this.style.blurBackground&&this.drawBlur(n),n.save(),this.drawComponents(n),this.init||(document.addEventListener("keydown",(function(e){t.disabled||(t.lastKey=e.keyCode,t.lastKey!=i.Key.UP&&t.lastKey!=i.Key.BOTTOM||e.preventDefault())})),this.init=!0);var r=!1;null!=this.components&&(this.lastKey==i.Key.UP?(this.select(this.selectedComponent-1),r=!0):this.lastKey==i.Key.BOTTOM?(this.select(this.selectedComponent+1),r=!0):this.lastKey==i.Key.ECHAP?(this.disable(),r=!0):this.components.forEach((function(e,n){e.selected&&t.select(n)})),this.components.forEach((function(e,n){if(e instanceof B){if(r)if(t.selectedComponent==n){if(e.selectable&&(e.selected=!0),!t.isComponentVisible(e)){var s=e.height,o=t.maxHeight-t.offsetScrollY-(e.y+s);t.offsetScrollY=-o,t.controlScrolling(null,-o)}}else e.selected=!1;if(t.selectedComponent==n&&t.lastKey==i.Key.ENTER&&e.reactor&&!e.disabled)return t.lastKey=-1,t.selectedComponent=0,void e.reactor.dispatchEvent("onClick")}}))),n.restore(),this.lastKey=-1}}},{key:"drawComponents",value:function(e){h()(y()(n.prototype),"draw",this).call(this,e)}},{key:"drawBlur",value:function(e){z.blurCanvas(e,5)}},{key:"drawBackground",value:function(e){e.fillStyle=this.style.backgroundColor,e.fillRect(this.parent?this.parent.x:0,this.parent?this.parent.y:0,this.maxWidth,this.maxHeight)}},{key:"disable",value:function(){h()(y()(n.prototype),"disable",this).call(this),this.components.forEach((function(e){return e&&e.disable&&e.disable()}))}},{key:"enable",value:function(){h()(y()(n.prototype),"enable",this).call(this),this.components.forEach((function(e){return e&&e.enable&&e.enable()}))}},{key:"select",value:function(e){if(this.selectedComponent=e,!(this.components.filter((function(e){return e.selectable})).length<=0)&&(this.selectedComponent>=this.components.length?this.selectedComponent=0:this.selectedComponent<0&&(this.selectedComponent=this.components.length-1),this.components[this.selectedComponent]&&!this.components[this.selectedComponent].selectable)){if(this.lastKey==i.Key.UP)return this.select(this.selectedComponent-1);if(this.lastKey==i.Key.BOTTOM)return this.select(this.selectedComponent+1)}}},{key:"compareToComponent",value:function(e){return e.compareToMenu(this)}},{key:"compareToMenu",value:function(e){return 0}},{key:"compareToTooltip",value:function(e){return-1}},{key:"compareToNotification",value:function(e){return 1}},{key:"isInside",value:function(e){return!this.hidden}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.maxWidth}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.maxHeight}},{key:"maxHeight",get:function(){return h()(y()(n.prototype),"maxHeight",this)||this.canvas&&this.canvas.scene&&this.canvas.scene.height}},{key:"maxWidth",get:function(){return this.canvas&&this.canvas.scene&&this.canvas.scene.width}},{key:"minWidth",get:function(){return this.parent?this.parent.width:0}},{key:"defaultStyle",get:function(){return new C({blurBackground:i.Setting.MENU_DEFAULT_BLUR_BACKGROUND,backgroundColor:i.Setting.MENU_DEFAULT_BACKGROUND,verticalAlignement:i.VerticalAlignement.CENTER,scrollXDisabled:!0})}},{key:"hidden",get:function(){return h()(y()(n.prototype),"hidden",this)||this.disabled},set:function(e){F()(y()(n.prototype),"hidden",e,this,!0),this.disabled=e}}]),n}(le),de=new WeakMap,fe=new WeakMap,ge=new WeakMap,pe=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a,l){var u;s()(this,n),u=t.call(this,e,i,r,o,a),E()(c()(u),"selectable",!0),de.set(c()(u),{writable:!0,value:0}),fe.set(c()(u),{writable:!0,value:0}),ge.set(c()(u),{writable:!0,value:0}),u.text=l||"",A()(c()(u),de,0),A()(c()(u),ge,0),A()(c()(u),fe,0),u.lastInputText=!1,u.offsetX=0,u.lastTime=0,u.totalTime=0,u.clickCurrentPosition=null,u.textCache=null,u.input=document.createElement("input"),u.input.setAttribute("type","text"),u.input.style.position="absolute",u.input.style.left="-9999px",u.input.tabIndex=-1,u.input.value=u.text,u.input.addEventListener("blur",(function(){return u.selected=!1})),u.input.addEventListener("focus",(function(){return u.selected=!0})),u.input.addEventListener("input",(function(){u.totalTime=0,u.lastInputText=!0,u.positionStart=u.input.selectionStart,u.positionEnd=u.input.selectionEnd})),document.body.appendChild(u.input),u.appendToCanvas=!1,u.noticeLogged=!1,u.canvasTmp=document.createElement("canvas");var h=function(e,t,n){if(n){var i=u.getLetterClicked(n);null!=i&&(i>u.positionStartClick?u.setSelectionRange(u.positionStartClick,i,"forward"):i<u.positionStartClick&&u.setSelectionRange(i,u.positionStartClick,"backward"))}};return u.addDownAction((function(e){var t=u.getLetterClicked(e);null!=t&&(u.positionStartClick=t,u.setSelectionRange(t,t,"forward")),u.totalTime=0})),u.addClickAction((function(){return u.click()})),u.addMoveAction(h),u.addScrollAction(h),u}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas,r=t.getContext("2d");r.save(),this.input.selectionEnd!=this.positionEnd&&(this.totalTime=0),this.canvas&&this.canvas.container&&!this.appendToCanvas?(document.body.removeChild(this.input),this.canvas.container.appendChild(this.input),this.appendToCanvas=!0):this.canvas||this.noticeLogged||(console&&console.warn&&console.warn(i.String.WARNING_MESSAGE+" "+i.String.INPUT_FULLSCREEN),this.noticeLogged=!0),this.selected&&!this.disabled?this.click():this.blur(),this.text=this.input.value,this.positionStart=this.input.selectionStart,this.positionEnd=this.input.selectionEnd;var s=performance.now(),o=0;this.lastTime>0&&(o=s-this.lastTime),this.lastTime=s,this.totalTime+=o,this.drawBackground(r),this.drawBorder(r),this.canvasTmp.width=t.width,this.canvasTmp.height=t.height;var a=this.canvasTmp.getContext("2d");z.clear(a),this.updateTextCache(this.x+5),this.autoScroll(),this.drawText(a,this.x+5),z.drawImageData(r,this.canvasTmp,this.x+this.style.borderSize,this.y+this.style.borderSize,this.width-2*this.style.borderSize,this.height-2*this.style.borderSize,this.x+this.style.borderSize,this.y+this.style.borderSize,this.width-2*this.style.borderSize,this.height-2*this.style.borderSize),(this.hovered||this.clicked)&&(this.canvas&&this.canvas.canvas?this.canvas.canvas.style.cursor="text":t.style.cursor="default"),this.selected||(this.totalTime=0),r.restore()}}},{key:"drawText",value:function(e,t){for(var n=-1;n<this.text.length;n++){if(n>-1){var i=this.textCache.letters[n].sizes,r=t-this.offsetX,s=this.y+this.style.borderSize;this.isLetterVisible(n)&&(this.positionStart!=this.positionEnd&&n>=this.positionStart&&n<this.positionEnd&&this.drawHighlight(e,t,i),z.drawText(e,this.text[n],this.style.fontColor,this.style.fontSize,this.style.fontFamily,"default","default",r,s,!1)),t+=i.width+this.style.spaceBetweenComponents}this.positionEnd==n+1&&this.selected&&(this.totalTime<=500?this.drawCursor(e,t):this.totalTime>1e3&&(this.totalTime=0))}return t}},{key:"drawCursor",value:function(e,t){e.strokeStyle=this.style.borderColor,e.lineWidth=1,e.beginPath(),e.moveTo(t-this.offsetX,this.y+3),e.lineTo(t-this.offsetX,this.y+this.style.fontSize),e.stroke()}},{key:"drawHighlight",value:function(e,t,n){e.fillStyle=this.style.selectColor,e.fillRect(t-this.offsetX,this.y+this.style.borderSize,n.width+2,this.height-2*this.style.borderSize-1)}},{key:"updateTextCache",value:function(e){var t=this.canvas?this.canvas.getContext("2d"):null,n=this.canvas&&this.canvas.scene||this.canvas||t&&t.canvas;if(t&&(i.Setting.DISABLE_OPTIMIZATIONS||!this.textCache||this.textCache.fontSize!=this.style.fontSize||this.textCache.fontFamily!=this.style.fontFamily||this.text!=this.textCache.text||n&&n.width!=this.textCache.parentWidth)){this.textCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,text:this.text,parentWidth:n.width,letters:[]};for(var r=0;r<this.text.length;r++){var s=z.wrapTextLines(t,this.text[r],this.width,this.style.fontSize,this.style.fontFamily,!0);this.textCache.letters[r]={text:this.text[r],currentX:e,sizes:s},e+=s.width+this.style.spaceBetweenComponents}}}},{key:"isClickCurrentPosition",value:function(e,t,n){return e.x+this.offsetX<=t+n.width+this.style.spaceBetweenComponents&&e.x+this.offsetX>=t}},{key:"isClickAfterPosition",value:function(e,t,n){return e.x+this.offsetX>=t+n.width+this.style.spaceBetweenComponents}},{key:"getLetterClicked",value:function(e){if(this.textCache)for(var t=0;t<this.text.length;t++){var n=this.textCache.letters[t];if(this.isClickCurrentPosition(e,Math.round(n.currentX),n.sizes))return t;if(t>=this.text.length-1&&this.isClickAfterPosition(e,Math.round(n.currentX),n.sizes))return t+1}}},{key:"isLetterVisible",value:function(e){if(this.textCache){var t=this.textCache.letters[e];if(t){var n=t.currentX-this.offsetX;if(n>=this.x-t.sizes.width&&n<=this.x+this.width)return!0}}return!1}},{key:"autoScroll",value:function(){if(this.textCache){var e=this.cursorPosition,t=e.currentLetter?e.currentLetter.sizes.width:0,n=e.x+t+this.style.spaceBetweenComponents,i=e.x-t-this.style.spaceBetweenComponents,r=Math.max(0,Math.round(n-this.x-this.width+this.style.borderSize+2*this.style.spaceBetweenComponents)),s=Math.max(0,Math.round(i-this.x-this.style.borderSize-2*this.style.spaceBetweenComponents));if(this.offsetX<0&&(this.offsetX=0),n-this.offsetX>=this.x+this.width-this.style.borderSize)return this.offsetX=r,r;if(i-this.offsetX<=this.x+this.style.borderSize)return this.offsetX=s,s}return!1}},{key:"click",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n),this.positionStart=e,this.positionEnd=t}},{key:"cursorPosition",get:function(){if(this.textCache){var e=this.positionEnd-1;if(this.positionEnd!=this.positionStart&&this.positionEnd==this.positionStartClick&&this.positionStart<this.positionStartClick&&(e=this.positionStart-1),e<0)return{currentLetter:this.textCache.letters[0],x:this.x+this.style.borderSize};var t=this.textCache.letters[e];if(t)return{currentLetter:t,x:t.currentX}}}},{key:"positionStart",get:function(){return b()(this,de)},set:function(e){this.input.selectionStart=e,A()(this,de,e)}},{key:"positionStartClick",get:function(){return b()(this,fe)},set:function(e){A()(this,fe,e)}},{key:"positionEnd",get:function(){return b()(this,ge)},set:function(e){this.input.selectionEnd=e,A()(this,ge,e)}},{key:"height",get:function(){var e=this.style&&this.style.borderSize?this.style.borderSize:0;return h()(y()(n.prototype),"height",this)?h()(y()(n.prototype),"height",this):this.style.fontSize+2*e}},{key:"defaultStyle",get:function(){return new C({fontSize:Math.floor(i.Setting.FONT_SIZE/1.25),fontFamily:i.Setting.FONT_FAMILY,fontColor:i.Setting.INPUT_DEFAULT_FONT_COLOR,backgroundColor:i.Setting.INPUT_DEFAULT_BACKGROUND_COLOR,borderColor:i.Setting.INPUT_DEFAULT_BORDER_COLOR,borderColorSelected:i.Setting.INPUT_DEFAULT_BORDER_COLOR_SELECTED,selectColor:i.Setting.INPUT_DEFAULT_SELECT_COLOR,spaceBetweenComponents:1})}}]),n}(N),me=new WeakMap,ye=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a){var l;return s()(this,n),l=t.call(this,r,o,null,null,a),E()(c()(l),"selectable",!1),me.set(c()(l),{writable:!0,value:""}),l.text=e,l.sizesCache=null,i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(l.updateSizes(),l.addChangeAction((function(e){l.updateSizes(),e!=l.parent&&l.parent&&l.parent.reactor&&l.parent.reactor.dispatchEvent("onChange",c()(l))}))),l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),z.drawText(t,this.text,this.style.fontColor,this.style.fontSize,this.style.fontFamily,this.style.alignement,this.style.verticalAlignement,this.x,this.y,this.style.wrap,this.style.bold,this.style.underline,null,this.parent),t.restore()}}},{key:"updateSizes",value:function(){var e=this.canvas?this.canvas.getContext("2d"):null,t=this.canvas&&this.canvas.scene||this.canvas||e&&e.canvas;if(e&&(i.Setting.DISABLE_OPTIMIZATIONS||!this.sizesCache||this.sizesCache.fontSize!=this.style.fontSize||this.sizesCache.fontFamily!=this.style.fontFamily||this.sizesCache.wrap!=this.style.wrap||this.text!=this.sizesCache.text||t&&t.width!=this.sizesCache.parentWidth||null==this.sizesCache.value)){var n=z.wrapTextLines(e,this.text,null,this.style.fontSize,this.style.fontFamily,!this.style.wrap);t&&(this.sizesCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,wrap:this.style.wrap,text:this.text,parentWidth:t.width,value:n})}return this.sizesCache&&this.sizesCache.value}},{key:"text",set:function(e){A()(this,me,e),this.reactor.dispatchEvent("onChange",this)},get:function(){return b()(this,me)}},{key:"sizes",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateSizes(),this.sizesCache&&this.sizesCache.value}},{key:"height",get:function(){var e=this.sizes;return e&&e.height}},{key:"width",get:function(){var e=this.sizes;return e&&e.width}},{key:"defaultStyle",get:function(){return new C({fontSize:i.Setting.FONT_SIZE,fontFamily:i.Setting.FONT_FAMILY,fontColor:i.Setting.LABEL_DEFAULT_FONT_COLOR,wrap:!0,bold:!1,underline:!1})}}]),n}(B),ve=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o){var a;return s()(this,n),a=t.call(this,e,i,r,o),E()(c()(a),"selectable",!0),a.initialColor=a.style.fontColor,a.initialUnderline=a.style.underline,a}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas;this.clicked?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorDown),t.style.cursor="pointer"):this.hovered||this.selected?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorHover),this.hovered&&(t.style.cursor="pointer")):(this.style.set("underline",this.initialUnderline),this.style.set("fontColor",this.initialColor)),this.init=!0}}},{key:"defaultStyle",get:function(){return new C({fontSize:i.Setting.FONT_SIZE,fontFamily:i.Setting.FONT_FAMILY,fontColor:i.Setting.LINK_DEFAULT_COLOR,fontColorHover:i.Setting.LINK_DEFAULT_HOVER_COLOR,fontColorDown:i.Setting.LINK_DEFAULT_CLICK_COLOR,wrap:!0,bold:!1,underline:!0})}}]),n}(ye),Ee=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e){var i;s()(this,n);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return i=t.call.apply(t,[this,null,null,null,null,e].concat(o)),E()(c()(i),"selectable",!1),i.disabled=!0,i}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){var t=e.canvas.getContext("2d");t.save(),this.x+this.width+this.style.padding>this.parent.width&&(this.x-=this.width+this.style.padding),this.y+this.height+this.style.padding>this.parent.height&&(this.y-=this.height+this.style.padding),h()(y()(n.prototype),"draw",this).call(this,t),t.restore()}}},{key:"compareToComponent",value:function(e){return e.compareToTooltip(this)}},{key:"compareToMenu",value:function(e){return 1}},{key:"compareToTooltip",value:function(e){return 0}},{key:"compareToNotification",value:function(e){return 1}},{key:"width",get:function(){return h()(y()(n.prototype),"width",this)+this.style.padding},set:function(e){F()(y()(n.prototype),"width",e,this,!0)}},{key:"height",get:function(){return h()(y()(n.prototype),"height",this)+this.style.padding},set:function(e){F()(y()(n.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.TOOLTIP_DEFAULT_BACKGROUND})}},{key:"hidden",get:function(){return h()(y()(n.prototype),"hidden",this)||this.disabled},set:function(e){F()(y()(n.prototype),"hidden",e,this,!0),this.disabled=e}}]),n}(le),ke=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(){var e,i;return s()(this,n),i=t.call(this),E()(c()(i),"selectable",!1),E()(c()(i),"enableEvents",!1),(e=i).addAll.apply(e,arguments),i}return a()(n,[{key:"draw",value:function(e){var t=this;if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var i=e.canvas,r=i.getContext("2d");r.save(),i.style.cursor="default";var s=r;(this.maxWidth||this.maxHeight)&&(s=this.canvasTmp.getContext("2d"));var o=h()(y()(n.prototype),"components",this).filter((function(e){return e&&e instanceof pe}));o&&o.forEach((function(e){return e.canvas=t.canvas})),this.drawComponents(s),(this.maxWidth||this.maxHeight)&&z.drawImageData(r,this.canvasTmp,this.x,this.y,this.width,this.height,this.x,this.y,this.width,this.height),h()(y()(n.prototype),"drawScrollbars",this).call(this,r),r.restore()}}},{key:"drawComponents",value:function(e){this.components.sort(n.compareComponents).forEach((function(t){return t.draw(e)}))}},{key:"defaultStyle",get:function(){return new C({padding:i.Setting.DEFAULT_PADDING})}}]),n}(q),be=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o){var a;return s()(this,n),a=t.call(this,null,i,r,o),E()(c()(a),"selectable",!1),a.displayFrames=e||!1,a.frames=0,a.lastFrame=0,a.currentFPS=0,a.intervalCountFPS=setInterval((function(){return a.countFPS()}),1e3),a}return a()(n,[{key:"draw",value:function(e){this.hidden||(this.text="FPS: "+this.currentFPS+(this.displayFrames?" / Frames: "+this.frames:""),h()(y()(n.prototype),"draw",this).call(this,e),this.frames++)}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frames-this.lastFrame),this.lastFrame=this.frames}}]),n}(ye),Se=new WeakMap,Ae=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a,l,u){var h;return s()(this,n),h=t.call(this,e,i,r,o,a),Se.set(c()(h),{writable:!0,value:0}),E()(c()(h),"selectable",!1),h.percent=null==l?0:l,A()(c()(h),Se,h.percent),h.easingFunction=u,h.lastTime=0,h.totalTime=0,h}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save();var i=performance.now(),r=0;b()(this,Se)==this.percent||this.style.disableAnimation?(this.totalTime=0,this.lastTime=0):(this.lastTime>0&&(r=i-this.lastTime),this.totalTime+=r,this.totalTime>=this.style.animationDuration?(A()(this,Se,this.percent),this.totalTime=0,this.lastTime=0):this.lastTime=i),this.drawBackground(t),this.drawForeground(t,this.widthForeground),t.restore()}}},{key:"drawForeground",value:function(e,t){e.save(),e.fillStyle=this.style.foregroundColor,e.fillRect(this.x,this.y,t,this.height),e.restore()}},{key:"animationPercent",get:function(){var e=b()(this,Se)==this.percent||this.style.disableAnimation?1:this.totalTime/this.style.animationDuration;return this.easingFunction&&(e=this.easingFunction(e)),e}},{key:"widthForeground",get:function(){return Math.max(0,Math.min(this.width,this.width*(b()(this,Se)+(this.percent-b()(this,Se))*this.animationPercent)))}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.PROGRESS_DEFAULT_BACKGROUND,foregroundColor:i.Setting.PROGRESS_DEFAULT_FOREGROUND,animationDuration:i.Setting.PROGRESS_DEFAULT_ANIMATION_DURATION})}}]),n}(N),we=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(){return s()(this,n),t.apply(this,arguments)}return a()(n,[{key:"registerEvent",value:function(e){this.events[e]||(this.events[e]=[])}},{key:"dispatchEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.events[e]){var r=this.events[e];r.forEach((function(e){return e&&e.callback&&e.callback.apply(e,n)}))}}},{key:"dispatchEventComponent",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(this.events[e]){var s=this.events[e];s.forEach((function(e){return e&&e.callback&&e.component==t&&e.callback.apply(e,i)}))}}},{key:"addEventListener",value:function(e,t,n){this.events[e]&&this.events[e].push({component:t,callback:n})}},{key:"removeEventListener",value:function(e,t){this.events[e]&&this.events[e].filter((function(e){return e&&e.callback!=t}))}},{key:"removeEventListenerComponent",value:function(e,t){this.events[e]&&this.events[e].filter((function(e){return e&&e.component!=t}))}},{key:"removeAllEventListener",value:function(){this.events=[]}}]),n}(I),Ce=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Le=function(){function e(t,n,r,o,a,l){var c=this;s()(this,e),Ce.set(this,{writable:!0,value:void 0}),Te.set(this,{writable:!0,value:void 0}),Ie.set(this,{writable:!0,value:void 0}),this.canvas=n||document.createElement("canvas"),this.container=document.createElement("div"),this.width=r||i.Setting.CANVAS_WIDTH,this.height=o||i.Setting.CANVAS_HEIGHT,this.scene=t,this.container.appendChild(this.canvas),this.started=!1,this.init=!1,this.maxFPS=l||-1,A()(this,Ce,0),this.hasError=!1;var u=new Q(null,null,null,null,new C({alignement:"center",backgroundColor:i.Setting.BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND}),new ye(i.String.RETRY,null,null,new C({fontColor:"white",alignement:"center"}))),h=new he(new C({spaceBetweenComponents:15}),new ye(i.String.ERROR_MESSAGE_CANVAS_LABEL,null,null,new C({fontColor:"white",alignement:"center"})),u);h.enable(),this.sceneError=new ke(h),this.scenePrevious=this.scene,u.addClickAction((function(){c.hasError=!1,c.scene=c.scenePrevious})),this.reactor=new we,this.reactor.registerEvent("mousemove"),this.reactor.registerEvent("click"),this.reactor.registerEvent("mousedown"),this.reactor.registerEvent("mouseup"),this.reactor.registerEvent("wheel"),this.reactor.registerEvent("touchstart"),this.reactor.registerEvent("touchend"),this.reactor.registerEvent("touchmove"),a&&this.autoResize(),this.createEvents(),i.Setting.DISABLE_OPTIMIZATIONS&&console&&console.info(i.String.NOTICE_MESSAGE+" "+i.String.OPTIMIZATION_DISABLED),i.Setting.DISABLE_CONTAINERS_CUTTING&&console&&console.info(i.String.NOTICE_MESSAGE+" "+i.String.CONTAINER_CUTTING_DISABLED)}return a()(e,[{key:"draw",value:function(){var e=this.canvas.getContext("2d");this.drawClear(e),this.drawScene(e)}},{key:"drawScene",value:function(e){if(this.scene){this.scene.parent=this,this.scene.canvas=this;try{this.scene.draw(e)}catch(e){this.hasError=!0,this.scene=this.sceneError,console.error(i.String.ERROR_MESSAGE+" "+i.String.ERROR_MESSAGE_CANVAS+"\n",e)}}}},{key:"drawClear",value:function(e){z.clear(e)}},{key:"startDraw",value:function(e){var t=this;this.started=!0,requestAnimationFrame((function(n){if(t.started){var i=n-b()(t,Ce);(t.maxFPS<1||i>1e3/t.maxFPS)&&(A()(t,Ce,n),t.draw()),t.startDraw(e),e&&e()}}))}},{key:"stopDraw",value:function(){this.started=!1}},{key:"appendTo",value:function(e){e.appendChild(this.container)}},{key:"remove",value:function(e){e.removeChild(this.container),this.container.removeChild(this.canvas)}},{key:"toggleFullscreen",value:function(){z.toggleFullscreen(this.canvas,this.container)}},{key:"toggleFullpage",value:function(){z.toggleFullpage(this.canvas,this.container)}},{key:"autoResize",value:function(){z.enableAutoResizeCanvas(this.canvas,this.width,this.height)}},{key:"getContext",value:function(e){return this.canvas?this.canvas.getContext(e||"2d"):null}},{key:"createEvents",value:function(){var e=this;!this.init&&this.canvas&&(["mousemove","click","mousedown","mouseup","wheel"].forEach((function(t){e.canvas.addEventListener(t,(function(n){var i=e.getMousePos(n);e.doEvents(n,t,i),n.preventDefault()}),!1)})),["touchstart","touchmove","touchend"].forEach((function(t){e.canvas.addEventListener(t,(function(n){var i=n.changedTouches[0],r=e.getMousePos(i);e.doEvents(n,t,r)}))})),this.init=!0)}},{key:"doEvents",value:function(e,t,n){var i=this,r=this.getComponentsAtPosition(n);this.reactor.dispatchEvent(t,e,!1),se()(r).reverse().forEach((function(n){return i.reactor.dispatchEventComponent(t,n,e,!0)}))}},{key:"addEventListener",value:function(e,t,n){this.reactor.addEventListener(e,t,n)}},{key:"getMousePos",value:function(e){return z.getMousePos(this.canvas,e)}},{key:"getAllComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;return this.scene.getAllComponents(e)}},{key:"getComponentsAtPosition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scene,i=this.scene.getComponentsTree(n),r=[n];return i.childs&&i.childs.sort(ke.sortComponentsTree).reverse().some((function(n){if(n.component.isInside(e)&&!n.component.hidden&&!n.component.disabled)return r.push.apply(r,se()(t.getComponentsAtPosition(e,n.component))),!0})),r}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return 0}},{key:"width",get:function(){return this.canvas?this.canvas.width:b()(this,Te)},set:function(e){A()(this,Te,e),this.canvas.width=e,this.scene&&this.scene.reactor.dispatchEvent("onChange",this)}},{key:"height",get:function(){return this.canvas?this.canvas.height:b()(this,Ie)},set:function(e){A()(this,Ie,e),this.canvas.height=e,this.scene&&this.scene.reactor.dispatchEvent("onChange",this)}}]),e}(),Re={easeInCubic:function(e){return e*e*e},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInOutBack:function(e){var t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}},_e=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a){var l;return s()(this,n),l=t.call(this,e,i,null,null,a),E()(c()(l),"selectable",!1),l.toX=r,l.toY=o,l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");z.drawArrow(t,this.x,this.y,this.toX,this.toY,this.style.lineWidth,this.style.headSize,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return Math.abs(this.x-this.toX)}},{key:"height",get:function(){return Math.abs(this.y-this.toY)}},{key:"defaultStyle",get:function(){return new C({lineWidth:i.Setting.ARROW_DEFAULT_LINE_SIZE,headSize:i.Setting.ARROW_DEFAULT_HEAD_SIZE,color:i.Setting.ARROW_DEFAULT_COLOR,lineCap:i.Setting.ARROW_DEFAULT_LINE_CAP})}}]),n}(B),xe=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o,a){var l;return s()(this,n),l=t.call(this,e,i,r,o,a),E()(c()(l),"selectable",!1),l}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");z.drawTriangle(t,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return h()(y()(n.prototype),"width",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"width",e,this,!0)}},{key:"height",get:function(){return h()(y()(n.prototype),"height",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"height",e,this,!0)}},{key:"defaultStyle",get:function(){return new C({lineWidth:i.Setting.TRIANGLE_DEFAULT_LINE_SIZE,color:i.Setting.TRIANGLE_DEFAULT_COLOR,fill:i.Setting.TRIANGLE_DEFAULT_FILL,lineCap:i.Setting.TRIANGLE_DEFAULT_LINE_CAP,fillColor:i.Setting.TRIANGLE_DEFAULT_FILL_COLOR})}}]),n}(B),Oe=new WeakMap,Pe=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,o,a,l,u,h){var d;return s()(this,n),d=t.call(this,e,r,o,a,l),Oe.set(c()(d),{writable:!0,value:0}),d.optionContainer=u,h&&(d.selectedOption=h),d.label=new ye("",e,r,l),d.label.style.setAll({alignement:i.Alignement.LEFT,verticalAlignement:i.VerticalAlignement.CENTER}),d.triangle=new xe(null,null,8,8,l),d.triangle.style.setAll({alignement:i.Alignement.RIGHT,verticalAlignement:i.VerticalAlignement.CENTER}),d.addAll(d.label,d.triangle),d.addClickAction((function(){d.optionContainer&&(d.optionContainer.hidden=!1)})),i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(d.updateWidth(),d.addChangeAction((function(){return d.updateWidth()}))),d}return a()(n,[{key:"draw",value:function(e){this.hidden||(this.selectedOption&&this.selectedOption.label&&(this.label.text=this.selectedOption.label.text),h()(y()(n.prototype),"draw",this).call(this,e),this.optionContainer&&(this.optionContainer.select=this))}},{key:"updateWidth",value:function(){var e=this.label.width;this.optionContainer&&this.optionContainer.components.forEach((function(t){var n=t.label;n&&(n.updateSizes&&n.updateSizes(),n.width>e&&(e=n.width))})),A()(this,Oe,e+this.style.padding+this.triangle.width+15)}},{key:"selectedOption",get:function(){return this.optionContainer?this.optionContainer.components[this.optionContainer.selectedOption]:null},set:function(e){this.optionContainer.selectedOption=e,this.reactor.dispatchEvent("onChange",this)}},{key:"text",get:function(){return this.selectedOption&&this.selectedOption.label?this.selectedOption.label.text:null}},{key:"width",get:function(){return i.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateWidth(),b()(this,Oe)}},{key:"allComponents",get:function(){var e=[];return e.push.apply(e,se()(h()(y()(n.prototype),"allComponents",this))),e}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:i.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:i.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:i.Setting.DEFAULT_PADDING})}}]),n}(Q),De=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i){var r;s()(this,n);var o=new ye("Option");return(r=t.call(this,null,null,null,null,i,e||o)).label=e||o,r}return a()(n,[{key:"add",value:function(e){e instanceof ye&&(this.clear(),h()(y()(n.prototype),"add",this).call(this,e))}},{key:"width",get:function(){return this.parent&&this.parent.width}},{key:"defaultStyle",get:function(){return new C({backgroundColor:i.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:i.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:i.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:i.Setting.DEFAULT_PADDING})}}]),n}(Q),Be=new WeakMap,Me=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i){var r;s()(this,n);for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return r=t.call.apply(t,[this,null,null,null,e,i].concat(a)),Be.set(c()(r),{writable:!0,value:void 0}),A()(c()(r),Be,0),r.select=null,r}return a()(n,[{key:"draw",value:function(e){h()(y()(n.prototype),"draw",this).call(this,e),this.selected&&this.selected&&(this.select.selected=!0)}},{key:"add",value:function(e){var t=this;h()(y()(n.prototype),"add",this).call(this,e),e.addClickAction((function(){A()(t,Be,t.getComponentId(e)),t.selected=!1,t.hidden=!0,t.select&&(t.select.selected=!1)}))}},{key:"x",get:function(){return this.select&&this.select.x}},{key:"y",get:function(){var e=this.select&&this.select.height,t=this.height,n=this.select&&this.select.y;return this.canvas&&this.canvas.scene&&n+e+t>=this.canvas.scene.height?n-t:n+e}},{key:"width",get:function(){return this.select&&this.select.width}},{key:"selectedOption",get:function(){return Math.max(0,Math.min(this.components.length-1,b()(this,Be)))},set:function(e){A()(this,Be,e),this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new C({padding:0,spaceBetweenComponents:0,backgroundColor:i.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:null,backgroundColorDown:null,scrollXDisabled:!1,scrollYDisabled:!1})}},{key:"hidden",get:function(){return h()(y()(n.prototype),"hidden",this)||this.select&&!this.select.selected||!this.select},set:function(e){return F()(y()(n.prototype),"hidden",e,this,!0)}},{key:"selected",get:function(){return h()(y()(n.prototype),"selected",this)||this.select&&this.select.selected},set:function(e){F()(y()(n.prototype),"selected",e,this,!0)}}]),n}(le),Fe=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}(n);function n(e,i,r,o){var a;return s()(this,n),a=t.call(this,e,i,r,r,o),E()(c()(a),"selectable",!1),a}return a()(n,[{key:"draw",value:function(e){if(!this.hidden){h()(y()(n.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");z.drawCircle(t,this.x,this.y,this.width,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return h()(y()(n.prototype),"width",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"width",e,this,!0),this.reactor.dispatchEvent("onChange",this)}},{key:"height",get:function(){return h()(y()(n.prototype),"height",this)+this.style.lineWidth},set:function(e){F()(y()(n.prototype),"height",e,this,!0),this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new C({lineWidth:i.Setting.CIRCLE_DEFAULT_LINE_SIZE,color:i.Setting.CIRCLE_DEFAULT_COLOR,fill:i.Setting.CIRCLE_DEFAULT_FILL,lineCap:i.Setting.CIRCLE_DEFAULT_LINE_CAP,fillColor:i.Setting.CIRCLE_DEFAULT_FILL_COLOR})}}]),n}(B)}])},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var i=n(42);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,n){var i=n(43),r=n(27);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(29);function r(t,n,s){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(n):s.value}},r(t,n,s||t)}e.exports=r},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){var i=n(44),r=n(45),s=n(46),o=n(47),a=n(48),l=n(49),c=n(50);c.alea=i,c.xor128=r,c.xorwow=s,c.xorshift7=o,c.xor4096=a,c.tychei=l,e.exports=c},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var i,r=n(65),s=n(36),o=n(67),a=n(68),l=n(69);"undefined"!=typeof ArrayBuffer&&(i=n(70));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=c||u;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=r(d),g={type:"error",data:"parser error"},p=n(71);function m(e,t,n){for(var i=new Array(e.length),r=a(e.length,n),s=function(e,n,r){t(n,(function(t,n){i[e]=n,r(t,i)}))},o=0;o<e.length;o++)s(o,e[o],r)}t.encodePacket=function(e,n,i,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof i&&(r=i,i=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=e.data,s=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=d[e.type];for(var a=0;a<s.length;a++)o[a+1]=s[a];return i(o.buffer)}(e,n,r);if(void 0!==p&&s instanceof p)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(h)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){t.encodePacket({type:e.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(e.data)}(e,n,i);var r=new Uint8Array(1);r[0]=d[e.type];var s=new p([r.buffer,e.data]);return i(s)}(e,n,r);if(s&&s.base64)return function(e,n){var i="b"+t.packets[e.type]+e.data.data;return n(i)}(e,r);var o=d[e.type];return void 0!==e.data&&(o+=i?l.encode(String(e.data),{strict:!1}):String(e.data)),r(""+o)},t.encodeBase64Packet=function(e,n){var i,r="b"+t.packets[e.type];if(void 0!==p&&e.data instanceof p){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];n(r+e)},s.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var o=new Uint8Array(e.data),a=new Array(o.length),l=0;l<o.length;l++)a[l]=o[l];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},t.decodePacket=function(e,n,i){if(void 0===e)return g;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&!1===(e=function(e){try{e=l.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return g;var r=e.charAt(0);return Number(r)==r&&f[r]?e.length>1?{type:f[r],data:e.substring(1)}:{type:f[r]}:g}r=new Uint8Array(e)[0];var s=o(e,1);return p&&"blob"===n&&(s=new p([s])),{type:f[r],data:s}},t.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=i.decode(e.substr(1));return"blob"===t&&p&&(r=new p([r])),{type:n,data:r}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var r=s(e);if(n&&r)return p&&!h?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i);if(!e.length)return i("0:");m(e,(function(e,i){t.encodePacket(e,!!r&&n,!1,(function(e){i(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return i(t.join(""))}))},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===e)return i(g,0,1);for(var s,o,a="",l=0,c=e.length;l<c;l++){var u=e.charAt(l);if(":"===u){if(""===a||a!=(s=Number(a)))return i(g,0,1);if(a!=(o=e.substr(l+1,s)).length)return i(g,0,1);if(o.length){if(r=t.decodePacket(o,n,!1),g.type===r.type&&g.data===r.data)return i(g,0,1);if(!1===i(r,l+s,c))return}l+=s,a=""}else a+=u}return""!==a?i(g,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));m(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var i=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),r=new Uint8Array(i),s=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);n=i.buffer}r[s++]=t?0:1;var a=n.byteLength.toString();for(o=0;o<a.length;o++)r[s++]=parseInt(a[o]);r[s++]=255;for(i=new Uint8Array(n),o=0;o<i.length;o++)r[s++]=i[o]})),n(r.buffer)}))},t.encodePayloadAsBlob=function(e,n){m(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,t[0]=0}var s=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(s.length+1);for(r=0;r<s.length;r++)o[r]=parseInt(s[r]);if(o[s.length]=255,p){var a=new p([t.buffer,o.buffer,e]);n(null,a)}}))}),(function(e,t){return n(new p(t))}))},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var r=e,s=[];r.byteLength>0;){for(var a=new Uint8Array(r),l=0===a[0],c="",u=1;255!==a[u];u++){if(c.length>310)return i(g,0,1);c+=a[u]}r=o(r,2+c.length),c=parseInt(c);var h=o(r,0,c);if(l)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(e){var d=new Uint8Array(h);h="";for(u=0;u<d.length;u++)h+=String.fromCharCode(d[u])}s.push(h),r=o(r,c)}var f=s.length;s.forEach((function(e,r){i(t.decodePacket(e,n,!0),r,f)}))}},function(e,t,n){(function(i){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(53)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(20))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var s=n[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(i){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(72)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(20))},function(module,exports,__webpack_require__){!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let n=0;n<e.length;n++){if(void 0!==e[n].graph.get(this)._connectivity)continue;let i=[e[n]];for(t++;i.length;){let e=i.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map(e=>{void 0===e.graph.get(this)._connectivity&&0>i.indexOf(e)&&i.push(e)})}}}add(e){return 1<arguments.length?Array.from(arguments).map(e=>this.add(e)):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map(e=>this.delete(e)):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,n=1,i=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===n?e.graph.get(this).delete(t):e.graph.get(this).set(t,n),null===i?t.graph.get(this).delete(e):t.graph.get(this).set(e,i),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,n={}){let i=e.fromArray.X(t,n.order),r=e.fromArray.Y(t,n.order),s=e.fromArray.at.bind(null,t,n.order),o=[],a=null;for(let t,l=1;l<Math.max(2,arguments.length);l++){t=new e,o.push(t),n=arguments[l]||{};let c=e.fromArray.id.bind(null,i,r,n.torus),u=n.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,u);for(let e=0;e<i;e++)for(let n,i=0;i<r;i++)n=t.add(a?a.get(c(e,i)):new f(c(e,i))),n.x=e,n.y=i,n.graph.get(t)._data=s(e,i),h(n,t.nodes.get(c(e-1,i))),h(n,t.nodes.get(c(e+1,i))),h(n,t.nodes.get(c(e,i-1))),h(n,t.nodes.get(c(e,i+1)));if(n.diagonals)for(let e=0;e<i;e++)for(let i=0;i<r;i++){let r=t.nodes.get(c(e,i)),s=t.adjacent(r,t.nodes.get(c(e-1,i))),o=t.adjacent(r,t.nodes.get(c(e+1,i))),a=t.adjacent(r,t.nodes.get(c(e,i-1))),l=t.adjacent(r,t.nodes.get(c(e,i+1)));"strict"===n.cutting?(s&&a&&h(r,t.nodes.get(c(e-1,i-1))),s&&l&&h(r,t.nodes.get(c(e-1,i+1))),o&&a&&h(r,t.nodes.get(c(e+1,i-1))),o&&l&&h(r,t.nodes.get(c(e+1,i+1)))):((s||a||n.cutting)&&h(r,t.nodes.get(c(e-1,i-1))),(s||l||n.cutting)&&h(r,t.nodes.get(c(e-1,i+1))),(o||a||n.cutting)&&h(r,t.nodes.get(c(e+1,i-1))),(o||l||n.cutting)&&h(r,t.nodes.get(c(e+1,i+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>c(e.x,e.y)}),t.connect(),t.X=i,t.Y=r,t.TORUS=n.torus,a||(a=t.nodes)}return 1<o.length?o:o[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",n,i){return"xy"===t?e[n][i]:e[i][n]},e.fromArray.id=function(e=0,t=0,n=!1,i,r){return n?(r+t)%t*e+(i+e)%e:0<=i&&i<e&&0<=r&&r<t?r*e+i:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,n,i){i&&e.edge(n,i,t(e.data(n),e.data(i)),t(e.data(i),e.data(n)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let n in this.id=e,this.graph=new Map,t)"id"!=n&&"graph"!=n&&(this[n]=t[n])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let n=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=n,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],n=this.score(t);for(;0<e;){let i=Math.floor((e+1)/2)-1,r=this.nodes[i];if(n>=this.score(r))break;this.nodes[i]=t,this.nodes[e]=r,e=i}return this}sink(e){let t=this.nodes[e],n=this.score(t);for(;;){let i=2*(e+1),r=i-1,s=null;if(r<this.size&&this.score(this.nodes[r])<n&&(s=r),i<this.size&&this.score(this.nodes[i])<(s?this.score(this.nodes[s]):n)&&(s=i),null===s)break;this.nodes[e]=this.nodes[s],this.nodes[s]=t,e=s}return this}}let h={manhattan:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return(n.multiplier||1)*(i+r)},manhattanTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)},diagonal:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return m*(i+r)+(dm-2*m)*c(i,r)},diagonalTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,r)},euclidian:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return(n.multiplier||1)*Math.sqrt(i*i+r*r)},euclidianTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,r)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(n.thread+" couldn't be opened.")}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,n={})=>{this._worker_path_callback=n.callback,delete n.callback,this.worker.postMessage(["path",e,t,n])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);switch(t[0]){case"path":this._worker_path_callback(t[1])}}}}path(e,t,n={}){if(n.jps)return this.jps(e,t,n);let i=new g(e=>e.estimated),r=new Map,s=this.graphs[n.layer||0];if(e=s.node(e,!0),t=s.node(t,!0),i.add({node:e,estimated:0}),r.set(e,{score:0,from:null}),!n.static||s.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;s.neighbors(e).map(o=>{let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e}),i.set({node:o,estimated:a+h[n.heuristic||this.heuristic](o,t,n.heuristicOptions||this.heuristicOptions)}))}),i.delete(e)}let o=[];if(r.has(t)){let e=t;for(o.push(t);null!==(e=r.get(e).from);)o.push(e);o=o.reverse()}return n.callback&&n.callback(o,r),o}}if(j.JPS=class{constructor(){}static access(e,t,n,i){return e.adjacent(t,i?e.node(n,!0):n)}static neighborhood(e,t,n,i){let r=[],s=n.get(i).from||null;if(null===s)return t.neighbors(i);{let n={x:b(i.x-s.x),y:b(i.y-s.y)};if(0!=n.x&&0!=n.y){let s=e(i,{x:i.x+n.x,y:i.y},!0),o=e(i,{x:i.x,y:i.y+n.y},!0);(s||o)&&(r.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),s&&(r.push(t.node({x:i.x+n.x,y:i.y},!0)),!e(i,{x:i.x,y:i.y-n.y},!0)&&r.push(t.node({x:i.x+n.x,y:i.y-n.y},!0))),o&&(r.push(t.node({x:i.x,y:i.y+n.y},!0)),!e(i,{x:i.x-n.x,y:i.y},!0)&&r.push(t.node({x:i.x-n.x,y:i.y+n.y},!0))))}else e(i,{x:i.x+n.x,y:i.y+n.y},!0)&&(r.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),0==n.x?0!=n.y&&(!e(i,{x:i.x-1,y:i.y},!0)&&r.push(t.node({x:i.x-1,y:i.y+n.y},!0)),!e(i,{x:i.x+1,y:i.y},!0)&&r.push(t.node({x:i.x+1,y:i.y+n.y},!0))):(!e(i,{x:i.x,y:i.y-1},!0)&&r.push(t.node({x:i.x+n.x,y:i.y-1},!0)),!e(i,{x:i.x,y:i.y+1},!0)&&r.push(t.node({x:i.x+n.x,y:i.y+1},!0))))}return r.filter(e=>e)}static jump(e,t,n,i,r,s){for(;;){if(!e(s,r))return null;if(r.x===i.x&&r.y===i.y)return r;let o={x:b(r.x-s.x),y:b(r.y-s.y)};if(0!=o.x&&0!=o.y){if(!e(r,{x:r.x-o.x,y:r.y},!0)&&e(r,{x:r.x-o.x,y:r.y+o.y},!0)||!e(r,{x:r.x,y:r.y-o.y},!0)&&e(r,{x:r.x+o.x,y:r.y-o.y},!0))return r;let s=j.JPS.jump.bind(this,e,t,n,i);if(null!==s(t.node({x:r.x+o.x,y:r.y},!0),r)||null!==s(t.node({x:r.x,y:r.y+o.y},!0),r))return r}else if(0!=o.x){if(!e(r,{x:r.x,y:r.y-1},!0)&&e(r,{x:r.x+o.x,y:r.y-1},!0)||!e(r,{x:r.x,y:r.y+1},!0)&&e(r,{x:r.x+o.x,y:r.y+1},!0))return r}else if(0!=o.y&&(!e(r,{x:r.x-1,y:r.y},!0)&&e(r,{x:r.x-1,y:r.y+o.y},!0)||!e(r,{x:r.x+1,y:r.y},!0)&&e(r,{x:r.x+1,y:r.y+o.y},!0)))return r;s=r,r=t.node({x:r.x+o.x,y:r.y+o.y},!0)}return null}},j.prototype.jps=function(e,t,n={}){if(this.graphs[n.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),n.callback&&n.callback([],new Map),[];let i=new g(e=>e.estimated),r=new Map,s=this.graphs[n.layer||0],o=null;e=s.node(e,!0),t=s.node(t,!0),i.add({node:e,estimated:0}),r.set(e,{score:0,from:null});let a=j.JPS.access.bind(this,s),l=j.JPS.neighborhood.bind(this,a,s,r),c=j.JPS.jump.bind(this,a,s,r,t);if(!n.static||s.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;l(e).map(a=>{if(null!==(o=c(a,e))){let a=(r.has(e)?r.get(e).score:0)+s.cost(e,o);a<(r.has(o)?r.get(o).score:1/0)&&(r.set(o,{score:a,from:e,jumped:!0}),i.set({node:o,estimated:a+h[n.heuristic||this.heuristic](o,t,n.heuristicOptions||this.heuristicOptions)}))}}),i.delete(e)}let u=[];if(r.has(t)){let n=t;for(;n.x!=e.x||n.y!=e.y;)for(let e=r.get(n).from;n.x!=e.x||n.y!=e.y;)u.push(n),n=s.node({x:n.x+b(e.x-n.x),y:n.y+b(e.y-n.y)},!0);u.push(n),u.reverse()}return n.callback&&n.callback(u,r),u},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?this:window)},function(e,t,n){var i=n(52),r=n(22),s=n(33),o=n(14)("socket.io-client");e.exports=t=l;var a=t.managers={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),l=r.source,c=r.id,u=r.path,h=a[c]&&u in a[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||h?(o("ignoring socket cache for %s",l),n=s(l,t)):(a[c]||(o("new io instance for %s",l),a[c]=s(l,t)),n=a[c]),r.query&&!t.query&&(t.query=r.query),n.socket(r.path,t)}t.protocol=r.protocol,t.connect=l,t.Manager=n(33),t.Socket=n(39)},function(e,t){var n,i,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var n=1e3,i=6e4,r=60*i,s=24*r;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?o(a=e,s,"day")||o(a,r,"hour")||o(a,i,"minute")||o(a,n,"second")||a+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var i=n(54)("socket.io-parser"),r=n(12),s=n(56),o=n(31),a=n(32);function l(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=l,t.Decoder=h;var c=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var r=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===r)return c;n+=r}return i("encoded %j as %s",e,n),n}function h(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function f(e){return{type:t.ERROR,data:"parser error: "+e}}l.prototype.encode=function(e,n){(i("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){s.removeBlobs(e,(function(e){var n=s.deconstructPacket(e),i=u(n.packet),r=n.buffers;r.unshift(i),t(r)}))}(e,n):n([u(e)])},r(h.prototype),h.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,r={type:Number(e.charAt(0))};if(null==t.types[r.type])return f("unknown packet type "+r.type);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(var s="";"-"!==e.charAt(++n)&&(s+=e.charAt(n),n!=e.length););if(s!=Number(s)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===e.charAt(n+1))for(r.nsp="";++n;){if(","===(l=e.charAt(n)))break;if(r.nsp+=l,n===e.length)break}else r.nsp="/";var a=e.charAt(n+1);if(""!==a&&Number(a)==a){for(r.id="";++n;){var l;if(null==(l=e.charAt(n))||Number(l)!=l){--n;break}if(r.id+=e.charAt(n),n===e.length)break}r.id=Number(r.id)}if(e.charAt(++n)){var c=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==c&&(r.type===t.ERROR||o(c))))return f("invalid payload");r.data=c}return i("decoded %s as %j",e,r),r}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new d(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(58),r=n(59),s=n(60);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(t,n),r=(e=a(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return H(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,r){var s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(c(e,s+d)!==c(t,d)){h=!1;break}if(h)return s}return-1}function E(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function k(e,t,n,i){return z(H(t,e.length-n),e,n,i)}function b(e,t,n,i){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function S(e,t,n,i){return b(e,t,n,i)}function A(e,t,n,i){return z(G(t),e,n,i)}function w(e,t,n,i){return z(function(e,t){for(var n,i,r,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var s,o,a,l,c=e[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[r+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[r+1],o=e[r+2],128==(192&s)&&128==(192&o)&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[r+1],o=e[r+2],a=e[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):p.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(i,r),u=e.slice(t,n),h=0;h<a;++h)if(c[h]!==u[h]){s=c[h],o=u[h];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function L(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;++s)r+=U(e[s]);return r}function _(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,r,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function P(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function D(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function B(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,i,s){return s||B(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,s){return s||B(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=t,r=1,s=this[e+--i];i>0&&(r*=256);)s+=this[e+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,s=i-n;if(this===e&&n<t&&t<i)for(r=s-1;r>=0;--r)e[r+t]=this[r+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=l.isBuffer(e)?e:H(new l(e,i).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var i=e.length,r=null,s=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function G(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(57))},function(e,t,n){var i=n(63),r=n(25);e.exports=function(e){var t=e.xdomain,n=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(e){}if(!t)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var i=n(13),r=n(12);function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=s,r(s.prototype),s.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var i=n(29),r=n(9);function s(e,t,n,o){return(s="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,s){var o,a=i(e,t);if(a){if((o=Object.getOwnPropertyDescriptor(a,t)).set)return o.set.call(s,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(s,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(s,t,o)}else r(s,t,n);return!0})(e,t,n,o)}e.exports=function(e,t,n,i,r){if(!s(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}},function(e,t,n){var i=n(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));for(var o=n.exec(e||""),a={},l=14;l--;)a[i[l]]=o[l]||"";return-1!=r&&-1!=s&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,a.path),a.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,a.query),a}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||i&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,i="function"==typeof ArrayBuffer}).call(this,n(23).Buffer)},function(e,t,n){var i=n(61),r=n(39),s=n(12),o=n(22),a=n(40),l=n(41),c=n(14)("socket.io-client:manager"),u=n(38),h=n(77),d=Object.prototype.hasOwnProperty;function f(e,t){if(!(this instanceof f))return new f(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=f,f.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},f.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},f.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(f.prototype),f.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},f.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},f.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var s=a(n,"open",(function(){r.onopen(),e&&e()})),o=a(n,"error",(function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var l=this._timeout;c("connect attempt will timeout after %d",l),0===l&&s.destroy();var u=setTimeout((function(){c("connect attempt timed out after %d",l),s.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",l)}),l);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(s),this.subs.push(o),this},f.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",l(this,"ondata"))),this.subs.push(a(e,"ping",l(this,"onping"))),this.subs.push(a(e,"pong",l(this,"onpong"))),this.subs.push(a(e,"error",l(this,"onerror"))),this.subs.push(a(e,"close",l(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",l(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(e){this.decoder.add(e)},f.prototype.ondecoded=function(e){this.emit("packet",e)},f.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},f.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new r(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",s),n.on("connect",(function(){n.id=i.generateId(e)})),this.autoConnect&&s()}function s(){~u(i.connecting,n)||i.connecting.push(n)}return n},f.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()})))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},f.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},f.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var i=n(24),r=n(64),s=n(73),o=n(74);t.polling=function(e){var t=!1,n=!1,o=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,l=location.port;l||(l=a?443:80),t=e.hostname!==location.hostname||l!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!o)throw new Error("JSONP disabled");return new s(e)},t.websocket=o},function(e,t,n){var i=n(26),r=n(15),s=n(13),o=n(16),a=n(37),l=n(17)("engine.io-client:polling");e.exports=u;var c=null!=new(n(24))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),i.call(this,e)}o(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){l("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){l("pre-pause polling complete"),--i||n()}))),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){l("pre-pause writing complete"),--i||n()})))}else n()},u.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;l("polling got data %s",e);s.decodePayload(e,this.socket.binaryType,(function(e,n,i){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){l("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var i=n(66),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(i(n)){for(var r=0,a=n.length;r<a;r++)if(e(n[r]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)&&e(n[l]))return!0;return!1}}).call(this,n(23).Buffer)},function(e,t,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={},o=0,a=0;function l(e){var t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=l(+new Date);return e!==i?(o=0,i=e):e+"."+l(o++)}for(;a<64;a++)s[r[a]]=a;c.encode=l,c.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+s[e.charAt(a)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,n){var i=n(22),r=n(12),s=n(76),o=n(40),a=n(41),l=n(14)("socket.io-client:socket"),c=n(15),u=n(36);e.exports=f;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=r.prototype.emit;function f(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",a(this,"onopen")),o(e,"packet",a(this,"onpacket")),o(e,"close",a(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},f.prototype.emit=function(e){if(h.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},f.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},f.prototype.onopen=function(){if(l("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;l("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},f.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},f.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},f.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},f.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);l("sending ack %j",r),t.packet({type:u(r)?i.BINARY_ACK:i.ACK,id:e,data:r})}}},f.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(e){return this.flags.compress=e,this},f.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t,n=this,i=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=i(" "),n.s1=i(" "),n.s2=i(" "),n.s0-=i(e),n.s0<0&&(n.s0+=1),n.s1-=i(e),n.s1<0&&(n.s1+=1),n.s2-=i(e),n.s2<0&&(n.s2+=1),i=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),i=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.alea=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.xor128=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.xorwow=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,n,i=t.x,r=t.i;return e=i[r],n=(e^=e>>>7)^e<<24,n^=(e=i[r+1&7])^e>>>10,n^=(e=i[r+3&7])^e>>>3,n^=(e=i[r+4&7])^e<<7,e=i[r+7&7],n^=(e^=e<<13)^e<<9,i[r]=n,t.i=r+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.x&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.xorshift7=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t=this;t.next=function(){var e,n,i=t.w,r=t.X,s=t.i;return t.w=i=i+1640531527|0,n=r[s+34&127],e=r[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[s]=n^e,t.i=s,n+(i^i>>>16)|0},function(e,t){var n,i,r,s,o,a=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),r=0,s=-32;s<l;++s)t&&(i^=t.charCodeAt((s+32)%t.length)),0===s&&(o=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,s>=0&&(o=o+1640531527|0,r=0==(n=a[127&s]^=i+o)?r+1:0);for(r>=128&&(a[127&(t&&t.length||0)]=-1),r=127,s=512;s>0;--s)i=a[r+34&127],n=a[r=r+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,a[r]=i^n;e.w=o,e.X=a,e.i=r}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.X&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.xor4096=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){(function(e){var i;!function(e,r,s){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n(7)&&n(11)?void 0===(i=function(){return l}.call(t,n,t,r))||(r.exports=i):this.tychei=l}(0,e,n(7))}).call(this,n(10)(e))},function(e,t,n){var i;!function(r,s,o){var a,l=o.pow(256,6),c=o.pow(2,52),u=2*c;function h(e,t,n){var i=[],h=g(function e(t,n){var i,r=[],s=typeof t;if(n&&"object"==s)for(i in t)try{r.push(e(t[i],n-1))}catch(e){}return r.length?r:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,p(s)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(e)),p(e)}catch(e){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,p(s)]}}():e,3),i),m=new d(i),y=function(){for(var e=m.g(6),t=l,n=0;e<c;)e=256*(e+n),t*=256,n=m.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|m.g(4)},y.quick=function(){return m.g(4)/4294967296},y.double=y,g(p(m.S),s),(t.pass||n||function(e,t,n,i){return i&&(i.S&&f(i,m),e.state=function(){return f(m,{})}),n?(o.random=e,t):e})(y,h,"global"in t?t.global:this==o,t.state)}function d(e){var t,n=e.length,i=this,r=0,s=i.i=i.j=0,o=i.S=[];for(n||(e=[n++]);r<256;)o[r]=r++;for(r=0;r<256;r++)o[r]=o[s=255&s+e[r%n]+(t=o[r])],o[s]=t;(i.g=function(e){for(var t,n=0,r=i.i,s=i.j,o=i.S;e--;)t=o[r=255&r+1],n=256*n+o[255&(o[r]=o[s=255&s+t])+(o[s]=t)];return i.i=r,i.j=s,n})(256)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var n,i=e+"",r=0;r<i.length;)t[255&r]=255&(n^=19*t[255&r])+i.charCodeAt(r++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),s),e.exports){e.exports=h;try{a=n(51)}catch(e){}}else void 0===(i=function(){return h}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof self?self:this,[],Math)},function(e,t){},function(e,t,n){var i=n(30),r=n(14)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),n=i(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var s=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port,n.href=n.protocol+"://"+s+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date,s=r-(n||r);e.diff=s,e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;l++;var r=t.formatters[i];if("function"==typeof r){var s=o[l];n=r.call(e,s),o.splice(l,1),l--}return n})),t.formatArgs.call(e,o);var c=i.log||t.log||console.log.bind(console);c.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(21),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(i){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(55)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(20))},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date,s=r-(n||r);e.diff=s,e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;l++;var r=t.formatters[i];if("function"==typeof r){var s=o[l];n=r.call(e,s),o.splice(l,1),l--}return n})),t.formatArgs.call(e,o);var c=i.log||t.log||console.log.bind(console);c.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(21),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var i=n(31),r=n(32),s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,s=e;return s.data=function e(t,n){if(!t)return t;if(r(t)){var s={_placeholder:!0,num:n.length};return n.push(t),s}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=e(t[a],n);return o}if("object"==typeof t&&!(t instanceof Date)){o={};for(var l in t)o[l]=e(t[l],n);return o}return t}(n,t),s.attachments=t.length,{packet:s,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(i(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var s in t)t[s]=e(t[s],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,s=e;!function e(l,c,u){if(!l)return l;if(o&&l instanceof Blob||a&&l instanceof File){n++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:s=this.result,--n||t(s)},h.readAsArrayBuffer(l)}else if(i(l))for(var d=0;d<l.length;d++)e(l[d],d,l);else if("object"==typeof l&&!r(l))for(var f in l)e(l[f],f,l)}(s),n||t(s)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=c(e),o=i[0],a=i[1],l=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),u=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(u(e,o,o+16383>a?a:o+16383));1===r?(t=e[n-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var r,s,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,n,i,r,s){var o,a,l,c=8*s-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,g=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,r),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&a,f+=g,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+f]=255&o,f+=g,o/=256,c-=8);e[n+f-g]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(62),e.exports.parser=n(13)},function(e,t,n){var i=n(34),r=n(12),s=n(17)("engine.io-client:socket"),o=n(38),a=n(13),l=n(30),c=n(15);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,r(u.prototype),u.protocol=a.protocol,u.Socket=u,u.Transport=n(26),u.transports=n(34),u.parser=n(13),u.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var r=!this.supportsBinary&&i.transport.supportsBinary;n=n||r}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(s('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(s("changing transport and sending upgrade packet"),d(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())}))}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,i.emit("upgradeError",o)}})))}function o(){n||(n=!0,d(),t.close(),t=null)}function a(n){var r=new Error("probe error: "+n);r.transport=t.name,o(),s('probe transport "%s" failed because of error: %s',e,n),i.emit("upgradeError",r)}function l(){a("transport closed")}function c(){a("socket closed")}function h(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),o())}function d(){t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),i.removeListener("close",c),i.removeListener("upgrading",h)}u.priorWebsocketSuccess=!1,t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",c),this.once("upgrading",h),t.open()},u.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():t()})):this.upgrading?i():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){s("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var i=n(24),r=n(35),s=n(12),o=n(16),a=n(17)("engine.io-client:polling-xhr"),l=n(25);function c(){}function u(e){if(r.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function h(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=h,o(u,r),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new h(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",(function(e){r.onError("xhr post error",e)})),this.sendXhr=i},u.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},s(h.prototype),h.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},h.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},h.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},h.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){addEventListener("onpagehide"in l?"pagehide":"unload",d,!1)}function d(){for(var e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),s=new Uint8Array(n-t),o=t,a=0;o<n;o++,a++)s[a]=r[o];return s.buffer}},function(e,t){function n(){}e.exports=function(e,t,i){var r=!1;return i=i||n,s.count=e,0===e?t():s;function s(e,n){if(s.count<=0)throw new Error("after called too many times");--s.count,e?(r=!0,t(e),t=i):0!==s.count||r||t(null,n)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,i,r,s=String.fromCharCode;function o(e){for(var t,n,i=[],r=0,s=e.length;r<s;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<s?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(e,t){return s(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return s(e);var n="";return 0==(4294965248&e)?n=s(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=s(e>>12&15|224),n+=l(e,6)):0==(4292870144&e)&&(n=s(e>>18&7|240),n+=l(e,12),n+=l(e,6)),n+=s(63&e|128)}function u(){if(r>=i)throw Error("Invalid byte index");var e=255&n[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function h(e){var t,s;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(t=255&n[r],r++,0==(128&t))return t;if(192==(224&t)){if((s=(31&t)<<6|u())>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&t)){if((s=(15&t)<<12|u()<<6|u())>=2048)return a(s,e)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(s=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&s<=1114111)return s;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,i=o(e),r=i.length,s=-1,a="";++s<r;)a+=c(i[s],n);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;n=o(e),i=n.length,r=0;for(var l,c=[];!1!==(l=h(a));)c.push(l);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=s((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=s(t);return r}(c)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,s="";for(n=0;n<r;n+=3)s+=e[i[n]>>2],s+=e[(3&i[n])<<4|i[n+1]>>4],s+=e[(15&i[n+1])<<2|i[n+2]>>6],s+=e[63&i[n+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(t){var n,i,r,s,o,a=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(n=0;n<l;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),s=e.indexOf(t[n+2]),o=e.indexOf(t[n+3]),h[c++]=i<<2|r>>4,h[c++]=(15&r)<<4|s>>2,h[c++]=(3&s)<<6|63&o;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),r=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=n&&n.prototype.append&&n.prototype.getBlob;function o(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function a(e,t){t=t||{};var i=new n;return o(e).forEach((function(e){i.append(e)})),t.type?i.getBlob(t.type):i.getBlob()}function l(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,l.prototype=Blob.prototype),e.exports=i?r?Blob:l:s?a:void 0},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,r=+new Date,s=r-(n||r);e.diff=s,e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;l++;var r=t.formatters[i];if("function"==typeof r){var s=o[l];n=r.call(e,s),o.splice(l,1),l--}return n})),t.formatArgs.call(e,o);var c=i.log||t.log||console.log.bind(console);c.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(21),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var i=n(35),r=n(16),s=n(25);e.exports=u;var o,a=/\n/g,l=/\\n/g;function c(){}function u(e){i.call(this,e),this.query=this.query||{},o||(o=s.___eio=s.___eio||[]),this.index=o.length;var t=this;o.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}r(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i,r=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),s.name="d",r.appendChild(s),document.body.appendChild(r),this.form=r,this.area=s}function c(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(e)}catch(e){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),u(),e=e.replace(l,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,n){(function(t){var i,r,s=n(26),o=n(13),a=n(15),l=n(16),c=n(37),u=n(17)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=n(75)}catch(e){}var h=i||r;function d(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(h=r),s.call(this,e)}e.exports=d,l(d,s),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new h(e,t):new h(e):new h(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(e){var n=this;this.writable=!1;for(var i=e.length,r=0,s=i;r<s;r++)!function(e){o.encodePacket(e,n.supportsBinary,(function(r){if(!n.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),n.perMessageDeflate)("string"==typeof r?t.byteLength(r):r.length)<n.perMessageDeflate.threshold&&(s.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(r):n.ws.send(r,s)}catch(e){u("websocket closed before onclose event")}--i||a()}))}(e[r]);function a(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},d.prototype.onClose=function(){s.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===d.prototype.name)}}).call(this,n(23).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}n.r(t),n.d(t,"GameConstants",(function(){return ce})),n.d(t,"Event",(function(){return me})),n.d(t,"Reactor",(function(){return ye})),n.d(t,"Grid",(function(){return _e})),n.d(t,"Snake",(function(){return Ye})),n.d(t,"GameGroup",(function(){return dt})),n.d(t,"GameUtils",(function(){return Ce})),n.d(t,"Position",(function(){return Te})),n.d(t,"GameEngine",(function(){return at})),n.d(t,"Game",(function(){return ut})),n.d(t,"GameController",(function(){return ve})),n.d(t,"GameControllerWorker",(function(){return je})),n.d(t,"GameControllerSocket",(function(){return mt})),n.d(t,"GameUI",(function(){return ot})),n.d(t,"OnlineClient",(function(){return yt}));var g={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},p=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.init(t,n)}return l(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||g,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,s({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),m=function(){function e(){o(this,e),this.observers={}}return l(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function y(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function v(e){return null==e?"":""+e}function E(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function k(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var s="string"!=typeof t?[].concat(t):t.split(".");s.length>1;){if(r())return{};var o=i(s.shift());!e[o]&&n&&(e[o]=new n),e=e[o]}return r()?{}:{obj:e,k:i(s.shift())}}function b(e,t,n){var i=k(e,t,Object);i.obj[i.k]=n}function S(e,t){var n=k(e,t),i=n.obj,r=n.k;if(i)return i[r]}function A(e,t,n){var i=S(e,n);return void 0!==i?i:S(t,n)}function w(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):w(e[i],t[i],n):e[i]=t[i]);return e}function C(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function I(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return T[e]})):e}var L="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,R=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return o(this,t),n=u(this,h(t).call(this)),L&&m.call(c(n)),n.data=e||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return f(t,e),l(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=[e,t];return n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split(".")),S(this.data,s)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var o=[e,t];n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(i=t,t=(o=e.split("."))[1]),this.addNamespaces(t),b(this.data,o,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var l=S(this.data,a)||{};i?w(l,n,r):l=s({},l,n),b(this.data,a,l),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?s({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(m),_={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var s=this;return e.forEach((function(e){s.processors[e]&&(t=s.processors[e].process(t,n,i,r))})),t}},x={},O=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,t),n=u(this,h(t).call(this)),L&&m.call(c(n)),E(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,c(n)),n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=p.create("translator"),n}return f(t,e),l(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:r};var o=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(r=o.shift()),e=o.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,n){var r=this;if("object"!==i(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],t),l=a.key,c=a.namespaces,u=c[c.length-1],h=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&"cimode"===h.toLowerCase()){if(d){var f=t.nsSeparator||this.options.nsSeparator;return u+f+l}return l}var g=this.resolve(e,t),p=g&&g.res,m=g&&g.usedKey||l,y=g&&g.exactUsedKey||l,v=Object.prototype.toString.apply(p),E=["[object Number]","[object Function]","[object RegExp]"],k=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,S="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(b&&p&&S&&E.indexOf(v)<0&&("string"!=typeof k||"[object Array]"!==v)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,p,t):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");if(o){var A="[object Array]"===v,w=A?[]:{},C=A?y:m;for(var T in p)if(Object.prototype.hasOwnProperty.call(p,T)){var I="".concat(C).concat(o).concat(T);w[T]=this.translate(I,s({},t,{joinArrays:!1,ns:c})),w[T]===I&&(w[T]=p[T])}p=w}}else if(b&&"string"==typeof k&&"[object Array]"===v)(p=p.join(k))&&(p=this.extendTranslation(p,e,t,n));else{var L=!1,R=!1;if(!this.isValidLookup(p)&&void 0!==t.defaultValue){if(L=!0,void 0!==t.count){var _=this.pluralResolver.getSuffix(h,t.count);p=t["defaultValue".concat(_)]}p||(p=t.defaultValue)}this.isValidLookup(p)||(R=!0,p=l);var x=t.defaultValue&&t.defaultValue!==p&&this.options.updateMissing;if(R||L||x){if(this.logger.log(x?"updateKey":"missingKey",h,u,l,x?t.defaultValue:p),o){var O=this.resolve(l,s({},t,{keySeparator:!1}));O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var P=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var B=0;B<D.length;B++)P.push(D[B]);else"all"===this.options.saveMissingTo?P=this.languageUtils.toResolveHierarchy(t.lng||this.language):P.push(t.lng||this.language);var M=function(e,n){r.options.missingKeyHandler?r.options.missingKeyHandler(e,u,n,x?t.defaultValue:p,x,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,u,n,x?t.defaultValue:p,x,t),r.emit("missingKey",e,u,n,p)};if(this.options.saveMissing){var F=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&F?P.forEach((function(e){r.pluralResolver.getPluralFormsOfKey(e,l).forEach((function(t){return M([e],t)}))})):M(P,l)}}p=this.extendTranslation(p,e,t,g,n),R&&p===l&&this.options.appendNamespaceToMissingKey&&(p="".concat(u,":").concat(l)),R&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(s({},n,{interpolation:s({},this.options.interpolation,n.interpolation)}));var a,l=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(l){var c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=s({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),l){var h=e.match(this.interpolator.nestingRegexp);a<(h&&h.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate.apply(o,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,f="string"==typeof d?[d]:d;return null!=e&&f&&f.length&&!1!==n.applyPostProcessor&&(e=_.handle(f,e,t,this.options&&this.options.postProcessPassResolved?s({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,s,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,a),c=l.key;n=c;var u=l.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,d=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,f=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);u.forEach((function(e){o.isValidLookup(t)||(s=e,!x["".concat(f[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(s)&&(x["".concat(f[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!o.isValidLookup(t)){r=n;var s,l,u=c,f=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(f,c,n,e,a);else h&&(s=o.pluralResolver.getSuffix(n,a.count)),h&&d&&f.push(u+s),d&&f.push(u+="".concat(o.options.contextSeparator).concat(a.context)),h&&f.push(u+=s);for(;l=f.pop();)o.isValidLookup(t)||(i=l,t=o.getResource(n,e,l,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:s}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}]),t}(m);function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}var D=function(){function e(t){o(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=p.create("languageUtils")}return l(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=P(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],s=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&s(n.formatLanguageCode(e))})),r}}]),e}(),B=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],M={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function F(){var e={};return B.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:M[t.fc]}}))})),e}var N=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.languageUtils=t,this.options=n,this.logger=p.create("pluralResolver"),this.rules=F()}return l(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,i=[],r=this.getRule(e);return r?(r.numbers.forEach((function(r){var s=n.getSuffix(e,r);i.push("".concat(t).concat(s))})),i):i}},{key:"getSuffix",value:function(e,t){var n=this,i=this.getRule(e);if(i){var r=i.noAbs?i.plurals(t):i.plurals(Math.abs(t)),s=i.numbers[r];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===s?s="plural":1===s&&(s=""));var o=function(){return n.options.prepend&&s.toString()?n.options.prepend+s.toString():s.toString()};return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?"_plural_".concat(s.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.logger=p.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return l(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:I,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?C(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?C(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?C(t.nestingPrefix):t.nestingPrefixEscaped||C("$t("),this.nestingSuffix=t.nestingSuffix?C(t.nestingSuffix):t.nestingSuffixEscaped||C(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,s,o,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(a.formatSeparator)<0){var r=A(t,l,e);return a.alwaysFormat?a.format(r,void 0,n):r}var s=e.split(a.formatSeparator),o=s.shift().trim(),c=s.join(a.formatSeparator).trim();return a.format(A(t,l,o),c,n,i)};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(o=0;r=t.regex.exec(e);){if(void 0===(s=u(r[1].trim())))if("function"==typeof h){var n=h(e,r,i);s="string"==typeof n?n:""}else{if(d){s=r[0];continue}a.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),s=""}else"string"==typeof s||a.useRawValueToEscape||(s=v(s));if(e=e.replace(r[0],t.safeValue(s)),t.regex.lastIndex=0,++o>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=s({},o);function l(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,a)).replace(/'/g,'"');try{a=JSON.parse(r),t&&(a=s({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(r)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var c=[],u=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var h=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=h.shift(),c=h,u=!0}if((i=t(l.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=v(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),u&&(i=c.reduce((function(e,t){return r.format(e,t,o.lng,o)}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();var H=function(e){function t(e,n,i){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,t),r=u(this,h(t).call(this)),L&&m.call(c(r)),r.backend=e,r.store=n,r.services=i,r.languageUtils=i.languageUtils,r.options=s,r.logger=p.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(i,s.backend,s),r}return f(t,e),l(t,[{key:"queueLoad",value:function(e,t,n,i){var r=this,s=[],o=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?o.indexOf(a)<0&&o.push(a):(r.state[a]=1,i=!1,o.indexOf(a)<0&&o.push(a),s.indexOf(a)<0&&s.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(s.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:i}),{toLoad:s,pending:o,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],s=i[1];t&&this.emit("failedLoading",r,s,t),n&&this.store.addResourceBundle(r,s,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var i,a,l,c,u,h;i=n.loaded,a=s,c=k(i,[r],Object),u=c.obj,h=c.k,u[h]=u[h]||[],l&&(u[h]=u[h].concat(a)),l||u[h].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*s,o)}),s):o(a,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(function(i,o){i&&t.logger.warn("".concat(n,"loading namespace ").concat(s," for language ").concat(r," failed"),i),!i&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(s," for language ").concat(r),o),t.loaded(e,i,o)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,s({},o,{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i))}}]),t}(m);function G(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===i(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===i(e[2])||"object"===i(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function z(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function V(){}var Y=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(o(this,t),e=u(this,h(t).call(this)),L&&m.call(c(e)),e.options=z(n),e.services={},e.logger=p,e.modules={external:[]},i&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,i),u(e,c(e));setTimeout((function(){e.init(n,i)}),0)}return e}return f(t,e),l(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function i(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=s({},G(),this.options,z(t)),this.format=this.options.interpolation.format,n||(n=V),!this.options.isClone){this.modules.logger?p.init(i(this.modules.logger),this.options):p.init(null,this.options);var r=new D(this.options);this.store=new R(this.options.resources,this.options);var o=this.services;o.logger=p,o.resourceStore=this.store,o.languageUtils=r,o.pluralResolver=new N(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new U(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new H(i(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(o.languageDetector=i(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=i(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new O(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var a=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];a.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=y(),u=function(){e.changeLanguage(e.options.lng,(function(t,i){e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(i),n(t,i)}))};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,i=n,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var s=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};if(r)o(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(s,this.options.ns,i)}else i(null)}},{key:"reloadResources",value:function(e,t,n){var i=y();return e||(e=this.languages),t||(t=this.options.ns),n||(n=V),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&_.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=y();this.emit("languageChanging",e);var r=function(e){var r="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);r&&(n.language||(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r)),n.translator.language||n.translator.changeLanguage(r),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(r)),n.loadResources(r,(function(e){!function(e,r){r?(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r),n.translator.changeLanguage(r),n.isLanguageChangingTo=void 0,n.emit("languageChanged",r),n.logger.log("languageChanged",r)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var o;if("object"!==i(r)){for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];o=n.options.overloadTranslationOptionHandler([t,r].concat(l))}else o=s({},r);return o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,n.t(t,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var o=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,o);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!o(i,e)||r&&!o(s,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=y();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=y();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,r=s({},this.options,n,{isClone:!0}),o=new t(r),a=["store","services","language"];return a.forEach((function(t){o[t]=e[t]})),o.services=s({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new O(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),t}(m)),W=[],j=W.forEach,K=W.slice;function q(e){return j.call(K.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var X,J=function(e,t,n,i){var r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/"};if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),r="; expires="+o.toUTCString()}else r="";i=i?"domain="+i+";":"",s=Object.keys(s).reduce((function(e,t){return e+";"+t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))+"="+s[t]}),""),document.cookie=e+"="+encodeURIComponent(t)+r+";"+i+s},Z=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},Q={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=Z(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&J(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},$={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("=");if(r>0)n[i].substring(0,r)===e.lookupQuerystring&&(t=n[i].substring(r+1))}return t}};try{X="undefined"!==window&&null!==window.localStorage;window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){X=!1}var ee,te={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&X){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&X&&window.localStorage.setItem(t.lookupLocalStorage,e)}};try{ee="undefined"!==window&&null!==window.sessionStorage;window.sessionStorage.setItem("i18next.translate.boo","foo"),window.sessionStorage.removeItem("i18next.translate.boo")}catch(e){ee=!1}var ne={name:"sessionStorage",lookup:function(e){var t;if(e.lookupsessionStorage&&ee){var n=window.sessionStorage.getItem(e.lookupsessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupsessionStorage&&ee&&window.sessionStorage.setItem(t.lookupsessionStorage,e)}},ie={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},re={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},se={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},oe={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}};var ae=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return l(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=q(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],checkWhitelist:!0,checkForSimilarInWhitelist:!1}),this.options.checkForSimilarInWhitelist&&(this.options.checkWhitelist=!0),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Q),this.addDetector($),this.addDetector(te),this.addDetector(ne),this.addDetector(ie),this.addDetector(re),this.addDetector(se),this.addDetector(oe)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n,i=[];if(e.forEach((function(e){if(t.detectors[e]){var n=t.detectors[e].lookup(t.options);n&&"string"==typeof n&&(n=[n]),n&&(i=i.concat(n))}})),i.forEach((function(e){if(!n){var i=t.services.languageUtils.formatLanguageCode(e);t.options.checkWhitelist&&!t.services.languageUtils.isWhitelisted(i)||(n=i),!n&&t.options.checkForSimilarInWhitelist&&(n=t.getSimilarInWhitelist(i))}})),!n){var r=this.i18nOptions.fallbackLng;"string"==typeof r&&(r=[r]),r||(r=[]),n="[object Array]"===Object.prototype.toString.apply(r)?r[0]:r[0]||r.default&&r.default[0]}return n}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}},{key:"getSimilarInWhitelist",value:function(e){var t=this;if(this.i18nOptions.whitelist){if(e.includes("-")){var n=e.split("-")[0],i=this.services.languageUtils.formatLanguageCode(n);if(this.services.languageUtils.isWhitelisted(i))return i;e=i}var r=this.i18nOptions.whitelist.find((function(n){var i=t.services.languageUtils.formatLanguageCode(n);if(i.startsWith(e))return i}));return r||void 0}}}]),e}();ae.type="languageDetector";var le=ae;Y.use(le).init({fallbackLng:["en","fr"],load:"languageOnly",detection:{order:["localStorage","querystring","navigator","htmlTag"],lookupQuerystring:"lng",lookupLocalStorage:"i18nextLng",caches:["localStorage"]}}),Y.addResourceBundle("fr","translation",{debugModeEnabled:"Mode de debug activé",lang:{fr:"Français",en:"English"},update:{updateAvailable:"Une mise à jour du jeu est disponible",version:"Version",of:"du",current:"Vous disposez actuellement de la version",versionDate:"{{date, DD/MM/YYYY}}",download:"Télécharger la mise à jour",getURL:"Obtenir l'adresse URL du téléchargement",getChanges:"Obtenir la liste des changements",URLToDownload:"Adresse URL menant au téléchargement :",noChanges:"Aucun changement renseigné.",changes:"Changements de la nouvelle version :"},menu:{selectGame:"Sélectionnez un mode de jeu :",soloAi:"IA solo",soloPlayer:"Joueur solo",playerVsAi:"Joueur VS IA",aiVsAi:"IA VS IA",battleRoyale:"Battle Royale",onlineBattleRoyale:"Battle Royale en ligne",levelsSoloPlayer:"Niveaux (joueur solo)",levelsSoloAI:"Niveaux (IA solo)",version:"Version",versionDate:"{{date, DD/MM/YYYY}}",by:"Par",infos:"Plus d'infos",readme:"Fichier Lisez-moi",source:"Télécharger la source",language:"Langue :",othersSettings:"Paramètres",enableAnimations:"Activer les animations",showDebugInfo:"Activer le mode de débogage",renderBlur:"Activer le rendu de flou",enableMultithreading:"Activer le multi-threading",onlineEnableClientSidePredictions:"Activer les prédictions côté client pour le jeu en ligne",settingNotAvailable:"Ce paramètre est actuellement indisponible.",multithreadingInfos:"Si activé, le moteur de jeu et le moteur graphique seront exécutés de manière indépendante ce qui améliorera les performances du jeu.",onlineEnableClientSidePredictionsInfos:"Si activé, les performances du mode de jeu en ligne seront plus stables. Fonctionnalité expérimentale.",textOutput:"Activer le rendu en mode texte",graphicSkin:"Skin graphique :",flat:"Flat (par défaut)",tropical:"Tropical",pixel:"Pixel",maxFPS:"FPS maximum :"},settings:{title:"Paramètres de la partie :",possibleFailInitGame:"Il est possible que l'initialisation de la partie échoue avec vos paramètres car il n'y aura pas assez d'espace pour placer tous les Snake. Dans ce cas, un message « Une erreur est survenue » peut s'afficher. Essayez avec d'autres paramètres.",gridSize:"Taille de la grille :",placeholderHeight:"Hauteur",placeholderWidth:"Largeur",invalidSize:"Cette valeur doit être comprise entre {{min}} et {{max}}",options:"Autres options :",borderWalls:"Entourer la grille de murs",generateWalls:"Générer des murs à des positions aléatoires",mazeGrid:"Générer un labyrinthe",sameGrid:"Partie sur la même grille",speed:"Vitesse du jeu :",speedSelect:{1:"1 – La plus rapide",3:"3 – Rapide",5:"5 – Moyenne",8:"8 – Normale",10:"10 – Assez lente",15:"15 – Lente",20:"20 – Très lente",25:"25 – Extrêmement lente",custom:"Vitesse personnalisée…"},invalidSpeed:"Cette valeur doit être comprise entre {{min}} et {{max}}",progressiveSpeed:"Augmenter la vitesse progressivement",customSpeed:"Vitesse personnalisée :",placeholderCustomSpeed:"Entrez la vitesse…",customSpeedHelp:"Plus le nombre est élevé, plus la vitesse du jeu est lente, et inversement",playerSettings:"Options du joueur :",aiAssistant:"Activer l'assistant IA",aiAssistantInfos:"En activant cette option, une IA tentera de corriger votre trajectoire si vous êtes sur le point de vous écraser sur un obstacle. Réduit la difficulté du jeu.",aiLevel:"Niveau de l'IA :",aiLevelSelect:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Élevé",ultra:"Ultra"},invalidaiLevel:"Cette valeur est invalide",autoRetry:"Faire que l'IA recommence auto sa partie après un Game Over",numberIA:"Nombre d'IA :",placeholderNumberIA:"Entrez le nombre…",invalidIANumber:"Cette valeur doit être comprise entre 2 et 100",battleAgainstAIs:"Jouer contre les IA",validate:"Valider",reset:"Réinitialiser",backToMenu:"Retour au menu",privateGame:"Garder la partie privée",enableAI:"Activer les IA",seedGrid:"Valeur aléatoire grille :",seedGame:"Valeur aléatoire jeu :",advancedSettings:"Paramètres avancés…",invalidValue:"Cette valeur est invalide."},game:{backToMenu:"Retour au menu",currentMode:"Mode de jeu actuel :",confirmQuit:"Êtes-vous sûr de vouloir retourner au menu ?",equalityPlayerVSAI:"Vous avez fini ex-aequo avec l'IA !",winPlayerVSAI:"Bravo, vous avez gagné !",losePlayerVSAI:"Dommage, l'IA vous a battu avec un score supérieur !",oneWinnerAIVSAI:"L'IA n°{{numWinner}} a gagné !",equalityAIVSAI:"Les deux IA ont fini ex-aequo !",oneWinnerBattleRoyale:"L'IA n°{{numWinner}} a gagné avec un score de {{score}} !",winnersBattleRoyale:"Les IA",winnerAIBattleRoyale:"L'IA",winnersNumBattleRoyale:"n°{{numWinner}}",andWinnersBattleRoyale:"et",andPlayerWinnersBattleRoyale:"ainsi que vous",winScoreBattleRoyale:"ont gagné avec un score de {{score}} !",winPlayerScoreBattleRoyale:"avez gagné avec un score de {{score}} !",playerWinnerBattleRoyale:"Vous avez gagné avec un score de {{score}} !"},levels:{default:"Niveaux par défaut",downloaded:"Niveaux téléchargés",titlePlayer:"Niveaux (joueur solo)",titleAI:"Niveaux (IA solo)",emptyList:"Aucun niveau trouvé…",download:"Télécharger des niveaux",downloadLink:"Les niveaux seront téléchargés depuis {{url}}",editDownloadURL:"Modifier l'URL de téléchargement",editDownloadURLPrompt:"Entrez l'URL de téléchargement des niveaux.\n* Variables disponibles :\n{player} - type de joueur (humain, IA)\n{appVersion} - version de l'application.\n\nLa modification de ce paramètre peut faire planter le jeu ou vous exposer à des problèmes de sécurité. Ne la modifiez que si vous savez ce que vous faites. Ce paramètre n'est pas persistant et sera effacé si vous rechargez l'application.",downloading:"Téléchargement en cours, veuillez patienter… Si le bouton reste grisé après plus de 10 secondes, cliquez sur le bouton ci-dessous pour le débloquer et réessayer le téléchargement :",buttonDeblock:"Débloquer le téléchargement",disabledLevel:"Niveau bloqué. Terminez les niveaux précédents pour le débloquer.",notCompatible:"Ce niveau n'est pas compatible avec cette version du jeu. Mettez-le à jour.",goalAchieved:"Objectif atteint ! Vous pouvez passer au prochain niveau.",goalNotAchieved:"Objectif raté ! Essayez à nouveau.",level:"Niveau",reachScore:"Atteignez au moins le score de {{value}} pour passer ce niveau !",reachScoreTime:"Atteignez le score de {{value}} en moins de {{count}} seconde !",reachScoreTime_plural:"Atteignez le score de {{value}} en moins de {{count}} secondes !",reachMaxScore:"Atteignez le score maximal pour cette grille pour passer ce niveau !",multiBestScore:"Terminez cette partie en obtenant un meilleur score que l'adversaire pour passer ce niveau !",multiBestScore_plural:"Terminez cette partie en obtenant un meilleur score que les adversaires pour passer ce niveau !",multiReachScoreFirst:"Atteignez le score de {{value}} avant l'adversaire pour passer ce niveau !",multiReachScoreFirst_plural:"Atteignez le score de {{value}} avant les adversaires pour passer ce niveau !",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour passer ce niveau.\nLe Snake n'avance pas automatiquement.",bestScore:"Meilleur score : {{count}}",bestTime:"Meilleur temps : {{count}} seconde",bestTime_plural:"Meilleur temps : {{count}} secondes",bestScoreShort:"× {{count}}",bestTimeShort:"{{count}} seconde",bestTimeShort_plural:"{{count}} secondes",timerRemaining:"Il reste {{count}} seconde",timerRemaining_plural:"Il reste {{count}} secondes",localstorageDisabled:"Les cookies sont désactivés sur votre navigateur. Vous perdrez votre progression au prochain rechargement de la page. Activez-les puis rechargez la page pour éviter cela.",difficulty:"Difficulté :",levelBonusShop:"Boutique des bonus",displayBonusShop:"Afficher la boutique…",bonusNotApplicable:"Ce bonus n'est pas applicable.",notEnoughFruits:"Vous n'avez pas assez de crédit pour acheter ce bonus.",bonusAlreadyEquipped:"Vous êtes déjà équipé d'un bonus. Utilisez-le en jouant à un niveau ou vendez-le.",bonusEquipped:"Bonus équipé :",none:"aucun",sellBonus:"Vendre le bonus",bonus:{passLevel:"Passer un niveau",passLevelInfo:"Ce bonus vous permet de passer un niveau. Achetez-le, puis sélectionnez un niveau : celui-ci sera automatiquement passé, comme si vous l'aviez réussi.",aiAssistant:"Mode assistant IA",aiAssistantInfo:"Ce bonus permet d'activer le mode assistant IA. Achetez-le, puis sélectionnez un niveau : le mode assistant IA sera activé. Ne fonctionne pas pour certains niveaux, comme les labyrinthes.",unlockAllLevels:"Débloquer tous les niveaux",unlockAllLevelsInfo:"Ce bonus vous permet de débloquer tous les niveaux, qu'ils soient présents ou futurs.",increaseGoldFruits:"Augmenter la fréquence d'apparition des pommes dorées",increaseGoldFruitsInfo:"Ce bonus vous permet d'augmenter la fréquence d'apparition des pommes dorées : la chance d'apparition passe de 1 chance sur 100 à 1 chance sur 3.",destroyAis:"Détruire les IAs adverses",destroyAisInfo:"Ce bonus vous permet de détruire les IAs adverses, ce qui rend les niveaux contenant des IAs plus faciles.",unknown:"Bonus inconnu",unknownInfo:"Ce bonus est inconnu. Peut-être a-t-il été acheté sur une version plus récente du jeu. Voulez-vous le vendre quand même, sachant que son prix est inconnu ? Autrement dit, vous ne serez pas remboursé.",noTimeLimit:"Pas de limite de temps",noTimeLimitInfo:"Désactive la limite de temps pour les niveaux qui en ont une."}},servers:{serverList:"Liste des serveurs",selectInfo:"Sélectionnez un serveur :",noServerFound:"Aucun serveur trouvé…",loadingList:"Chargement de la liste des serveurs… Veuillez patienter.",noRoomound:"Aucune salle trouvée…",infos:"{{width}}×{{height}} – Vitesse : {{speed}}",infosBorderWalls:"Grille entourée de murs",infosGenerateWalls:"Murs générés aléatoirement",infosPlayers:"{{count}} joueur/{{max}}",infosPlayers_plural:"{{count}} joueurs/{{max}}",infosSpectators:"{{count}} spectateur",infosSpectators_plural:"{{count}} spectateurs",backToList:"Retour à la liste des serveurs",roomsListTitle:"Liste des salles",roomsListInfos:"Sélectionnez une salle :",loadingRooms:"Chargement de la liste des salles… Veuillez patienter.",createRoom:"Créer une salle",connectionError:"Une erreur est survenue lors de la connexion au serveur. Veuillez réessayer.",errorLoadingRooms:"Une erreur est survenue lors du chargement de la liste des salles. Veuillez réessayer.",creatingRoom:"Création de la salle… Veuillez patienter.",room:"Salle n°{{number}}",errorRoomCreation:"Une erreur est survenue lors de la création de la salle. Veuillez réessayer.",joinPrivateRoom:"Rejoindre une salle privée",enterCode:"Entrez le code de la salle :",customServer:"Serveur personnalisé…",enterCustomServer:"Entrez l'adresse du serveur :",connectingToServer:"Connexion au serveur… Veuillez patienter.",cancel:"Annuler",refreshRooms:"Actualiser la liste",joinRoom:"Connexion à la salle… Veuillez patienter.",errorRoomJoin:"Une erreur est survenue lors de la connexion à la salle. Veuillez réessayer.",errorReason:"Raison de l'erreur :",errorReason_unknown:"Inconnue",errorRoomJoinReason_roomNotFound:"La salle n'a pas été trouvée.",errorRoomJoinReason_roomAlreadyJoined:"Vous avez déjà rejoint cette salle.",errorRoomCreationReason_maxRoomLimitReached:"Le nombre maximal de salles que le serveur peut gérer a été atteint.",errorRoomCreationReason_invalidSettings:"Paramètres invalides.",errorRoomCreationReason_alreadyCreatedRoom:"Vous avez déjà créé une salle ou vous avez déjà rejoint une salle.",errorServerVersion:"La version de ce serveur ({{server_version}}) est différente de votre version du jeu ({{client_version}}). Vous risquez de rencontrer des problèmes.",addressLabel:"Adresse du serveur :",roomCode:"Code de la salle :",untitled:"Sans titre",searchingPlayers:"(recherche de joueurs)",started:"(partie démarrée)",starting:"(démarrage en cours)",authenticationServer:"Authentification au serveur",linkAuthenticationServer:"Si le formulaire ne s'affiche pas, cliquez ici",disconnectedError:"Vous avez été déconnecté du serveur. Veuillez réessayer."}},!0,!1),Y.addResourceBundle("en","translation",{debugModeEnabled:"Debug mode enabled",lang:{fr:"Français",en:"English"},update:{updateAvailable:"An update of the game is available",version:"Version",of:"of",current:"You currently have the version",versionDate:"{{date, MM/DD/YYYY}}",download:"Download the update",getURL:"Get the URL to the download",getChanges:"Get the list of changes",URLToDownload:"Download URL:",noChanges:"No change provided.",changes:"Changes in the new version:"},menu:{selectGame:"Select a game mode:",soloAi:"Single AI",soloPlayer:"Single player",playerVsAi:"Player VS AI",aiVsAi:"AI VS AI",battleRoyale:"Battle Royale",onlineBattleRoyale:"Online Battle Royale",levelsSoloPlayer:"Levels (single player)",levelsSoloAI:"Levels (single AI)",version:"Version",versionDate:"{{date, MM/DD/YYYY}}",by:"By",infos:"More informations",readme:"Readme file",source:"Download the source",language:"Language:",othersSettings:"Settings",enableAnimations:"Enable the animations",showDebugInfo:"Enable the debug mode",renderBlur:"Enable the blur rendering",enableMultithreading:"Enable the multithreading",onlineEnableClientSidePredictions:"Enable the client-side predictions for online game",settingNotAvailable:"This setting is currently unavailable.",multithreadingInfos:"If enabled, the game engine and the graphics engine will run independently which will improve game performance.",onlineEnableClientSidePredictionsInfos:"If enabled, the performance of the online game mode will be more stable. Experimental functionality.",textOutput:"Enable the text mode rendering",graphicSkin:"Graphic skin:",flat:"Flat (by default)",tropical:"Tropical",pixel:"Pixel",maxFPS:"Maximum FPS:"},settings:{title:"Game settings:",possibleFailInitGame:'It\'s possible that the initialization of the game fails with your settings because there will not be enough space to place all the Snake. In this case, a message "An error has occurred" may be displayed. Try with other settings.',gridSize:"Grid size:",placeholderHeight:"Height",placeholderWidth:"Width",invalidSize:"This value must be between {{min}} and {{max}}",options:"Others options:",borderWalls:"Surround the grid with walls",generateWalls:"Generate walls at random positions",mazeGrid:"Generate a maze",sameGrid:"Game on the same grid",speed:"Speed:",speedSelect:{1:"1 – Fastest",3:"3 – Fast",5:"5 – Medium",8:"8 – Normal",10:"10 – Quite slow",15:"15 – Slow",20:"20 – Very slow",25:"25 – Extremely slow",custom:"Custom speed…"},invalidSpeed:"This value must be between {{min}} and {{max}}",progressiveSpeed:"Increase the speed progressively",customSpeed:"Custom speed:",placeholderCustomSpeed:"Enter the speed…",customSpeedHelp:"The higher the number, the slower the game speed, and vice versa",playerSettings:"Player options:",aiAssistant:"Enable the AI assistant",aiAssistantInfos:"By enabling this option, an AI ​​will try to correct your trajectory if you are about to crash into an obstacle. Reduces the difficulty of the game.",aiLevel:"AI level:",aiLevelSelect:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},invalidaiLevel:"This value is invalid",autoRetry:"Make the AI restarts its game after a Game Over",numberIA:"Number of AI:",placeholderNumberIA:"Enter the number…",invalidIANumber:"This value must be between 2 and 100",battleAgainstAIs:"Play against AIs",validate:"Validate",reset:"Reset",backToMenu:"Back to the menu",privateGame:"Keep the game private",enableAI:"Enable the AIs",seedGrid:"Grid random value:",seedGame:"Game random value:",advancedSettings:"Advanced settings…",invalidValue:"This value is invalid."},game:{backToMenu:"Back to the menu",currentMode:"Current game mode:",confirmQuit:"Are you sure that you want to go back to the menu?",equalityPlayerVSAI:"You finished tied with AI!",winPlayerVSAI:"Congratulations, you won!",losePlayerVSAI:"Too bad, the AI ​​beat you with a higher score!",oneWinnerAIVSAI:"The AI n°{{numWinner}} won!",equalityAIVSAI:"The two AIs finished tied!",oneWinnerBattleRoyale:"The AI n°{{numWinner}} won with a score of {{score}}!",winnersBattleRoyale:"The AIs",winnerAIBattleRoyale:"The AI",winnersNumBattleRoyale:"n°{{numWinner}}",andWinnersBattleRoyale:"and",andPlayerWinnersBattleRoyale:"as well as you",winScoreBattleRoyale:"won with a score of {{score}}!",winPlayerScoreBattleRoyale:"won with a score of {{score}}!",playerWinnerBattleRoyale:"You won with a score of {{score}}!"},levels:{default:"Default levels",downloaded:"Downloaded levels",titlePlayer:"Levels (single player)",titleAI:"Levels (single AI)",emptyList:"No level found…",download:"Download levels",downloadLink:"The levels will be downloaded from {{url}}",editDownloadURL:"Edit the download URL",editDownloadURLPrompt:"Enter the download URL of the levels.\n* Available variables:\n{player} - player type (human, AI)\n{appVersion} - version of the application.\n\nChanging this setting may cause the game to crash or expose you to security issues. Only change it if you know what you are doing. This setting is not persistent and will be erased if you reload the application.",downloading:"Downloading, please wait… If the button remains gray after more than 10 seconds, click on the button below to unblock and try again:",buttonDeblock:"Unlock the download",disabledLevel:"Level locked. Complete the previous levels to unlock it.",notCompatible:"This level is not compatible with this version of the game. Update it.",goalAchieved:"Goal achieved! You can move to the next level.",goalNotAchieved:"Goal missed! Try again.",level:"Level",reachScore:"Reach at least the score of {{value}} to pass this level!",reachScoreTime:"Reach the score of {{value}} in less than {{count}} second!",reachScoreTime_plural:"Reach the score of {{value}} in less than {{count}} seconds!",reachMaxScore:"Reach the maximum score for this grid to pass this level!",multiBestScore:"Finish this game by getting a better score than the opponent to pass this level!",multiBestScore_plural:"Finish this game by getting a better score than the opponents to pass this level!",multiReachScoreFirst:"Reach the score of {{value}} before the opponent to pass this level!",multiReachScoreFirst_plural:"Reach the score of {{value}} before the opponents to pass this level!",mazeMode:"Maze mode! Find the path to the apple to pass this level.\nThe Snake doesn't move automatically.",bestScore:"Best score: {{count}}",bestTime:"Best time: {{count}} second",bestTime_plural:"Best time: {{count}} seconds",timerRemaining:"{{count}} second left",timerRemaining_plural:"{{count}} seconds left",bestScoreShort:"× {{count}}",bestTimeShort:"{{count}} second",bestTimeShort_plural:"{{count}} seconds",localstorageDisabled:"Cookies are disabled on your browser. You will lose your progress the next time you reload the page. Activate them and reload the page to avoid this.",difficulty:"Difficulty :",levelBonusShop:"Bonus shop",displayBonusShop:"Display the shop…",bonusNotApplicable:"This bonus is not applicable.",notEnoughFruits:"You don't have enough credit to buy this bonus.",bonusAlreadyEquipped:"You are already equipped with a bonus. Use it while playing a level or sell it.",bonusEquipped:"Equipped bonus:",none:"none",sellBonus:"Sell the bonus",bonus:{passLevel:"Pass a level",passLevelInfo:"This bonus allows you to pass a level. Buy it, then select a level: it will be automatically passed, as if you had succeeded it.",aiAssistant:"Assistant AI mode",aiAssistantInfo:"This bonus enables the AI ​​assistant mode to be activated. Buy it, then select a level: AI assistant mode will be activated. Does not work for some levels, like mazes.",unlockAllLevels:"Unlock all levels",unlockAllLevelsInfo:"This bonus allows you to unlock all levels, whether present or future.",increaseGoldFruits:"Increase the frequency of appearance of golden apples",increaseGoldFruitsInfo:"This bonus allows you to increase the frequency of appearance of golden apples: the chance of appearing is reduced from 1 in 100 to 1 in 3.",destroyAis:"Destroy opponent AIs",destroyAisInfo:"This bonus allows you to destroy enemy AIs, which makes levels with AIs easier.",unknown:"Unknown bonus",unknownInfo:"This bonus is unknown. Perhaps it was purchased on a newer version of the game. Do you want to sell it anyway, knowing that its price is unknown? In other words, you will not be refunded.",noTimeLimit:"No time limit",noTimeLimitInfo:"Disables the time limit for levels that have one."}},servers:{serverList:"Servers list",selectInfo:"Select a server:",noServerFound:"No server found…",loadingList:"Loading servers list… Please wait.",noRoomound:"No room found…",infos:"{{width}}×{{height}} – Speed: {{speed}}",infosBorderWalls:"Grid bordered by walls",infosGenerateWalls:"Random walls",infosPlayers:"{{count}} player/{{max}}",infosPlayers_plural:"{{count}} players/{{max}}",infosSpectators:"{{count}} spectator",infosSpectators_plural:"{{count}} spectators",backToList:"Back to the servers list",roomsListTitle:"Rooms list",roomsListInfos:"Select a room:",loadingRooms:"Loading the rooms list… Please wait.",createRoom:"Create a room",connectionError:"An error has occurred when connecting to the server. Please retry.",errorLoadingRooms:"An error has occurred when loading the rooms list. Please retry.",creatingRoom:"Creating the room… Please wait.",room:"Room n°{{number}}",errorRoomCreation:"An error has occurred when creating the room. Please retry.",joinPrivateRoom:"Join a private room",enterCode:"Enter the code of the room:",customServer:"Custom server…",enterCustomServer:"Enter the address of the server:",connectingToServer:"Connecting to the server… Please wait.",cancel:"Cancel",refreshRooms:"Refresh the list",joinRoom:"Joining the room… Please wait.",errorRoomJoin:"An error has occurred when joining the room. Please retry.",errorReason:"Error reason:",errorReason_unknown:"Unknown",errorRoomJoinReason_roomNotFound:"The room was not found.",errorRoomJoinReason_roomAlreadyJoined:"You already joined this room.",errorRoomCreationReason_maxRoomLimitReached:"The maximum number of rooms the server can manage has been reached.",errorRoomCreationReason_invalidSettings:"Invalid settings.",errorRoomCreationReason_alreadyCreatedRoom:"You have already created a room or you have already joined a room.",errorServerVersion:"This server version ({{server_version}}) is different from your version of the game ({{client_version}}). You may encounter issues.",addressLabel:"Server address:",roomCode:"Room code:",untitled:"Untitled",searchingPlayers:"(searching players)",started:"(game started)",starting:"(game starting)",authenticationServer:"Server authentication",linkAuthenticationServer:"If the form does not appear, click here",disconnectedError:"You have been disconnected from the server. Please retry."}},!0,!1),Y.addResourceBundle("fr","translation",{engine:{score:"Score",num:"n°",initFailed:"Échec de l'initialisation du jeu : le Snake est plus grand que la grille",continue:"Reprendre",reset:"Recommencer la partie",retryInit:"Réessayer",exit:"Quitter",yes:"Oui",no:"Non",ok:"OK",about:"À propos…",infosGame:"Infos partie",player:"Joueur :",playerHuman:"Vous",playerAI:"IA",aiLevel:"Niveau de l'IA :",aiLevelList:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Élevé",ultra:"Ultra",custom:"Personnalisé",mock:"Mock"},sizeGrid:"Taille de la grille :",currentSpeed:"Vitesse actuelle :",progressiveSpeed:"Vitesse progressive",loading:"Chargement des ressources…",exited:"Cette partie a été définitivement quittée. En attente de la fin des autres parties…",error:"Une erreur est survenue !",errorLoading:"Une erreur est survenue lors du chargement des ressources. Vérifiez votre connexion Internet.",exitConfirm:"Êtes-vous sûr de vouloir quitter la partie ?",resetConfirm:"Êtes-vous sûr de vouloir recommencer la partie ?",scoreMax:"Score maximal atteint !",gameOver:"Game Over !",gameFinished:"Partie terminée !",pause:"Pause",playerMin:"J",aiMin:"IA",aboutScreen:{title:"SnakeIA par Eliastik",versionAndDate:"Version {{version}} ({{date, DD/MM/YYYY}})"},debug:{fps:"IPS :",frames:"Images :",ticks:"Tours :",speed:"Vit. :",paused:"En pause"},colors:{white:"Blanc",gray:"Gris",black:"Noir",red:"Rouge",brown:"Marron",orange:"Orange",yellow:"Jaune",green:"Vert",blue:"Bleu",purple:"Mauve",pink:"Rose"},colorPlayer:"Vous êtes le Snake\nen {{color}}",arrowPlayer:"Vous êtes le Snake\nindiqué par la\nflèche",ready:"Partez !",assistAI:"Assistant IA",exitFullScreen:"Quitter plein-écran",enterFullScreen:"Mode plein-écran",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour réussir la partie.\nLe Snake n'avance pas automatiquement.",mazeWin:"Bien joué !",mazeModeMin:"Mode labyrinthe",onlineMode:"Jeu en ligne",ranking:"Classement",infosGameAdvanced:"Avancé…",seedGrid:"Valeur aléatoire grille :",seedGame:"Valeur aléatoire jeu :",ping:"Ping :",aiStuck:"Toutes les IAs sont bloquées. La partie se terminera si les IAs restent bloquées.",servers:{errorConnection:"Une erreur est survenue lors de la connexion au serveur.",waitingPlayers:"En attente de joueurs…",gameStart:"Début de la partie\ndans",nextGameStart:"Prochaine partie\ndans",spectatorMode:"Mode spectateur",startGame:"Commencer la partie"},loadingWorker:"Chargement…",errorJSGameToolsConsole:"Une erreur fatale est survenue au niveau du moteur JSGameTools.",errorJSGameTools:":'(\nUne erreur fatale est survenue au niveau du moteur JSGameTools."}},!0,!1),Y.addResourceBundle("en","translation",{engine:{score:"Score",num:"n°",initFailed:"Game init failed: the Snake is bigger than the grid",continue:"Continue",reset:"Reset the game",retryInit:"Retry",exit:"Exit",yes:"Yes",no:"No",ok:"OK",about:"About…",infosGame:"Game infos",player:"Player:",playerHuman:"You",playerAI:"AI",aiLevel:"AI level:",aiLevelList:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra",custom:"Custom",mock:"Mock"},sizeGrid:"Grid size:",currentSpeed:"Current speed:",progressiveSpeed:"Progressive speed",loading:"Loading resources…",exited:"This game has been definitively exited. Waiting for the end of the other games…",error:"An error has occurred!",errorLoading:"An error occurred while loading resources. Check your Internet connection.",exitConfirm:"Are you sure that you want to exit the game?",resetConfirm:"Are you sure that you want to reset the game?",scoreMax:"Maximum score reached!",gameFinished:"Game finished!",gameOver:"Game Over!",pause:"Pause",playerMin:"P",aiMin:"AI",aboutScreen:{title:"SnakeIA by Eliastik",versionAndDate:"Version {{version}} ({{date, MM/DD/YYYY}})"},debug:{fps:"FPS:",frames:"Frames:",ticks:"Ticks:",speed:"Speed:",paused:"Paused"},colors:{white:"White",gray:"Gray",black:"Black",red:"Red",brown:"Brown",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"},colorPlayer:"You are the Snake\nin {{color}}",arrowPlayer:"You are the Snake\npointed by the\narrow",ready:"Go!",assistAI:"AI assistant",exitFullScreen:"Exit fullscreen",enterFullScreen:"Fullscreen mode",mazeMode:"Maze mode! Find the path to the apple to finish this game.\nThe Snake doesn't move automatically.",mazeWin:"Good game!",mazeModeMin:"Maze mode",onlineMode:"Online game",ranking:"Ranking",infosGameAdvanced:"Advanced…",seedGrid:"Grid random value:",seedGame:"Game random value:",ping:"Ping:",aiStuck:"All the AIs are stuck. The game will end if the AIs remain stuck.",servers:{errorConnection:"An error has occurred when connecting to the server.",waitingPlayers:"Waiting for players…",gameStart:"Start of the game\nin",nextGameStart:"Next game\nin",spectatorMode:"Spectator mode",startGame:"Start the game"},loadingWorker:"Loading…",errorJSGameToolsConsole:"A fatal error has occurred at the JSGameTools engine level.",errorJSGameTools:":'(\nA fatal error has occurred at the JSGameTools engine level."}},!0,!1);var ce={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6,CROSSED:7},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA",CUSTOM:"AI_LEVEL_CUSTOM",MOCK:"AI_LEVEL_MOCK"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","×"],APP_VERSION:"2.2",DATE_VERSION:"10/18/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50,INFO_NOTIF_COLOR:"rgba(52, 152, 219, 0.5)",ERROR_NOTIF_COLOR:"rgba(231, 76, 60, 0.5)"},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},Error:{ROOM_NOT_FOUND:"ROOM_NOT_FOUND",ROOM_ALREADY_JOINED:"ROOM_ALREADY_JOINED",INVALID_SETTINGS:"INVALID_SETTINGS",MAX_ROOM_LIMIT_REACHED:"MAX_ROOM_LIMIT_REACHED",AUTHENTICATION_REQUIRED:"AUTHENTICATION_REQUIRED",ALREADY_CREATED_ROOM:"ALREADY_CREATED_ROOM",BANNED:"BANNED",DISCONNECTED:"DISCONNECTED"},GameState:{STARTING:"STARTING",STARTED:"STARTED",SEARCHING_PLAYERS:"SEARCHING_PLAYERS",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS"}},ue=n(9),he=n.n(ue),de=n(1),fe=n.n(de),ge=n(2),pe=n.n(ge),me=function(){function e(t){fe()(this,e),this.name=t,this.callbacks=[]}return pe()(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}}]),e}(),ye=function(){function e(){fe()(this,e),this.events={}}return pe()(e,[{key:"registerEvent",value:function(e){this.events[e]=new me(e)}},{key:"dispatchEvent",value:function(e,t){for(var n=this.events[e].callbacks,i=0,r=n.length;i<r;i++)n[i](t)}},{key:"addEventListener",value:function(e,t){this.events[e].registerCallback(t)}}]),e}(),ve=function(){function e(t,n){fe()(this,e),this.gameUI=n,this.gameEngine=t,this.grid=null,this.snakes=null,this.lastKey=-1,this.paused=!1,this.isReseted=!1,this.exited=!1,this.gameOver=!1,this.starting=!1,this.scoreMax=!1,this.gameFinished=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.currentPlayer=null,this.onlineMode=!1,this.reactor=new ye,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}return pe()(e,[{key:"init",value:function(){var e=this;this.update("init",{snakes:this.gameEngine.snakes,grid:this.gameEngine.grid,enablePause:this.gameEngine.enablePause,enableRetry:this.gameEngine.enableRetry,progressiveSpeed:this.gameEngine.progressiveSpeed,offsetFrame:this.gameEngine.speed*ce.Setting.TIME_MULTIPLIER,errorOccurred:this.gameEngine.errorOccurred}),this.gameEngine.onReset((function(){e.update("reset",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred,offsetFrame:e.gameEngine.speed*ce.Setting.TIME_MULTIPLIER,aiStuck:e.gameEngine.aiStuck,precAiStuck:!1}),e.reactor.dispatchEvent("onReset")})),this.gameEngine.onStart((function(){e.update("start",{snakes:e.gameEngine.snakes,grid:e.gameEngine.grid,starting:e.gameEngine.starting,countBeforePlay:e.gameEngine.countBeforePlay,paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStart")})),this.gameEngine.onPause((function(){e.update("pause",{paused:e.gameEngine.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onPause")})),this.gameEngine.onContinue((function(){e.update("continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onContinue")})),this.gameEngine.onStop((function(){e.update("stop",{paused:e.gameEngine.paused,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStop")})),this.gameEngine.onExit((function(){e.update("exit",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,exited:e.gameEngine.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onExit")})),this.gameEngine.onKill((function(){e.update("kill",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,killed:e.gameEngine.killed,snakes:e.gameEngine.snakes,gameFinished:e.gameEngine.gameFinished,grid:e.gameEngine.grid,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onKill")})),this.gameEngine.onScoreIncreased((function(){e.reactor.dispatchEvent("onScoreIncreased")})),this.gameEngine.onUpdate((function(){var t;e.update("update",(t={paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay},he()(t,"numFruit",e.gameEngine.numFruit),he()(t,"offsetFrame",0),he()(t,"errorOccurred",e.gameEngine.errorOccurred),he()(t,"aiStuck",e.gameEngine.aiStuck),t)),e.reactor.dispatchEvent("onUpdate")})),this.gameEngine.onUpdateCounter((function(){var t;e.update("updateCounter",(t={paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay},he()(t,"numFruit",e.gameEngine.numFruit),he()(t,"errorOccurred",e.gameEngine.errorOccurred),t)),e.reactor.dispatchEvent("onUpdateCounter")}))}},{key:"reset",value:function(){this.gameEngine.reset()}},{key:"start",value:function(){this.gameEngine.start()}},{key:"stop",value:function(){this.gameEngine.stop()}},{key:"finish",value:function(e){this.gameEngine.stop(e)}},{key:"pause",value:function(){this.gameEngine.pause()}},{key:"kill",value:function(){this.gameEngine.kill()}},{key:"tick",value:function(){this.gameEngine.paused=!1,this.gameEngine.countBeforePlay=-1,this.gameEngine.tick()}},{key:"exit",value:function(){this.gameEngine.exit()}},{key:"forceStart",value:function(){this.gameEngine.forceStart()}},{key:"updateEngine",value:function(e,t){this.gameEngine[e]=t}},{key:"setDisplayFPS",value:function(e){this.gameUI.setDisplayFPS(e)}},{key:"setNotification",value:function(e){this.gameUI.setNotification(e)}},{key:"closeRanking",value:function(){this.gameUI.gameRanking&&this.gameUI.gameRanking.forceClose()}},{key:"setTimeToDisplay",value:function(e){this.gameUI.setTimeToDisplay(e)}},{key:"setBestScore",value:function(e){this.gameUI.setBestScore(e)}},{key:"destroySnakes",value:function(e,t){this.gameEngine.destroySnakes(e,t)}},{key:"key",value:function(e){this.gameEngine.lastKey=e,this.lastKey=e;var t=this.snakes[this.getCurrentPlayer()];null!=t&&null!=t.lastKey&&(t.lastKey=e)}},{key:"getCurrentPlayer",value:function(){if(null!=this.snakes)for(var e=this.getNBPlayer(ce.PlayerType.HUMAN),t=this.getNBPlayer(ce.PlayerType.HYBRID_HUMAN_AI),n=0;n<this.snakes.length;n++)if(null==this.currentPlayer&&e<=1&&t<=1&&this.snakes[n]&&(this.snakes[n].player==ce.PlayerType.HUMAN||this.snakes[n].player==ce.PlayerType.HYBRID_HUMAN_AI)||this.currentPlayer==n+1)return n;return-1}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n]&&this.snakes[n].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i]&&this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null}},{key:"update",value:function(e,t,n){if(null!=this.gameUI&&null!=t){for(var i=Object.keys(t),r=0;r<i.length;r++)(!this.clientSidePredictionsMode&&!this.onlineMode||this.clientSidePredictionsMode&&("snakes"==i[r]||"grid"==i[r]||"offsetFrame"==i[r]||"gameOver"==i[r])&&(!this.onlineMode||this.onlineMode&&"errorOccurred"!=i[r])||!this.clientSidePredictionsMode&&this.onlineMode&&"errorOccurred"!=i[r])&&(Object.prototype.hasOwnProperty.call(this.gameUI,i[r])&&"function"!=typeof t[i[r]]&&"function"!=typeof this.gameUI[i[r]]&&(this.gameUI[i[r]]=t[i[r]]),n&&(t.snakes&&t.snakes[this.getCurrentPlayer()]&&(t.snakes[this.getCurrentPlayer()].lastKey=this.lastKey,this.lastKey=-1),t.grid&&(t.grid.rngGame=null,t.grid.rngGrid=null),this.updateEngine(i[r],t[i[r]])),Object.prototype.hasOwnProperty.call(this,i[r])&&"function"!=typeof t[i[r]]&&"function"!=typeof this[i[r]]&&(this[i[r]]=t[i[r]]));t.hasOwnProperty("killed")&&t.killed&&this.gameUI&&this.gameUI.setKill&&this.gameUI.setKill()}}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}}]),e}(),Ee=n(4),ke=n.n(Ee),be=n(5),Se=n.n(be),Ae=n(3),we=n.n(Ae),Ce={randRange:function(e,t,n){return Math.floor((n?n():Math.random())*(t-e+1))+e},addHue:function(e,t){var n=e+t;return n>360?n-360:n<0?360+n:n},shuffle:function(e,t){for(var n,i,r=e.length-1;r>0;r--)n=Math.floor((t?t():Math.random())*(r+1)),i=e[r],e[r]=e[n],e[n]=i;return e},millisecondsFormat:function(e){return e/=1e3,("0"+Math.trunc(e/60)).slice(-2)+":"+("0"+Math.trunc(e%60)).slice(-2)},secondsFormat:function(e){return this.millisecondsFormat(1e3*e)}},Te=function(){function e(t,n,i){fe()(this,e),this.x=t,this.y=n,this.direction=i}return pe()(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.direction)}},{key:"convertToKeyDirection",value:function(){switch(this.direction){case ce.Direction.UP:return ce.Key.UP;case ce.Direction.RIGHT:return ce.Key.RIGHT;case ce.Direction.LEFT:return ce.Key.LEFT;case ce.Direction.BOTTOM:return ce.Key.BOTTOM;default:return this.direction}}},{key:"convertToSimpleDirection",value:function(){switch(this.direction){case ce.Key.UP:return ce.Direction.UP;case ce.Key.RIGHT:return ce.Direction.RIGHT;case ce.Key.LEFT:return ce.Direction.LEFT;case ce.Key.BOTTOM:return ce.Direction.BOTTOM;default:return this.direction}}},{key:"equals",value:function(e){return null!=e&&(this.x==e.x&&this.y==e.y)}}]),e}(),Ie=n(8),Le=n.n(Ie),Re=n(18),_e=function(){function e(t,n,i,r,s,o,a,l,c,u){fe()(this,e),this.width=null==t?20:t,this.height=null==n?20:n,this.generateWalls=null!=i&&i,this.borderWalls=null!=r&&r,this.maze=null!=s&&s,this.mazeFirstPosition=new Te(1,1,ce.Direction.RIGHT),this.mazeForceAuto=null!=a&&a,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.customGrid=o,this.seedGrid=l?""+parseInt(l):void 0,this.seedGame=l?""+parseInt(c):void 0,this.rngGrid,this.rngGame,this.probGoldFruitIncrease=null!=u&&u}return pe()(e,[{key:"init",value:function(){if(null!=this.customGrid||null!=this.initialGrid){var e;e=null!=this.initialGrid?this.initialGrid:this.customGrid,this.height=e.length,this.width=e[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var t=0;t<this.height;t++)this.initialGrid[t]=e[t].slice(),this.grid[t]=e[t].slice()}else{this.grid=new Array(this.height);for(var n=0;n<this.height;n++){this.grid[n]=new Array(this.width);for(var i=0;i<this.width;i++)this.borderWalls&&(0==n||n==this.height-1||0==i||i==this.width-1)||this.generateWalls&&this.rngGrid&&this.rngGrid()>.65||this.maze?this.grid[n][i]=ce.CaseType.WALL:this.grid[n][i]=ce.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null}},{key:"reset",value:function(){this.grid=void 0,this.initialGrid=void 0,this.fruitPos=void 0,this.fruitPosGold=void 0,this.rngGrid=new Le.a(this.seedGrid),this.rngGame=new Le.a(this.seedGame)}},{key:"fixWalls",value:function(e){var t,n,i,r;e?(t=1,i=this.height-1,n=1,r=this.width-1):(t=0,i=this.height,n=0,r=this.width);for(var s=t;s<i;s++)for(var o=n;o<r;o++){var a=new Te(o,s),l=this.getNextPosition(a,ce.Direction.UP),c=this.getNextPosition(l,ce.Direction.LEFT),u=this.getNextPosition(l,ce.Direction.RIGHT),h=this.getNextPosition(a,ce.Direction.BOTTOM),d=this.getNextPosition(h,ce.Direction.LEFT),f=this.getNextPosition(h,ce.Direction.RIGHT);this.get(c)!=ce.CaseType.WALL&&this.get(u)!=ce.CaseType.WALL&&this.get(d)!=ce.CaseType.WALL&&this.get(f)!=ce.CaseType.WALL||this.set(ce.CaseType.EMPTY,a)}}},{key:"maze_recursion",value:function(e,t){for(var n=Ce.shuffle([ce.Direction.UP,ce.Direction.RIGHT,ce.Direction.BOTTOM,ce.Direction.LEFT],this.rngGrid),i=0;i<n.length;i++)switch(n[i]){case ce.Direction.UP:if(e-2<=0)continue;this.get(new Te(t,e-2))!=ce.CaseType.EMPTY&&(this.set(ce.CaseType.EMPTY,new Te(t,e-2)),this.set(ce.CaseType.EMPTY,new Te(t,e-1)),this.maze_recursion(e-2,t));break;case ce.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new Te(t+2,e))!=ce.CaseType.EMPTY&&(this.set(ce.CaseType.EMPTY,new Te(t+2,e)),this.set(ce.CaseType.EMPTY,new Te(t+1,e)),this.maze_recursion(e,t+2));break;case ce.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new Te(t,e+2))!=ce.CaseType.EMPTY&&(this.set(ce.CaseType.EMPTY,new Te(t,e+2)),this.set(ce.CaseType.EMPTY,new Te(t,e+1)),this.maze_recursion(e+2,t));break;case ce.Direction.LEFT:if(t-2<=0)continue;this.get(new Te(t-2,e))!=ce.CaseType.EMPTY&&(this.set(ce.CaseType.EMPTY,new Te(t-2,e)),this.set(ce.CaseType.EMPTY,new Te(t-1,e)),this.maze_recursion(e,t-2))}}},{key:"generateMaze",value:function(){this.mazeFirstPosition=new Te(1,1,ce.Direction.RIGHT),this.set(ce.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)}},{key:"set",value:function(e,t){this.grid[t.y][t.x]=e}},{key:"get",value:function(e){return this.grid[e.y][e.x]}},{key:"valToChar",value:function(e){switch(e){case ce.CaseType.EMPTY:return"-";case ce.CaseType.SNAKE:return"o";case ce.CaseType.SNAKE_DEAD:return"O";case ce.CaseType.FRUIT:return"x";case ce.CaseType.WALL:return"#";case ce.CaseType.SURROUNDED:return"/";case ce.CaseType.FRUIT_GOLD:return"X"}}},{key:"getImageCase",value:function(e){switch(this.get(e)){case ce.CaseType.WALL:return"wall.png";case ce.CaseType.FRUIT:return"fruit.png";case ce.CaseType.FRUIT_GOLD:return"fruit_gold.png";case ce.CaseType.EMPTY:case ce.CaseType.SNAKE:case ce.CaseType.SNAKE_DEAD:case ce.CaseType.SURROUNDED:case ce.CaseType.CROSSED:return""}return"unknown.png"}},{key:"getGraph",value:function(e){for(var t=new Array(this.height),n=0;n<this.height;n++){t[n]=new Array(this.width);for(var i=0;i<this.width;i++){var r=new Te(i,n);e&&this.get(r)==ce.CaseType.SNAKE?t[n][i]=0:this.isDeadPosition(r)?t[n][i]=1:t[n][i]=0}}return t}},{key:"getRandomPosition",value:function(){return new Te(Ce.randRange(0,this.width-1,this.rngGame),Ce.randRange(0,this.height-1,this.rngGame))}},{key:"setFruit",value:function(e,t){var n,i,r=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=ce.CaseType.FRUIT||this.set(ce.CaseType.EMPTY,this.fruitPos),!(this.getTotal(ce.CaseType.EMPTY)>0))return!!(this.getTotal(ce.CaseType.EMPTY)<=0&&this.fruitPosGold);do{if(n=this.getRandomPosition(),(i=this.detectCorridor(n))&&this.get(n)==ce.CaseType.EMPTY&&this.set(ce.CaseType.SURROUNDED,n),this.getTotal(ce.CaseType.EMPTY)<=0)return!!this.fruitPosGold}while(this.get(n)!=ce.CaseType.EMPTY||this.isFruitSurrounded(n,!0)||this.maze&&!this.testFruitMaze(n,r)||i);return t?(this.fruitPosGold=n,this.set(ce.CaseType.FRUIT_GOLD,n)):(this.fruitPos=n,this.set(ce.CaseType.FRUIT,n)),this.maze||null!=this.fruitPosGold||1!=Ce.randRange(1,this.probGoldFruitIncrease?3:e>1?ce.Setting.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:ce.Setting.PROB_GOLD_FRUIT_1_PLAYER,this.rngGame)||this.setFruit(e,!0),!0}},{key:"testFruitMaze",value:function(e,t){var n=this.getGraph(!0);return new Re.Astar.Configuration(n,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:function(e,t){return 1==t?null:1}}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(ce.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)}},{key:"isCaseSurrounded",value:function(e,t,n,i){if(!e)return!1;for(var r=JSON.parse(JSON.stringify(this.grid)),s=[e];s.length>0;){var o=s[0];s.shift();for(var a=[this.getNextPosition(o,ce.Direction.UP),this.getNextPosition(o,ce.Direction.BOTTOM),this.getNextPosition(o,ce.Direction.LEFT),this.getNextPosition(o,ce.Direction.RIGHT)],l=0;l<a.length;l++)if(r[a[l].y][a[l].x]!=ce.CaseType.CROSSED&&i.indexOf(this.get(a[l]))>-1){if(s.push(a[l]),n.indexOf(this.get(a[l]))>-1)return!1;t&&this.get(a[l])==ce.CaseType.EMPTY?(this.set(ce.CaseType.SURROUNDED,a[l]),r[a[l].y][a[l].x]=ce.CaseType.SURROUNDED):r[a[l].y][a[l].x]=ce.CaseType.CROSSED}}return(t&&(this.get(e)==ce.CaseType.EMPTY||this.get(e)==ce.CaseType.FRUIT)||this.get(e)==ce.CaseType.FRUIT_GOLD)&&this.set(ce.CaseType.SURROUNDED,e),!0}},{key:"isFruitSurrounded",value:function(e,t){var n=this.isCaseSurrounded(e,!1,[ce.CaseType.SNAKE],[ce.CaseType.EMPTY,ce.CaseType.SNAKE]);return n&&t&&this.isCaseSurrounded(e,!0,[ce.CaseType.SNAKE],[ce.CaseType.EMPTY,ce.CaseType.SNAKE]),n}},{key:"detectCorridor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.grid?JSON.parse(JSON.stringify(this.grid)):null;if(this.maze||!e||!t)return!1;var n=this.getNextPosition(e,ce.Direction.TOP),i=this.getNextPosition(e,ce.Direction.BOTTOM),r=this.getNextPosition(e,ce.Direction.RIGHT),s=this.getNextPosition(e,ce.Direction.LEFT),o=this.isDeadPosition(n,!0,!0),a=this.isDeadPosition(i,!0,!0),l=this.isDeadPosition(r,!0,!0),c=this.isDeadPosition(s,!0,!0),u=o+a+l+c;if(u<=1||this.isDeadPosition(e,!0))return!1;if(u>=3)return!0;t[e.y][e.x]=ce.CaseType.CROSSED;var h=t[n.y][n.x]!=ce.CaseType.CROSSED&&this.detectCorridor(n,t),d=t[i.y][i.x]!=ce.CaseType.CROSSED&&this.detectCorridor(i,t),f=t[s.y][s.x]!=ce.CaseType.CROSSED&&this.detectCorridor(s,t),g=t[r.y][r.x]!=ce.CaseType.CROSSED&&this.detectCorridor(r,t);return!!(d||h||f||g)}},{key:"getOnLine",value:function(e,t){for(var n=0,i=0;i<this.width;i++)this.get(new Te(i,t))==e&&n++;return n}},{key:"getTotal",value:function(e){for(var t=0,n=0;n<this.height;n++)t+=this.getOnLine(e,n);return t}},{key:"getNextPosition",value:function(e,t){var n=new Te(e.x,e.y,t);switch(t){case ce.Direction.LEFT:n.x--,n.direction=ce.Direction.LEFT;break;case ce.Direction.UP:n.y--,n.direction=ce.Direction.UP;break;case ce.Direction.RIGHT:n.x++,n.direction=ce.Direction.RIGHT;break;case ce.Direction.BOTTOM:n.y++,n.direction=ce.Direction.BOTTOM;break;case ce.Key.LEFT:n.x--,n.direction=ce.Key.LEFT;break;case ce.Key.UP:n.y--,n.direction=ce.Key.UP;break;case ce.Key.RIGHT:n.x++,n.direction=ce.Direction.RIGHT;break;case ce.Key.BOTTOM:n.y++,n.direction=ce.Direction.BOTTOM}return n.x<0?n.x=this.width-1:n.x>=this.width&&(n.x=0),n.y<0?n.y=this.height-1:n.y>=this.height&&(n.y=0),n}},{key:"getDirectionTo",value:function(e,t){return this.getNextPosition(e,ce.Direction.UP).equals(t)?ce.Direction.UP:this.getNextPosition(e,ce.Direction.BOTTOM).equals(t)?ce.Direction.BOTTOM:this.getNextPosition(e,ce.Direction.RIGHT).equals(t)?ce.Direction.RIGHT:this.getNextPosition(e,ce.Direction.LEFT).equals(t)?ce.Direction.LEFT:-1}},{key:"invertDirection",value:function(e){return e==ce.Direction.UP?ce.Direction.BOTTOM:e==ce.Direction.BOTTOM?ce.Direction.UP:e==ce.Direction.RIGHT?ce.Direction.LEFT:e==ce.Direction.LEFT?ce.Direction.RIGHT:null}},{key:"isDeadPosition",value:function(e,t,n){return!t&&this.get(e)==ce.CaseType.SNAKE||this.get(e)==ce.CaseType.WALL||this.get(e)==ce.CaseType.SNAKE_DEAD||!!n&&this.get(e)==ce.CaseType.SURROUNDED}},{key:"toString",value:function(){for(var e="",t=0;t<this.height;t++){for(var n=0;n<this.width;n++)e+=this.valToChar(this.get(new Te(n,t)))+" ";e+="\n"}return e}}]),e}(),xe=function(){function e(){fe()(this,e),this.aiFruitGoal=ce.CaseType.FRUIT,this._aiLevelText="custom"}return pe()(e,[{key:"ai",value:function(e){var t=e.getHeadPosition(),n=e.grid.fruitPos,i=e.grid.fruitPosGold;if(n&&e.grid.get(n)==ce.CaseType.FRUIT){var r=Math.abs(n.x-t.x)+Math.abs(n.y-t.y),s=i?Math.abs(i.x-t.x)+Math.abs(i.y-t.y):-1;i&&e.grid.get(i)==ce.CaseType.FRUIT_GOLD&&this.aiFruitGoal==ce.CaseType.FRUIT?this.aiFruitGoal=s<=r?ce.CaseType.FRUIT_GOLD:ce.CaseType.FRUIT:i&&e.grid.get(i)==ce.CaseType.FRUIT_GOLD||(this.aiFruitGoal=ce.CaseType.FRUIT)}else n&&e.grid.get(n)==ce.CaseType.FRUIT||!i||e.grid.get(i)!=ce.CaseType.FRUIT_GOLD||(this.aiFruitGoal=ce.CaseType.FRUIT_GOLD);return null}},{key:"aiLevelText",get:function(){return this._aiLevelText}}]),e}(),Oe=n(6),Pe=n.n(Oe);function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Be=function(e){ke()(n,e);var t=De(n);function n(){var e;return fe()(this,n),(e=t.call(this))._aiLevelText="random",e}return pe()(n,[{key:"ai",value:function(e){Pe()(we()(n.prototype),"ai",this).call(this,e);var t=e.getHeadPosition(),i=e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.UP)),r=e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.LEFT)),s=e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.BOTTOM)),o=e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.RIGHT));if(i&&r&&s&&o)return ce.Key.UP;for(var a=null;null==a||e.grid.isDeadPosition(e.getNextPosition(t,a));){switch(Ce.randRange(1,4,e.grid?e.grid.rngGame:null)){case 1:a=ce.Key.UP;break;case 2:a=ce.Key.LEFT;break;case 3:a=ce.Key.BOTTOM;break;case 4:a=ce.Key.RIGHT}}return a}}]),n}(xe);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Fe=function(e){ke()(n,e);var t=Me(n);function n(){var e;return fe()(this,n),(e=t.call(this))._aiLevelText="low",e}return pe()(n,[{key:"ai",value:function(e){if(Pe()(we()(n.prototype),"ai",this).call(this,e),null!=e.grid.fruitPos){var t=e.getHeadPosition(),i=this.aiFruitGoal==ce.CaseType.FRUIT_GOLD?e.grid.fruitPosGold:e.grid.fruitPos,r=ce.Key.RIGHT;i.x>t.x?r=i.x-t.x>e.grid.width/2?ce.Key.LEFT:ce.Key.RIGHT:i.x<t.x?r=t.x-i.x>e.grid.width/2?ce.Key.RIGHT:ce.Key.LEFT:i.y<t.y?r=t.y-i.y>e.grid.height/2?ce.Key.BOTTOM:ce.Key.UP:i.y>t.y&&(r=i.y-t.y>e.grid.height/2?ce.Key.UP:ce.Key.BOTTOM);var s=e.getNextPosition(t,r);if(e.grid.isDeadPosition(s)){for(var o=this.direction,a=null,l=1;l<e.queue.length;l++)if(e.get(l).direction!=o){a=e.get(l).direction;break}s=e.getNextPosition(t,a),e.grid.isDeadPosition(s)?e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.UP))?e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.RIGHT))?e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.BOTTOM))?e.grid.isDeadPosition(e.getNextPosition(t,ce.Key.LEFT))||(r=ce.Key.LEFT):r=ce.Key.BOTTOM:r=ce.Key.RIGHT:r=ce.Key.UP:r=s.convertToKeyDirection()}return r}}}]),n}(xe);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Ue=function(e){ke()(n,e);var t=Ne(n);function n(e){var i;return fe()(this,n),(i=t.call(this)).enableTorus=e,i._aiLevelText="normal",i}return pe()(n,[{key:"ai",value:function(e){Pe()(we()(n.prototype),"ai",this).call(this,e);var t=e.getHeadPosition(),i=e.grid.fruitPos,r=e.grid.fruitPosGold,s=i;if(t&&(i||r)){var o=e.grid.getGraph(!1),a=new Re.Astar.Configuration(o,{order:"yx",torus:!!this.enableTorus,diagonals:!1,cutting:!1,static:!0,cost:function(e,t){return 1==t?null:1}});r&&this.aiFruitGoal==ce.CaseType.FRUIT_GOLD&&(s=r);var l=a.path({x:t.x,y:t.y},{x:s?s.x:null,y:s?s.y:null});if(l.length<1&&(this.aiFruitGoal!=ce.CaseType.FRUIT_GOLD&&r||(s=i),l=a.path({x:t.x,y:t.y},{x:s?s.x:null,y:s?s.y:null})),l.length>1){var c=new Te(l[1].x,l[1].y);return new Te(null,null,e.getDirectionTo(t,c)).convertToKeyDirection()}l=null}return null}}]),n}(xe);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Ge=function(e){ke()(n,e);var t=He(n);function n(e){var i;return fe()(this,n),(i=t.call(this,!0)).aiLow=new Fe(e),i._aiLevelText="high",i}return pe()(n,[{key:"ai",value:function(e){var t=Pe()(we()(n.prototype),"ai",this).call(this,e);return t||this.aiLow.ai(e)}}]),n}(Ue);function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Ve=function(e){ke()(n,e);var t=ze(n);function n(){var e;return fe()(this,n),(e=t.call(this))._aiLevelText="mock",e}return pe()(n,[{key:"ai",value:function(){return null}}]),n}(xe),Ye=function(){function e(t,n,i,r,s,o,a,l){fe()(this,e),this.direction=null==t?ce.Direction.RIGHT:t,this.initialDirection=this.direction,this.initialLength=null==n?3:n,this.initTriedDirections=[],this.errorInit=!1,this.grid=i||new _e,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.ticksDead=0,this.player=null==r?ce.PlayerType.HUMAN:r,this.aiLevel=null==s?ce.AiLevel.DEFAULT:s,this.autoRetry=null!=o&&o,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==a?"Snake":a,this.snakeAI=new xe,this.customAI=l,this.ticksWithoutAction=0,this.initAI()}return pe()(e,[{key:"init",value:function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==ce.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(ce.Direction.RIGHT)||this.initialDirection==ce.Direction.LEFT&&-1==this.initTriedDirections.indexOf(ce.Direction.LEFT)){for(var n=0;n<this.grid.height;n++)for(var i=0,r=0;r<this.grid.width;r++)if(this.grid.get(new Te(r,n))==ce.CaseType.EMPTY?i++:i=0,i>=this.initialLength){e++;break}}else if(this.initialDirection==ce.Direction.UP&&-1==this.initTriedDirections.indexOf(ce.Direction.UP)||this.initialDirection==ce.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(ce.Direction.BOTTOM))for(var s=0;s<this.grid.width;s++)for(var o=0,a=0;a<this.grid.height;a++)if(this.grid.get(new Te(s,a))==ce.CaseType.EMPTY?o++:o=0,o>=this.initialLength){t++;break}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==ce.Direction.RIGHT||this.initialDirection==ce.Direction.LEFT)||t<=0&&(this.initialDirection==ce.Direction.UP||this.initialDirection==ce.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(ce.Direction.RIGHT)?(this.initialDirection=ce.Direction.RIGHT,this.direction=ce.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(ce.Direction.LEFT)?(this.initialDirection=ce.Direction.LEFT,this.direction=ce.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(ce.Direction.UP)?(this.initialDirection=ce.Direction.UP,this.direction=ce.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(ce.Direction.BOTTOM)?(this.initialDirection=ce.Direction.BOTTOM,this.direction=ce.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var l,c,u=!0,h=[];u;){if(u=!1,!(l=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition()))return this.errorInit=!0,!1;c=new Te(l.x,l.y,this.initialDirection),h=[];for(var d=this.initialLength-1;d>=0;d--)d<this.initialLength-1&&(this.initialDirection==ce.Direction.RIGHT?c=this.grid.getNextPosition(new Te(c.x,c.y,this.initialDirection),ce.Direction.RIGHT):this.initialDirection==ce.Direction.LEFT?c=this.grid.getNextPosition(new Te(c.x,c.y,this.initialDirection),ce.Direction.LEFT):this.initialDirection==ce.Direction.BOTTOM?c=this.grid.getNextPosition(new Te(c.x,c.y,this.initialDirection),ce.Direction.BOTTOM):this.initialDirection==ce.Direction.UP&&(c=this.grid.getNextPosition(new Te(c.x,c.y,this.initialDirection),ce.Direction.UP))),this.grid.get(c)!=ce.CaseType.EMPTY?u=!0:h.push(new Te(c.x,c.y,c.direction));if(this.grid.maze&&u)return this.init()}var f=!1;if(!this.grid.maze){var g=new Te(h[h.length-1].x,h[h.length-1].y,this.direction);(this.grid.isDeadPosition(this.grid.getNextPosition(g,ce.Direction.UP),!1)&&this.direction==ce.Direction.UP||this.grid.isDeadPosition(this.grid.getNextPosition(g,ce.Direction.BOTTOM),!1)&&this.direction==ce.Direction.BOTTOM||this.grid.isDeadPosition(this.grid.getNextPosition(g,ce.Direction.LEFT),!1)&&this.direction==ce.Direction.LEFT||this.grid.isDeadPosition(this.grid.getNextPosition(g,ce.Direction.RIGHT),!1)&&this.direction==ce.Direction.RIGHT)&&(f=!0,this.direction=this.grid.invertDirection(this.direction))}for(var p=0;p<h.length;p++)if(f){var m=h[h.length-p-1];m.direction=this.grid.invertDirection(m.direction),this.insert(h[h.length-p-1])}else this.insert(h[p]);return this.grid.maze&&this.player==ce.PlayerType.HYBRID_HUMAN_AI&&(this.player=ce.PlayerType.HUMAN),this.player==ce.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=ce.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0}},{key:"initAI",value:function(){if(this.customAI)this.snakeAI=this.customAI,this.aiLevel=ce.AiLevel.CUSTOM;else switch(this.aiLevel){case ce.AiLevel.RANDOM:this.snakeAI=new Be;break;case ce.AiLevel.LOW:this.snakeAI=new Fe;break;case ce.AiLevel.DEFAULT:this.snakeAI=new Ue;break;case ce.AiLevel.HIGH:case ce.AiLevel.ULTRA:this.snakeAI=new Ge;break;case ce.AiLevel.MOCK:this.snakeAI=new Ve;break;default:this.snakeAI=new Ue}}},{key:"reset",value:function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.errorInit=!1,this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastTail=void 0,this.lastKey=-1,this.ticksDead=0,this.ticksWithoutAction=0,this.snakeAI&&(this.snakeAI.aiFruitGoal=ce.CaseType.FRUIT)}},{key:"insert",value:function(e){this.queue.unshift(e),this.grid.set(ce.CaseType.SNAKE,e)}},{key:"remove",value:function(){var e=this.queue.pop();this.grid.set(ce.CaseType.EMPTY,e),this.lastTail=e}},{key:"length",value:function(){return this.queue.length}},{key:"get",value:function(e){return null!=this.queue[e]?this.queue[e].copy():null}},{key:"set",value:function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)}},{key:"getHeadPosition",value:function(){return this.get(0)}},{key:"getTailPosition",value:function(){return this.get(this.length()-1)}},{key:"hasMaxScore",value:function(){return this.grid.getTotal(ce.CaseType.EMPTY)<=0&&!this.grid.fruitPosGold&&!this.grid.fruitPos}},{key:"setGameOver",value:function(e){this.gameOver=!0,this.ticksDead=e;for(var t=0;t<this.length();t++)this.grid.set(ce.CaseType.SNAKE_DEAD,this.get(t))}},{key:"kill",value:function(){this.autoRetry=!1,this.grid=null,this.queue=null}},{key:"keyToDirection",value:function(e){return e==ce.Key.LEFT&&this.direction!=ce.Direction.RIGHT&&this.direction!=ce.Direction.LEFT?ce.Direction.LEFT:e==ce.Key.UP&&this.direction!=ce.Direction.BOTTOM&&this.direction!=ce.Direction.UP?ce.Direction.UP:e==ce.Key.RIGHT&&this.direction!=ce.Direction.LEFT&&this.direction!=ce.Direction.RIGHT?ce.Direction.RIGHT:e==ce.Key.BOTTOM&&this.direction!=ce.Direction.UP&&this.direction!=ce.Direction.BOTTOM?ce.Direction.BOTTOM:null}},{key:"moveTo",value:function(e){var t=this.keyToDirection(e);null!=t&&(this.direction=t)}},{key:"getNextPosition",value:function(e,t){return this.grid.getNextPosition(e,t)}},{key:"getDirectionTo",value:function(e,t){return this.grid.getDirectionTo(e,t)}},{key:"getGraphicDirectionFor",value:function(e,t,n){if(null==t||null==n)return e.direction;var i=this.getDirectionTo(e,n),r=this.getDirectionTo(e,t);return i==ce.Direction.LEFT&&r==ce.Direction.BOTTOM||i==ce.Direction.BOTTOM&&r==ce.Direction.LEFT?ce.Direction.ANGLE_1:i==ce.Direction.RIGHT&&r==ce.Direction.BOTTOM||i==ce.Direction.BOTTOM&&r==ce.Direction.RIGHT?ce.Direction.ANGLE_2:i==ce.Direction.UP&&r==ce.Direction.RIGHT||i==ce.Direction.RIGHT&&r==ce.Direction.UP?ce.Direction.ANGLE_3:i==ce.Direction.UP&&r==ce.Direction.LEFT||i==ce.Direction.LEFT&&r==ce.Direction.UP?ce.Direction.ANGLE_4:e.direction}},{key:"getGraphicDirection",value:function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))}},{key:"copy",value:function(){for(var t=new e(direction,3,new _e(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),n=0;n<t.grid.height;n++)for(var i=0;i<t.grid.width;i++)t.grid.set(this.grid.get(new Te(i,n)),new Te(i,n));t.queue=[];for(var r=0;r<this.queue.length;r++)t.queue.push(elem.copy());return t}},{key:"ai",value:function(){if(this.snakeAI&&this.snakeAI.ai){var e=this.snakeAI.ai(this);return e&&this.keyToDirection(e)!=this.direction?this.ticksWithoutAction=0:this.ticksWithoutAction++,e}return null}},{key:"isAIStuck",value:function(e,t){if(this.snakeAI&&this.snakeAI.ai){if((this.direction==ce.Direction.LEFT||this.direction==ce.Direction.RIGHT)&&this.ticksWithoutAction>=this.grid.width*e)return!0;if((this.direction==ce.Direction.UP||this.direction==ce.Direction.BOTTOM)&&this.ticksWithoutAction>=this.grid.height*t)return!0}return!1}},{key:"getAILevelText",value:function(){return this.snakeAI?this.snakeAI.aiLevelText:"???"}}]),e}();function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var je=function(e){ke()(n,e);var t=We(n);function n(e,i){var r;return fe()(this,n),(r=t.call(this,e,i)).worker,r.workerReady=!1,r.messageQueue=[],r}return pe()(n,[{key:"init",value:function(){var e=this;if(window.Worker){try{this.worker=new Worker("dist/GameEngineWorker.js")}catch(e){return void this.update("init",{errorOccurred:!0})}this.update("init",{engineLoading:!0}),this.worker instanceof Worker?(this.gameEngine&&this.gameEngine.grid&&this.gameEngine.grid.rngGrid&&(this.gameEngine.grid.rngGrid=null),this.gameEngine&&this.gameEngine.grid&&this.gameEngine.grid.rngGame&&(this.gameEngine.grid.rngGame=null),this.worker.onmessage=function(t){var n=t.data;if("ready"==n)e.workerReady=!0,e.update("init",{engineLoading:!1}),e.worker.postMessage(["init",e.gameEngine]),e.passQueuedMessages();else if(n.length>1){var i=e.gameUI.grid;if(n[1].hasOwnProperty("grid")&&null!=n[1].grid&&(i=Object.assign(new _e,n[1].grid),n[1].grid=i),n[1].hasOwnProperty("snakes")&&null!=n[1].snakes)for(var r=0;r<n[1].snakes.length;r++){n[1].snakes[r].grid=i,n[1].snakes[r]=Object.assign(new Ye,n[1].snakes[r]);for(var s=0;s<n[1].snakes[r].queue.length;s++)n[1].snakes[r].queue[s]=Object.assign(new Te,n[1].snakes[r].queue[s])}switch(e.update(n[0],n[1]),n[0]){case"reset":e.reactor.dispatchEvent("onReset");break;case"start":e.reactor.dispatchEvent("onStart");break;case"pause":e.reactor.dispatchEvent("onPause");break;case"continue":e.reactor.dispatchEvent("onContinue");break;case"stop":e.reactor.dispatchEvent("onStop");break;case"exit":e.reactor.dispatchEvent("onExit");break;case"kill":e.reactor.dispatchEvent("onKill"),e.worker.terminate();break;case"scoreIncreased":e.reactor.dispatchEvent("onScoreIncreased");break;case"update":e.reactor.dispatchEvent("onUpdate");break;case"updateCounter":e.reactor.dispatchEvent("onUpdateCounter")}}}):null!=this.gameUI&&this.update("init",{errorOccurred:!0})}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})}},{key:"reset",value:function(){this.passMessage(["reset"])}},{key:"start",value:function(){this.passMessage(["start"])}},{key:"stop",value:function(){this.passMessage(["stop"])}},{key:"finish",value:function(e){this.passMessage([e?"finish":"stop"])}},{key:"pause",value:function(){this.passMessage(["pause"])}},{key:"kill",value:function(){this.passMessage(["kill"])}},{key:"tick",value:function(){this.passMessage(["tick"])}},{key:"exit",value:function(){this.passMessage(["exit"])}},{key:"key",value:function(e){this.passMessage(["key",e])}},{key:"forceStart",value:function(){this.passMessage(["forceStart"])}},{key:"updateEngine",value:function(e,t){this.passMessage(["update",{key:e,data:t}])}},{key:"destroySnakes",value:function(e,t){this.passMessage(["destroySnakes",e,t])}},{key:"passMessage",value:function(e){this.workerReady&&this.worker instanceof Worker?this.worker.postMessage(e):this.messageQueue.push(e)}},{key:"passQueuedMessages",value:function(){var e=this;this.workerReady&&this.worker instanceof Worker&&(this.messageQueue.forEach((function(t){e.worker.postMessage(t)})),this.messageQueue=[])}}]),n}(ve),Ke=function(e,t,n){var i,r,s,o,a,l,c,u;switch(l=n*(1-t),c=n*(1-(a=6*e-(o=Math.floor(6*e)))*t),u=n*(1-(1-a)*t),o%6){case 0:i=n,r=u,s=l;break;case 1:i=c,r=n,s=l;break;case 2:i=l,r=n,s=u;break;case 3:i=l,r=c,s=n;break;case 4:i=u,r=l,s=n;break;case 5:i=n,r=l,s=c}return[Math.round(255*i),Math.round(255*r),Math.round(255*s)]},qe=function(e,t,n){return t<=10&&n>=90?Y.t("engine.colors.white"):t<=10&&n<=70||0==t?Y.t("engine.colors.gray"):n<=15?Y.t("engine.colors.black"):e>=0&&e<=6||e>=350?Y.t("engine.colors.red"):e>=7&&e<=42?Y.t("engine.colors.orange"):e>=43&&e<=70?Y.t("engine.colors.yellow"):e>=71&&e<=156?Y.t("engine.colors.green"):e>=157&&e<=221?Y.t("engine.colors.blue"):e>=222&&e<=290?Y.t("engine.colors.purple"):e>=291&&e<=349?Y.t("engine.colors.pink"):"???"},Xe=n(0);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var Ze=function(e){ke()(n,e);var t=Je(n);function n(e,i,r,s,o,a,l,c,u,h){var d;return fe()(this,n),(d=t.call(this)).snakes=e,d.fontSize=r||Math.floor(ce.Setting.FONT_SIZE/1.25),d.fontFamily=s||ce.Setting.FONT_FAMILY,d.backgroundColor=a||"rgba(44, 62, 80, 0.75)",d.scrollBarColor=l||"rgba(44, 62, 80, 0.8)",d.headerHeight=o||ce.Setting.HEADER_HEIGHT_DEFAULT,d.closed=!1,d.closing=!1,d.opening=!1,d.forceClosing=!1,d.overflow=!1,d.back=!1,d.lastLine=!1,d.timeLastFrame=0,d.offsetX=0,d.totalTimeX=0,d.totalTime=0,d.canvasTmp=document.createElement("canvas"),d.disableAnimation=c,d.imageLoader=u,d.currentPlayer=i,d.spectatorMode=h,d.addScrollAction((function(e,t){d.lastLine&&t>0&&(d.offsetScrollY-=t,d.back=!1,d.overflow=!1),d.totalTime=0,d.timeLastFrame=0})),d}return pe()(n,[{key:"draw",value:function(e){if(null==this.snakes||this.closed)this.overflow=!1,this.back=!1,this.timeLastFrame=performance.now(),this.offsetScrollY=0,this.totalTime=0;else{Pe()(we()(n.prototype),"draw",this).call(this,e),this.canvasTmp.width=e.canvas.width,this.canvasTmp.height=e.canvas.height;var t=this.canvasTmp,i=this.canvasTmp.getContext("2d");i.save();var r=Y.t("engine.ranking"),s=i.measureText(r).width,o=[],a=0,l=0;i.font=this.fontSize/1.5+"px "+this.fontFamily;for(var c=i.measureText(""+this.snakes.length).width+15,u=0;u<this.snakes.length;u++){var h=this.snakes[u];h.player==ce.PlayerType.HUMAN||h.player==ce.PlayerType.HYBRID_HUMAN_AI?a++:l++;var d=h.name+" × "+h.score+" ("+(this.currentPlayer!=u||this.spectatorMode?this.snakes[u].player==ce.PlayerType.HUMAN||this.snakes[u].player==ce.PlayerType.HYBRID_HUMAN_AI?Y.t("engine.playerMin")+a:Y.t("engine.aiMin")+l:Y.t("engine.playerHuman"))+")",f=i.measureText(d).width+30;f>s&&(s=f),o[u]={username:h.name,score:h.score,gameOver:h.gameOver,text:d,rank:0,id:u},b=h.score}this.x=-Xe.EasingFunctions.easeInOutCubic(this.offsetX/this.width)*this.width,this.y=this.headerHeight,this.width=s+c+15,this.height=t.height-this.headerHeight,i.fillStyle="rgba(75, 75, 75, 0.35)",i.fillRect(this.x,this.headerHeight,this.width,this.height),i.font=this.fontSize+"px "+this.fontFamily;var g=this.headerHeight+this.fontSize-this.offsetScrollY+10,p=this.snakes.length*(this.fontSize+5)+this.fontSize+10+this.fontSize/1.5,m=this.height*(this.height/p),y=this.height-m,v=this.offsetScrollY/(p-this.height);y*v+m>this.height&&(this.offsetScrollY+=this.height-(y*v+m)),g>this.headerHeight+this.fontSize+10&&(g=this.headerHeight+this.fontSize+10,this.offsetScrollY=0),v=this.offsetScrollY/(p-this.height),g+this.fontSize-10>=this.headerHeight&&Xe.Utils.drawText(i,Y.t("engine.ranking"),"rgba(255, 255, 255, 0.5)",Math.round(this.fontSize),this.fontFamily,"default",null,Math.round(this.width/2-i.measureText(r).width/2+this.x),Math.round(g),!1,!0);for(var E=o.sort((function(e,t){return t.score-e.score})),k=0,b=0,S=0;S<E.length;S++)E[S].score<b&&k++,E[S].rank=k,b=E[S].score;var A=g+this.fontSize/1.5;this.overflow=!1,this.timeLastFrame<=0&&(this.timeLastFrame=performance.now());var w=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now();for(var C=0,T=0;T<E.length;T++){if(A+this.fontSize>this.headerHeight){if(E[T].rank>=0&&E[T].rank<3&&E[T].score>0)switch(E[T].rank){case 0:Xe.Utils.drawImage(i,this.imageLoader?this.imageLoader.get("assets/images/trophy.png",Math.round(this.fontSize),Math.round(this.fontSize)):null,5+this.x,A,Math.round(this.fontSize),Math.round(this.fontSize));break;case 1:Xe.Utils.drawImage(i,this.imageLoader?this.imageLoader.get("assets/images/trophy_silver.png",Math.round(this.fontSize),Math.round(this.fontSize)):null,5+this.x,A,Math.round(this.fontSize),Math.round(this.fontSize));break;case 2:Xe.Utils.drawImage(i,this.imageLoader?this.imageLoader.get("assets/images/trophy_bronze.png",Math.round(this.fontSize),Math.round(this.fontSize)):null,5+this.x,A,Math.round(this.fontSize),Math.round(this.fontSize))}else Xe.Utils.drawText(i,""+(E[T].rank+1),"rgba(255, 255, 255, 0.5)",Math.round(this.fontSize/1.5),this.fontFamily,null,null,Math.round(this.fontSize/1.5/2+5+this.x),Math.round(A+this.fontSize/1.5));Xe.Utils.drawText(i,E[T].text,E[T].gameOver?"rgba(231, 76, 60, 0.5)":"rgba(255, 255, 255, 0.5)",Math.round(this.fontSize/1.5),this.fontFamily,null,null,Math.round(5+c+this.fontSize/1.5+this.x),Math.round(A+this.fontSize/1.5)),C++}if((A+=Math.round(this.fontSize)+5)>t.height&&!this.back){this.lastLine=!1,this.totalTime+=w,this.totalTime>5e3&&(this.overflow=!0);break}T==this.snakes.length-1&&(this.back||(this.totalTime=0),this.back=!0,this.lastLine=!0)}C<=0&&(this.offsetScrollY=0,this.timeLastFrame=performance.now(),w=0),this.back?(this.totalTime+=w,this.totalTime>5e3&&(this.offsetScrollY>0?this.offsetScrollY-=w/20:(this.back=!1,this.totalTime=0))):this.overflow&&(this.offsetScrollY+=w/20),this.disableAnimation&&this.closing?(this.closing=!1,this.closed=!0):this.disableAnimation&&this.closing?(this.opening=!1,this.closed=!1):this.closing?(this.forceClosing?this.offsetX=this.width:this.offsetX+=w/3,this.offsetX>=this.width&&(this.closing=!1,this.closed=!0,this.forceClosing=!1)):this.opening&&(this.offsetX-=w/3,this.offsetX<=0&&(this.offsetX=0,this.opening=!1,this.closed=!1)),m<=this.height&&(i.fillStyle=this.scrollBarColor,i.fillRect(this.x+this.width-15,this.headerHeight+y*v,15,m)),Xe.Utils.drawImageData(e,this.canvasTmp,0,this.headerHeight,this.width,this.height,0,this.headerHeight,this.width,this.height),i.restore()}}},{key:"close",value:function(){this.closing=!0,this.opening=!1,this.forceClosing=!1}},{key:"forceClose",value:function(){this.closing=!0,this.opening=!1,this.forceClosing=!0}},{key:"open",value:function(){this.closing=!1,this.opening=!0,this.closed=!1,this.forceClosing=!1}},{key:"set",value:function(e,t,n,i,r,s){this.snakes=e,this.fontSize=t,this.headerHeight=n,this.currentPlayer=i,this.imageLoader=r,this.spectatorMode=s}}]),n}(Xe.Component);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var $e=function(e){ke()(n,e);var t=Qe(n);function n(e,i,r,s,o,a,l,c,u,h,d,f,g,p){var m;return fe()(this,n),(m=t.call(this)).snakes=e,m.grid=i,m.speed=r,m.disableAnimation=s,m.isFilterHueAvailable=a,m.headerHeight=l,m.imageLoader=c,m.graphicSkin=o,m.currentPlayer=u,m.gameFinished=h,m.offsetFrame=0,m.countBeforePlay=d,m.spectatorMode=f,m.ticks=g,m.gameOver=p,m.canvasTmp=document.createElement("canvas"),m}return pe()(n,[{key:"draw",value:function(e){if(this.grid&&this.grid.grid){Pe()(we()(n.prototype),"draw",this).call(this,e);var t=e.canvas,i=t.getContext("2d");this.canvasTmp.width=t.width,this.canvasTmp.height=t.height,i.save();var r=Math.floor((t.height-this.headerHeight)/this.grid.height),s=Math.floor(t.width/this.grid.width),o=(s=s>(r=r>s?s:r)?r:s)*this.grid.width,a=r*this.grid.height;this.width=o,this.height=a;for(var l=0;l<this.grid.height;l++)for(var c=0;c<this.grid.width;c++){var u=Math.floor(c*s+(t.width-o)/2),h=this.headerHeight+l*r;0==l&&0==c&&(this.x=u,this.y=h),i.fillStyle=l%2==0&&c%2==0||l%2==1&&c%2==1?"rgba(127, 140, 141, 0.75)":"rgba(44, 62, 80, 0.75)",i.fillRect(u,h,s,r),Xe.Utils.drawImage(i,this.imageLoader.get("assets/images/skin/"+this.graphicSkin+"/"+this.grid.getImageCase(new Te(c,l)),Math.round(s),Math.round(r)),Math.round(u),Math.round(h),Math.round(s),Math.round(r))}this.drawSnake(i,s,r,o,this.currentPlayer),this.canvasTmp.width=0,this.canvasTmp.height=0,i.restore()}}},{key:"drawSnake",value:function(e,t,n,i,r){if(null!=this.snakes){for(var s=this.canvasTmp,o=this.canvasTmp.getContext("2d"),a=0;a<this.snakes.length;a++){o.clearRect(0,0,this.canvasTmp.width,this.canvasTmp.height),null!=this.snakes[a].color&&(o.filter="hue-rotate("+this.snakes[a].color+"deg)");for(var l=this.snakes[a].length()-1;l>=-1&&this.snakes[a].length()>1||l>=0;l--){var c=void 0,u=0,h=0,d=(c=-1==l?this.snakes[a].get(this.snakes[a].length()-1):this.snakes[a].get(l)).direction,f=0,g="",p=!0;if(d=0==l?this.snakes[a].getHeadPosition().direction:-1==l?this.disableAnimation||this.snakes[a].gameOver||this.snakes[a].scoreMax||this.gameFinished||!this.snakes[a].lastTailMoved?this.snakes[a].get(this.snakes[a].length()-2).direction:this.snakes[a].getTailPosition().direction:this.snakes[a].getGraphicDirection(l),!this.disableAnimation&&(0==l||-1==l&&this.snakes[a].lastTailMoved)&&!this.snakes[a].scoreMax&&(!this.gameFinished&&!this.gameOver||this.snakes[a].gameOver)&&(!this.snakes[a].gameOver||this.snakes[a].gameOver&&this.ticks<this.snakes[a].ticksDead+2)){var m=this.offsetFrame/(this.speed*ce.Setting.TIME_MULTIPLIER);this.snakes[a].gameOver&&this.snakes[a].ticksDead&&(this.ticks<=this.snakes[a].ticksDead?(m=1-m,m=Xe.EasingFunctions.easeInCubic(m)):m=Xe.EasingFunctions.easeOutBounce(m));var y=t*(m=Math.max(0,Math.min(1,m)))-t,v=n*m-n,E=c,k=void 0;switch(0==l?k=this.snakes[a].length()>1?this.snakes[a].getGraphicDirection(1):this.snakes[a].getGraphicDirection(0):-1==l&&(k=this.snakes[a].getGraphicDirectionFor(this.snakes[a].getTailPosition(),this.snakes[a].lastTail,this.snakes[a].get(this.snakes[a].length()-2))),-1==l&&this.snakes[a].length()>1&&(E=this.snakes[a].get(this.snakes[a].length()-1)),0!=l&&-1!=l||k!=ce.Direction.ANGLE_1&&k!=ce.Direction.ANGLE_2&&k!=ce.Direction.ANGLE_3&&k!=ce.Direction.ANGLE_4||(0==l&&(f=-90),0==l?f+=-128.073*Math.pow(m,2)+222.332*m-5.47066:-1==l&&(f+=126.896*Math.pow(m,2)+-33.6471*m+1.65942),(0==l&&(k==ce.Direction.ANGLE_4&&d==ce.Direction.UP||k==ce.Direction.ANGLE_1&&d==ce.Direction.LEFT||k==ce.Direction.ANGLE_2&&d==ce.Direction.BOTTOM||k==ce.Direction.ANGLE_3&&d==ce.Direction.RIGHT)||-1==l&&(k==ce.Direction.ANGLE_4&&d==ce.Direction.RIGHT||k==ce.Direction.ANGLE_3&&d==ce.Direction.BOTTOM||k==ce.Direction.ANGLE_1&&d==ce.Direction.UP||k==ce.Direction.ANGLE_2&&d==ce.Direction.LEFT))&&(f=-f),p=!1),E.direction){case ce.Direction.UP:h-=v;break;case ce.Direction.BOTTOM:h+=v;break;case ce.Direction.RIGHT:u+=y;break;case ce.Direction.LEFT:u-=y}}l==this.snakes[a].length()-1&&(d=this.snakes[a].getGraphicDirectionFor(c,this.snakes[a].get(l-1),this.snakes[a].lastTail));var b=c.x,S=c.y;if(u+=Math.floor(b*t+(s.width-i)/2),h+=this.headerHeight+S*n,0==l)if(this.snakes[a].gameOver&&!this.snakes[a].scoreMax)switch(d){case ce.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/snake_dead.png";break;case ce.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_2.png";break;case ce.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_3.png";break;case ce.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/snake_dead_4.png"}else switch(d){case ce.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/snake.png";break;case ce.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/snake_2.png";break;case ce.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/snake_3.png";break;case ce.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/snake_4.png"}else if(-1==l)switch(d){case ce.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/body_end.png";break;case ce.Direction.RIGHT:g="assets/images/skin/"+this.graphicSkin+"/body_2_end.png";break;case ce.Direction.UP:g="assets/images/skin/"+this.graphicSkin+"/body_3_end.png";break;case ce.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/body_4_end.png"}else switch(d){case ce.Direction.UP:case ce.Direction.BOTTOM:g="assets/images/skin/"+this.graphicSkin+"/body.png";break;case ce.Direction.RIGHT:case ce.Direction.LEFT:g="assets/images/skin/"+this.graphicSkin+"/body_2.png";break;case ce.Direction.ANGLE_1:g="assets/images/skin/"+this.graphicSkin+"/body_angle_1.png";break;case ce.Direction.ANGLE_2:g="assets/images/skin/"+this.graphicSkin+"/body_angle_2.png";break;case ce.Direction.ANGLE_3:g="assets/images/skin/"+this.graphicSkin+"/body_angle_3.png";break;case ce.Direction.ANGLE_4:g="assets/images/skin/"+this.graphicSkin+"/body_angle_4.png"}Xe.Utils.drawImage(o,this.imageLoader.get(g,Math.round(t),Math.round(n)),Math.round(u),Math.round(h),Math.round(t),Math.round(n),null,null,null,null,p,Math.round(f))}Xe.Utils.drawImageData(e,this.canvasTmp,Math.round((s.width-i)/2),this.headerHeight,i,Math.round(n*this.grid.height),Math.floor((s.width-i)/2),this.headerHeight,i,Math.round(n*this.grid.height)),o.filter="none"}this.snakes.length>1&&this.drawSnakeInfos(e,i,t,n,r)}}},{key:"drawSnakeInfos",value:function(e,t,n,i,r){for(var s=0,o=0,a=0;a<this.snakes.length;a++){this.snakes[a].player==ce.PlayerType.HUMAN||this.snakes[a].player==ce.PlayerType.HYBRID_HUMAN_AI?s++:o++;var l=this.snakes[a].get(0);if(null!=l){var c=l.x,u=l.y,h=Math.floor(c*n+(this.canvasTmp.width-t)/2),d=this.headerHeight+u*i;if(!(this.disableAnimation||this.snakes[a].gameOver||this.gameFinished||this.gameOver)){var f=this.offsetFrame/(this.speed*ce.Setting.TIME_MULTIPLIER),g=n*(f=f>1?1:f)-n,p=i*f-i;switch(l.direction){case ce.Direction.UP:d-=p;break;case ce.Direction.BOTTOM:d+=p;break;case ce.Direction.RIGHT:h+=g;break;case ce.Direction.LEFT:h-=g}}Xe.Utils.drawText(e,(this.snakes[a].player==ce.PlayerType.HUMAN||this.snakes[a].player==ce.PlayerType.HYBRID_HUMAN_AI?Y.t("engine.playerMin")+s:Y.t("engine.aiMin")+o)+"\n× "+this.snakes[a].score,"rgb(255, 255, 255)",Math.round(i/2),ce.Setting.FONT_FAMILY,null,null,h,d-Math.round(i/1.75),!1,!0),!this.spectatorMode&&r==a&&this.countBeforePlay>=0&&(null!=r||this.isFilterHueAvailable&&this.snakes.length>2||!this.isFilterHueAvailable&&this.snakes.length>1)&&Xe.Utils.drawArrow(e,Math.round(h+n/2),Math.round(d-2*i),Math.round(h+n/2),Math.round(d-5))}}}},{key:"set",value:function(e,t,n,i,r,s,o,a,l,c,u,h){this.snakes=e,this.grid=t,this.speed=n,this.headerHeight=r,this.imageLoader=s,this.currentPlayer=o,this.gameFinished=a,this.offsetFrame=i,this.countBeforePlay=l,this.spectatorMode=c,this.ticks=u,this.gameOver=h}}]),n}(Xe.Component),et=n(27),tt=n.n(et),nt=n(28),it=n.n(nt);function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var st=function(e){ke()(n,e);var t=rt(n);function n(e,i,r,s,o,a,l,c,u,h,d){var f,g;return fe()(this,n),(g=t.call(this,0,0,null,null,new Xe.Style({backgroundColor:i||"#27AE60"}))).rowButtons=new Xe.Row(null,null,null,null,new Xe.Style({alignement:"right",spaceBetweenComponents:5,verticalAlignement:"center"})),g.colScores=new Xe.Col(null,null,null,null,new Xe.Style({alignement:"left",spaceBetweenComponents:5,verticalAlignement:"center"})),g.fruitImage=new Xe.ImageContainer("assets/images/skin/flat/fruit.png"),g.labelScore=new Xe.Label("",null,null,new Xe.Style({verticalAlignement:"center"})),g.rowScore=new Xe.Row,g.rowScore.addAll(g.fruitImage,g.labelScore),g.trophyImage=new Xe.ImageContainer("assets/images/trophy.png"),g.labelBestScore=new Xe.Label("",null,null,new Xe.Style({verticalAlignement:"center"})),g.rowBestScore=new Xe.Row,g.rowBestScore.addAll(g.trophyImage,g.labelBestScore),g.colScores.addAll(g.rowScore,g.rowBestScore),g.setButtons(o,a,l),Pe()((f=tt()(g),we()(n.prototype)),"addAll",f).call(f,g.colScores,g.rowButtons),g.minHeight=e,g.snakes=r,g.btnFullScreen=o,g.btnPause=a,g.btnRank=l,g.enablePause=s,g.gameRanking=c,g.bestScoreToDisplay=u,g.numFruit=h,g.imageLoader=d,g}return pe()(n,[{key:"draw",value:function(e){var t=e.canvas,i=t.getContext("2d");i.save(),this.minWidth=t.width,this.fruitImage&&(this.fruitImage.width=Math.round(.85*this.height*(this.bestScoreToDisplay?.5:1)),this.trophyImage.width=Math.round(.85*this.height*(this.bestScoreToDisplay?.5:1))),this.btnPause&&(this.btnPause.width=.85*this.height,this.btnPause.height=.85*this.height,this.btnPause.style.set("verticalAlignement","center")),this.btnFullScreen&&(this.btnFullScreen.width=.85*this.height,this.btnFullScreen.height=.85*this.height,this.btnFullScreen.style.set("verticalAlignement","center")),this.btnRank&&(this.btnRank.width=.85*this.height,this.btnRank.height=.85*this.height,this.btnRank.style.set("verticalAlignement","center")),this.gameRanking&&(this.gameRanking.closing||this.gameRanking.closed)?this.btnRank.style.set("backgroundColor","rgba(0, 0, 0, 0)"):this.btnRank.style.set("backgroundColor",this.btnRank.style.backgroundColorDown),this.fruitImage.loadImage(this.imageLoader),this.trophyImage.loadImage(this.imageLoader),this.labelBestScore.text=this.bestScoreToDisplay,this.labelScore.style.set("fontSize",Math.round(.43*this.height*(this.bestScoreToDisplay?.75:1))),this.labelBestScore.style.set("fontSize",Math.round(.43*this.height*(this.bestScoreToDisplay?.75:1))),null!=this.snakes&&1==this.snakes.length?this.labelScore.text="× "+this.snakes[0].score:this.labelScore.text=Y.t("engine.num")+(null!=this.numFruit?this.numFruit:"???"),this.bestScoreToDisplay?this.rowBestScore.hidden=!1:this.rowBestScore.hidden=!0,Pe()(we()(n.prototype),"draw",this).call(this,e),i.restore()}},{key:"set",value:function(e,t,n,i,r,s){this.enablePause=s,this.snakes=e,this.imageLoader=t,this.bestScoreToDisplay=n,this.minHeight=i,this.numFruit=r}},{key:"setButtons",value:function(e,t,n){this.rowButtons.clear(),this.btnFullScreen=e,this.btnPause=t,this.btnRank=n,n&&this.rowButtons.add(n),t&&this.rowButtons.add(t),e&&this.rowButtons.add(e)}},{key:"minHeight",set:function(e){it()(we()(n.prototype),"minHeight",e,this,!0),it()(we()(n.prototype),"maxHeight",e,this,!0)}},{key:"height",get:function(){return this.minHeight||this.maxHeight||Pe()(we()(n.prototype),"height",this)||0}},{key:"defaultStyle",get:function(){return new Xe.Style({backgroundColor:"#27AE60",padding:5})}}]),n}(Xe.Row);Xe.Constants.Setting.FONT_FAMILY=ce.Setting.FONT_FAMILY,Xe.Constants.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS=!1,Xe.Constants.Setting.FONT_SIZE=ce.Setting.FONT_SIZE;var ot=function(){function e(t,n,i,r,s,o,a){fe()(this,e),this.imageLoader=new Xe.ImageLoader,this.assetsLoaded=!1,this.controller=t,this.appendTo=n,this.displayFPS=null!=s&&s,this.outputType=null==o?ce.OutputType.GRAPHICAL:o,this.outputType=a&&a.textOutput?ce.OutputType.TEXT:this.outputType,this.disableAnimation=a&&!a.enableAnimations,this.renderBlur=a&&a.renderBlur,this.graphicSkin=a&&a.graphicSkin||"flat",this.maxFPS=a&&a.maxFPS||-1,this.lastKey=-1,this.frame=0,this.lastFrame=0,this.offsetFrame=0,this.lastFrameTime=0,this.currentFPS=0,this.engineLoading=!1,this.touchEventStartX,this.touchEventStartY,this.touchEventStartTimestamp,this.touchEventOffsetX=0,this.touchEventOffsetY=0,this.grid=null,this.snakes=null,this.speed=8,this.initialSpeed=8,this.ticks=0,this.countBeforePlay=-1,this.numFruit=0,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.enablePause=!1,this.enableRetry=!1,this.progressiveSpeed=!1,this.aiStuck=!1,this.precAiStuck=!1,this.errorOccurred=!1,this.fullscreen=!1,this.onlineMode=!1,this.enableRetryPauseMenu=!0,this.searchingPlayers=!1,this.playerNumber=0,this.maxPlayers=0,this.timeStart=0,this.lastTime=0,this.currentPlayer=null,this.spectatorMode=null,this.onlineMaster=!1,this.pingLatency=-1,this.menu=new Xe.Menu(new Xe.Style({blur:this.renderBlur})),this.confirmReset=!1,this.confirmExit=!1,this.getInfos=!1,this.getInfosGame=!1,this.getAdvancedInfosGame=!1,this.timeoutAutoRetry=null,this.isFilterHueAvailable=Xe.Utils.isFilterHueAvailable(),this.gameRanking=new Ze(this.snakes,null,null,null,ce.Setting.HEADER_HEIGHT_DEFAULT,null,null,this.disableAnimation,this.imageLoader),this.header=new st(ce.Setting.HEADER_HEIGHT_DEFAULT,null,this.snakes,this.enablePause,null,null,null,this.gameRanking,this.bestScoreToDisplay,this.numFruit,this.imageLoader),this.gridUI=new $e(this.snakes,this.grid,this.speed,this.disableAnimation,this.graphicSkin,this.isFilterHueAvailable,this.header.height,this.imageLoader),this.progressBarLoading=new Xe.ProgressBar(null,null,this.canvasWidth/4,25,new Xe.Style({alignement:"center",disableAnimation:this.disableAnimation}),.5),this.box=new Xe.Box(0,0,null,null,new Xe.Style({backgroundColor:"rgba(204, 207, 211, 1)"})),this.scene=new Xe.Scene(this.box,this.gridUI,this.gameRanking,this.header,this.menu),this.canvas,this.notificationMessage,this.labelMenus,this.textarea,this.canvas,this.canvasCtx,this.canvasWidth=null==i?ce.Setting.CANVAS_WIDTH:i,this.canvasHeight=null==r?ce.Setting.CANVAS_HEIGHT:r,this.fontSize=ce.Setting.FONT_SIZE,this.timerToDisplay=null,this.bestScoreToDisplay=null,this.intervalCountFPS,this.btnFullScreen,this.btnPause,this.btnContinue,this.btnRetry,this.btnQuit,this.btnYes,this.btnNo,this.btnOK,this.btnAbout,this.btnAdvanced,this.btnInfosGame,this.btnTopArrow,this.btnRightArrow,this.btnLeftArrow,this.btnBottomArrow,this.btnExitFullScreen,this.btnEnterFullScreen,this.btnStartGame,this.btnRank,this.init()}return pe()(e,[{key:"init",value:function(){var e=this;if(this.outputType==ce.OutputType.TEXT)this.textarea=document.createElement("textarea"),this.appendTo.appendChild(this.textarea),this.assetsLoaded=!0;else if(this.outputType==ce.OutputType.GRAPHICAL){Xe.Constants.String.ERROR_MESSAGE_CANVAS=Y.t("engine.errorJSGameToolsConsole"),Xe.Constants.String.ERROR_MESSAGE_CANVAS_LABEL=Y.t("engine.errorJSGameTools"),Xe.Constants.String.RETRY=Y.t("engine.retryInit"),this.canvas=new Xe.Canvas(this.scene,document.createElement("canvas"),this.canvasWidth,this.canvasHeight,!0,this.maxFPS),this.canvas.appendTo(this.appendTo),this.btnFullScreen=new Xe.ButtonImage("assets/images/fullscreen.png",null,null,null,null,64,64),this.btnPause=new Xe.ButtonImage("assets/images/pause.png",null,null,null,null,64,64),this.btnRank=new Xe.ButtonImage("assets/images/ranking.png",null,null,null,null,64,64);var t=new Xe.Style({alignement:"center",backgroundColor:"#3498db",backgroundColorHover:"#246A99",backgroundColorClick:"#184766",padding:10}),n=new Xe.Style({fontColor:"white",fontSize:ce.Setting.FONT_SIZE,fontFamily:ce.Setting.FONT_FAMILY,alignement:"center"});if(this.btnContinue=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.continue"),null,null,n)),this.btnRetry=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.reset"),null,null,n)),this.btnQuit=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.exit"),null,null,n)),this.btnYes=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.yes"),null,null,n)),this.btnNo=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.no"),null,null,n)),this.btnOK=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.ok"),null,null,n)),this.btnAbout=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.about"),null,null,n)),this.btnInfosGame=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.infosGame"),null,null,n)),this.btnAdvanced=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.infosGameAdvanced"),null,null,n)),this.btnTopArrow=new Xe.ButtonImage("assets/images/up.png",64,92,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnRightArrow=new Xe.ButtonImage("assets/images/right.png",0,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnLeftArrow=new Xe.ButtonImage("assets/images/left.png",128,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnBottomArrow=new Xe.ButtonImage("assets/images/bottom.png",64,0,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnExitFullScreen=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.exitFullScreen"),null,null,n)),this.btnEnterFullScreen=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.enterFullScreen"),null,null,n)),this.btnStartGame=new Xe.Button(null,null,null,null,t,new Xe.Label(Y.t("engine.servers.startGame"),null,null,n)),this.labelMenus=new Xe.Label("",null,null,n),this.header.setButtons(this.btnFullScreen,this.btnPause,this.btnRank),this.btnFullScreen.setClickAction((function(){e.toggleFullscreen(),e.pause()})),this.btnPause.setClickAction((function(){e.pause()})),this.btnRank.setClickAction((function(){e.gameRanking.closing||e.gameRanking.closed?e.gameRanking.open():e.gameRanking.close()})),this.btnTopArrow.setClickAction((function(){e.controller.key(ce.Key.UP)})),this.btnBottomArrow.setClickAction((function(){e.controller.key(ce.Key.BOTTOM)})),this.btnLeftArrow.setClickAction((function(){e.controller.key(ce.Key.LEFT)})),this.btnRightArrow.setClickAction((function(){e.controller.key(ce.Key.RIGHT)})),this.canvas){this.canvas.addEventListener("touchstart",(function(t){var n=t.changedTouches[0],i=e.getTouchPos(e.canvas,n);e.gameRanking.hovered||(e.touchEventStartX=i.x,e.touchEventStartY=i.y,e.touchEventStartTimestamp=performance.now())}));this.canvas.addEventListener("touchend",(function(){e.touchEventOffsetX=0,e.touchEventOffsetY=0})),this.canvas.addEventListener("touchmove",(function(t){!function(t){var n=t.changedTouches[0],i=e.getTouchPos(e.canvas,n);e.gameRanking.hovered||(e.touchEventOffsetX+=i.x-e.touchEventStartX,e.touchEventOffsetY+=i.y-e.touchEventStartY,performance.now()-e.touchEventStartTimestamp>=250&&(e.touchEventOffsetX=0,e.touchEventOffsetY=0),e.touchEventOffsetX<0&&Math.abs(e.touchEventOffsetX)>50?e.controller.key(ce.Key.LEFT):e.touchEventOffsetX>0&&Math.abs(e.touchEventOffsetX)>50?e.controller.key(ce.Key.RIGHT):e.touchEventOffsetY<0&&Math.abs(e.touchEventOffsetY)>50?e.controller.key(ce.Key.UP):e.touchEventOffsetY>0&&Math.abs(e.touchEventOffsetY)>50&&e.controller.key(ce.Key.BOTTOM),e.touchEventStartX=i.x,e.touchEventStartY=i.y)}(t),t.preventDefault()}))}}this.setIntervalCountFPS(),document.addEventListener("keydown",(function(t){if(!e.killed){var n=t.keyCode;90!=n&&87!=n||(n=ce.Key.UP),65!=n&&81!=n||(n=ce.Key.LEFT),83==n&&(n=ce.Key.BOTTOM),68==n&&(n=ce.Key.RIGHT),e.paused?e.countBeforePlay<0&&(e.lastKeyMenu=n):n==ce.Key.ENTER?e.pause():e.controller.key(n),t.preventDefault()}})),window.addEventListener("resize",(function(){e.autoResizeCanvas()}),!0),this.autoResizeCanvas(),this.loadAssets(),this.startDraw()}},{key:"getTouchPos",value:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}},{key:"autoResizeCanvas",value:function(){this.outputType!=ce.OutputType.GRAPHICAL||this.killed||Xe.Utils.autoResizeCanvas(this.canvas,this.canvasWidth,this.canvasHeight)}},{key:"setIntervalCountFPS",value:function(){var e=this;this.clearIntervalCountFPS(),this.intervalCountFPS=window.setInterval((function(){e.countFPS()}),1e3)}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frame-this.lastFrame),this.lastFrame=this.frame}},{key:"clearIntervalCountFPS",value:function(){clearInterval(this.intervalCountFPS)}},{key:"getNBPlayer",value:function(e){return this.controller.getNBPlayer(e)}},{key:"getPlayer",value:function(e,t){return this.controller.getPlayer(e,t)}},{key:"reset",value:function(){this.controller&&this.controller.reset()}},{key:"start",value:function(){this.controller&&this.controller.start()}},{key:"forceStart",value:function(){this.controller&&this.controller.forceStart()}},{key:"stop",value:function(){this.controller&&this.controller.stop()}},{key:"pause",value:function(){this.controller&&this.controller.pause()}},{key:"kill",value:function(){this.controller&&this.controller.kill()}},{key:"exit",value:function(){this.controller&&this.controller.exit()}},{key:"tick",value:function(){this.controller&&this.controller.tick()}},{key:"setKill",value:function(){this.killed=!0,this.clearIntervalCountFPS(),this.grid=null,this.snakes=null,null!=this.appendTo&&(this.outputType==ce.OutputType.TEXT&&null!=this.textarea?(this.appendTo.removeChild(this.textarea),this.textarea=null):this.outputType==ce.OutputType.GRAPHICAL&&null!=this.canvas&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=0,this.canvas.height=0,this.canvas.remove(this.appendTo),this.canvas=null,this.canvasCtx=null,this.imageLoader.clear()))}},{key:"toggleFullscreen",value:function(){var e=this;if(this.outputType==ce.OutputType.GRAPHICAL&&!this.killed){this.canvas.toggleFullscreen();var t=function(){e.outputType!=ce.OutputType.GRAPHICAL||e.killed||(document.fullscreenElement==e.canvas?e.fullscreen=!0:e.fullscreen=!1,document.fullscreenElement==e.canvas&&void 0!==screen.orientation&&void 0!==screen.orientation.lock&&screen.orientation.lock("landscape").catch((function(){})))};void 0!==document.onfullscreenchange?document.onfullscreenchange=t:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=t:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=t:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=t:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=t),t()}}},{key:"loadAssets",value:function(){var e=this;this.errorOccurred||this.outputType==ce.OutputType.TEXT?this.errorOccurred||this.outputType!=ce.OutputType.TEXT||(this.assetsLoaded=!0,this.start()):this.imageLoader.load(["assets/images/skin/"+this.graphicSkin+"/snake_4.png","assets/images/skin/"+this.graphicSkin+"/snake_3.png","assets/images/skin/"+this.graphicSkin+"/snake_2.png","assets/images/skin/"+this.graphicSkin+"/snake.png","assets/images/skin/"+this.graphicSkin+"/body_4_end.png","assets/images/skin/"+this.graphicSkin+"/body_3_end.png","assets/images/skin/"+this.graphicSkin+"/body_2_end.png","assets/images/skin/"+this.graphicSkin+"/body_end.png","assets/images/skin/"+this.graphicSkin+"/body_2.png","assets/images/skin/"+this.graphicSkin+"/body.png","assets/images/skin/"+this.graphicSkin+"/wall.png","assets/images/skin/"+this.graphicSkin+"/fruit.png","assets/images/skin/"+this.graphicSkin+"/body_angle_1.png","assets/images/skin/"+this.graphicSkin+"/body_angle_2.png","assets/images/skin/"+this.graphicSkin+"/body_angle_3.png","assets/images/skin/"+this.graphicSkin+"/body_angle_4.png","assets/images/pause.png","assets/images/fullscreen.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_4.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_3.png","assets/images/skin/"+this.graphicSkin+"/snake_dead_2.png","assets/images/skin/"+this.graphicSkin+"/snake_dead.png","assets/images/up.png","assets/images/left.png","assets/images/right.png","assets/images/bottom.png","assets/images/trophy.png","assets/images/trophy_silver.png","assets/images/trophy_bronze.png","assets/images/clock.png","assets/images/skin/"+this.graphicSkin+"/fruit_gold.png","assets/images/ranking.png","assets/images/skin/flat/fruit.png","assets/images/skin/"+this.graphicSkin+"/unknown.png"],(function(){e.imageLoader.hasError?e.errorOccurred=!0:(e.assetsLoaded=!0,e.btnFullScreen.loadImage(e.imageLoader),e.btnPause.loadImage(e.imageLoader),e.btnRank.loadImage(e.imageLoader),e.btnTopArrow.loadImage(e.imageLoader),e.btnBottomArrow.loadImage(e.imageLoader),e.btnLeftArrow.loadImage(e.imageLoader),e.btnRightArrow.loadImage(e.imageLoader),e.start())}),this)}},{key:"startDraw",value:function(){var e=this;requestAnimationFrame((function(t){return e.beforeDraw(t)}))}},{key:"beforeDraw",value:function(e){if(!this.killed){document.hasFocus()||this.paused||this.outputType==ce.OutputType.TEXT||this.controller.pause();var t=e-this.lastFrameTime;if(this.maxFPS<1||t>1e3/this.maxFPS){if(this.lastFrameTime=e,this.frame++,!this.paused&&!this.onlineMode||this.onlineMode||this.gameOver||this.gameFinished){this.offsetFrame+=t;var n=this.offsetFrame/(this.speed*ce.Setting.TIME_MULTIPLIER);(this.gameOver||this.gameFinished)&&n>=.95&&(this.offsetFrame=0,this.ticks++)}this.draw(),this.lastTime=Date.now()}this.startDraw()}}},{key:"draw",value:function(){var e=this;if(this.outputType!=ce.OutputType.TEXT||this.killed){if(this.outputType==ce.OutputType.GRAPHICAL&&!this.killed){var t=this.canvasCtx;if(this.currentPlayer=this.controller.getCurrentPlayer(),this.fontSize=ce.Setting.FONT_SIZE,this.header.minHeight=ce.Setting.HEADER_HEIGHT_DEFAULT,this.canvas.width<=ce.Setting.CANVAS_WIDTH/1.25?(this.fontSize/=1.25,this.header.minHeight=ce.Setting.HEADER_HEIGHT_DEFAULT/1.25):this.canvas.width>=1.5*ce.Setting.CANVAS_WIDTH&&(this.fontSize*=1.25,this.header.minHeight=1.25*ce.Setting.HEADER_HEIGHT_DEFAULT),Xe.Constants.Setting.FONT_SIZE=this.fontSize,this.labelMenus.size=this.fontSize,this.notificationMessage&&(this.notificationMessage.fontSize=this.fontSize,this.notificationMessage.fontSizeInitial=this.fontSize,this.notificationMessage.easingFunction=Xe.EasingFunctions.easeInOutCubic),this.gameRanking&&(this.gameRanking.fontSize=this.fontSize),this.menu.disable(),this.box.width=this.canvas.width,this.box.height=this.canvas.height,this.assetsLoaded&&!this.errorOccurred){if(this.header.set(this.snakes,this.imageLoader,this.bestScoreToDisplay,this.header.height,this.numFruit,this.enablePause),null==this.grid||this.grid.maze&&(!this.grid.maze||this.paused&&!this.gameOver&&!this.gameFinished)||this.gridUI.set(this.snakes,this.grid,this.speed,this.offsetFrame,this.header.height,this.imageLoader,this.currentPlayer,this.gameFinished,this.countBeforePlay,this.spectatorMode,this.ticks,this.gameOver),null!=this.timerToDisplay&&null!=this.timerToDisplay&&!isNaN(this.timerToDisplay)&&this.timerToDisplay>=0){var n=Xe.Utils.drawText(t,""+Ce.secondsFormat(this.timerToDisplay),"rgba(0, 0, 0, 0.5)",Math.round(this.fontSize),ce.Setting.FONT_FAMILY,"right","default",null,Math.round(this.header.height+15+.475*this.header.height));Xe.Utils.drawImage(t,this.imageLoader.get("assets/images/clock.png",Math.round(.64*this.header.height),Math.round(.64*this.header.height)),Math.round(n.x-.64*this.header.height-10),Math.round(this.header.height+15),Math.round(.64*this.header.height),Math.round(.64*this.header.height))}}else if(!this.assetsLoaded){var i=Math.floor(100*Object.keys(this.imageLoader.images).length/this.imageLoader.nbImagesToLoad);this.labelMenus.text=Y.t("engine.loading")+"\n"+i+"%",this.labelMenus.color="white",this.progressBarLoading.percent=i/100,this.progressBarLoading.width=this.canvas.width/4,this.menu.set(this.labelMenus,this.progressBarLoading)}this.aiStuck&&!this.precAiStuck&&(this.precAiStuck=!0,this.setNotification(new Xe.NotificationMessage(Y.t("engine.aiStuck"),null,ce.Setting.ERROR_NOTIF_COLOR,10))),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof Xe.NotificationMessage&&!this.notificationMessage.foreGround&&this.notificationMessage.draw(this),null!=this.snakes&&this.snakes.length<=1&&this.gameRanking.forceClose(),this.gameFinished||this.gameOver||!this.assetsLoaded||this.errorOccurred||this.gameRanking.set(this.snakes,this.fontSize,this.header.height,this.currentPlayer,this.imageLoader,this.spectatorMode),this.disableAllButtons(),this.searchingPlayers&&this.lastTime>0?this.timeStart-=Math.max(0,Date.now()-this.lastTime):this.timeStart=0;var r=this.timeStart>0?"\n\n"+Y.t("engine.servers.nextGameStart")+" "+Ce.millisecondsFormat(this.timeStart):"";if(this.exited)this.labelMenus.text=Y.t("engine.exited"),this.labelMenus.color="white",this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus),this.btnExitFullScreen.setClickAction((function(){e.toggleFullscreen()}));else if(this.errorOccurred)this.labelMenus.text=this.imageLoader.hasError?Y.t("engine.errorLoading"):Y.t("engine.error"),this.labelMenus.color="#E74C3C",this.menu.set(this.labelMenus,this.btnQuit),this.btnQuit.setClickAction((function(){e.confirmExit=!1,e.exit()}));else if(this.getInfosGame)this.getAdvancedInfosGame&&this.grid&&(this.grid.seedGrid||this.grid.seedGame)?(this.labelMenus.text=(this.grid.seedGrid?Y.t("engine.seedGrid")+"\n"+this.grid.seedGrid:"")+(this.grid.seedGame?"\n"+Y.t("engine.seedGame")+"\n"+this.grid.seedGame:""),this.menu.set(this.labelMenus,this.btnOK),this.btnOK.setClickAction((function(){e.getAdvancedInfosGame=!1}))):(this.labelMenus.text=(null!=this.snakes&&this.snakes.length<=1&&!this.spectatorMode?Y.t("engine.player")+" "+(null!=this.snakes&&this.snakes[0].player==ce.PlayerType.HUMAN&&!this.spectatorMode||null!=this.snakes&&this.snakes[0].player==ce.PlayerType.HYBRID_HUMAN_AI?Y.t("engine.playerHuman"):Y.t("engine.playerAI")):"")+(this.getNBPlayer(ce.PlayerType.AI)>0?"\n"+Y.t("engine.aiLevel")+" "+Y.t("engine.aiLevelList."+this.getPlayer(1,ce.PlayerType.AI).getAILevelText()):"")+"\n"+Y.t("engine.sizeGrid")+" "+(null!=this.grid&&this.grid.width?this.grid.width:"???")+"×"+(null!=this.grid&&this.grid.height?this.grid.height:"???")+"\n"+Y.t("engine.currentSpeed")+" "+(null!=this.initialSpeed?this.initialSpeed:"???")+(null!=this.snakes&&this.snakes.length<=1&&this.progressiveSpeed?"\n"+Y.t("engine.progressiveSpeed"):"")+(null==this.grid||this.grid.maze||null==this.snakes||this.snakes[0].player!=ce.PlayerType.HYBRID_HUMAN_AI?"":"\n"+Y.t("engine.assistAI"))+(null!=this.grid&&this.grid.maze?"\n"+Y.t("engine.mazeModeMin"):"")+(this.onlineMode?"\n"+Y.t("engine.onlineMode"):"")+(this.pingLatency>-1?"\n"+Y.t("engine.ping")+" "+this.pingLatency+" ms":""),this.grid&&(this.grid.seedGrid||this.grid.seedGame)?this.menu.set(this.labelMenus,this.btnAdvanced,this.btnOK):this.menu.set(this.labelMenus,this.btnOK),this.btnOK.setClickAction((function(){e.getInfosGame=!1})),this.btnAdvanced.setClickAction((function(){e.getAdvancedInfosGame=!0}))),this.labelMenus.color="white";else if(this.getInfos)this.labelMenus.text=Y.t("engine.aboutScreen.title")+"\nwww.eliastiksofts.com\n\n"+Y.t("engine.aboutScreen.versionAndDate",{version:ce.Setting.APP_VERSION,date:new Intl.DateTimeFormat(Y.language).format(new Date(ce.Setting.DATE_VERSION)),interpolation:{escapeValue:!1}}),this.labelMenus.color="white",this.menu.set(this.labelMenus,this.btnInfosGame,this.btnOK),this.btnInfosGame.setClickAction((function(){e.getInfosGame=!0})),this.btnOK.setClickAction((function(){e.getInfos=!1}));else if(this.confirmExit)this.labelMenus.text=Y.t("engine.exitConfirm"),this.labelMenus.color="#E74C3C",this.menu.set(this.labelMenus,this.btnNo,this.btnYes),this.btnYes.setClickAction((function(){e.confirmExit=!1,e.exit()})),this.btnNo.setClickAction((function(){e.confirmExit=!1}));else if(this.assetsLoaded&&this.countBeforePlay>=0){var s,o,a;if(null!=this.snakes&&(this.snakes.length>1&&this.getNBPlayer(ce.PlayerType.HUMAN)<=1&&null!=this.getPlayer(1,ce.PlayerType.HUMAN)||this.snakes.length>1&&this.getNBPlayer(ce.PlayerType.HYBRID_HUMAN_AI)<=1&&null!=this.getPlayer(1,ce.PlayerType.HYBRID_HUMAN_AI)||null!=this.currentPlayer&&this.snakes.length>1))this.spectatorMode||(s=null!=this.currentPlayer&&this.currentPlayer>-1?this.getPlayer(this.currentPlayer+1,ce.PlayerType.HUMAN)||this.getPlayer(this.currentPlayer+1,ce.PlayerType.HYBRID_HUMAN_AI):null!=this.getPlayer(1,ce.PlayerType.HUMAN)?this.getPlayer(1,ce.PlayerType.HUMAN):this.getPlayer(1,ce.PlayerType.HYBRID_HUMAN_AI)),null!=s&&(o=qe(Ce.addHue(ce.Setting.IMAGE_SNAKE_HUE,s.color),ce.Setting.IMAGE_SNAKE_SATURATION,ce.Setting.IMAGE_SNAKE_VALUE),a=Ke(Ce.addHue(ce.Setting.IMAGE_SNAKE_HUE,s.color)/360,ce.Setting.IMAGE_SNAKE_SATURATION/100,ce.Setting.IMAGE_SNAKE_VALUE/100)),this.countBeforePlay>0?this.labelMenus.text=""+this.countBeforePlay:this.labelMenus.text=Y.t("engine.ready"),this.labelMenus.text+=null!=s?"\n"+(!this.isFilterHueAvailable||"???"==o||"flat"!=this.graphicSkin&&"pixel"!=this.graphicSkin?Y.t("engine.arrowPlayer"):Y.t("engine.colorPlayer",{color:o})):"",a&&a.length>=3?this.labelMenus.color=!this.isFilterHueAvailable||"???"==o||"flat"!=this.graphicSkin&&"pixel"!=this.graphicSkin?["white","#3498db"]:["white","rgb("+a[0]+", "+a[1]+", "+a[2]+")"]:this.labelMenus.color="white";else this.countBeforePlay>0?this.labelMenus.text=""+this.countBeforePlay:this.labelMenus.text=Y.t("engine.ready"),this.labelMenus.color="white";this.fullscreen?this.menu.set(this.labelMenus):this.menu.set(this.labelMenus,this.btnEnterFullScreen),this.btnEnterFullScreen.setClickAction((function(){e.toggleFullscreen()}))}else if(this.confirmReset&&!this.gameOver)this.labelMenus.text=Y.t("engine.resetConfirm"),this.labelMenus.color="#E74C3C",this.menu.set(this.labelMenus,this.btnNo,this.btnYes),this.btnYes.setClickAction((function(){e.confirmReset=!1,e.reset()})),this.btnNo.setClickAction((function(){e.confirmReset=!1}));else if(this.gameFinished)this.labelMenus.text=this.grid.maze&&this.gameMazeWin?Y.t("engine.mazeWin"):Y.t("engine.gameFinished")+r,this.labelMenus.color=this.grid.maze&&this.gameMazeWin?"#2ecc71":"white",this.enableRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.menu.set(this.labelMenus,this.btnQuit),this.btnRetry.setClickAction((function(){e.reset()})),this.btnQuit.setClickAction((function(){e.confirmExit=!0}));else if(this.scoreMax&&this.snakes.length<=1)this.labelMenus.text=Y.t("engine.scoreMax")+r,this.labelMenus.color="#2ecc71",this.enableRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus,this.btnQuit),this.btnRetry.setClickAction((function(){e.reset()})),this.btnQuit.setClickAction((function(){e.confirmExit=!0})),this.btnExitFullScreen.setClickAction((function(){e.toggleFullscreen()}));else if(this.gameOver&&this.snakes.length<=1)this.labelMenus.text=Y.t("engine.gameOver")+r,this.labelMenus.color="#E74C3C",this.enableRetry&&this.snakes[0]&&!this.snakes[0].autoRetry?this.menu.set(this.labelMenus,this.btnRetry,this.btnQuit):this.fullscreen?this.menu.set(this.labelMenus,this.btnExitFullScreen):this.menu.set(this.labelMenus,this.btnQuit),this.snakes[0]&&this.snakes[0].autoRetry&&null==this.timeoutAutoRetry?this.timeoutAutoRetry=setTimeout((function(){e.reset(),e.timeoutAutoRetry=null}),500):(this.btnRetry.setClickAction((function(){e.reset()})),this.btnQuit.setClickAction((function(){e.confirmExit=!0})),this.btnExitFullScreen.setClickAction((function(){e.toggleFullscreen()})));else if(this.assetsLoaded&&this.searchingPlayers)this.labelMenus.text=Y.t("engine.servers.waitingPlayers")+"\n"+this.playerNumber+"/"+this.maxPlayers+(this.timeStart>0?"\n\n"+Y.t("engine.servers.gameStart")+" "+Ce.millisecondsFormat(this.timeStart):""),this.labelMenus.color="white",this.onlineMaster?this.menu.set(this.labelMenus,this.btnStartGame,this.btnQuit):this.menu.set(this.labelMenus,this.btnQuit),this.btnQuit.setClickAction((function(){e.confirmExit=!0})),this.btnStartGame.setClickAction((function(){e.forceStart()}));else if(this.paused&&!this.gameOver&&this.assetsLoaded)this.labelMenus.text=Y.t("engine.pause"),this.labelMenus.color="white",this.enablePause?this.enableRetry&&this.enableRetryPauseMenu?this.menu.set(this.labelMenus,this.btnContinue,this.btnRetry,this.btnAbout,this.btnQuit):this.menu.set(this.labelMenus,this.btnContinue,this.btnAbout,this.btnQuit):this.menu.set(this.labelMenus,this.btnContinue,this.btnAbout),this.btnContinue.setClickAction((function(){e.start()})),this.btnRetry.setClickAction((function(){e.confirmReset=!0})),this.btnQuit.setClickAction((function(){e.confirmExit=!0})),this.btnAbout.setClickAction((function(){e.getInfos=!0}));else if(this.assetsLoaded){if(this.btnFullScreen.enable(),this.gameRanking.enable(),null!=this.snakes)for(var l=0;l<this.snakes.length;l++)if(this.snakes[l].player==ce.PlayerType.HUMAN||this.snakes[l].player==ce.PlayerType.HYBRID_HUMAN_AI){this.btnTopArrow.enable(),this.btnBottomArrow.enable(),this.btnLeftArrow.enable(),this.btnRightArrow.enable();break}this.enablePause&&this.btnPause.enable(),null!=this.snakes&&this.snakes.length>1&&this.btnRank.enable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof Xe.NotificationMessage&&!this.notificationMessage.foreGround&&this.notificationMessage.enableCloseButton()}this.assetsLoaded&&this.engineLoading&&(this.labelMenus.text=Y.t("engine.loadingWorker"),this.labelMenus.color="white",this.menu.set(this.labelMenus)),this.labelMenus.fontSize=this.fontSize,(this.gameFinished||this.gameOver)&&null!=this.snakes&&this.snakes.length>1&&!this.errorOccurred&&(this.gameRanking.open(),this.gameRanking.enable()),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof Xe.NotificationMessage&&this.notificationMessage.foreGround&&this.notificationMessage.enableCloseButton(),this.displayFPS&&Xe.Utils.drawText(t,this.getDebugText(),"rgba(255, 255, 255, 0.85)",Math.round(this.fontSize/1.5),ce.Setting.FONT_FAMILY,"right","bottom",null,null,!0),this.spectatorMode&&Xe.Utils.drawText(t,Y.t("engine.servers.spectatorMode"),"rgba(255, 255, 255, 0.5)",Math.round(this.fontSize),ce.Setting.FONT_FAMILY,"left","bottom",null,null,!0),this.canvas.draw()}}else null!=this.grid&&(this.textarea.style.width=16.5*this.grid.width+"px",this.textarea.style.height=16*this.grid.height+100+"px"),this.textarea.innerHTML=this.toString()}},{key:"setDisplayFPS",value:function(e){this.displayFPS=e}},{key:"disableAllButtons",value:function(){this.outputType==ce.OutputType.GRAPHICAL&&(this.btnContinue.disable(),this.btnRetry.disable(),this.btnQuit.disable(),this.btnYes.disable(),this.btnNo.disable(),this.btnOK.disable(),this.btnOK.disable(),this.btnAbout.disable(),this.btnInfosGame.disable(),this.btnFullScreen.disable(),this.btnPause.disable(),this.btnRank.disable(),this.btnExitFullScreen.disable(),this.btnEnterFullScreen.disable(),this.btnStartGame.disable(),this.gameRanking.disable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof Xe.NotificationMessage&&this.notificationMessage.disableCloseButton(),this.btnTopArrow.disable(),this.btnBottomArrow.disable(),this.btnRightArrow.disable(),this.btnLeftArrow.disable())}},{key:"setNotification",value:function(e){null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof Xe.NotificationMessage&&(this.notificationMessage.close(),this.scene.remove(this.notificationMessage)),this.notificationMessage=e,this.notificationMessage instanceof Xe.NotificationMessage&&this.disableAnimation&&(this.notificationMessage.disableAnimation=!0),this.notificationMessage&&(this.scene.add(this.notificationMessage),this.notificationMessage.open())}},{key:"setTimeToDisplay",value:function(e){this.timerToDisplay=e}},{key:"setBestScore",value:function(e){null!=e&&null!=e&&""!=e.trim()&&(this.bestScoreToDisplay=e)}},{key:"getDebugText",value:function(){return Y.t("engine.debug.fps")+" "+this.currentFPS+" / "+Y.t("engine.debug.frames")+" "+this.frame+" / "+Y.t("engine.debug.ticks")+" "+this.ticks+" / "+Y.t("engine.debug.speed")+" "+this.speed+(this.pingLatency>-1?" / "+Y.t("engine.ping")+" "+this.pingLatency+" ms":"")}},{key:"toString",value:function(){return(null!=this.grid?this.grid.toString():"")+"\n"+(null!=this.snakes&&this.snakes.length<=1?Y.t("engine.score")+" : "+(null!=this.snakes?this.snakes[0].score:""):"")+(this.displayFPS?"\n"+this.getDebugText():"")+(this.gameOver&&!this.scoreMax?"\n"+Y.t("engine.gameOver"):"")+(this.scoreMax?"\n"+Y.t("engine.scoreMax"):"")+(!this.gameOver&&this.paused?"\n"+Y.t("engine.debug.paused"):"")+(this.countBeforePlay>0?"\n"+this.countBeforePlay:"")}}]),e}(),at=function(){function e(t,n,i,r,s,o,a){fe()(this,e),this.grid=t,this.snakes=n,this.speed=null==i?8:i,this.initialSpeed=null==i?8:i,this.initialSpeedUntouched=null==i?8:i,this.enablePause=null==r||r,this.enableRetry=null==s||s,this.progressiveSpeed=null!=o&&o,this.aiStuckLimit=null==a?3:a,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.clientSidePredictionsMode=!1,this.aiStuck=!1,this.intervalPlay,this.reactor=new ye,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}return pe()(e,[{key:"init",value:function(){if(!this.clientSidePredictionsMode)if(null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes],this.grid instanceof _e==0)this.errorOccurred=!0;else if(!this.errorOccurred){this.initGridAndSnakes();for(var e=Ce.randRange(0,360,this.grid?new Le.a(this.grid.seedGame):null),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof Ye==0?this.errorOccurred=!0:(e=Ce.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e)}}},{key:"initGridAndSnakes",value:function(){if(this.grid.reset(),this.grid.init(),null!=this.snakes){for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();for(var t=0;t<this.snakes.length;t++)this.snakes[t].init()}this.grid.setFruit(this.snakes.length)}},{key:"reset",value:function(){this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.aiStuck=!1,this.grid.seedGrid&&(this.grid.seedGrid=""+(parseInt(this.grid.seedGrid)+1)),this.grid.seedGame&&(this.grid.seedGame=""+(parseInt(this.grid.seedGame)+1)),this.initGridAndSnakes(),this.reactor.dispatchEvent("onReset"),this.start()}},{key:"start",value:function(){var e=this;if(this.reactor.dispatchEvent("onUpdateCounter"),!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&e.forceStart()}),1e3))}}},{key:"forceStart",value:function(){this.clearIntervalPlay(),this.countBeforePlay=-1,this.paused=!1,this.isReseted=!1,this.firstStart=!1,this.starting=!1,this.reactor.dispatchEvent("onStart"),this.tick()}},{key:"clearIntervalPlay",value:function(){clearInterval(this.intervalPlay)}},{key:"continue",value:function(){this.clientSidePredictionsMode||(this.start(),this.reactor.dispatchEvent("onContinue"))}},{key:"stop",value:function(e){this.gameOver||this.clientSidePredictionsMode||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))}},{key:"pause",value:function(){this.paused||this.clientSidePredictionsMode||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))}},{key:"kill",value:function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}}},{key:"exit",value:function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))}},{key:"destroySnakes",value:function(e,t){for(var n=0;n<this.snakes.length;n++)e&&Array.isArray(e)&&e.indexOf(n)<0&&t.indexOf(this.snakes[n].player)>-1&&this.snakes[n].setGameOver(this.ticks)}},{key:"getNBPlayer",value:function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t}},{key:"getPlayer",value:function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null}},{key:"tick",value:function(){var e=this;setTimeout((function(){e.doTick()}),this.initialSpeed*ce.Setting.TIME_MULTIPLIER)}},{key:"doTick",value:function(){if(!this.paused&&!this.killed){0==this.lastTime&&(this.lastTime=time),this.ticks++;var e,t=!1;if(this.grid&&(!this.grid.maze||this.grid.mazeForceAuto||this.grid.maze&&this.getNBPlayer(ce.PlayerType.HUMAN)<=0&&this.getNBPlayer(ce.PlayerType.HYBRID_HUMAN_AI)<=0||this.grid.maze&&(this.getNBPlayer(ce.PlayerType.HUMAN)>0||this.getNBPlayer(ce.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=(this.getPlayer(1,ce.PlayerType.HYBRID_HUMAN_AI)||this.getPlayer(1,ce.PlayerType.HUMAN)).lastKey)){for(var n=0;n<this.snakes.length;n++){var i=this.snakes[n].direction,r=!1,s=!1;if(t=!1,this.snakes[n].lastTailMoved=!1,!this.snakes[n].gameOver&&!this.snakes[n].scoreMax){this.snakes[n].player==ce.PlayerType.HUMAN||this.snakes[n].player==ce.PlayerType.HYBRID_HUMAN_AI?(this.snakes[n].moveTo(this.snakes[n].lastKey),this.snakes[n].lastKey=-1):this.snakes[n].player==ce.PlayerType.AI&&(!this.clientSidePredictionsMode||this.clientSidePredictionsMode&&this.snakes[n].aiLevel!=ce.AiLevel.RANDOM)&&this.snakes[n].moveTo(this.snakes[n].ai());var o=this.snakes[n].getHeadPosition();this.snakes[n].player==ce.PlayerType.HYBRID_HUMAN_AI&&this.grid.isDeadPosition(this.snakes[n].getNextPosition(o,this.snakes[n].direction))&&(this.snakes[n].direction=i,this.snakes[n].moveTo(this.snakes[n].ai()),this.snakes[n].lastKey=-1),o=this.snakes[n].getNextPosition(o,this.snakes[n].direction),this.grid.isDeadPosition(o)?this.snakes[n].setGameOver(this.ticks):this.grid.get(o)==ce.CaseType.FRUIT||this.grid.get(o)==ce.CaseType.FRUIT_GOLD?(this.grid.get(o)==ce.CaseType.FRUIT?(this.snakes[n].score++,this.grid.set(ce.CaseType.EMPTY,this.grid.fruitPos),this.grid.fruitPos=null):this.grid.get(o)==ce.CaseType.FRUIT_GOLD&&(this.snakes[n].score+=3,this.grid.set(ce.CaseType.EMPTY,this.grid.fruitPosGold),this.grid.fruitPosGold=null,s=!0),e=!0,this.snakes[n].insert(o),this.grid.maze?(this.gameMazeWin=!0,this.gameFinished=!0,this.stop()):this.snakes[n].hasMaxScore()&&this.snakes.length<=1?(this.scoreMax=!0,this.snakes[n].scoreMax=!0,this.stop()):(this.numFruit++,s||(r=!0)),this.snakes.length<=1&&this.progressiveSpeed&&this.snakes[n].score>0&&this.initialSpeed>1&&(this.initialSpeed=Math.ceil(-this.initialSpeedUntouched/100*this.snakes[n].score+this.initialSpeedUntouched),this.initialSpeed=this.initialSpeed<1?1:this.initialSpeed)):(this.snakes[n].insert(o),this.grid.maze||(this.snakes[n].remove(),this.snakes[n].lastTailMoved=!0))}this.scoreMax||!r||this.clientSidePredictionsMode||(t=!this.grid.setFruit(this.snakes.length))}this.scoreMax||t||!this.grid.detectCorridor(this.grid.fruitPos)&&!this.grid.isFruitSurrounded(this.grid.fruitPos,!0)||this.clientSidePredictionsMode||(t=!this.grid.setFruit(this.snakes.length)),this.scoreMax||null==this.grid.fruitPosGold||!this.grid.detectCorridor(this.grid.fruitPosGold)&&!this.grid.isFruitSurrounded(this.grid.fruitPosGold,!0)||(this.grid.set(ce.CaseType.EMPTY,this.grid.fruitPosGold),this.grid.fruitPosGold=null);for(var a=0,l=0;l<this.snakes.length;l++)(this.snakes[l].gameOver||this.snakes[l].scoreMax)&&a++;for(var c=!1,u=0;u<this.snakes.length;u++)if(!this.snakes[u].gameOver&&this.snakes[u].isAIStuck(1,1))this.aiStuck=!0,c=!!this.snakes[u].isAIStuck(this.aiStuckLimit,this.aiStuckLimit);else if((this.snakes[u].player==ce.PlayerType.HUMAN||this.snakes[u].player==ce.PlayerType.HYBRID_HUMAN_AI)&&!this.snakes[u].gameOver||this.snakes[u].player==ce.PlayerType.AI&&!this.snakes[u].gameOver){this.aiStuck=!1,c=!1;break}(a>=this.snakes.length||t||c)&&(this.stop(),this.snakes.length>1&&(this.gameFinished=!0)),this.reactor.dispatchEvent("onUpdate"),e&&this.reactor.dispatchEvent("onScoreIncreased")}this.tick()}}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"onContinue",value:function(e){this.reactor.addEventListener("onContinue",e)}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"onKill",value:function(e){this.reactor.addEventListener("onKill",e)}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"onUpdate",value:function(e){this.reactor.addEventListener("onUpdate",e)}},{key:"onUpdateCounter",value:function(e){this.reactor.addEventListener("onUpdateCounter",e)}}]),e}();function lt(e){if("undefined"!=typeof window)try{if(!window.Worker)throw"Workers not supported";var t=new Worker("dist/GameEngineWorker.js");t&&(t.postMessage("ping"),t.onmessage=function(n){if("pong"==n.data)return t.terminate(),e(!0)})}catch(t){return e(!1)}}"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame),"undefined"!=typeof document&&void 0===document.fullscreenElement&&Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.oFullscreenElement}}),"undefined"!=typeof document&&(document.exitFullscreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var ct=!1;function ut(e,t,n,i,r,s,o,a,l,c,u,h,d,f){var g,p=new at(e,t,n,r,s,o);return p.init(),(g=ct&&h.enableMultithreading?new je(p):new ve(p)).gameUI=d||new ot(g,i,a,l,c,u,h),f&&(g.onlineMode=!0),g.init(),g}function ht(e,t,n,i,r,s,o,a,l,c){return new Xe.NotificationMessage(new Xe.Style({backgroundColor:n,foreGround:a,disableAnimation:l}),i,null,new Xe.Label(e,null,null,new Xe.Style({fontSize:s,fontFamily:o,fontColor:t||"white",alignement:"center",verticalAlignement:"center"})))}lt((function(e){ct=e})),"undefined"!=typeof window&&(window.PLAYER_AI=ce.PlayerType.AI,window.PLAYER_HUMAN=ce.PlayerType.HUMAN,window.PLAYER_HYBRID_HUMAN_AI=ce.PlayerType.HYBRID_HUMAN_AI,window.AI_LEVEL_RANDOM=ce.AiLevel.RANDOM,window.AI_LEVEL_LOW=ce.AiLevel.LOW,window.AI_LEVEL_DEFAULT=ce.AiLevel.DEFAULT,window.AI_LEVEL_HIGH=ce.AiLevel.HIGH,window.AI_LEVEL_ULTRA=ce.AiLevel.ULTRA,window.UP=ce.Direction.UP,window.RIGHT=ce.Direction.RIGHT,window.BOTTOM=ce.Direction.BOTTOM,window.LEFT=ce.Direction.LEFT,window.ANGLE_1=ce.Direction.ANGLE_1,window.ANGLE_2=ce.Direction.ANGLE_2,window.ANGLE_3=ce.Direction.ANGLE_3,window.ANGLE_4=ce.Direction.ANGLE_4,window.APP_VERSION=ce.Setting.APP_VERSION,window.DATE_VERSION=ce.Setting.DATE_VERSION);var dt=function(){function e(t){fe()(this,e),this.games=null==t?[]:t,this.reactor=new ye,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onScoreIncreased"),this.init()}return pe()(e,[{key:"init",value:function(){for(var e=this,t=0;t<this.games.length;t++)0==t&&(this.games[t].enableKeyMenu=!0),this.games[t].onPause(function(t){e.pauseAll(t)}.bind(null,t)),this.games[t].onContinue(function(t){e.startAll(t)}.bind(null,t)),this.games[t].onExit(function(t){e.checkExit(t)}.bind(null,t)),this.games[t].onStop(function(t){e.checkStop(t)}.bind(null,t)),this.games[t].onReset(function(t){e.resetAll(t)}.bind(null,t)),this.games[t].onScoreIncreased(function(t){e.checkOnScoreIncreased(t)}.bind(null,t))}},{key:"start",value:function(){this.startAll(null)}},{key:"startAll",value:function(e){for(var t=0;t<this.games.length;t++)!this.games[t].paused||this.games[t].starting||null!=e&&t==e||this.games[t].start();this.reactor.dispatchEvent("onStart")}},{key:"onStart",value:function(e){this.reactor.addEventListener("onStart",e)}},{key:"pauseAll",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].paused||null!=e&&t==e||this.games[t].pause();this.reactor.dispatchEvent("onPause")}},{key:"onPause",value:function(e){this.reactor.addEventListener("onPause",e)}},{key:"resetAll",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].isReseted||null!=e&&t==e||this.games[t].reset();this.reactor.dispatchEvent("onReset")}},{key:"onReset",value:function(e){this.reactor.addEventListener("onReset",e)}},{key:"checkExit",value:function(e){for(var t=!0,n=0;n<this.games.length;n++)this.games[n].exited||(t=!1);t?this.reactor.dispatchEvent("onExit"):this.startAll(e)}},{key:"onExit",value:function(e){this.reactor.addEventListener("onExit",e)}},{key:"checkStop",value:function(){for(var e=!0,t=0;t<this.games.length;t++)this.games[t].gameOver||(e=!1);e&&this.reactor.dispatchEvent("onStop")}},{key:"onStop",value:function(e){this.reactor.addEventListener("onStop",e)}},{key:"stopAll",value:function(e){for(var t=0;t<this.games.length;t++)e?this.games[t].finish(!0):this.games[t].stop()}},{key:"killAll",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].kill()}},{key:"checkOnScoreIncreased",value:function(){this.reactor.dispatchEvent("onScoreIncreased")}},{key:"onScoreIncreased",value:function(e){this.reactor.addEventListener("onScoreIncreased",e)}},{key:"setDisplayFPS",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].setDisplayFPS(e)}},{key:"setNotification",value:function(e){for(var t=0;t<this.games.length;t++)this.games[t].setNotification(e.copy())}},{key:"closeNotification",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].setNotification(null)}},{key:"errorOccurred",value:function(){for(var e=0;e<this.games.length;e++)if(this.games[e].errorOccurred)return!0;return!1}},{key:"closeRanking",value:function(){for(var e=0;e<this.games.length;e++)this.games[e].closeRanking();return!1}},{key:"destroySnakes",value:function(e,t){for(var n=0;n<this.games.length;n++)if(this.games[n].destroySnakes(e,t),e&&Array.isArray(e))for(var i=0;i<e.length;i++)e[i]-=1}},{key:"getWinners",value:function(){for(var e=[],t=[],n=-1,i=0;i<this.games.length;i++)for(var r=0;r<this.games[i].snakes.length;r++)this.games[i].snakes[r].score>n&&(n=this.games[i].snakes[r].score);if(n>=0)for(var s=0,o=0;o<this.games.length;o++)for(var a=0;a<this.games[o].snakes.length;a++)this.games[o].snakes[a].score>=n&&(e.push(this.games[o].snakes[a]),t.push(s)),s++;return{winners:e,score:n,index:t}}}]),e}(),ft=n(19),gt=n.n(ft);function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=we()(e);if(t){var r=we()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Se()(this,n)}}var mt=function(e){ke()(n,e);var t=pt(n);function n(e,i,r,s){var o;return fe()(this,n),(o=t.call(this,new ut(null,null,null,null,null,null,null,null,null,null,null,s,i,!0),i)).enableClientSidePredictions=r||!1,o.socket=e,o.pingLatency=-1,o}return pe()(n,[{key:"parseData",value:function(e,t,n){var i=[e,t];if(i.length>1){var r=this.grid;if(i[1].hasOwnProperty("grid")&&null!=i[1].grid&&null!=i[1].grid.grid&&(r=Object.assign(new _e,i[1].grid),i[1].grid=r),i[1].hasOwnProperty("snakes")&&null!=i[1].snakes)for(var s=0;s<i[1].snakes.length;s++){i[1].snakes[s].grid=r,i[1].snakes[s]=Object.assign(new Ye,i[1].snakes[s]);for(var o=0;o<i[1].snakes[s].queue.length;o++)i[1].snakes[s].queue[o]=Object.assign(new Te,i[1].snakes[s].queue[o])}this.update(i[0],i[1],n)}}},{key:"init",value:function(){var e=this;this.socket.on("init",(function(t){e.parseData("init",t,e.enableClientSidePredictions),e.gameEngine.update("update",{engineLoading:!1},!0),e.enableClientSidePredictions&&(e.gameEngine.update("update",{clientSidePredictionsMode:!0},!0),t&&t.currentPlayer&&(e.gameEngine.currentPlayer=t.currentPlayer),t&&t.countBeforePlay<0&&e.gameEngine.forceStart())})),this.socket.on("reset",(function(t){e.parseData("reset",t,e.enableClientSidePredictions),e.reactor.dispatchEvent("onReset")})),this.socket.on("start",(function(t){e.parseData("start",t),e.reactor.dispatchEvent("onStart")})),this.socket.on("pause",(function(t){e.parseData("pause",t),e.reactor.dispatchEvent("onPause")})),this.socket.on("continue",(function(t){e.parseData("continue",t),e.reactor.dispatchEvent("onContinue")})),this.socket.on("stop",(function(t){e.parseData("stop",t,e.enableClientSidePredictions),e.reactor.dispatchEvent("onStop")})),this.socket.on("exit",(function(t){e.parseData("exit",t),e.gameEngine.exit(),e.reactor.dispatchEvent("onExit")})),this.socket.on("kill",(function(t){e.parseData("kill",t),e.gameEngine.kill(),e.reactor.dispatchEvent("onKill")})),this.socket.on("scoreIncreased",(function(t){e.parseData("scoreIncreased",t),e.reactor.dispatchEvent("onScoreIncreased")})),this.socket.on("update",(function(t){e.parseData("update",t,e.enableClientSidePredictions),e.gameEngine.clientSidePredictionsMode||(e.gameUI.offsetFrame=0),e.reactor.dispatchEvent("onUpdate")})),this.socket.on("updateCounter",(function(t){e.parseData("updateCounter",t),t&&t.countBeforePlay<0&&e.enableClientSidePredictions&&e.gameEngine.forceStart(),e.reactor.dispatchEvent("onUpdateCounter")})),this.socket.on("notification",(function(t,n,i,r,s){e.gameUI.setNotification(new Xe.NotificationMessage(t,i,r,n,null,null,null,s))})),this.socket.once("error",(function(){e.gameUI.setNotification(new Xe.NotificationMessage(Y.t("engine.servers.errorConnection"),null,GameConstants.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("connect_error",(function(){e.gameUI.setNotification(new Xe.NotificationMessage(Y.t("engine.servers.errorConnection"),null,GameConstants.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("connect_timeout",(function(){e.gameUI.setNotification(new Xe.NotificationMessage(Y.t("engine.servers.errorConnection"),null,GameConstants.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))})),this.socket.once("reconnect_error",(function(){e.gameUI.setNotification(new Xe.NotificationMessage(Y.t("engine.servers.errorConnection"),null,GameConstants.Setting.ERROR_NOTIF_COLOR,null,null,null,null,!0))}))}},{key:"reset",value:function(){this.socket.emit("reset")}},{key:"start",value:function(){this.socket.emit("start")}},{key:"stop",value:function(){this.socket.emit("stop")}},{key:"finish",value:function(e){this.socket.emit(e?"finish":"stop")}},{key:"pause",value:function(){this.socket.emit("pause")}},{key:"kill",value:function(){this.socket.emit("kill")}},{key:"tick",value:function(){this.socket.emit("tick")}},{key:"exit",value:function(){this.socket.emit("exit")}},{key:"key",value:function(e){this.socket.emit("key",e),this.gameEngine.key(e),this.lastKey=this.gameEngine.lastKey}},{key:"forceStart",value:function(){this.socket.emit("forceStart")}},{key:"updateEngine",value:function(e,t){this.gameEngine.updateEngine(e,t)}}]),n}(ve),yt=function(){function e(){fe()(this,e),this.url,this.port,this.socket,this.token,this.id,this.serverSettings,this.currentRoom,this.game,this.serverVersion,this.engineServerVersion,this.intervalReconnect,this.disconnected=!1,this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1,this.pingLatency=-1,this.ui}return pe()(e,[{key:"connect",value:function(e,t,n){var i=this;this.disconnect(),this.disconnected=!1,this.url=e,this.port=t,null!=this.url&&"/"==this.url.charAt(this.url.length-1)&&(this.url=this.url.substring(0,this.url.length-1)),this.socket=new gt.a(this.getURL()+(this.token?"?token="+this.token:"")),this.socket.once("connect",(function(){i.socket.once("authent",(function(e){e==ce.GameState.AUTHENTICATION_SUCCESS?n(!0):n(!1,e,i.socket.id)})),i.socket.once("token",(function(e){i.token=e,i.connect(i.url,i.port,n)}))})),this.socket.on("error",(function(e){n(!1,e),i.disconnect()})),this.socket.on("connect_error",(function(e){n(!1,e),i.disconnect()})),this.socket.once("disconnect",(function(){i.disconnected||(n(!1,ce.Error.DISCONNECTED),i.disconnect())})),this.socket.on("pong",(function(e){i.pingLatency=e,i.ui&&(i.ui.pingLatency=e)}))}},{key:"disconnect",value:function(){null!=this.socket&&(this.disconnected=!0,this.stopGame(),this.socket.close(),this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1,this.pingLatency=-1)}},{key:"stopGame",value:function(){null!=this.game&&null!=this.game.gameUI&&(this.game.kill(),this.game.gameUI.setKill(),this.ui=null)}},{key:"displayRooms",value:function(e){var t=this;if(this.loadingRooms)e(!1,null);else{this.loadingRooms=!0;var n=new gt.a(this.getURL()+"/rooms"+(this.token?"?token="+this.token:""));n.once("rooms",(function(i){e(!0,i),n.close(),t.loadingRooms=!1,t.serverSettings=i.settings})),n.once("error",(function(i){e(!1,i),n.close(),t.loadingRooms=!1})),n.once("authent",(function(i){i==ce.Error.AUTHENTICATION_REQUIRED&&(e(!1,i),n.close(),t.loadingRooms=!1)})),n.once("connect_error",(function(){e(!1,data),n.close(),t.loadingRooms=!1}))}}},{key:"createRoom",value:function(e,t){var n=this;if(this.creatingRoom)t({success:!1,connection_error:!1});else{this.creatingRoom=!0;var i=new gt.a(this.getURL()+"/createRoom"+(this.token?"?token="+this.token:""));i.once("connect",(function(){i.emit("create",e)})),i.once("process",(function(e){null!=e.success?t({success:e.success,connection_error:!1,code:e.code,errorCode:e.errorCode}):t({success:!1,connection_error:!0,code:null,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1})),i.once("error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1})),i.once("authent",(function(e){e==ce.Error.AUTHENTICATION_REQUIRED&&(t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1)})),i.once("connect_error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),i.close(),n.creatingRoom=!1}))}}},{key:"joinRoom",value:function(e,t){var n=this;this.joiningRoom?t({success:!1}):(this.joiningRoom=!0,null!=this.socket&&(this.socket.emit("join-room",{code:e,version:ce.Setting.APP_VERSION}),this.socket.once("join-room",(function(i){n.currentRoom=e,t(i),n.joiningRoom=!1}))))}},{key:"getGame",value:function(e,t){if(null!=this.socket&&this.currentRoom&&null!=e)return this.game=null,this.stopGame(),this.game=new mt(this.socket,e,t&&t.onlineEnableClientSidePredictions&&this.engineServerVersion==ce.Setting.APP_VERSION,t),e.controller=this.game,e.pingLatency=this.pingLatency,this.ui=e,this.game}},{key:"getURL",value:function(){return null!=this.port&&""!=this.port.trim()?this.url+":"+this.port:this.url}}]),e}(),vt=function(){function e(t){fe()(this,e),this.inMemoryStorage={},this._isSupported;try{this.storage=t||window.localStorage}catch(e){this.storage=null}try{var n="__some_random_key_you_are_not_going_to_use__";this.storage.setItem(n,n),this.storage.removeItem(n),this._isSupported=!0}catch(e){this._isSupported=!1}}return pe()(e,[{key:"clear",value:function(){this.isSupported?this.storage.clear():this.inMemoryStorage={}}},{key:"getItem",value:function(e){return this.isSupported?this.storage.getItem(e):this.inMemoryStorage.hasOwnProperty(e)?this.inMemoryStorage[e]:null}},{key:"key",value:function(e){return this.isSupported?this.storage.key(e):Object.keys(this.inMemoryStorage)[e]||null}},{key:"removeItem",value:function(e){this.isSupported?this.storage.removeItem(e):delete this.inMemoryStorage[e]}},{key:"setItem",value:function(e,t){this.isSupported?this.storage.setItem(e,t):this.inMemoryStorage[e]=String(t)}},{key:"length",value:function(){return this.isSupported?this.storage.length:Object.keys(this.inMemoryStorage).length}},{key:"isSupported",get:function(){return this._isSupported}}]),e}(),Et=function(){function e(t,n,i){fe()(this,e),this.callback=t,this.delay=n,this.timerInterval=i,this.remaining=n,this.timerId,this.start}return pe()(e,[{key:"pause",value:function(){clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.remaining-=Date.now()-this.start}},{key:"resume",value:function(){this.start=Date.now(),clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.timerId=setTimeout(this.callback,this.remaining),null!=this.timerInterval&&null!=this.timerInterval.start&&this.timerInterval.start()}},{key:"reset",value:function(){clearTimeout(this.timerId),null!=this.timerInterval&&null!=this.timerInterval.stop&&this.timerInterval.stop(),this.remaining=this.delay}},{key:"getTime",value:function(){return this.remaining-(Date.now()-this.start)}}]),e}(),kt=function(){function e(t){fe()(this,e),this.callback=t,this.interval}return pe()(e,[{key:"start",value:function(){this.interval=setInterval(this.callback,1e3)}},{key:"stop",value:function(){clearInterval(this.interval)}}]),e}();window.SOLO_AI="SOLO_AI",window.SOLO_PLAYER="SOLO_PLAYER",window.PLAYER_VS_AI="PLAYER_VS_AI",window.AI_VS_AI="AI_VS_AI",window.BATTLE_ROYALE="BATTLE_ROYALE",window.BATTLE_ROYALE_ONLINE="BATTLE_ROYALE_ONLINE",window.UPDATER_URI="https://www.eliastiksofts.com/snakeia/update/",window.SERVERS_LIST_URI="https://www.eliastiksofts.com/snakeia/serversList/",window.LEVEL_REACH_SCORE="LEVEL_REACH_SCORE",window.LEVEL_REACH_MAX_SCORE="LEVEL_REACH_MAX_SCORE",window.LEVEL_MULTI_BEST_SCORE="LEVEL_MULTI_BEST_SCORE",window.LEVEL_MULTI_REACH_SCORE_FIRST="LEVEL_MULTI_REACH_SCORE_FIRST",window.LEVEL_REACH_SCORE_ON_TIME="LEVEL_REACH_SCORE_ON_TIME",window.LEVEL_MAZE_WIN="LEVEL_MAZE_WIN",window.DEFAULT_LEVEL="DEFAULT_LEVEL",window.DOWNLOADED_LEVEL="DOWNLOADED_LEVEL",window.DEFAULT_LEVELS_SOLO_PLAYER={1:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ce.Setting.APP_VERSION},2:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ce.Setting.APP_VERSION},3:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:15,version:ce.Setting.APP_VERSION},4:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,60],version:ce.Setting.APP_VERSION},5:{settings:[10,10,!0,!1,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ce.Setting.APP_VERSION},6:{settings:[15,15,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:ce.Setting.APP_VERSION},7:{settings:[15,15,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,45],version:ce.Setting.APP_VERSION},8:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:35,version:ce.Setting.APP_VERSION},9:{settings:[15,15,!1,!1,!1,null,!1,null,1],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:ce.Setting.APP_VERSION},10:{settings:[10,10,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[10,15],version:ce.Setting.APP_VERSION},11:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ce.Setting.APP_VERSION},12:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ce.Setting.APP_VERSION},13:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:ce.Setting.APP_VERSION},14:{settings:[20,20,!0,!1,!0,5,!0,null,0],type:LEVEL_REACH_SCORE,typeValue:30,version:ce.Setting.APP_VERSION},15:{settings:[15,15,!1,!1,!0,null,!1,null,1],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:ce.Setting.APP_VERSION},16:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:75,version:ce.Setting.APP_VERSION},17:{settings:[15,15,!0,!1,!0,15,!1,null,2],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:ce.Setting.APP_VERSION},18:{settings:[5,5,!0,!1,!0,25,!1,null,0],type:LEVEL_REACH_MAX_SCORE,typeValue:null,version:ce.Setting.APP_VERSION},19:{settings:[5,5,!1,!0,!0,10,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:10,version:ce.Setting.APP_VERSION},20:{settings:[20,20,!1,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:ce.Setting.APP_VERSION}},window.SOLO_PLAYER_SAVE="snakeia_solo_player_",window.DEFAULT_LEVELS_SOLO_AI=DEFAULT_LEVELS_SOLO_PLAYER,window.SOLO_AI_SAVE="snakeia_solo_ai_",window.DOWNLOAD_DEFAULT_URI="https://www.eliastiksofts.com/snakeia/downloadLevels/?player={player}&ver={appVersion}",window.SOLO_PLAYER_DOWNLOAD_LEVELS_TO="snakeia_solo_player_downloadedLevels",window.SOLO_AI_DOWNLOAD_LEVELS_TO="snakeia_solo_ai_downloadedLevels";var bt=new yt,St=new vt,At=SOLO_AI,wt={},Ct=!1;function Tt(){wt={enableAnimations:!0,onlineEnableClientSidePredictions:!1,renderBlur:!1,enableMultithreading:!0,showDebugInfo:!1,textOutput:!1,graphicSkin:"flat",maxFPS:-1,unlockAllLevels:!1}}function It(){St.setItem("snakeia_settings",JSON.stringify(wt)),Rt()}function Lt(){return St.getItem("snakeia_settings")&&JSON.parse(St.getItem("snakeia_settings"))||wt}function Rt(){var e=Lt();document.getElementById("enableAnimations").checked=!1,document.getElementById("renderBlur").checked=!1,document.getElementById("enableMultithreading").checked=!1,document.getElementById("onlineEnableClientSidePredictions").checked=!1,document.getElementById("showDebugInfo").checked=!1,document.getElementById("textOutput").checked=!1,e.enableAnimations&&(document.getElementById("enableAnimations").checked=!0),e.renderBlur&&(document.getElementById("renderBlur").checked=!0),e.enableMultithreading&&Ct&&(document.getElementById("enableMultithreading").checked=!0),e.onlineEnableClientSidePredictions&&(document.getElementById("onlineEnableClientSidePredictions").checked=!0),e.showDebugInfo&&(document.getElementById("showDebugInfo").checked=!0),e.textOutput&&(document.getElementById("textOutput").checked=!0),document.getElementById("graphicSkin").value=e.graphicSkin,Ct?(document.getElementById("enableMultithreading").disabled=!1,document.getElementById("multithreadingNotAvailable").style.display="none"):(document.getElementById("enableMultithreading").disabled=!0,document.getElementById("multithreadingNotAvailable").style.display="inline-block"),e.maxFPS&&!isNaN(e.maxFPS)?document.getElementById("maxFPS").value=e.maxFPS:document.getElementById("maxFPS").value=-1}function _t(e,t){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",bt.connect(e,t,(function(e,t,n){if(document.getElementById("connectingToServer").style.display="none",e)Mt();else if(t==ce.Error.AUTHENTICATION_REQUIRED||t==ce.Error.BANNED){document.getElementById("authenticationServerContainer").innerHTML="";var i=document.createElement("iframe");i.id="authent_frame",i.src=bt.getURL()+"/authentication?lang="+Y.language.substr(0,2)+(n?"&id="+n:""),i.classList.add("frame-responsive"),document.getElementById("authenticationServerContainer").appendChild(i),document.getElementById("linkAuthenticationServer").href=bt.getURL()+"/authentication?lang="+Y.language.substr(0,2)+(n?"&id="+n:""),Dt(),document.getElementById("menu").style.display="none",document.getElementById("authenticationServer").style.display="block"}else t==ce.Error.DISCONNECTED?(alert(Y.t("servers.disconnectedError")),Bt()):(alert(Y.t("servers.connectionError")),Bt())}))}function xt(){document.getElementById("loadingRoomsOnlineList").style.display="inline-block",document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("refreshRooms").disabled="disabled",document.getElementById("errorRoomJoin").style.display="none",document.getElementById("errorServerVersion").style.display="none",bt.displayRooms((function(e,t){if(document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("errorRoomsList").style.display="none",document.getElementById("refreshRooms").disabled="",e)if(null!=t.rooms&&Object.keys(t.rooms).length>0)for(var n=function(e){var n=t.rooms[Object.keys(t.rooms)[e]],i=n.code,r=document.createElement("a");r.classList.add("list-group-item"),r.classList.add("list-group-item-action"),r.textContent=Y.t("servers.room",{number:e+1})+(null!=n.state?" "+(n.state==ce.GameState.SEARCHING_PLAYERS?Y.t("servers.searchingPlayers"):n.state==ce.GameState.STARTING?Y.t("servers.starting"):n.state==ce.GameState.STARTED?Y.t("servers.started"):""):""),r.onclick=function(){Ot(i)};var s=document.createElement("div");s.classList.add("small"),s.classList.add("text-muted"),s.textContent=Y.t("servers.infos",{width:n.width,height:n.height,speed:n.speed});var o=document.createElement("div");o.classList.add("small"),o.classList.add("text-muted"),o.textContent=n.borderWalls?Y.t("servers.infosBorderWalls"):"";var a=document.createElement("div");a.classList.add("small"),a.classList.add("text-muted"),a.textContent=n.generateWalls?Y.t("servers.infosGenerateWalls"):"";var l=document.createElement("div");if(l.classList.add("small"),l.classList.add("text-muted"),l.textContent=Y.t("servers.infosPlayers",{count:n.players,max:n.maxPlayers}),r.appendChild(s),r.appendChild(o),r.appendChild(a),r.appendChild(l),n.spectators>0){var c=document.createElement("div");c.classList.add("small"),c.classList.add("text-muted"),c.textContent=Y.t("servers.infosSpectators",{count:n.spectators}),r.appendChild(c)}document.getElementById("roomsOnlineListGroup").appendChild(r)},i=0;i<Object.keys(t.rooms).length;i++)n(i);else{var r=document.createElement("strong");r.textContent=Y.t("servers.noRoomound"),document.getElementById("roomsOnlineListGroup").appendChild(r)}else t==ce.Error.AUTHENTICATION_REQUIRED?_t(bt.url,bt.port):document.getElementById("errorRoomsList").style.display="block";t&&t.version&&(bt.engineServerVersion=t.version,bt.serverVersion=t.serverVersion,t.version!=ce.Setting.APP_VERSION&&(document.getElementById("errorServerVersion").style.display="block",document.getElementById("errorServerVersionText").textContent=Y.t("servers.errorServerVersion",{server_version:t.version,client_version:ce.Setting.APP_VERSION}))),document.getElementById("loadingRoomsOnlineList").style.display="none",document.getElementById("serverAddress").textContent=bt.url+(null!=bt.port&&""!=bt.port.trim()?":"+bt.port:"")}))}function Ot(e){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="block",document.getElementById("authenticationServer").style.display="none",document.getElementById("errorRoomJoin").style.display="none",bt.joinRoom(e,(function(t){if(document.getElementById("roomsOnlineJoin").style.display="none",t.success){var n=new ot(null,document.getElementById("gameContainer"),null,null,!!wt.showDebugInfo,null,wt),i=bt.getGame(n,wt);i.init(),document.getElementById("gameContainer").style.display="block",document.getElementById("titleGame").innerHTML=Y.t("game.currentMode")+" "+Y.t("menu.onlineBattleRoyale"),document.getElementById("gameOrder").textContent=Y.t("servers.roomCode")+" "+e,document.getElementById("gameStatus").textContent="",document.getElementById("gameStatusError").textContent="",null!=n.canvas&&n.canvas.scrollIntoView(),i.onExit((function(){bt.stopGame(),Mt()})),i.onKill((function(){bt.stopGame(),Mt()})),document.getElementById("backToMenuGame").onclick=function(){confirm(Y.t("game.confirmQuit"))&&(bt.stopGame(),Mt())}}else{var r="";switch(t.errorCode){case ce.Error.ROOM_NOT_FOUND:r=Y.t("servers.errorRoomJoinReason_roomNotFound");break;case ce.Error.ROOM_ALREADY_JOINED:r=Y.t("servers.errorRoomJoinReason_roomAlreadyJoined");break;case ce.Error.ALREADY_CREATED_ROOM:r=Y.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:r=Y.t("servers.errorReason_unknown")}document.getElementById("errorRoomJoinReason").textContent=r,document.getElementById("errorRoomJoin").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block"}}))}function Pt(e){(At=e)==SOLO_PLAYER?document.getElementById("iaSettings").style.display="none":document.getElementById("iaSettings").style.display="block",At==SOLO_AI?document.getElementById("autoRetrySettings").style.display="block":document.getElementById("autoRetrySettings").style.display="none",At==BATTLE_ROYALE?document.getElementById("numberIASettings").style.display="block":document.getElementById("numberIASettings").style.display="none",At==PLAYER_VS_AI||At==AI_VS_AI||At==BATTLE_ROYALE?document.getElementById("sameGridDiv").style.display="block":document.getElementById("sameGridDiv").style.display="none",At==SOLO_AI||At==SOLO_PLAYER?document.getElementById("mazeGridDiv").style.display="block":document.getElementById("mazeGridDiv").style.display="none",At==BATTLE_ROYALE_ONLINE?(document.getElementById("sameGridDiv").style.display="none",document.getElementById("mazeGridDiv").style.display="none",document.getElementById("autoRetrySettings").style.display="none",document.getElementById("progressiveSpeedDiv").style.display="none",document.getElementById("privateGameDiv").style.display="block",document.getElementById("iaSettings").style.display="none",document.getElementById("seedSettings").style.display="none",bt.serverSettings&&bt.serverSettings.enableAI?document.getElementById("enableAIDiv").style.display="block":document.getElementById("enableAIDiv").style.display="none"):(document.getElementById("progressiveSpeedDiv").style.display="block",document.getElementById("seedSettings").style.display="block",document.getElementById("privateGameDiv").style.display="none",document.getElementById("enableAIDiv").style.display="none"),Dt(),document.getElementById("settings").style.display="block",document.getElementById("menu").style.display="none",Yt(!1,!0),At==BATTLE_ROYALE_ONLINE?document.getElementById("backToMenu").onclick=function(){Mt()}:document.getElementById("backToMenu").onclick=function(){Dt()}}function Dt(){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("menu").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("parameters").style.display="none"}function Bt(){var e;Pt(BATTLE_ROYALE_ONLINE),Dt(),document.getElementById("menu").style.display="none",document.getElementById("serverListContainer").style.display="block",(e=document.createElement("script")).src=SERVERS_LIST_URI,document.getElementsByTagName("head")[0].appendChild(e),document.getElementById("loadingServersList").style.display="inline-block",document.getElementById("serverListGroup").innerHTML=""}function Mt(){Dt(),document.getElementById("menu").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block",xt()}function Ft(e){Dt(),document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="block",document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementById("bonusList").innerHTML="",e==PLAYER_HUMAN?(document.getElementById("titleLevelList").innerHTML=Y.t("levels.titlePlayer"),document.getElementById("levelListDefault").innerHTML=sn(PLAYER_HUMAN,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="none",document.getElementById("levelListDownloadPlayer").style.display="block",document.getElementById("levelListDownloadPlayer").innerHTML=sn(PLAYER_HUMAN,DOWNLOADED_LEVEL),document.getElementById("fruitNumberCount").innerHTML=rn(PLAYER_HUMAN),document.getElementById("bonusList").appendChild(on(PLAYER_HUMAN))):e==PLAYER_AI&&(document.getElementById("titleLevelList").innerHTML=Y.t("levels.titleAI"),document.getElementById("levelListDefault").innerHTML=sn(PLAYER_AI,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="block",document.getElementById("levelListDownloadPlayer").style.display="none",document.getElementById("levelListDownloadAI").innerHTML=sn(PLAYER_AI,DOWNLOADED_LEVEL),document.getElementById("fruitNumberCount").innerHTML=rn(PLAYER_AI),document.getElementById("bonusList").appendChild(on(PLAYER_AI)))}function Nt(){!document.getElementById("sameGrid").checked||At!=PLAYER_VS_AI&&At!=AI_VS_AI&&At!=BATTLE_ROYALE?(document.getElementById("progressiveSpeed").disabled=!1,document.getElementById("autoRetry").disabled=!1):(document.getElementById("progressiveSpeed").checked=!1,document.getElementById("progressiveSpeed").disabled=!0,document.getElementById("autoRetry").checked=!1,document.getElementById("autoRetry").disabled=!0)}function Ut(){"custom"==document.getElementById("gameSpeed").value?document.getElementById("customSpeedSettings").style.display="block":document.getElementById("customSpeedSettings").style.display="none"}function Ht(){At==SOLO_PLAYER||At==PLAYER_VS_AI||At==BATTLE_ROYALE&&document.getElementById("battleAgainstAIs").checked?document.getElementById("playerSettings").style.display="block":document.getElementById("playerSettings").style.display="none"}function Gt(){!document.getElementById("mazeGrid").checked||At!=SOLO_AI&&At!=SOLO_PLAYER?(document.getElementById("borderWalls").disabled=!1,document.getElementById("generateWalls").disabled=!1,document.getElementById("aiAssistant").disabled=!1):(document.getElementById("borderWalls").checked=!1,document.getElementById("borderWalls").disabled=!0,document.getElementById("generateWalls").checked=!1,document.getElementById("generateWalls").disabled=!0,document.getElementById("aiAssistant").checked=!1,document.getElementById("aiAssistant").disabled=!0)}function zt(){At==BATTLE_ROYALE_ONLINE&&document.getElementById("enableAI").checked&&bt.serverSettings&&bt.serverSettings.enableAI||At!=BATTLE_ROYALE_ONLINE&&At!=SOLO_PLAYER?document.getElementById("iaSettings").style.display="block":document.getElementById("iaSettings").style.display="none"}function Vt(){if(document.getElementById("possibleFailInitGame").style.display="none",Wt(!0)){var e=document.getElementById("heightGrid").value,t=document.getElementById("widthGrid").value,n=document.getElementById("borderWalls").checked,i=document.getElementById("generateWalls").checked,r=document.getElementById("sameGrid").checked,s=document.getElementById("numberIA").value,o=document.getElementById("battleAgainstAIs").checked,a=1;At==PLAYER_VS_AI||At==AI_VS_AI?r&&(a=2):At==BATTLE_ROYALE&&r&&(a=o?parseInt(s)+1:s),function(e,t,n,i,r){var s=(e=parseInt(e))*(t=parseInt(t));return n&&(s-=2*(t+e)-4),i&&(s-=n?e*t*.1:e*t*.1675),!(s>=5*r)}(e,t,n,i,a)&&(document.getElementById("possibleFailInitGame").style.display="block")}}function Yt(e,t){document.getElementById("invalidHeight").style.display="none",document.getElementById("invalidWidth").style.display="none",document.getElementById("heightGrid").classList.remove("is-invalid"),document.getElementById("widthGrid").classList.remove("is-invalid"),document.getElementById("gameSpeed").classList.remove("is-invalid"),document.getElementById("invalidSpeed").style.display="none",document.getElementById("customSpeed").classList.remove("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="none",document.getElementById("aiLevel").classList.remove("is-invalid"),document.getElementById("invalidaiLevel").style.display="none",document.getElementById("numberIA").classList.remove("is-invalid"),document.getElementById("invalidIANumber").style.display="none",document.getElementById("seedGrid").classList.remove("is-invalid"),document.getElementById("invalidSeedGrid").style.display="none",document.getElementById("seedGame").classList.remove("is-invalid"),document.getElementById("invalidSeedGame").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",t&&(document.getElementById("seedGrid").value=new Le.a(Date.now()).int32(),document.getElementById("seedGame").value=new Le.a(Date.now()+1).int32()),e&&(document.getElementById("heightGrid").value=20,document.getElementById("widthGrid").value=20,document.getElementById("borderWalls").checked=!1,document.getElementById("generateWalls").checked=!1,document.getElementById("mazeGrid").checked=!1,document.getElementById("sameGrid").checked=!0,document.getElementById("gameSpeed").value=8,document.getElementById("progressiveSpeed").checked=!1,document.getElementById("customSpeed").value=8,document.getElementById("customSpeedSettings").style.display="none",document.getElementById("aiLevel").value="normal",document.getElementById("autoRetry").checked=!1,document.getElementById("numberIA").value=20,document.getElementById("battleAgainstAIs").checked=!1,document.getElementById("aiAssistant").checked=!1,document.getElementById("privateGame").checked=!1,document.getElementById("enableAI").checked=!1),Nt(),Ut(),Ht(),Vt(),Gt(),zt()}function Wt(e){e||Yt(!1,!1);var t,n=document.getElementById("heightGrid").value,i=document.getElementById("widthGrid").value,r=document.getElementById("borderWalls").checked,s=document.getElementById("generateWalls").checked,o=document.getElementById("mazeGrid").checked,a=document.getElementById("sameGrid").checked,l=document.getElementById("gameSpeed").value,c=document.getElementById("progressiveSpeed").checked,u=document.getElementById("customSpeed").value,h=document.getElementById("aiLevel").value,d=document.getElementById("autoRetry").checked,f=document.getElementById("numberIA").value,g=document.getElementById("battleAgainstAIs").checked,p=document.getElementById("seedGrid").value,m=document.getElementById("seedGame").value,y=5,v=100,E=1,k=100,b=!0;if(At==BATTLE_ROYALE_ONLINE&&bt.serverSettings){var S=bt.serverSettings;y=null!=S.minGridSize?S.minGridSize:y,v=null!=S.maxGridSize?S.maxGridSize:v,E=null!=S.minSpeed?S.minSpeed:E,k=null!=S.maxSpeed?S.maxSpeed:k,b=S.enableAI}document.getElementById("invalidHeight").textContent=Y.t("settings.invalidSize",{min:y,max:v}),document.getElementById("invalidWidth").textContent=Y.t("settings.invalidSize",{min:y,max:v}),document.getElementById("invalidSpeed").textContent=Y.t("settings.invalidSpeed",{min:E,max:k}),document.getElementById("invalidCustomSpeed").textContent=Y.t("settings.invalidSpeed",{min:E,max:k}),t=document.getElementById("aiAssistant").checked?PLAYER_HYBRID_HUMAN_AI:PLAYER_HUMAN;var A=!0;if(""==n.trim()||isNaN(n)||n<y||n>v?(A=!1,e||(document.getElementById("heightGrid").classList.add("is-invalid"),document.getElementById("invalidHeight").style.display="block")):n=parseInt(n),""==i.trim()||isNaN(i)||i<y||i>v?(A=!1,e||(document.getElementById("widthGrid").classList.add("is-invalid"),document.getElementById("invalidWidth").style.display="block")):i=parseInt(i),"custom"!=l&&(""==l.trim()||isNaN(l)||l<E||l>k)?(A=!1,e||(document.getElementById("gameSpeed").classList.add("is-invalid"),document.getElementById("invalidSpeed").style.display="block")):"custom"!=l&&(l=parseInt(l)),"custom"==l&&(""==u.trim()||isNaN(u)||u<E||u>k)?(A=!1,e||(document.getElementById("customSpeed").classList.add("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="block")):"custom"==l&&(l=parseInt(u)),At!=SOLO_PLAYER&&At!=BATTLE_ROYALE_ONLINE&&"low"!=h&&"normal"!=h&&"high"!=h&&"random"!=h)A=!1,e||(document.getElementById("aiLevel").classList.add("is-invalid"),document.getElementById("invalidaiLevel").style.display="block");else if(At!=SOLO_PLAYER&&At!=BATTLE_ROYALE_ONLINE||At==BATTLE_ROYALE_ONLINE&&document.getElementById("enableAI").checked)switch(h){case"random":h=AI_LEVEL_RANDOM;break;case"low":h=AI_LEVEL_LOW;break;case"normal":h=AI_LEVEL_DEFAULT;break;case"high":h=AI_LEVEL_HIGH;break;case"ultra":h=AI_LEVEL_ULTRA;break;default:h=AI_LEVEL_DEFAULT}if(At==BATTLE_ROYALE&&(""==f.trim()||isNaN(f)||f<2||f>100)?(A=!1,e||(document.getElementById("numberIA").classList.add("is-invalid"),document.getElementById("invalidIANumber").style.display="block")):At==BATTLE_ROYALE&&(f=parseInt(f)),At==BATTLE_ROYALE_ONLINE||""!=p.trim()&&!isNaN(p)||(A=!1,e||(document.getElementById("seedGrid").classList.add("is-invalid"),document.getElementById("invalidSeedGrid").style.display="block")),At==BATTLE_ROYALE_ONLINE||""!=m.trim()&&!isNaN(m)||(A=!1,e||(document.getElementById("seedGame").classList.add("is-invalid"),document.getElementById("invalidSeedGame").style.display="block")),At!=SOLO_AI&&(d=!1),e)return A;if(A)if(document.getElementById("roomsOnlineCreation").style.display="block",document.getElementById("settings").style.display="none",document.getElementById("errorRoomCreation").style.display="none",At==BATTLE_ROYALE_ONLINE)bt.createRoom({speed:l,heightGrid:n,widthGrid:i,borderWalls:r,generateWalls:s,customSpeed:u,private:document.getElementById("privateGame").checked,enableAI:!!b&&document.getElementById("enableAI").checked,levelAI:h},(function(e){var t=e.errorCode;if(e.connection_error)t==ce.Error.AUTHENTICATION_REQUIRED?_t(bt.url,bt.port):e==ce.Error.DISCONNECTED?(alert(Y.t("servers.disconnectedError")),Bt()):(alert(Y.t("servers.connectionError")),Bt());else if(e.success)Ot(e.code);else if(t==ce.Error.AUTHENTICATION_REQUIRED)_t(bt.url,bt.port);else{var n="";switch(t){case ce.Error.INVALID_SETTINGS:n=Y.t("servers.errorRoomCreationReason_invalidSettings");break;case ce.Error.MAX_ROOM_LIMIT_REACHED:n=Y.t("servers.errorRoomCreationReason_maxRoomLimitReached");break;case ce.Error.ALREADY_CREATED_ROOM:n=Y.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:n=Y.t("servers.errorReason_unknown")}document.getElementById("errorRoomCreation").style.display="block",document.getElementById("errorRoomCreationReason").textContent=n,Mt()}}));else{document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none";var w="";switch(At){case SOLO_AI:w=Y.t("menu.soloAi");break;case SOLO_PLAYER:w=Y.t("menu.soloPlayer");break;case PLAYER_VS_AI:w=Y.t("menu.playerVsAi");break;case AI_VS_AI:w=Y.t("menu.aiVsAi");break;case BATTLE_ROYALE:w=Y.t("menu.battleRoyale")}document.getElementById("titleGame").innerHTML=Y.t("game.currentMode")+" "+w;var C=[];if(At==SOLO_AI){var T=new _e(i,n,s,r,o,null,!1,p,m),I=new Ye(RIGHT,3,T,PLAYER_AI,h,d);C.push(new ut(T,I,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}else if(At==SOLO_PLAYER){var L=new _e(i,n,s,r,o,null,!1,p,m),R=new Ye(RIGHT,3,L,t);C.push(new ut(L,R,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}else if(At==PLAYER_VS_AI){var _=new _e(i,n,s,r,!1,null,!1,p,m),x=new Ye(RIGHT,3,_,t);if(a){var O=new Ye(RIGHT,3,_,PLAYER_AI,h,d);C.push(new ut(_,[x,O],l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}else{var P=new _e(i,n,s,r,!1,null,!1,parseInt(p)+1,parseInt(m)+1),D=new Ye(RIGHT,3,P,PLAYER_AI,h,d);C.push(new ut(_,x,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt)),C.push(new ut(P,D,l,document.getElementById("gameContainer"),!1,!1,c,null,null,null,null,wt))}}else if(At==AI_VS_AI){var B=new _e(i,n,s,r,!1,null,!1,p,m),M=new Ye(RIGHT,3,B,PLAYER_AI,h,d);if(a){var F=new Ye(RIGHT,3,B,PLAYER_AI,h,d);C.push(new ut(B,[M,F],l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}else{var N=new _e(i,n,s,r,!1,null,!1,parseInt(p)+1,parseInt(m)+1),U=new Ye(RIGHT,3,N,PLAYER_AI,h,d);C.push(new ut(B,M,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt)),C.push(new ut(N,U,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}}else if(At==BATTLE_ROYALE)if(a){var H=new _e(i,n,s,r,!1,null,!1,p,m),G=[];g&&G.push(new Ye(RIGHT,3,H,t,h,d));for(var z=0;z<f;z++)G.push(new Ye(RIGHT,3,H,PLAYER_AI,h,d));C.push(new ut(H,G,l,document.getElementById("gameContainer"),!0,!0,c,null,null,null,null,wt))}else{if(g){var V=new _e(i,n,s,r,!1,null,!1,p,m),W=new Ye(RIGHT,3,V,t,h,d);C.push(new ut(V,W,l,document.getElementById("gameContainer"),!0,!1,c,350,250,null,null,wt))}for(var j=0;j<f;j++){p++,m++;var K=new _e(i,n,s,r,!1,null,!1,p,m),q=new Ye(RIGHT,3,K,PLAYER_AI,h,d);C.push(new ut(K,q,l,document.getElementById("gameContainer"),!0,!1,c,350,250,null,null,wt))}}var X=new dt(C);X.setDisplayFPS(!!wt.showDebugInfo),X.start(),null!=X.games[0].canvas&&X.games[0].canvas.scrollIntoView(),!o||At!=SOLO_AI&&At!=SOLO_PLAYER||X.setNotification(new ht(Y.t("engine.mazeMode"),null,ce.Setting.INFO_NOTIF_COLOR,5,null,null,null,!0)),document.getElementById("backToMenuGame").onclick=function(){confirm(Y.t("game.confirmQuit"))&&(X.killAll(),Dt())},X.onStop((function(){if(At==PLAYER_VS_AI||At==AI_VS_AI||At==BATTLE_ROYALE&&!X.errorOccurred()){var e="",t=X.getWinners();if(At==PLAYER_VS_AI)2==t.index.length?e=Y.t("game.equalityPlayerVSAI"):0==t.index[0]?e=Y.t("game.winPlayerVSAI"):1==t.index[0]&&(e=Y.t("game.losePlayerVSAI"));else if(At==AI_VS_AI)1==t.index.length?e=Y.t("game.oneWinnerAIVSAI",{numWinner:t.index[0]+1}):2==t.index.length&&(e=Y.t("game.equalityAIVSAI"));else if(At==BATTLE_ROYALE)if(1==t.index.length)e=g&&0==t.index[0]?Y.t("game.playerWinnerBattleRoyale",{score:t.score}):Y.t("game.oneWinnerBattleRoyale",{numWinner:g?t.index[0]:t.index[0]+1,score:t.score});else if(g&&2==t.index.length&&0==t.index[0])e=Y.t("game.winnerAIBattleRoyale")+" "+Y.t("game.winnersNumBattleRoyale",{numWinner:t.index[1]})+" "+Y.t("game.andPlayerWinnersBattleRoyale")+" "+Y.t("game.winPlayerScoreBattleRoyale",{score:t.score});else if(t.index.length>1){var n=!1;e=Y.t("game.winnersBattleRoyale")+" ";for(var i=0;i<t.index.length;i++)g&&0==t.index[i]?n=!0:(e+=Y.t("game.winnersNumBattleRoyale",{numWinner:g?t.index[i]:t.index[i]+1}),i+1<t.index.length-1?e+=", ":i+1==t.index.length-1&&(e=e+" "+Y.t("game.andWinnersBattleRoyale")+" "));e=g&&n?e+" "+Y.t("game.andPlayerWinnersBattleRoyale")+" "+Y.t("game.winPlayerScoreBattleRoyale",{score:t.score}):e+" "+Y.t("game.winScoreBattleRoyale",{score:t.score})}""!=e.trim()&&(document.getElementById("gameOrder").innerHTML=e,X.setNotification(new ht(e,null,ce.Setting.INFO_NOTIF_COLOR,15,null,null,null,!0)))}})),X.onExit((function(){(At==SOLO_AI||At==SOLO_PLAYER||At==AI_VS_AI||At==PLAYER_VS_AI&&a||At==BATTLE_ROYALE&&a)&&(X.killAll(),Dt())})),X.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",X.closeNotification()}))}}document.getElementById("versionTxt").innerHTML=ce.Setting.APP_VERSION,document.getElementById("appVersion").innerHTML=ce.Setting.APP_VERSION,document.getElementById("dateTxt").innerHTML=DATE_VERSION,document.getElementById("appUpdateDate").innerHTML=DATE_VERSION,String.prototype.strcmp=function(e){return this==e?0:this>e?1:-1},St.isSupported||(document.getElementById("localstorageDisabled").style.display="block"),lt((function(e){Ct=e,Rt()})),Tt(),wt=Lt(),Rt(),document.getElementById("enableAnimations").onchange=function(){wt.enableAnimations=this.checked,It()},document.getElementById("renderBlur").onchange=function(){wt.renderBlur=this.checked,It()},document.getElementById("enableMultithreading").onchange=function(){wt.enableMultithreading=this.checked,It()},document.getElementById("onlineEnableClientSidePredictions").onchange=function(){wt.onlineEnableClientSidePredictions=this.checked,It()},document.getElementById("showDebugInfo").onchange=function(){wt.showDebugInfo=this.checked,It()},document.getElementById("textOutput").onclick=function(){wt.textOutput=this.checked,It()},document.getElementById("graphicSkin").onchange=function(){wt.graphicSkin=this.value,It()},document.getElementById("maxFPS").oninput=function(){wt.maxFPS=this.value,It()},document.getElementById("resetParameters").onclick=function(){Tt(),It()},window.updateCallback=function(e){if(null!=e&&void 0!==e.version&&null!==e.version&&ce.Setting.APP_VERSION.strcmp(e.version)<0){document.getElementById("updateAvailable").style.display="block",document.getElementById("appUpdateVersion").textContent=e.version;var t=DATE_VERSION;void 0!==e.date&&null!==e.date&&(t=e.date),document.getElementById("appUpdateDate").textContent=t;var n="http://eliastiksofts.com/snakeia/downloads/";void 0!==e.url&&null!==e.url&&(n=e.url),document.getElementById("appDownloadLink").onclick=function(){window.open(n,"_blank")},document.getElementById("appDownloadURLGet").onclick=function(){prompt(Y.t("update.URLToDownload"),n)};var i=Y.t("update.noChanges");void 0!==e.changes&&null!==e.changes&&(i=e.changes),document.getElementById("appUpdateChanges").onclick=function(){alert(Y.t("update.changes")+"\n"+i)},ln()}},window.listServersCallback=function(e){if(document.getElementById("serverListGroup").innerHTML="",null!=e&&e.length>0){for(var t=0;t<e.length;t++)if(null!=e[t].url){var n=e[t].url,i=e[t].port,r=e[t].name,s=document.createElement("a");s.classList.add("list-group-item"),s.classList.add("list-group-item-action"),s.textContent=null!=r?r:Y.t("servers.untitled"),s.onclick=function(e,t){_t(e,t)}.bind(null,n,i);var o=document.createElement("div");o.classList.add("small"),o.classList.add("text-muted"),null!=i&&""!=i.trim()?o.textContent=n+":"+i:o.textContent=n,s.appendChild(o),document.getElementById("serverListGroup").appendChild(s)}}else{var a=document.createElement("strong");a.textContent=Y.t("servers.noServerFound"),document.getElementById("serverListGroup").appendChild(a)}document.getElementById("loadingServersList").style.display="none"},document.getElementById("linkCustomServer").onclick=function(){var e=prompt(Y.t("servers.enterCustomServer"),"http://");null!=e&&""!=e.trim()&&_t(e)},document.getElementById("cancelConnectingToServer").onclick=function(){document.getElementById("connectingToServer").style.display="none",bt.disconnect(),Bt()},document.getElementById("cancelAuthenticationToServer").onclick=function(){document.getElementById("authenticationServerContainer").innerHTML="",document.getElementById("connectingToServer").style.display="none",bt.disconnect(),Bt()},document.getElementById("refreshRooms").onclick=function(){xt()},document.getElementById("joinPrivateRoom").onclick=function(){var e=prompt(Y.t("servers.enterCode"));null!=e&&Ot(e)},document.getElementById("soloAi").onclick=function(){Pt(SOLO_AI)},document.getElementById("soloPlayer").onclick=function(){Pt(SOLO_PLAYER)},document.getElementById("playerVsAi").onclick=function(){Pt(PLAYER_VS_AI)},document.getElementById("aiVsAi").onclick=function(){Pt(AI_VS_AI)},document.getElementById("battleRoyale").onclick=function(){Pt(BATTLE_ROYALE)},document.getElementById("createRoom").onclick=function(){Pt(BATTLE_ROYALE_ONLINE)},document.getElementById("backToMenu").onclick=function(){Dt()},document.getElementById("backToMenuLevelList").onclick=function(){Dt()},document.getElementById("backToMenuParameters").onclick=function(){Dt()},document.getElementById("othersSettings").onclick=function(){Dt(),document.getElementById("menu").style.display="none",document.getElementById("parameters").style.display="block"},document.getElementById("backToMenuServerList").onclick=function(){bt.disconnect(),Dt()},document.getElementById("collapseSeedSettingsBtn").onclick=function(e){var t=document.getElementById("collapseSeedSettings");t&&t.classList.contains("show")?t.classList.remove("show"):t&&t.classList.add("show"),e.preventDefault(),e.stopPropagation()},document.getElementById("collapseLevelBonusShopLink").onclick=function(e){var t=document.getElementById("collapseLevelBonusShop");t&&t.classList.contains("show")?t.classList.remove("show"):t&&t.classList.add("show"),e.preventDefault(),e.stopPropagation()},document.getElementById("onlineBattleRoyale").onclick=function(){Bt()},document.getElementById("backToServersRoomsList").onclick=function(){bt.disconnect(),Bt()},document.getElementById("levelsSoloPlayer").onclick=function(){Ft(PLAYER_HUMAN)},document.getElementById("levelsSoloAI").onclick=function(){Ft(PLAYER_AI)},document.getElementById("gameSpeed").onchange=function(){Ut()},document.getElementById("heightGrid").onchange=function(){Vt()},document.getElementById("widthGrid").onchange=function(){Vt()},document.getElementById("borderWalls").onchange=function(){Vt()},document.getElementById("generateWalls").onchange=function(){Vt()},document.getElementById("sameGrid").onchange=function(){Nt(),Ut(),Vt()},document.getElementById("numberIA").onchange=function(){Vt()},document.getElementById("battleAgainstAIs").onchange=function(){Ht(),Vt()},document.getElementById("mazeGrid").onchange=function(){Gt()},document.getElementById("enableAI").onchange=function(){zt()},document.getElementById("resetSeeds").onclick=function(e){Yt(!1,!0),e.preventDefault(),e.stopPropagation()},document.getElementById("resetSettings").onclick=function(){Yt(!0,!0)},document.getElementById("validateSettings").onclick=function(){Wt()};var jt={BONUS_AI_ASSISTANT:{text:"levels.bonus.aiAssistant",information:"levels.bonus.aiAssistantInfo",price:25,applicableTo:[ce.PlayerType.HUMAN]},BONUS_INCREASE_GOLD_FRUIT_PROB:{text:"levels.bonus.increaseGoldFruits",information:"levels.bonus.increaseGoldFruitsInfo",price:50,applicableTo:[ce.PlayerType.AI,ce.PlayerType.HUMAN]},BONUS_NO_TIME_LIMIT:{text:"levels.bonus.noTimeLimit",information:"levels.bonus.noTimeLimitInfo",price:75,applicableTo:[ce.PlayerType.AI,ce.PlayerType.HUMAN]},BONUS_DESTROY_AIS:{text:"levels.bonus.destroyAis",information:"levels.bonus.destroyAisInfo",price:75,applicableTo:[ce.PlayerType.AI,ce.PlayerType.HUMAN]},BONUS_PASS_LEVEL:{text:"levels.bonus.passLevel",information:"levels.bonus.passLevelInfo",price:100,applicableTo:[ce.PlayerType.AI,ce.PlayerType.HUMAN]},BONUS_UNLOCK_ALL_LEVELS:{text:"levels.bonus.unlockAllLevels",information:"levels.bonus.unlockAllLevelsInfo",price:1e3,applicableTo:[ce.PlayerType.AI,ce.PlayerType.HUMAN]}};function Kt(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return SOLO_PLAYER_SAVE+"defautLevelsSave";if(e==PLAYER_AI)return SOLO_AI_SAVE+"defautLevelsSave"}else if(t==DOWNLOADED_LEVEL){if(e==PLAYER_HUMAN)return SOLO_PLAYER_SAVE+"downloadedLevelsSave";if(e==PLAYER_AI)return SOLO_AI_SAVE+"downloadedLevelsSave"}return null}function qt(e,t){null==St.getItem(Kt(e,t))&&Qt(e,t,!1);try{return JSON.parse(St.getItem(Kt(e,t)))}catch(n){return Qt(e,t,!0),qt(e,t)}}function Xt(e,t,n){return qt(t,n)[e]}function Jt(e,t,n,i,r){var s=Kt(n,i),o=qt(n,i),a=$t(n,i);return null!=o&&(Array.isArray(e)&&e.length>=2&&Array.isArray(o[t])&&o[t].length>=2&&1==o[t][0]&&(a[t].type!=LEVEL_REACH_SCORE_ON_TIME&&a[t].type!=LEVEL_MULTI_REACH_SCORE_FIRST&&a[t].type!=LEVEL_MAZE_WIN?e[1]<o[t][1]&&(e[1]=o[t][1]):e[1]>o[t][1]&&(e[1]=o[t][1])),o[t]=e,St.setItem(s,JSON.stringify(o)),!0)}function Zt(e,t){var n=Kt(e,DEFAULT_LEVEL),i=qt(e,DEFAULT_LEVEL);return null!=i&&(i.numFruits&&!isNaN(i.numFruits)||(i.numFruits=0),i.numFruits+=t,St.setItem(n,JSON.stringify(i)),!0)}function Qt(e,t,n){if("undefined"!=typeof Storage){var i=Kt(e,t);return(null==St.getItem(i)||n)&&(St.setItem(i,JSON.stringify({version:ce.Setting.APP_VERSION,numFruits:0,currentBonus:null,unlockAllLevels:!1})),Jt([!1,0],1,e,t)),!1}return!1}function $t(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return DEFAULT_LEVELS_SOLO_PLAYER;if(e==PLAYER_AI)return DEFAULT_LEVELS_SOLO_AI}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)try{return JSON.parse(St.getItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO))}catch(e){return null}else if(e==PLAYER_AI)try{return JSON.parse(St.getItem(SOLO_AI_DOWNLOAD_LEVELS_TO))}catch(e){return null}return null}function en(e,t,n){if(wt.unlockAllLevels)return!0;if(qt(t,DEFAULT_LEVEL).unlockAllLevels)return!0;var i=!0,r=$t(t,n);if(null==r)return!1;for(var s=1;s<e;s++){var o=Xt(s,t,n);(null==o||!o[0]&&tn(r[s].type,r[s].version))&&(i=!1)}return i}function tn(e,t){return!(e!=LEVEL_REACH_SCORE&&e!=LEVEL_REACH_MAX_SCORE&&e!=LEVEL_MULTI_BEST_SCORE&&e!=LEVEL_REACH_SCORE_ON_TIME&&e!=LEVEL_MULTI_REACH_SCORE_FIRST&&e!=LEVEL_MAZE_WIN||ce.Setting.APP_VERSION.strcmp(t)<0)}function nn(e,t,n,i,r){var s="",o=Xt(e,t,i);return null==o||(o=o[1])<=0?"":(r?n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?s=Y.t("levels.bestScoreShort",{count:o}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(s=Y.t("levels.bestTimeShort",{count:Math.round(o)})):n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?s=Y.t("levels.bestScore",{count:o}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(s=Y.t("levels.bestTime",{count:Math.round(o)})),s)}function rn(e){var t=qt(e,DEFAULT_LEVEL);return null!=t&&(t.numFruits&&!isNaN(t.numFruits)||(t.numFruits=0),t.numFruits)}function sn(e,t){var n=$t(e,t),i="";if(t==DOWNLOADED_LEVEL&&(i+='<div class="row mb-3"><div class="col text-center"><button class="btn btn-lg btn-warning" onclick="downloadLevels('+e+', this);"><span class="fui-plus-circle"></span>&nbsp; '+Y.t("levels.download")+'</button><br /><a href="#null" onclick="editDownloadURL();" class="small"><span class="fui-new"></span>&nbsp; '+Y.t("levels.editDownloadURL")+"</a></div></div>"),null==n)return i+"<strong>"+Y.t("levels.emptyList")+"</strong>";var r=1,s=!0;for(var o in n){var a=void 0;if(n.hasOwnProperty(o)){if(en(o,e,t))if(tn(n[o].type,n[o].version)){a='<button class="btn btn-lg btn-primary btn-block-85" onclick="playLevel('+o+", "+e+", "+t+');" '+(""!=nn(o,e,n[o].type,t).trim()?'aria-label="'+nn(o,e,n[o].type,t)+'" data-balloon-length="fit" data-balloon-pos="up"':"")+">"+Y.t("levels.level")+" "+r+"</button>"}else a='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+Y.t("levels.notCompatible")+'" data-balloon-length="fit" data-balloon-pos="up">'+Y.t("levels.level")+" "+r+"</button>";else a='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+Y.t("levels.disabledLevel")+'" data-balloon-length="fit" data-balloon-pos="up">'+Y.t("levels.level")+" "+r+"</button>";1==r&&(i+='<div class="row mb-2">'),i+=r%2==0?'<div class="col pl-0 justify-content-center">'+a+'</div></div><div class="row mb-2">':'<div class="col pr-0 justify-content-center">'+a+"</div>",s=!1}r++}return s?i+"<strong>"+Y.t("levels.emptyList")+"</strong>":(r%2==0&&(i+='<div class="col pr-0 justify-content-center"></div>'),i+"</div>")}function on(e){var t=qt(e,DEFAULT_LEVEL),n=document.createElement("div"),i=document.createElement("p");i.classList.add("mb-1");var r=document.createElement("strong");r.textContent=Y.t("levels.bonusEquipped")+" ";var s=document.createElement("span");if(s.textContent=t.currentBonus?jt[t.currentBonus]?Y.t(jt[t.currentBonus].text):Y.t("levels.bonus.unknown"):Y.t("levels.none"),i.appendChild(r),i.appendChild(s),t.currentBonus){var o=document.createElement("a");o.addEventListener("click",(function(){return function(e){var t=Kt(e,DEFAULT_LEVEL),n=qt(e,DEFAULT_LEVEL);if(null!=n.currentBonus&&(jt[n.currentBonus]||confirm(Y.t("levels.bonus.unknownInfo"))))return jt[n.currentBonus]&&(n.numFruits+=jt[n.currentBonus].price),n.currentBonus=null,St.setItem(t,JSON.stringify(n)),Ft(e),!0;return!1}(e)})),o.setAttribute("aria-label",Y.t("levels.sellBonus")),o.setAttribute("data-balloon-length","medium"),o.classList.add("text-danger","ml-2"),o.style.cursor="pointer";var a=document.createElement("span");a.classList.add("fui-cross"),o.appendChild(a),i.appendChild(o)}n.appendChild(i);var l=function(i){var r=document.createElement("div");r.classList.add("m-2");var s=document.createElement("div");s.classList.add("btn-group","flex-wrap");var o=document.createElement("button");o.classList.add("btn","btn-primary"),o.textContent=Y.t(jt[i].text),o.style.width="250px",o.setAttribute("data-balloon-length","large"),jt[i].applicableTo.indexOf(e)<0||t.unlockAllLevels&&("BONUS_UNLOCK_ALL_LEVELS"==i||"BONUS_PASS_LEVEL"==i)?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",Y.t("levels.bonusNotApplicable"))):jt[i].price>rn(e)?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",Y.t("levels.notEnoughFruits"))):null!=t.currentBonus?(o.disabled=!0,o.classList.add("disabled"),o.setAttribute("aria-label",Y.t("levels.bonusAlreadyEquipped"))):o.addEventListener("click",(function(){return an(i,e)}));var a=document.createElement("div");a.classList.add("btn","btn-info"),a.setAttribute("aria-label",Y.t(jt[i].information)),a.setAttribute("data-balloon-length","large");var l=document.createElement("span");l.classList.add("fui-question-circle"),a.appendChild(l);var c=document.createElement("div");c.style.width="125px";var u=document.createElement("img");u.classList.add("align-text-bottom"),u.src="assets/images/skin/flat/fruit.png",u.width=24,u.height=24;var h=document.createElement("span");h.textContent=" × "+jt[i].price,c.appendChild(u),c.appendChild(h),s.appendChild(o),s.appendChild(a),s.appendChild(c),r.appendChild(s),n.appendChild(r)};for(var c in jt)l(c);return n}function an(e,t){var n=Kt(t,DEFAULT_LEVEL),i=qt(t,DEFAULT_LEVEL);if(null==e)i.currentBonus=null,St.setItem(n,JSON.stringify(i));else if(jt[e].applicableTo.indexOf(t)<0||i.unlockAllLevels&&("BONUS_UNLOCK_ALL_LEVELS"==e||"BONUS_PASS_LEVEL"==e))alert(Y.t("levels.bonusNotApplicable"));else if(jt[e].price>rn(t))alert(Y.t("levels.notEnoughFruits"));else{if(null==i.currentBonus)return i.numFruits-=jt[e].price,"BONUS_UNLOCK_ALL_LEVELS"==e?i.unlockAllLevels=!0:i.currentBonus=e,St.setItem(n,JSON.stringify(i)),Ft(t),!0;alert(Y.t("levels.bonusAlreadyEquipped"))}return!1}function ln(){!function(e){if(null!=e){document.getElementById("languageSelect").disabled=!0,document.getElementById("languageSelect").innerHTML="";for(var t=0;t<e.length;t++)document.getElementById("languageSelect").innerHTML=document.getElementById("languageSelect").innerHTML+'<option data-i18n="lang.'+e[t]+'" value="'+e[t]+'"></option>';document.getElementById("languageSelect").value=Y.language.substr(0,2),document.getElementById("languageSelect").disabled=!1}}(Y.languages);for(var e=document.querySelectorAll("[data-i18n]"),t=0,n=e.length;t<n;t++)e[t].innerHTML=Y.t(e[t].dataset.i18n);document.getElementById("dateTxt").innerHTML=Y.t("menu.versionDate",{date:new Intl.DateTimeFormat(Y.language.substr(0,2)).format(new Date(DATE_VERSION))}),document.getElementById("heightGrid").placeholder=Y.t("settings.placeholderHeight"),document.getElementById("widthGrid").placeholder=Y.t("settings.placeholderWidth"),document.getElementById("customSpeed").placeholder=Y.t("settings.placeholderCustomSpeed"),document.getElementById("numberIA").placeholder=Y.t("settings.placeholderNumberIA"),document.getElementById("appDownloadURLGet").setAttribute("aria-label",Y.t("update.getURL")),document.getElementById("appUpdateChanges").setAttribute("aria-label",Y.t("update.getChanges")),document.getElementById("appUpdateDateLocalized").innerHTML=Y.t("update.versionDate",{date:new Intl.DateTimeFormat(Y.language.substr(0,2)).format(new Date(document.getElementById("appUpdateDate").innerHTML))}),document.getElementById("aiAssistantInfos").setAttribute("aria-label",Y.t("settings.aiAssistantInfos")),document.getElementById("multithreadingInfos").setAttribute("aria-label",Y.t("menu.multithreadingInfos")),document.getElementById("onlineEnableClientSidePredictionsInfos").setAttribute("aria-label",Y.t("menu.onlineEnableClientSidePredictionsInfos")),document.querySelectorAll(".settingNotAvailable").forEach((function(e){e.setAttribute("aria-label",Y.t("menu.settingNotAvailable"))}))}window.playLevel=function(e,t,n){var i=Xt(e,t,n),r=qt(t,DEFAULT_LEVEL).currentBonus,s=$t(t,n);if(null==s)return!1;if(null==s[e])return!1;var o=function(){f.setBestScore(nn(e,t,c,n,!0)),c==LEVEL_REACH_SCORE?H=Y.t("levels.reachScore",{value:u}):c==LEVEL_REACH_SCORE_ON_TIME?(H=Y.t("levels.reachScoreTime",{value:u[0],count:u[1]}),u[1]>=0&&(document.getElementById("gameStatus").innerHTML=Y.t("levels.timerRemaining",{count:u[1]})),f.setTimeToDisplay(u[1])):c==LEVEL_REACH_MAX_SCORE?H=Y.t("levels.reachMaxScore"):c==LEVEL_MULTI_BEST_SCORE?H=Y.t("levels.multiBestScore",{count:S}):c==LEVEL_MULTI_REACH_SCORE_FIRST?H=Y.t("levels.multiReachScoreFirst",{value:u,count:S}):c==LEVEL_MAZE_WIN&&(H=Y.t("levels.mazeMode",{value:u,count:S})),document.getElementById("gameOrder").innerHTML=H.replace("\n","<br />")},a=s[e],l=a.settings,c=a.type,u=a.typeValue,h=a.version;if(!tn(c,h))return alert(Y.t("levels.notCompatible")),!1;if(!en(e,t,n))return alert(Y.t("levels.disabledLevel")),!1;if("BONUS_PASS_LEVEL"==r&&(!i||1!=i[0]))return Jt([!0,Array.isArray(u)&&u.length>=2?u[1]:u],e,t,n),an(null,t),Ft(t),!0;"BONUS_NO_TIME_LIMIT"==r&&c==LEVEL_REACH_SCORE_ON_TIME&&(u=[u[0],-1],an(null,t));var d,f,g=l[0],p=l[1],m=l[2],y=l[3],v=l[4],E=l[5],k=l[6],b=l[7],S=l[8],A=l[9],w=l[10],C=l[11],T=l[12],I=l[13],L=!1,R=[],_=new _e(p,g,y,m,A,w,C,T,I,!A&&"BONUS_INCREASE_GOLD_FRUIT_PROB"==r);if(A||"BONUS_INCREASE_GOLD_FRUIT_PROB"!=r||an(null,t),t==PLAYER_AI?d=new Ye(RIGHT,3,_,t,AI_LEVEL_HIGH):t==PLAYER_HUMAN&&("BONUS_AI_ASSISTANT"!=r||A?d=new Ye(RIGHT,3,_,t):(d=new Ye(RIGHT,3,_,ce.PlayerType.HYBRID_HUMAN_AI),an(null,t))),v){for(var x=[d],O=0;O<S;O++)x.push(new Ye(RIGHT,3,_,PLAYER_AI,b)),L="BONUS_DESTROY_AIS"==r;f=new ut(_,x,E,document.getElementById("gameContainer"),!0,!0,k,null,null,null,null,wt),R.push(f)}else{var P,D;S+1<=2?(P=null,D=null):(P=350,D=250),f=new ut(_,d,E,document.getElementById("gameContainer"),!0,!0,k,P,D,null,null,wt),R.push(f);for(var B=0;B<S;B++){var M=new _e(p,g,y,m,A,w,C,T,I),F=new Ye(RIGHT,3,M,PLAYER_AI,b,!1);L="BONUS_DESTROY_AIS"==r,R.push(new ut(M,F,E,document.getElementById("gameContainer"),!1,!1,k,P,D,null,null,wt))}}document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",document.getElementById("titleGame").innerHTML=Y.t("levels.level")+" "+e;var N=new dt(R);N.setDisplayFPS(!!wt.showDebugInfo),N.start(),N.closeRanking(),document.getElementById("gameOrder").scrollIntoView();var U,H,G=new Et(null,0),z=!1,V=!1,W=ce.Setting.ERROR_NOTIF_COLOR,j=ce.Setting.INFO_NOTIF_COLOR;document.getElementById("backToMenuGame").onclick=function(){confirm(Y.t("game.confirmQuit"))&&(G.pause(),N.killAll(),Ft(t))},function(){var i=0;if(c==LEVEL_REACH_SCORE)f.onScoreIncreased((function(){Zt(t,f.snakes[0].score-i),i=f.snakes[0].score,f.snakes[0].score>=u&&(Jt([!0,f.snakes[0].score],e,t,n),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"))),z=!0))})),f.onStop((function(){i=0,f.snakes[0].score<u&&(z||(f.setNotification(new ht(Y.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),z=!0))})),f.onReset((function(){i=0}));else if(c==LEVEL_REACH_SCORE_ON_TIME)u[1]>=0&&(G=new Et((function(){f.setTimeToDisplay(0),document.getElementById("gameStatus").innerHTML=Y.t("levels.timerRemaining",{count:0}),z||(f.setNotification(new ht(Y.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),z=!0),N.stopAll(!0)}),1e3*u[1]-1,new kt((function(){document.getElementById("gameStatus").innerHTML=Y.t("levels.timerRemaining",{count:Math.round(G.getTime()/1e3)}),f.setTimeToDisplay(Math.round(G.getTime()/1e3))})))),f.onStart((function(){G.resume()})),f.onPause((function(){G.pause()})),f.onReset((function(){G.reset()})),f.onStop((function(){G.pause()})),f.onScoreIncreased((function(){if(f.snakes[0].score>=u[0]){var i=1e3*u[1]-G.getTime();G.reset(),N.stopAll(!0),Jt([!0,i/1e3],e,t,n),Zt(t,f.snakes[0].score),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),z=!0)}}));else if(c==LEVEL_REACH_MAX_SCORE)f.onStop((function(){f.scoreMax?(Jt([!0,f.snakes[0].score],e,t,n),Zt(t,f.snakes[0].score),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),z=!0)):z||(f.setNotification(new ht(Y.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),z=!0)}));else if(c==LEVEL_MULTI_BEST_SCORE)N.onStop((function(){for(var i=N.getWinners(),r=!1,s=0;s<i.winners.length;s++)i.winners[s]==f.snakes[0]&&(r=!0,Jt([!0,f.snakes[0].score],e,t,n),Zt(t,f.snakes[0].score),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),z=!0));r||z||(f.setNotification(new ht(Y.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),z=!0)}));else if(c==LEVEL_MULTI_REACH_SCORE_FIRST){var r=0,s=new kt((function(){r++}));f.onStart((function(){s.start()})),f.onPause((function(){s.stop()})),f.onReset((function(){r=0,s.stop()})),f.onStop((function(){s.stop()})),N.onScoreIncreased((function(){for(var i=0;i<N.games.length;i++)for(var s=0;s<N.games[i].snakes.length;s++)N.games[i].snakes[s].score>=u&&(N.games[i].snakes[s]==f.snakes[0]?(N.stopAll(!0),Jt([!0,r],e,t,n),Zt(t,f.snakes[0].score),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),z=!0)):(N.stopAll(!0),z||(f.setNotification(new ht(Y.t("levels.goalNotAchieved"),null,W,null,null,null,null,!0)),z=!0)))}))}else if(c==LEVEL_MAZE_WIN){var o=0,a=new kt((function(){o++}));f.onStart((function(){a.start()})),f.onPause((function(){a.stop()})),f.onReset((function(){o=0,a.stop()})),f.onStop((function(){a.stop()})),f.onScoreIncreased((function(){f.snakes[0].score>=1&&(Jt([!0,o],e,t,n),Zt(t,Math.round(f.grid.width*f.grid.height/50)),f.setBestScore(nn(e,t,c,n,!0)),z||(f.setNotification(new ht(Y.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),z=!0))}))}}(),o(),N.onExit((function(){G.pause(),N.killAll(),Ft(t)})),N.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",z=!1,V=!1,o()})),f.onStart((function(){z||V||(U=new ht(H,null,j,10),f.setNotification(U),V=!0),L&&(N.destroySnakes([0],[ce.PlayerType.AI]),an(null,t))}))},window.editDownloadURL=function(){var e=window.prompt(Y.t("levels.editDownloadURLPrompt"),DOWNLOAD_DEFAULT_URI);null!=e&&(DOWNLOAD_DEFAULT_URI=e)},window.downloadLevels=function(e,t){var n=DOWNLOAD_DEFAULT_URI;n=(n=n.replace("{player}",e)).replace("{appVersion}",ce.Setting.APP_VERSION);var i=document.createElement("script");i.src=n;var r=!1;window.callbackDownloadLevels=function(e,t){r||(e==PLAYER_HUMAN?St.setItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO,JSON.stringify(t)):e==PLAYER_AI&&St.setItem(SOLO_AI_DOWNLOAD_LEVELS_TO,JSON.stringify(t)),Ft(e)),document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML=""},t.disabled=!0;var s=document.createElement("button");s.classList="btn btn-lg btn-warning",s.innerHTML=Y.t("levels.buttonDeblock"),document.getElementById("levelDownloading").innerHTML="<strong>"+Y.t("levels.downloading")+"</strong>",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].appendChild(i),s.onclick=function(){r=!0,function(e,t){e.disabled=!1,t.src=null,document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].removeChild(t)}(t,i)},document.getElementById("btnDeblockDiv").appendChild(s)},document.getElementById("languageSelect").onchange=function(){Y.changeLanguage(document.getElementById("languageSelect").value,(function(e,t){ln()}))},window.addEventListener("load",(function(){setTimeout((function(){var e;ln(),(e=document.createElement("script")).src=UPDATER_URI,document.getElementsByTagName("head")[0].appendChild(e)}),250)})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")}])}));