!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){e.exports={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5,FRUIT_GOLD:6},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","Ã—"],APP_VERSION:"2.0.1",DATE_VERSION:"03/18/2020",PROB_GOLD_FRUIT_1_PLAYER:100,PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:50},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13},Error:{ROOM_NOT_FOUND:"ROOM_NOT_FOUND",ROOM_ALREADY_JOINED:"ROOM_ALREADY_JOINED",INVALID_SETTINGS:"INVALID_SETTINGS",MAX_ROOM_LIMIT_REACHED:"MAX_ROOM_LIMIT_REACHED",AUTHENTICATION_REQUIRED:"AUTHENTICATION_REQUIRED",ALREADY_CREATED_ROOM:"ALREADY_CREATED_ROOM",BANNED:"BANNED"},GameState:{STARTING:"STARTING",STARTED:"STARTED",SEARCHING_PLAYERS:"SEARCHING_PLAYERS",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS"}}},function(e,t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(n){return(t="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)})(n)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){n(e,t,i[t])}))}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?a(e):n}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}var d={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var n;console&&console[e]&&(n=console)[e].apply(n,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))}},p=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.init(t,n)}return s(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||d,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,i({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),f=function(){function e(){r(this,e),this.observers={}}return s(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function g(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function m(e){return null==e?"":""+e}function y(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!e[s]&&n&&(e[s]=new n),e=e[s]}return r()?{}:{obj:e,k:i(o.shift())}}function v(e,t,n){var i=y(e,t,Object);i.obj[i.k]=n}function E(e,t){var n=y(e,t),i=n.obj,r=n.k;if(i)return i[r]}function b(e,t,n){var i=E(e,n);return void 0!==i?i:E(t,n)}function w(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function k(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return A[e]})):e}var I=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return r(this,t),n=l(this,c(t).call(this)),f.call(a(n)),n.data=e||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return h(t,f),s(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(o=e.split(".")),E(this.data,o)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),v(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var l=E(this.data,a)||{};r?function e(t,n,i){for(var r in n)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof n[r]||n[r]instanceof String?i&&(t[r]=n[r]):e(t[r],n[r],i):t[r]=n[r];return t}(l,n,o):l=i({},l,n),v(this.data,a,l),s.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?i({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),S={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,r))})),t}},T={},L=function(e){function n(e){var t,i,o,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),t=l(this,c(n).call(this)),f.call(a(t)),i=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o=e,s=a(t),i.forEach((function(e){o[e]&&(s[e]=o[e])})),t.options=u,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=p.create("translator"),t}return h(n,f),s(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(r=o.shift()),e=o.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,n){var r=this;if("object"!==t(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],n),a=s.key,l=s.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+a}return a}var p=this.resolve(e,n),f=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,y=Object.prototype.toString.apply(f),v=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject;if(E&&f&&"string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f&&["[object Number]","[object Function]","[object RegExp]"].indexOf(y)<0&&("string"!=typeof v||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,n):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(o){var b="[object Array]"===y,w=b?[]:{},A=b?m:g;for(var k in f)if(Object.prototype.hasOwnProperty.call(f,k)){var I="".concat(A).concat(o).concat(k);w[k]=this.translate(I,i({},n,{joinArrays:!1,ns:l})),w[k]===I&&(w[k]=f[k])}f=w}}else if(E&&"string"==typeof v&&"[object Array]"===y)(f=f.join(v))&&(f=this.extendTranslation(f,e,n));else{var S=!1,T=!1;if(!this.isValidLookup(f)&&void 0!==n.defaultValue){if(S=!0,void 0!==n.count){var L=this.pluralResolver.getSuffix(u,n.count);f=n["defaultValue".concat(L)]}f||(f=n.defaultValue)}this.isValidLookup(f)||(T=!0,f=a);var R=n.defaultValue&&n.defaultValue!==f&&this.options.updateMissing;if(T||S||R){this.logger.log(R?"updateKey":"missingKey",u,c,a,R?n.defaultValue:f);var C=[],_=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&_&&_[0])for(var x=0;x<_.length;x++)C.push(_[x]);else"all"===this.options.saveMissingTo?C=this.languageUtils.toResolveHierarchy(n.lng||this.language):C.push(n.lng||this.language);var O=function(e,t){r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,t,R?n.defaultValue:f,R,n):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,t,R?n.defaultValue:f,R,n),r.emit("missingKey",e,c,t,f)};if(this.options.saveMissing){var P=void 0!==n.count&&"string"!=typeof n.count;this.options.saveMissingPlurals&&P?C.forEach((function(e){r.pluralResolver.getPluralFormsOfKey(e,a).forEach((function(t){return O([e],t)}))})):O(C,a)}}f=this.extendTranslation(f,e,n,p),T&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(a)),T&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(i({},n,{interpolation:i({},this.options.interpolation,n.interpolation)}));var s=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(s=i({},this.options.interpolation.defaultVariables,s)),e=this.interpolator.interpolate(e,s,n.lng||this.language,n),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){return o.translate.apply(o,arguments)}),n)),n.interpolation&&this.interpolator.reset()}var a=n.postProcess||this.options.postProcess,l="string"==typeof a?[a]:a;return null!=e&&l&&l.length&&!1!==n.applyPostProcessor&&(e=S.handle(l,e,t,this.options&&this.options.postProcessPassResolved?i({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;n=c;var u=l.namespaces;s.options.fallbackNS&&(u=u.concat(s.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,d=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,p=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);u.forEach((function(e){s.isValidLookup(t)||(o=e,!T["".concat(p[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(T["".concat(p[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for namespace "').concat(o,'" for languages "').concat(p.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!s.isValidLookup(t)){r=n;var o,l,u=c,p=[u];for(s.i18nFormat&&s.i18nFormat.addLookupKeys?s.i18nFormat.addLookupKeys(p,c,n,e,a):(h&&(o=s.pluralResolver.getSuffix(n,a.count)),h&&d&&p.push(u+o),d&&p.push(u+="".concat(s.options.contextSeparator).concat(a.context)),h&&p.push(u+=o));l=p.pop();)s.isValidLookup(t)||(i=l,t=s.getResource(n,e,l,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}]),n}();function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}var C=function(){function e(t){r(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=p.create("languageUtils")}return s(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=R(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=R(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=R(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(n.isWhitelisted(e)?r.push(e):n.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))})),r}}]),e}(),_=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],x={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}},O=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.languageUtils=t,this.options=i,this.logger=p.create("pluralResolver"),this.rules=(n={},_.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:x[e.fc]}}))})),n)}return s(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,i=[],r=this.getRule(e);return r?(r.numbers.forEach((function(r){var o=n.getSuffix(e,r);i.push("".concat(t).concat(o))})),i):i}},{key:"getSuffix",value:function(e,t){var n=this,i=this.getRule(e);if(i){var r=i.noAbs?i.plurals(t):i.plurals(Math.abs(t)),o=i.numbers[r];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.logger=p.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return s(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:k,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?w(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?w(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?w(t.nestingPrefix):t.nestingPrefixEscaped||w("$t("),this.nestingSuffix=t.nestingSuffix?w(t.nestingSuffix):t.nestingSuffixEscaped||w(")"),this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(a.formatSeparator)<0){var r=b(t,l,e);return a.alwaysFormat?a.format(r,void 0,n):r}var o=e.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(b(t,l,s),c,n,i)};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler;for(s=0;r=this.regexpUnescape.exec(e);){if(void 0===(o=u(r[1].trim())))if("function"==typeof h){var d=h(e,r,i);o="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=m(o));if(e=e.replace(r[0],c(o)),this.regexpUnescape.lastIndex=0,++s>=this.maxReplaces)break}for(s=0;r=this.regexp.exec(e);){if(void 0===(o=u(r[1].trim())))if("function"==typeof h){var p=h(e,r,i);o="string"==typeof p?p:""}else this.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(e)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=m(o));if(o=this.escapeValue?c(this.escape(o)):c(o),e=e.replace(r[0],o),this.regexp.lastIndex=0,++s>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var n,r,o=i({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});function s(e,t){if(e.indexOf(",")<0)return e;var n=e.split(",");e=n.shift();var r=n.join(",");r=(r=this.interpolate(r,o)).replace(/'/g,'"');try{o=JSON.parse(r),t&&(o=i({},t,o))}catch(t){this.logger.error("failed parsing options string in nesting for key ".concat(e),t)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){if((r=t(s.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=m(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D=function(e){function t(e,n,i){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r(this,t),o=l(this,c(t).call(this)),f.call(a(o)),o.backend=e,o.store=n,o.services=i,o.languageUtils=i.languageUtils,o.options=s,o.logger=p.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(i,s.backend,s),o}return h(t,f),s(t,[{key:"queueLoad",value:function(e,t,n,i){var r=this,o=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=B(e.split("|"),2),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var i,a,l,c,u;i=n.loaded,a=o,(c=(l=y(i,[r],Object)).obj)[u=l.k]=c[u]||[],c[u].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=B(e.split("|"),2),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" for namespace "').concat(t,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,i({},s,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function M(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function F(){}return new(function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(r(this,n),e=l(this,c(n).call(this)),f.call(a(e)),e.options=M(t),e.services={},e.logger=p,e.modules={external:[]},i&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,i),l(e,a(e));setTimeout((function(){e.init(t,i)}),0)}return e}return h(n,f),s(n,[{key:"init",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;function o(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof n&&(r=n,n={}),this.options=i({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if("object"===t(e[1])&&(n=e[1]),"string"==typeof e[1]&&(n.defaultValue=e[1]),"string"==typeof e[2]&&(n.tDescription=e[2]),"object"===t(e[2])||"object"===t(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){n[e]=i[e]}))}return n},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,M(n)),this.format=this.options.interpolation.format,r||(r=F),!this.options.isClone){this.modules.logger?p.init(o(this.modules.logger),this.options):p.init(null,this.options);var s=new C(this.options);this.store=new I(this.options.resources,this.options);var a=this.services;a.logger=p,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new O(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new P(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new D(o(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(a.languageDetector=o(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=o(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new L(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=g(),c=function(){e.changeLanguage(e.options.lng,(function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(n),r(t,n)}))};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,i="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){r.indexOf(e)<0&&r.push(e)}))};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)})),this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(r,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var i=g();return e||(e=this.languages),t||(t=this.options.ns),n||(n=F),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&S.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=g();this.emit("languageChanging",e);var r=function(e){e&&(n.language||(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e)),n.translator.language||n.translator.changeLanguage(e),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(e)),n.loadResources(e,(function(r){!function(e,r){r?(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r),n.translator.changeLanguage(r),n.isLanguageChangingTo=void 0,n.emit("languageChanged",r),n.logger.log("languageChanged",r)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(r,e)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,n){var r=this,o=function e(n,o){var s;if("object"!==t(o)){for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];s=r.options.overloadTranslationOptionHandler([n,o].concat(l))}else s=i({},o);return s.lng=s.lng||e.lng,s.lngs=s.lngs||e.lngs,s.ns=s.ns||e.ns,r.t(n,s)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],i=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};return!!this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||!(!o(n,e)||i&&!o(r,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=g();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=g();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,o=i({},this.options,t,{isClone:!0}),s=new n(o);return["store","services","language"].forEach((function(t){s[t]=e[t]})),s.translator=new L(s.services,s.options),s.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];s.emit.apply(s,[e].concat(n))})),s.init(o,r),s.translator.options=s.options,s}}]),n}())}()},function(e,t,n){var i=n(14),r=n(4),o=n(0),s=n(3);function a(e,t,n,i,r,a,l){this.width=null==e?20:e,this.height=null==t?20:t,this.generateWalls=null!=n&&n,this.borderWalls=null!=i&&i,this.maze=null!=r&&r,this.mazeFirstPosition=new s(1,1,o.Direction.RIGHT),this.mazeForceAuto=null!=l&&l,this.grid,this.initialGrid,this.fruitPos,this.fruitPosGold,this.init(a)}a.prototype.init=function(e){if(null!=e||null!=this.initialGrid){var t;t=null!=this.initialGrid?this.initialGrid:e,this.height=t.length,this.width=t[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var n=0;n<this.height;n++)this.initialGrid[n]=t[n].slice(),this.grid[n]=t[n].slice()}else{this.grid=new Array(this.height);for(n=0;n<this.height;n++){this.grid[n]=new Array(this.width);for(var i=0;i<this.width;i++)this.borderWalls&&(0==n||n==this.height-1||0==i||i==this.width-1)||this.generateWalls&&Math.random()>.65||this.maze?this.grid[n][i]=o.CaseType.WALL:this.grid[n][i]=o.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}this.fruitPosGold=null},a.prototype.fixWalls=function(e){if(e)var t=1,n=this.height-1,i=1,r=this.width-1;else t=0,n=this.height,i=0,r=this.width;for(var a=t;a<n;a++)for(var l=i;l<r;l++){var c=new s(l,a),u=this.getNextPosition(c,o.Direction.UP),h=this.getNextPosition(u,o.Direction.LEFT),d=this.getNextPosition(u,o.Direction.RIGHT),p=this.getNextPosition(c,o.Direction.BOTTOM),f=this.getNextPosition(p,o.Direction.LEFT),g=this.getNextPosition(p,o.Direction.RIGHT);this.get(h)!=o.CaseType.WALL&&this.get(d)!=o.CaseType.WALL&&this.get(f)!=o.CaseType.WALL&&this.get(g)!=o.CaseType.WALL||this.set(o.CaseType.EMPTY,c)}},a.prototype.maze_recursion=function(e,t){for(var n=r.shuffle([o.Direction.UP,o.Direction.RIGHT,o.Direction.BOTTOM,o.Direction.LEFT]),i=0;i<n.length;i++)switch(n[i]){case o.Direction.UP:if(e-2<=0)continue;this.get(new s(t,e-2))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new s(t,e-2)),this.set(o.CaseType.EMPTY,new s(t,e-1)),this.maze_recursion(e-2,t));break;case o.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new s(t+2,e))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new s(t+2,e)),this.set(o.CaseType.EMPTY,new s(t+1,e)),this.maze_recursion(e,t+2));break;case o.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new s(t,e+2))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new s(t,e+2)),this.set(o.CaseType.EMPTY,new s(t,e+1)),this.maze_recursion(e+2,t));break;case o.Direction.LEFT:if(t-2<=0)continue;this.get(new s(t-2,e))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new s(t-2,e)),this.set(o.CaseType.EMPTY,new s(t-1,e)),this.maze_recursion(e,t-2))}},a.prototype.generateMaze=function(){this.mazeFirstPosition=new s(1,1,o.Direction.RIGHT),this.set(o.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)},a.prototype.set=function(e,t){this.grid[t.y][t.x]=e},a.prototype.get=function(e){return this.grid[e.y][e.x]},a.prototype.valToChar=function(e){switch(e){case o.CaseType.EMPTY:return"-";case o.CaseType.SNAKE:return"o";case o.CaseType.SNAKE_DEAD:return"O";case o.CaseType.FRUIT:return"x";case o.CaseType.WALL:return"#";case o.CaseType.SURROUNDED:return"/";case o.CaseType.FRUIT_GOLD:return"X"}},a.prototype.getImageCase=function(e){var t="";switch(this.get(e)){case o.CaseType.WALL:t="assets/images/wall.png";break;case o.CaseType.FRUIT:t="assets/images/fruit.png";break;case o.CaseType.FRUIT_GOLD:t="assets/images/fruit_gold.png"}return t},a.prototype.getGraph=function(e){for(var t=new Array(this.height),n=0;n<this.height;n++){t[n]=new Array(this.width);for(var i=0;i<this.width;i++){var r=new s(i,n);e&&this.get(r)==o.CaseType.SNAKE?t[n][i]=0:this.isDeadPosition(r)?t[n][i]=1:t[n][i]=0}}return t},a.prototype.getRandomPosition=function(){return new s(r.randRange(0,this.width-1),r.randRange(0,this.height-1))},a.prototype.setFruit=function(e,t){var n=[1];if(t||null==this.fruitPos||this.get(this.fruitPos)!=o.CaseType.FRUIT||this.set(o.CaseType.EMPTY,this.fruitPos),!(this.getTotal(o.CaseType.EMPTY)>0))return!1;for(var i=this.getRandomPosition();this.get(i)!=o.CaseType.EMPTY||this.isFruitSurrounded(i,!0)||this.maze&&!this.testFruitMaze(i,n);){if(this.getTotal(o.CaseType.EMPTY)<=0)return!1;i=this.getRandomPosition()}return t?(this.fruitPosGold=i,this.set(o.CaseType.FRUIT_GOLD,i)):(this.fruitPos=i,this.set(o.CaseType.FRUIT,i)),this.generateMaze||null!=this.fruitPosGold||1!=r.randRange(1,e>1?o.Setting.PROB_GOLD_FRUIT_MULTIPLE_PLAYERS:o.Setting.PROB_GOLD_FRUIT_1_PLAYER)||this.setFruit(e,!0),!0},a.prototype.testFruitMaze=function(e,t){var n=this.getGraph(!0);return new i.Astar.Configuration(n,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:(e,t)=>1==t?null:1}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(o.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)},a.prototype.isCaseSurrounded=function(e,t,n,i){if(null==e||null==e)return!1;t=null!=t&&t;for(var r=[e],s=[];r.length>0;){var a=r[0];r.shift();for(var l=[this.getNextPosition(a,o.Direction.UP),this.getNextPosition(a,o.Direction.BOTTOM),this.getNextPosition(a,o.Direction.LEFT),this.getNextPosition(a,o.Direction.RIGHT)],c=0;c<l.length;c++){var u=!1;if((l[c].indexIn(s)>-1||l[c].indexIn(r)>-1)&&(u=!0),!u&&i.indexOf(this.get(l[c]))>-1){if(r.push(l[c]),n.indexOf(this.get(l[c]))>-1)return!1;t&&this.get(l[c])==o.CaseType.EMPTY&&this.set(o.CaseType.SURROUNDED,l[c])}}s.push(a)}return(t&&(this.get(e)==o.CaseType.EMPTY||this.get(e)==o.CaseType.FRUIT)||this.get(e)==o.CaseType.FRUIT_GOLD)&&this.set(o.CaseType.SURROUNDED,e),!0},a.prototype.isFruitSurrounded=function(e,t){var n=this.isCaseSurrounded(e,!1,[o.CaseType.SNAKE],[o.CaseType.EMPTY,o.CaseType.SNAKE]);return n&&t&&this.isCaseSurrounded(e,!0,[o.CaseType.SNAKE],[o.CaseType.EMPTY,o.CaseType.SNAKE]),n},a.prototype.getOnLine=function(e,t){for(var n=0,i=0;i<this.width;i++)this.get(new s(i,t))==e&&n++;return n},a.prototype.getTotal=function(e){for(var t=0,n=0;n<this.height;n++)t+=this.getOnLine(e,n);return t},a.prototype.getNextPosition=function(e,t){var n=new s(e.x,e.y,t);switch(t){case o.Direction.LEFT:n.x--,n.direction=o.Direction.LEFT;break;case o.Direction.UP:n.y--,n.direction=o.Direction.UP;break;case o.Direction.RIGHT:n.x++,n.direction=o.Direction.RIGHT;break;case o.Direction.BOTTOM:n.y++,n.direction=o.Direction.BOTTOM;break;case o.Key.LEFT:n.x--,n.direction=o.Key.LEFT;break;case o.Key.UP:n.y--,n.direction=o.Key.UP;break;case o.Key.RIGHT:n.x++,n.direction=o.Direction.RIGHT;break;case o.Key.BOTTOM:n.y++,n.direction=o.Direction.BOTTOM}return n.x<0?n.x=this.width-1:n.x>=this.width&&(n.x=0),n.y<0?n.y=this.height-1:n.y>=this.height&&(n.y=0),n},a.prototype.getDirectionTo=function(e,t){return this.getNextPosition(e,o.Direction.UP).equals(t)?o.Direction.UP:this.getNextPosition(e,o.Direction.BOTTOM).equals(t)?o.Direction.BOTTOM:this.getNextPosition(e,o.Direction.RIGHT).equals(t)?o.Direction.RIGHT:this.getNextPosition(e,o.Direction.LEFT).equals(t)?o.Direction.LEFT:-1},a.prototype.isDeadPosition=function(e){return this.get(e)==o.CaseType.SNAKE||this.get(e)==o.CaseType.WALL||this.get(e)==o.CaseType.SNAKE_DEAD},a.prototype.toString=function(){res="";for(var e=0;e<this.height;e++){for(var t=0;t<this.width;t++)res+=this.valToChar(this.get(new s(t,e)))+" ";res+="\n"}return res},e.exports=a},function(e,t,n){var i=n(0);function r(e,t,n){this.x=e,this.y=t,this.direction=n}r.prototype.copy=function(){return new r(this.x,this.y,this.direction)},r.prototype.convertToKeyDirection=function(){switch(this.direction){case i.Direction.UP:return i.Key.UP;case i.Direction.RIGHT:return i.Key.RIGHT;case i.Direction.LEFT:return i.Key.LEFT;case i.Direction.BOTTOM:return i.Key.BOTTOM;default:return this.direction}},r.prototype.convertToSimpleDirection=function(){switch(this.direction){case i.Key.UP:return i.Direction.UP;case i.Key.RIGHT:return i.Direction.RIGHT;case i.Key.LEFT:return i.Direction.LEFT;case i.Key.BOTTOM:return i.Direction.BOTTOM;default:return this.direction}},r.prototype.equals=function(e){return null!=e&&(this.x==e.x&&this.y==e.y)},r.prototype.indexIn=function(e){for(var t=0;t<e.length;t++)if(this.equals(e[t]))return t;return-1},e.exports=r},function(e,t,n){var i=n(1),r={randRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},addHue:function(e,t){var n=e+t;return n>360?n-=360:n<0&&(n=360+n),n},hsvToRgb:function(e,t,n){var i,r,o,s,a,l,c,u;switch(l=n*(1-t),c=n*(1-(a=6*e-(s=Math.floor(6*e)))*t),u=n*(1-(1-a)*t),s%6){case 0:i=n,r=u,o=l;break;case 1:i=c,r=n,o=l;break;case 2:i=l,r=n,o=u;break;case 3:i=l,r=c,o=n;break;case 4:i=u,r=l,o=n;break;case 5:i=n,r=l,o=c}return[Math.round(255*i),Math.round(255*r),Math.round(255*o)]},hslToName:function(e,t,n){return t<=10&&n>=90?i.t("engine.colors.white"):t<=10&&n<=70||0==t?i.t("engine.colors.gray"):n<=15?i.t("engine.colors.black"):e>=0&&e<=6||e>=350?i.t("engine.colors.red"):e>=7&&e<=42?i.t("engine.colors.orange"):e>=43&&e<=70?i.t("engine.colors.yellow"):e>=71&&e<=156?i.t("engine.colors.green"):e>=157&&e<=221?i.t("engine.colors.blue"):e>=222&&e<=290?i.t("engine.colors.purple"):e>=291&&e<=349?i.t("engine.colors.pink"):"???"},shuffle:function(e){for(var t,n,i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),n=e[i],e[i]=e[t],e[t]=n;return e},millisecondsFormat:function(e){return e/=1e3,("0"+Math.trunc(e/60)).slice(-2)+":"+("0"+Math.trunc(e%60)).slice(-2)},secondsFormat:function(e){return this.millisecondsFormat(1e3*e)}};e.exports=r},function(e,t,n){var i=n(1),r=n(14),o=n(4),s=n(0),a=n(3),l=n(2);function c(e,t,n,i,r,o,a){this.direction=null==e?s.Direction.RIGHT:e,this.initialDirection=null==e?s.Direction.RIGHT:e,this.initialLength=null==t?3:t,this.initTriedDirections=[],this.errorInit=!1,this.grid=n||new l,this.queue=[],this.lastKey=-1,this.lastTail,this.lastTailMoved,this.player=null==i?s.PlayerType.HUMAN:i,this.aiLevel=null==r?s.AiLevel.DEFAULT:r,this.autoRetry=null!=o&&o,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.name=null==a?"Snake":a,this.aiFruitGoal=s.CaseType.FRUIT,this.init()}c.prototype.init=function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==s.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(s.Direction.RIGHT)||this.initialDirection==s.Direction.LEFT&&-1==this.initTriedDirections.indexOf(s.Direction.LEFT)){for(var n=0;n<this.grid.height;n++)for(var i=0,r=0;r<this.grid.width;r++)if(this.grid.get(new a(r,n))==s.CaseType.EMPTY?i++:i=0,i>=this.initialLength){e++;break}}else if(this.initialDirection==s.Direction.UP&&-1==this.initTriedDirections.indexOf(s.Direction.UP)||this.initialDirection==s.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(s.Direction.BOTTOM))for(n=0;n<this.grid.width;n++){var o=0;for(r=0;r<this.grid.height;r++)if(this.grid.get(new a(n,r))==s.CaseType.EMPTY?o++:o=0,o>=this.initialLength){t++;break}}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==s.Direction.RIGHT||this.initialDirection==s.Direction.LEFT)||t<=0&&(this.initialDirection==s.Direction.UP||this.initialDirection==s.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(s.Direction.RIGHT)?(this.initialDirection=s.Direction.RIGHT,this.direction=s.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(s.Direction.LEFT)?(this.initialDirection=s.Direction.LEFT,this.direction=s.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(s.Direction.UP)?(this.initialDirection=s.Direction.UP,this.direction=s.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(s.Direction.BOTTOM)?(this.initialDirection=s.Direction.BOTTOM,this.direction=s.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var l,c,u=!0,h=[];u;){u=!1,l=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition(),c=new a(l.x,l.y,this.initialDirection),h=[];for(n=this.initialLength-1;n>=0;n--)n<this.initialLength-1&&(this.initialDirection==s.Direction.RIGHT?c=this.grid.getNextPosition(new a(c.x,c.y,this.initialDirection),s.Direction.RIGHT):this.initialDirection==s.Direction.LEFT?c=this.grid.getNextPosition(new a(c.x,c.y,this.initialDirection),s.Direction.LEFT):this.initialDirection==s.Direction.BOTTOM?c=this.grid.getNextPosition(new a(c.x,c.y,this.initialDirection),s.Direction.BOTTOM):this.initialDirection==s.Direction.UP&&(c=this.grid.getNextPosition(new a(c.x,c.y,this.initialDirection),s.Direction.UP))),this.grid.get(c)!=s.CaseType.EMPTY?u=!0:h.push(new a(c.x,c.y,c.direction));if(this.grid.maze&&u)return this.init()}for(n=0;n<h.length;n++)this.insert(h[n]);return this.grid.maze&&this.player==s.PlayerType.HYBRID_HUMAN_AI&&(this.player=s.PlayerType.HUMAN),this.player==s.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=s.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0},c.prototype.reset=function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.lastKey=-1,this.aiFruitGoal=s.CaseType.FRUIT,this.init()},c.prototype.insert=function(e){this.queue.unshift(e),this.grid.set(s.CaseType.SNAKE,e)},c.prototype.remove=function(){var e=this.queue.pop();this.grid.set(s.CaseType.EMPTY,e),this.lastTail=e},c.prototype.length=function(){return this.queue.length},c.prototype.get=function(e){return null!=this.queue[e]?this.queue[e].copy():null},c.prototype.set=function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)},c.prototype.getHeadPosition=function(){return this.get(0)},c.prototype.getTailPosition=function(){return this.get(this.length()-1)},c.prototype.hasMaxScore=function(){return this.grid.getTotal(s.CaseType.EMPTY)<=0},c.prototype.setGameOver=function(){this.gameOver=!0;for(var e=0;e<this.length();e++)this.grid.set(s.CaseType.SNAKE_DEAD,this.get(e))},c.prototype.kill=function(){this.autoRetry=!1,this.grid=null,this.queue=null},c.prototype.moveTo=function(e){e==s.Key.LEFT&&this.direction!=s.Direction.RIGHT&&this.direction!=s.Direction.LEFT&&(this.direction=s.Direction.LEFT),e==s.Key.UP&&this.direction!=s.Direction.BOTTOM&&this.direction!=s.Direction.UP&&(this.direction=s.Direction.UP),e==s.Key.RIGHT&&this.direction!=s.Direction.LEFT&&this.direction!=s.Direction.RIGHT&&(this.direction=s.Direction.RIGHT),e==s.Key.BOTTOM&&this.direction!=s.Direction.UP&&this.direction!=s.Direction.BOTTOM&&(this.direction=s.Direction.BOTTOM)},c.prototype.getNextPosition=function(e,t){return this.grid.getNextPosition(e,t)},c.prototype.getDirectionTo=function(e,t){return this.grid.getDirectionTo(e,t)},c.prototype.getGraphicDirectionFor=function(e,t,n){if(null==t||null==n)return e.direction;var i=this.getDirectionTo(e,n),r=this.getDirectionTo(e,t);s.Direction.UP;return i==s.Direction.LEFT&&r==s.Direction.BOTTOM||i==s.Direction.BOTTOM&&r==s.Direction.LEFT?s.Direction.ANGLE_1:i==s.Direction.RIGHT&&r==s.Direction.BOTTOM||i==s.Direction.BOTTOM&&r==s.Direction.RIGHT?s.Direction.ANGLE_2:i==s.Direction.UP&&r==s.Direction.RIGHT||i==s.Direction.RIGHT&&r==s.Direction.UP?s.Direction.ANGLE_3:i==s.Direction.UP&&r==s.Direction.LEFT||i==s.Direction.LEFT&&r==s.Direction.UP?s.Direction.ANGLE_4:e.direction},c.prototype.getGraphicDirection=function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))},c.prototype.copy=function(){for(var e=new c(direction,3,new l(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),t=0;t<e.grid.height;t++)for(var n=0;n<e.grid.width;n++)e.grid.set(this.grid.get(new a(n,t)),new a(n,t));e.queue=[];for(t=0;t<this.queue.length;t++)e.queue.push(elem.copy());return e},c.prototype.randomAI=function(){var e=this.getHeadPosition(),t=this.grid.isDeadPosition(this.getNextPosition(e,s.Key.UP)),n=this.grid.isDeadPosition(this.getNextPosition(e,s.Key.LEFT)),i=this.grid.isDeadPosition(this.getNextPosition(e,s.Key.BOTTOM)),r=this.grid.isDeadPosition(this.getNextPosition(e,s.Key.RIGHT));if(t&&n&&i&&r)return s.Key.UP;for(var a=null;null==a||this.grid.isDeadPosition(this.getNextPosition(e,a));){switch(o.randRange(1,4)){case 1:a=s.Key.UP;break;case 2:a=s.Key.LEFT;break;case 3:a=s.Key.BOTTOM;break;case 4:a=s.Key.RIGHT}}return a},c.prototype.simpleAI=function(){if(null!=this.grid.fruitPos){var e=this.getHeadPosition(),t=this.grid.fruitPos,n=s.Key.RIGHT;t.x>e.x?n=t.x-e.x>this.grid.width/2?s.Key.LEFT:s.Key.RIGHT:t.x<e.x?n=e.x-t.x>this.grid.width/2?s.Key.RIGHT:s.Key.LEFT:t.y<e.y?n=e.y-t.y>this.grid.height/2?s.Key.BOTTOM:s.Key.UP:t.y>e.y&&(n=t.y-e.y>this.grid.height/2?s.Key.UP:s.Key.BOTTOM);var i=this.getNextPosition(e,n);if(this.grid.isDeadPosition(i)){for(var r=this.direction,o=null,a=1;a<this.queue.length;a++)if(this.get(a).direction!=r){o=this.get(a).direction;break}i=this.getNextPosition(e,o),this.grid.isDeadPosition(i)?this.grid.isDeadPosition(this.getNextPosition(e,s.Key.UP))?this.grid.isDeadPosition(this.getNextPosition(e,s.Key.RIGHT))?this.grid.isDeadPosition(this.getNextPosition(e,s.Key.BOTTOM))?this.grid.isDeadPosition(this.getNextPosition(e,s.Key.LEFT))||(n=s.Key.LEFT):n=s.Key.BOTTOM:n=s.Key.RIGHT:n=s.Key.UP:n=i.convertToKeyDirection()}return n}},c.prototype.ai=function(e){var t=s.Key.RIGHT;if(this.aiLevel==s.AiLevel.RANDOM)t=this.randomAI();else if(this.aiLevel==s.AiLevel.LOW)t=this.simpleAI();else if(null!=this.grid.fruitPos){var n=this.getHeadPosition(),i=this.grid.fruitPos,o=this.grid.fruitPosGold,l=Math.abs(n.x-i.x)+Math.abs(n.y-i.y),c=null!=o?Math.abs(n.x-o.x)+Math.abs(n.y-o.y):-1;null!=o&&this.aiFruitGoal==s.CaseType.FRUIT?this.aiFruitGoal=c>l?s.CaseType.FRUIT_GOLD:s.CaseType.FRUIT:null==o&&(this.aiFruitGoal=s.CaseType.FRUIT);var u=this.grid.getGraph(!1),h=new r.Astar.Configuration(u,{order:"yx",torus:this.aiLevel==s.AiLevel.HIGH||this.aiLevel==s.AiLevel.ULTRA,diagonals:!1,cutting:!1,static:!0,cost:(e,t)=>1==t?null:1}),d=h.path({x:n.x,y:n.y},{x:this.aiFruitGoal==s.CaseType.FRUIT_GOLD?o.x:i.x,y:this.aiFruitGoal==s.CaseType.FRUIT_GOLD?o.y:i.y});if(d.length>1){var p=new a(d[1].x,d[1].y);t=new a(null,null,this.getDirectionTo(n,p)).convertToKeyDirection()}else this.aiLevel!=s.AiLevel.HIGH&&this.aiLevel!=s.AiLevel.ULTRA||(t=this.simpleAI());d=null}return t},c.prototype.getAILevelText=function(){switch(this.aiLevel){case s.AiLevel.RANDOM:return i.t("engine.aiLevelList.random");case s.AiLevel.LOW:return i.t("engine.aiLevelList.low");case s.AiLevel.DEFAULT:return i.t("engine.aiLevelList.normal");case s.AiLevel.HIGH:return i.t("engine.aiLevelList.high");case s.AiLevel.ULTRA:return i.t("engine.aiLevelList.ultra");default:return i.t("engine.aiLevelList.normal")}},e.exports=c},function(e,t,n){var i=n(0),r=n(7);function o(e,t){this.gameUI=t,this.gameEngine=e,this.snakes=null,this.paused=!1,this.isReseted=!1,this.exited=!1,this.gameOver=!1,this.starting=!1,this.scoreMax=!1,this.gameFinished=!1,this.errorOccurred=!1,this.reactor=new r,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}o.prototype.init=function(){var e=this;this.update("init",{snakes:this.gameEngine.snakes,grid:this.gameEngine.grid,enablePause:this.gameEngine.enablePause,enableRetry:this.gameEngine.enableRetry,progressiveSpeed:this.gameEngine.progressiveSpeed,offsetFrame:this.gameEngine.speed*i.Setting.TIME_MULTIPLIER,errorOccurred:this.gameEngine.errorOccurred}),this.gameEngine.onReset((function(){e.update("reset",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred,offsetFrame:e.gameEngine.speed*i.Setting.TIME_MULTIPLIER}),e.reactor.dispatchEvent("onReset")})),this.gameEngine.onStart((function(){e.update("start",{snakes:e.gameEngine.snakes,grid:e.gameEngine.grid,starting:e.gameEngine.starting,countBeforePlay:e.gameEngine.countBeforePlay,paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStart")})),this.gameEngine.onPause((function(){e.update("pause",{paused:e.gameEngine.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onPause")})),this.gameEngine.onContinue((function(){e.update("continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onContinue")})),this.gameEngine.onStop((function(){e.update("stop",{paused:e.gameEngine.paused,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStop")})),this.gameEngine.onExit((function(){e.update("exit",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,exited:e.gameEngine.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onExit")})),this.gameEngine.onKill((function(){e.update("kill",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,killed:e.gameEngine.killed,snakes:e.gameEngine.snakes,gameFinished:e.gameEngine.gameFinished,grid:e.gameEngine.grid,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onKill")})),this.gameEngine.onScoreIncreased((function(){e.update("scoreIncreased",{snakes:e.gameEngine.snakes,scoreMax:e.gameEngine.scoreMax,gameFinished:e.gameEngine.gameFinished,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onScoreIncreased")})),this.gameEngine.onUpdate((function(){e.update("update",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,numFruit:e.gameEngine.numFruit,offsetFrame:0,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onUpdate")})),this.gameEngine.onUpdateCounter((function(){e.update("updateCounter",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,numFruit:e.gameEngine.numFruit,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onUpdateCounter")}))},o.prototype.reset=function(){this.gameEngine.reset()},o.prototype.start=function(){this.gameEngine.start()},o.prototype.stop=function(){this.gameEngine.stop()},o.prototype.finish=function(e){this.gameEngine.stop(e)},o.prototype.pause=function(){this.gameEngine.pause()},o.prototype.kill=function(){this.gameEngine.kill()},o.prototype.tick=function(){this.gameEngine.tick()},o.prototype.exit=function(){this.gameEngine.exit()},o.prototype.forceStart=function(){this.gameEngine.start()},o.prototype.setDisplayFPS=function(e){this.gameUI.setDisplayFPS(e)},o.prototype.setNotification=function(e){this.gameUI.setNotification(e)},o.prototype.closeRanking=function(){this.gameUI.gameRanking&&this.gameUI.gameRanking.forceClose()},o.prototype.setTimeToDisplay=function(e){this.gameUI.setTimeToDisplay(e)},o.prototype.setBestScore=function(e){this.gameUI.setBestScore(e)},o.prototype.key=function(e){this.gameEngine.lastKey=e;var t=this.gameEngine.getPlayer(1,i.PlayerType.HUMAN)||this.gameEngine.getPlayer(1,i.PlayerType.HYBRID_HUMAN_AI);null!=t&&null!=t.lastKey&&(t.lastKey=e)},o.prototype.update=function(e,t){if(null!=this.gameUI&&null!=t){for(var n=Object.keys(t),i=0;i<n.length;i++)Object.prototype.hasOwnProperty.call(this.gameUI,n[i])&&"function"!=typeof t[n[i]]&&"function"!=typeof this.gameUI[n[i]]&&(this.gameUI[n[i]]=t[n[i]]),Object.prototype.hasOwnProperty.call(this,n[i])&&"function"!=typeof t[n[i]]&&"function"!=typeof this[n[i]]&&(this[n[i]]=t[n[i]]);t.hasOwnProperty("killed")&&t.killed&&this.gameUI.setKill()}},o.prototype.getNBPlayer=function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t},o.prototype.getPlayer=function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null},o.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},o.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},o.prototype.onContinue=function(e){this.reactor.addEventListener("onContinue",e)},o.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},o.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},o.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},o.prototype.onKill=function(e){this.reactor.addEventListener("onKill",e)},o.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},e.exports=o},function(e,t,n){var i=n(12);function r(){this.events={}}r.prototype.registerEvent=function(e){var t=new i(e);this.events[e]=t},r.prototype.dispatchEvent=function(e,t){for(var n=this.events[e].callbacks,i=0,r=n.length;i<r;i++)n[i](t)},r.prototype.addEventListener=function(e,t){this.events[e].registerCallback(t)},e.exports=r},function(e,t,n){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"Constants",(function(){return i})),n.d(t,"Button",(function(){return m})),n.d(t,"ButtonImage",(function(){return y})),n.d(t,"ImageLoader",(function(){return E})),n.d(t,"NotificationMessage",(function(){return L})),n.d(t,"Utils",(function(){return r})),n.d(t,"Menu",(function(){return D})),n.d(t,"Input",(function(){return W}));var i={Setting:{FONT_FAMILY:"sans-serif",FONT_SIZE:32,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","Ã—"]},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13}},r={preRenderedFont:{},lastKey:-1,preRenderFont:function(e,t,n,i){e.push("?"),e.push(" "),e.push("A");for(var r=0;r<e.length;r++){var o=document.createElement("canvas"),s=o.getContext("2d");s.font=t+"px "+i;var a=s.measureText(e[r]).width;o.width=a,o.height=t+t/6,s.font=t+"px "+i,s.fillStyle=n,s.textBaseline="top",s.fillText(e[r],0,0),this.preRenderedFont[e[r]]=o}},drawImage:function(e,t,n,i,r,o,s,a,l,c,u,h){this.drawImageWrapper(e,t,n,i,r,o,s,a,l,c,u,h)},drawImageData:function(e,t,n,i,r,o,s,a,l,c,u,h){this.drawImageWrapper(e,t,n,i,r,o,s,a,l,c,u,h)},drawImageWrapper:function(e,t,n,i,r,o,s,a,l,c,u,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),s=null==s||isNaN(s)?null:Math.round(s),a=null==a||isNaN(a)?null:Math.round(a),l=null==l||isNaN(l)?null:Math.round(l),c=null==c||isNaN(c)?null:Math.round(c),u=null!=u&&u,null!=(h=null==h||isNaN(h)?null:h)&&(e.save(),e.translate(n+r/2,i+o/2),e.rotate(h*Math.PI/180),n=-r/2,i=-o/2),u&&e.clearRect(n,i,r,o),null!=e&&null!=t&&(null!=s&&null!=a&&null!=l&&null!=c?e.drawImage(t,s,a,l,c,n,i,r,o):e.drawImage(t,n,i,r,o)),null!=h&&e.restore()},drawText:function(e,t,n,i,r,o,s,a,l,c,u){e.save(),Array.isArray(n)||(e.fillStyle=n),e.font=(u?"bold ":"")+i+"px "+r,e.filter="none",c&&(t=this.wrapTextLines(e,t).text);var h=t.split("\n");"center"==s?l=e.canvas.height/2-i*h.length/2:"top"==s?l=5:"bottom"==s&&(l=e.canvas.height-i*h.length/2-i/5);for(var d=0;d<h.length;d++){var p=h[d];if(Array.isArray(n)){var f=d;f>n.length-1&&(f=n.length-1),e.fillStyle=n[f]}"center"==o?e.fillText(p,Math.round(e.canvas.width/2-e.measureText(p).width/2),Math.round(l+i*d)):"right"==o?e.fillText(p,Math.round(e.canvas.width-e.measureText(p).width-15),Math.round(l+i*d)):"left"==o?e.fillText(p,5,Math.round(l+i*d)):e.fillText(p,Math.round(a),Math.round(l+i*d))}return e.restore(),{x:a,y:l,height:i*h.length}},drawTextBitmap:function(e,t,n,r,o,s,a){if(null!=t&&null!=t||(this.preRenderedFont={},this.preRenderFont(i.Setting.CARS_TO_PRERENDER,2*i.Setting.FONT_SIZE,"white",i.Setting.FONT_FAMILY),t=this.preRenderedFont),a){var l=t.A;n=this.wrapTextLines(e,n,l.width*(r/l.height),r).text}for(var c=n.split("\n"),u=s,h=0;h<c.length;h++){for(var d=c[h],p=o,f=0;f<d.length;f++){var g,m=d.charAt(f),y=(g=null==t[m]||null==t[m]?t["?"]:t[m]).width*(r/g.height);this.drawImageData(e,g,p,u,y,r,0,0,g.width,g.height),p+=y}d.length>0&&(u+=r)}},wrapText:function(e,t){if(e.length>t){for(var n=t;n>0&&" "!=e[n];n--);if(n>0){var i=e.substring(0,n),r=e.substring(n+1);return i+"\n"+this.wrapText(r,t)}}return e},wrapTextLines:function(e,t,n,i,r){if(e&&t){e.save(),e.font=i+"px "+r;for(var o=t.split("\n"),s="",a=n||e.measureText("A").width,l=Math.round(e.canvas.width/a),c=0,u=0,h=0;h<o.length;h++){var d=this.wrapText(o[h],l);s+=d,h<o.length-1&&(s+="\n");for(var p=0;p<d.split("\n").length;p++){var f=e.measureText(d.split("\n")[p]).width;c+=parseFloat(i),f>u&&(u=f)}}return e.restore(),{text:s,height:c,width:u,carWidth:a}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(e,t,n,i,r){e.save(),e.lineCap="round",e.lineWidth=8,e.strokeStyle="#FF0000",e.filter="",e.beginPath();var o=i-t,s=r-n,a=Math.atan2(s,o);e.moveTo(t,n),e.lineTo(i,r),e.moveTo(i,r),e.lineTo(i-20*Math.cos(a-Math.PI/6),r-20*Math.sin(a-Math.PI/6)),e.moveTo(i,r),e.lineTo(i-20*Math.cos(a+Math.PI/6),r-20*Math.sin(a+Math.PI/6)),e.stroke(),e.restore()},clear:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},isFilterHueAvailable:function(){var e=document.createElement("canvas");e.width=5,e.height=5;var t=e.getContext("2d");t.fillStyle="#FF0000",t.filter="hue-rotate(90deg)",t.fillRect(0,0,5,5);var n=t.getImageData(0,0,1,1).data;return 255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(e,t){e.save(),e.filter="blur("+t+"px)",this.drawImageData(e,e.canvas,0,0,e.canvas.width,e.canvas.height),e.restore()},getFontSize:function(e){return Math.floor(parseInt(e.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(e,t,n){if(document.fullscreenElement)document.fullscreenElement==e?(e.width=window.innerWidth,e.height=window.innerHeight):(e.width=t,e.height=n);else if(t>=.85*document.documentElement.clientWidth){var i=t/n;e.width=.85*document.documentElement.clientWidth,e.height=e.width/i}else e.width=t,e.height=n},enableAutoResizeCanvas:function(e,t,n){var i=this;e&&"true"!=e.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(e,t,n),window.addEventListener("resize",(function(){e.setAttribute("autoresize-canvas-event","true"),i.autoResizeCanvas(e,t,n)})))},autoResizeCanvasFullscreen:function(e){document.fullscreenElement==e&&(e.width=window.innerWidth,e.height=window.innerHeight)},enableAutoResizeCanvasFullscreen:function(e){var t=this;e&&"true"!=e.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(e),window.addEventListener("resize",(function(){e.setAttribute("autoresizefullscreen-canvas-event","true"),t.autoResizeCanvasFullscreen(e)})))},toggleFullscreen:function(e){if(e){var t=e.width,n=e.height;if(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.oRequestFullscreen&&e.oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(e),"true"!=e.getAttribute("fullscreenchange-canvas-event")){e.setAttribute("fullscreenchange-canvas-event","true");var i=function(){document.fullscreenElement!=e&&(e.width=t,e.height=n)};void 0!==document.onfullscreenchange?document.onfullscreenchange=i:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=i:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=i:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=i:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=i)}}}};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t||0,this.y=n||0,this.initialX=t,this.initialY=n,this.width=i,this.height=r,this.triggersClick=[],this.triggersHover=[],this.triggersDown=[],this.initEvents=!1,this.selected=!1,this.clicked=!1,this.hovered=!1,this.init=!1}var t,n;return t=e,(n=[{key:"draw",value:function(e){var t=this,n=e.canvas,i=n.getContext("2d");this.initEvent||null==i||(i.canvas.addEventListener("mousemove",(function(e){t.disabled?(t.hovered=!1,t.clicked=!1):t.isInside(t.getMousePos(i.canvas,e))?(null==t.triggersHover||t.disabled||t.triggersHover.forEach((function(e){return e()})),t.hovered=!0):t.hovered=!1}),!1),i.canvas.addEventListener("click",(function(e){t.disabled?(t.hovered=!1,t.clicked=!1):t.isInside(t.getMousePos(n,e))?null!=t.triggersClick&&t.triggersClick.forEach((function(e){return e()})):t.clicked=!1}),!1),i.canvas.addEventListener("mousedown",(function(e){t.disabled?(t.hovered=!1,t.clicked=!1):t.isInside(t.getMousePos(n,e))?(null!=t.triggersDown&&t.triggersDown.forEach((function(e){return e()})),t.clicked=!0):t.clicked=!1}),!1),i.canvas.addEventListener("mouseup",(function(){t.clicked=!1}),!1)),this.initEvent=!0}},{key:"getMousePos",value:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}},{key:"isInside",value:function(e){return e.x>this.x&&e.x<this.x+this.width&&e.y<this.y+this.height&&e.y>this.y}},{key:"addClickAction",value:function(e){this.triggersClick.push(e)}},{key:"removeClickAction",value:function(e){this.triggersClick=this.triggersClick.filter((function(t){return t!=e}))}},{key:"removeAllClickActions",value:function(){this.triggersClick=[]}},{key:"addMouseOverAction",value:function(e){this.triggersHover.push(e)}},{key:"removeHoverAction",value:function(e){this.triggersHover=this.triggersHover.filter((function(t){return t!=e}))}},{key:"removeAllHoverActions",value:function(){this.triggersHover=[]}},{key:"addMouseDownAction",value:function(e){this.triggersDown.push(e)}},{key:"removeDownAction",value:function(e){this.triggersDown=this.triggersDown.filter((function(t){return t!=e}))}},{key:"removeAllDownActions",value:function(){this.triggersDown=[]}}])&&o(t.prototype,n),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function h(e){return function(){var t,n=f(e);if(p()){var i=f(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d(this,t)}}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}var m=function(e){g(s,e);var t,n,o=h(s);function s(e,t,n,r,a,c,u,h,d,p,f,g,m,y,v){var E;return l(this,s),(E=o.call(this,t,n,h,d)).autoWidth=null==E.width,E.autoHeight=null==E.height,E.text=e,E.fontSizeInitial=p,E.fontSize=E.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),E.fontFamily=f||i.Setting.FONT_FAMILY,E.fontColor=g||"white",E.color=a||"rgba(0, 0, 0, 0)",E.colorHover=c||"#95a5a6",E.colorDown=u||"#727F80",E.disabled=!1,E.alignement=r||"default",E.image,E.imgSrc=m,E.verticalAlignement=v||"default",E.imageLoader=y,E}return t=s,(n=[{key:"draw",value:function(e){u(f(s.prototype),"draw",this).call(this,e);var t=e.canvas,n=t.getContext("2d");n.save(),this.fontSize=this.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),n.font=this.fontSize+"px "+this.fontFamily;var o=r.wrapTextLines(n,this.text,null,this.fontSize,this.fontFamily),a=o.height,l=o.width;if(null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image){var c=this.image.width,h=this.image.height;this.autoWidth&&(this.width=1.25*c),this.autoHeight&&(this.height=1.5*h)}else null!=this.text&&(this.autoWidth&&(this.width=l+2*o.carWidth),this.autoHeight&&(this.height=a+this.fontSize/1.5));if("center"==this.alignement?this.x=t.width/2-this.width/2-this.initialX:"right"==this.alignement?this.x=t.width-this.width-5-this.initialX:"left"==this.alignement&&(this.x=5),"bottom"==this.verticalAlignement?this.y=t.height-this.height-5-this.initialY:"center"==this.verticalAlignement?this.y=t.height/2-this.height/2-this.initialY:"top"==this.verticalAlignement&&(this.y=15),this.hovered&&this.clicked?n.fillStyle=this.colorDown:this.hovered?n.fillStyle=this.colorHover:n.fillStyle=this.color,n.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.selected){var d=n.strokeStyle,p=n.lineWidth;n.strokeStyle="#a2cdd8",n.lineWidth=3,n.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),n.strokeStyle=d,n.lineWidth=p}if(null!=this.image){var g,m;if(this.image.width>this.width||this.image.height>this.height){var y=this.image.width/this.image.height;g=Math.floor(this.width/1.25),m=Math.floor(g/y)}var v=this.x+this.width/2-g/2,E=this.y+this.height/2-m/2;n.drawImage(this.image,Math.round(v),Math.round(E),Math.round(g),Math.round(m))}else if(null!=this.text){n.fillStyle=this.fontColor;var b=this.x+this.width/2-l/2,w=this.y+this.fontSize+this.fontSize/5;r.drawText(n,this.text,this.fontColor,this.fontSize,this.fontFamily,"center"==this.alignement?"center":"default","default",Math.round(b),Math.round(w),!0)}n.restore()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"loadImage",value:function(e){this.image=e.get(this.imgSrc)}}])&&c(t.prototype,n),s}(s),y=function(e){g(n,e);var t=h(n);function n(e,i,r,o,s,a,c,u,h,d){return l(this,n),t.call(this,null,i,r,o,u,h,null,a,c,null,null,null,e,d,s)}return n}(m);function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.images={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}var t,n;return t=e,(n=[{key:"load",value:function(e,t){var n=this;if(this.firstImage&&(this.nbImagesToLoad=e.length,this.firstImage=!1),!(e.length>0))return t();this.loadImage(e[0],(function(i){if(1!=i)return n.hasError=!0,t();e.shift(),n.load(e,t)}))}},{key:"loadImage",value:function(e,t){var n=this;this.triedLoading++;var i=new Image;i.src=e,i.onload=function(){return null==n.images?t(!1):(n.images[e]=i,n.triedLoading=0,t(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[e]=i),n.triedLoading=0,t(!1);setTimeout((function(){n.loadImage(e,t)}),250)}}},{key:"get",value:function(e){return null!=this.images?this.images[e]:null}},{key:"clear",value:function(){this.images=null}}])&&v(t.prototype,n),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function k(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(a,e);var t,n,o,s=(t=a,function(){var e,n=S(t);if(I()){var i=S(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return k(this,e)});function a(e,t,n,r,o,l,c,u,h,d){var p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(p=s.call(this,0,0,0,0)).text=e,p.textColor=null==t?"rgba(255, 255, 255, 0.75)":t,p.backgroundColor=null==n?"rgba(46, 204, 113, 0.5)":n,p.delayBeforeClosing=null==r?5:r,p.fontSizeInitial=l,p.fontSize=p.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),p.fontFamily=null==c?i.Setting.FONT_FAMILY:c,p.animationDelay=null==o?500:o,p.foreGround=null!=u&&u,p.timeLastFrame=0,p.animationTime=0,p.closed=!0,p.closing=!1,p.disableAnimation=null!=h&&h,p.closeButton=d,p}return n=a,(o=[{key:"draw",value:function(e,t){var n=this;if(null!=this.text){A(S(a.prototype),"draw",this).call(this,e);var o=e.canvas,s=o.getContext("2d");s.save(),this.init||(this.timeLastFrame=Date.now()),this.closeButton=null!=t?t:this.closeButton,null!=this.closeButton&&this.closeButton.addClickAction((function(){n.close()}));var l=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.fontSize=this.fontSizeInitial||i.Setting.FONT_SIZE;var c=r.wrapTextLines(s,this.text,null,this.fontSize,this.fontFamily).height+this.fontSize/2,u=o.width,h=1;if(this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=l:this.animationTime+=l,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed)this.disableCloseButton();else{this.disableAnimation||(h=this.animationTime/this.animationDelay);var d=o.height-c*(h<=1?h:1);s.fillStyle=this.backgroundColor,s.fillRect(0,d,u,c),r.drawText(s,this.text,this.textColor,this.fontSize,this.fontFamily,"center","default",null,d+this.fontSize,!0),null!=this.close&&null!=this.closeButton&&(this.closeButton.y=d+5),null!=this.closeButton&&this.closeButton.draw(s),this.disableCloseButton()}s.restore(),this.init=!0}}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof m&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof m&&this.closeButton.enable()}},{key:"copy",value:function(){return new a(this.text,this.textColor,this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.fontSize,this.fontFamily,this.foreGround)}}])&&w(n.prototype,o),a}(s);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function x(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,e);var t,n,o,s=(t=a,function(){var e,n=P(t);if(O()){var i=P(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return x(this,e)});function a(e,t,n,r,o,l,c,u,h){var d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(d=s.call(this,0,0,0,0)).buttons=e,d.text=t,d.colors=n||"#FFFFFF",d.fontSizeInitial=r,d.fontSize=d.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),d.fontFamily=o||i.Setting.FONT_FAMILY,d.alignement=l||"center",d.x=c||0,d.backgroundColor=null==u?"rgba(44, 62, 80, 0.75)":u,d.blurCanvas=null!=h&&h,d.disabled=!0,d.lastKey=null==d.lastKey?-1:d.lastKey,d.selectedButton=null==d.selectedButton?0:d.selectedButton,d}return n=a,(o=[{key:"draw",value:function(e){var t=this;_(P(a.prototype),"draw",this).call(this,e);var n=e.canvas.getContext("2d");if(!this.disabled){this.init||(document.addEventListener("keydown",(function(e){t.disabled||(t.lastKey=e.keyCode)})),this.init=!0),this.blurCanvas&&r.blurCanvas(n,5),n.save(),n.font=this.fontSize+"px "+this.fontFamily,n.fillStyle=this.backgroundColor,n.fillRect(0,0,n.canvas.width,n.canvas.height);var o=r.wrapTextLines(n,this.text,null,this.fontSize,this.fontFamily).height,s=0;if(null!=this.buttons){this.lastKey==i.Key.UP?this.selectedButton--:this.lastKey==i.Key.BOTTOM&&this.selectedButton++,this.selectedButton>=this.buttons.length?this.selectedButton=0:this.selectedButton<0&&(this.selectedButton=this.buttons.length-1);for(var l=0;l<this.buttons.length;l++)this.buttons[l].autoHeight?s+=r.wrapTextLines(n,this.buttons[l].text,null,this.fontSize,this.fontFamily).height+16:s+=this.buttons[l].height+5}var c=o+s,u=(n.canvas.height-c)/2+8,h=u+o;if(r.drawText(n,this.text,this.colors,this.fontSize,this.fontFamily,this.alignement,"default",this.x,u,!0),null!=this.buttons)for(var d=0;d<this.buttons.length;d++){if(this.buttons[d].y=h,this.selectedButton==d?this.buttons[d].selected=!0:this.buttons[d].selected=!1,this.buttons[d].enable(),this.buttons[d].draw(n),this.selectedButton==d&&this.lastKey==i.Key.ENTER&&null!=this.buttons[d].triggersClick&&this.buttons[d].triggersClick.length>0&&!this.buttons[d].disabled){this.lastKey=-1,this.selectedButton=0,this.buttons[d].triggersClick.forEach((function(e){return e()}));break}h+=this.buttons[d].height+8}n.restore()}this.lastKey=-1}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"set",value:function(e,t,n,i,r){this.buttons=e,this.text=t,this.colors=n,this.alignement=i||"center",this.x=r||0,this.enable()}}])&&C(n.prototype,o),a}(s);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function N(e,t,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=Y(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function U(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n,i){return(z="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var r,o=Y(e,t);if(o){if((r=Object.getOwnPropertyDescriptor(o,t)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,t,r)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,t,n);return!0})(e,t,n,i)}function Y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(a,e);var t,n,o,s=(t=a,function(){var e,n=j(t);if(G()){var i=j(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return U(this,e)});function a(e,t,n,r,o,l,c,u,h,d){var p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(p=s.call(this,e,t,n,r)).text=d||"",p.fontSizeInitial=o,p.fontSize=p.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),p.height=null==p.height?p.fontSize+p.fontSize/2:p.height,p.fontFamily=l||i.Setting.FONT_FAMILY,p.fontColor=h||"#000000",p.backgroundColor=c||"#ffffff",p.borderColor=u||"#000000",p.disabled=!1,p.input=document.createElement("input"),p.input.setAttribute("type","text"),p.input.style.position="absolute",p.input.style.left="-9999px",p.input.addEventListener("input",(function(){return p.text=p.input.value})),document.body.appendChild(p.input),function(e,t,n,i,r){if(!z(e,"triggerClick",n,i||e))throw new Error("failed to set property")}(j(a.prototype),0,p.click,H(p)),p}return n=a,(o=[{key:"draw",value:function(e){N(j(a.prototype),"draw",this).call(this,e);var t=e.canvas.getContext("2d");t.save(),t.fillStyle=this.backgroundColor,t.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),t.strokeStyle=this.borderColor,t.lineWidth=3,t.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),r.drawText(t,this.text,this.fontColor,this.fontSize,this.fontFamily,"default","default",this.x+5,this.y+this.fontSize,!1),t.restore()}},{key:"click",value:function(){this.input.focus()}}])&&F(n.prototype,o),a}(s)}])},function(e,t,n){var i=n(1),r=n(4),o=n(0),s=n(3),a=n(24),l=n(8),c=l.ImageLoader,u=l.Button,h=l.ButtonImage,d=l.NotificationMessage,p=l.Utils,f=l.Menu;function g(e,t,n,i,r,s,l,c){this.imageLoader,this.assetsLoaded=!1,this.controller=e,this.appendTo=t,this.displayFPS=null!=r&&r,this.outputType=null==s?o.OutputType.GRAPHICAL:s,this.disableAnimation=null!=l&&l,this.renderBlur=null!=c&&c,this.lastKey=-1,this.frame=0,this.lastFrame=0,this.offsetFrame=0,this.lastFrameTime=0,this.currentFPS=0,this.grid=null,this.snakes=null,this.speed=8,this.initialSpeed=8,this.ticks=0,this.countBeforePlay=-1,this.numFruit=0,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.enablePause=!1,this.enableRetry=!1,this.progressiveSpeed=!1,this.errorOccurred=!1,this.fullscreen=!1,this.onlineMode=!1,this.enableRetryPauseMenu=!0,this.searchingPlayers=!1,this.playerNumber=0,this.maxPlayers=0,this.timeStart=0,this.lastTime=0,this.currentPlayer=null,this.spectatorMode=null,this.onlineMaster=!1,this.menu=new f(null,"","white",null,null,"center",null,null,this.renderBlur),this.confirmReset=!1,this.confirmExit=!1,this.getInfos=!1,this.getInfosGame=!1,this.timeoutAutoRetry=null,this.gameRanking=new a,this.textarea,this.canvas,this.canvasCtx,this.canvasWidth=null==n?o.Setting.CANVAS_WIDTH:n,this.canvasHeight=null==i?o.Setting.CANVAS_HEIGHT:i,this.fontSize=o.Setting.FONT_SIZE,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT,this.timerToDisplay,this.bestScoreToDisplay,this.isFilterHueAvailable=p.isFilterHueAvailable(),this.intervalCountFPS,this.btnFullScreen,this.btnPause,this.btnContinue,this.btnRetry,this.btnQuit,this.btnYes,this.btnNo,this.btnOK,this.btnAbout,this.btnInfosGame,this.btnTopArrow,this.btnRightArrow,this.btnLeftArrow,this.btnBottomArrow,this.btnExitFullScreen,this.btnEnterFullScreen,this.btnStartGame,this.btnCloseNotification,this.btnRank,this.notificationMessage,this.init()}l.Constants.Setting.FONT_FAMILY="DELIUS",g.prototype.init=function(){var e=this;this.imageLoader=new c,this.outputType==o.OutputType.TEXT?(this.textarea=document.createElement("textarea"),this.appendTo.appendChild(this.textarea),this.assetsLoaded=!0):this.outputType==o.OutputType.GRAPHICAL&&(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvasCtx=this.canvas.getContext("2d"),this.appendTo.appendChild(this.canvas),this.btnFullScreen=new h("assets/images/fullscreen.png",null,5,"right",null,64,64),this.btnPause=new h("assets/images/pause.png",null,5,null,null,64,64),this.btnRank=new h("assets/images/ranking.png",null,5,null,null,64,64),this.btnContinue=new u(i.t("engine.continue"),null,null,"center","#3498db","#246A99","#184766"),this.btnRetry=new u(i.t("engine.reset"),null,null,"center","#3498db","#246A99","#184766"),this.btnQuit=new u(i.t("engine.exit"),null,null,"center","#3498db","#246A99","#184766"),this.btnYes=new u(i.t("engine.yes"),null,null,"center","#3498db","#246A99","#184766"),this.btnNo=new u(i.t("engine.no"),null,null,"center","#3498db","#246A99","#184766"),this.btnOK=new u(i.t("engine.ok"),null,null,"center","#3498db","#246A99","#184766"),this.btnAbout=new u(i.t("engine.about"),null,null,"center","#3498db","#246A99","#184766"),this.btnInfosGame=new u(i.t("engine.infosGame"),null,null,"center","#3498db","#246A99","#184766"),this.btnTopArrow=new h("assets/images/up.png",64,92,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnRightArrow=new h("assets/images/right.png",0,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnLeftArrow=new h("assets/images/left.png",128,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnBottomArrow=new h("assets/images/bottom.png",64,0,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnExitFullScreen=new u(i.t("engine.exitFullScreen"),null,null,"center","#3498db","#246A99","#184766"),this.btnEnterFullScreen=new u(i.t("engine.enterFullScreen"),null,null,"center","#3498db","#246A99","#184766"),this.btnStartGame=new u(i.t("engine.servers.startGame"),null,null,"center","#3498db","#246A99","#184766"),this.btnCloseNotification=new h("assets/images/close.png",null,5,"right",null,32,32,null,null,this.imageLoader),this.btnFullScreen.addClickAction((function(){e.toggleFullscreen(),e.pause()})),this.btnPause.addClickAction((function(){e.pause()})),this.btnRank.addClickAction((function(){e.gameRanking.closing||e.gameRanking.closed?e.gameRanking.open():e.gameRanking.close()})),this.btnTopArrow.addClickAction((function(){e.controller.key(o.Key.UP)})),this.btnBottomArrow.addClickAction((function(){e.controller.key(o.Key.BOTTOM)})),this.btnLeftArrow.addClickAction((function(){e.controller.key(o.Key.LEFT)})),this.btnRightArrow.addClickAction((function(){e.controller.key(o.Key.RIGHT)}))),this.setIntervalCountFPS(),document.addEventListener("keydown",(function(t){if(!e.killed){var n=t.keyCode;90!=n&&87!=n||(n=o.Key.UP),65!=n&&81!=n||(n=o.Key.LEFT),83==n&&(n=o.Key.BOTTOM),68==n&&(n=o.Key.RIGHT),e.paused?e.countBeforePlay<0&&(e.lastKeyMenu=n):n==o.Key.ENTER?e.pause():e.controller.key(n),t.preventDefault()}})),window.addEventListener("resize",(function(){e.autoResizeCanvas()}),!0),this.autoResizeCanvas(),this.loadAssets(),this.startDraw()},g.prototype.autoResizeCanvas=function(){this.outputType!=o.OutputType.GRAPHICAL||this.killed||p.autoResizeCanvas(this.canvas,this.canvasWidth,this.canvasHeight)},g.prototype.setIntervalCountFPS=function(){var e=this;this.clearIntervalCountFPS(),this.intervalCountFPS=window.setInterval((function(){e.countFPS()}),1e3)},g.prototype.countFPS=function(){this.lastFrame>0&&(this.currentFPS=this.frame-this.lastFrame),this.lastFrame=this.frame},g.prototype.clearIntervalCountFPS=function(){clearInterval(this.intervalCountFPS)},g.prototype.getNBPlayer=function(e){return this.controller.getNBPlayer(e)},g.prototype.getPlayer=function(e,t){return this.controller.getPlayer(e,t)},g.prototype.reset=function(){this.controller&&this.controller.reset()},g.prototype.start=function(){this.controller&&this.controller.start()},g.prototype.forceStart=function(){this.controller&&this.controller.forceStart()},g.prototype.stop=function(){this.controller&&this.controller.stop()},g.prototype.pause=function(){this.controller&&this.controller.pause()},g.prototype.kill=function(){this.controller&&this.controller.kill()},g.prototype.exit=function(){this.controller&&this.controller.exit()},g.prototype.tick=function(){this.controller&&this.controller.tick()},g.prototype.setKill=function(){this.killed=!0,this.clearIntervalCountFPS(),this.grid=null,this.snakes=null,null!=this.appendTo&&(this.outputType==o.OutputType.TEXT&&null!=this.textarea?(this.appendTo.removeChild(this.textarea),this.textarea=null):this.outputType==o.OutputType.GRAPHICAL&&null!=this.canvas&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.appendTo.removeChild(this.canvas),this.canvas=null,this.canvasCtx=null,this.imageLoader.clear()))},g.prototype.toggleFullscreen=function(){var e=this;if(this.outputType==o.OutputType.GRAPHICAL&&!this.killed){p.toggleFullscreen(this.canvas);var t=function(){e.outputType!=o.OutputType.GRAPHICAL||e.killed||(document.fullscreenElement==e.canvas?e.fullscreen=!0:e.fullscreen=!1,document.fullscreenElement==e.canvas&&void 0!==screen.orientation&&void 0!==screen.orientation.lock&&screen.orientation.lock("landscape").catch((function(){})))};void 0!==document.onfullscreenchange?document.onfullscreenchange=t:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=t:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=t:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=t:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=t),t()}},g.prototype.loadAssets=function(){var e=this;this.errorOccurred||this.outputType==o.OutputType.TEXT?this.errorOccurred||this.outputType!=o.OutputType.TEXT||(this.assetsLoaded=!0,this.start()):this.imageLoader.load(["assets/images/snake_4.png","assets/images/snake_3.png","assets/images/snake_2.png","assets/images/snake.png","assets/images/body_4_end.png","assets/images/body_3_end.png","assets/images/body_2_end.png","assets/images/body_end.png","assets/images/body_2.png","assets/images/body.png","assets/images/wall.png","assets/images/fruit.png","assets/images/body_angle_1.png","assets/images/body_angle_2.png","assets/images/body_angle_3.png","assets/images/body_angle_4.png","assets/images/pause.png","assets/images/fullscreen.png","assets/images/snake_dead_4.png","assets/images/snake_dead_3.png","assets/images/snake_dead_2.png","assets/images/snake_dead.png","assets/images/up.png","assets/images/left.png","assets/images/right.png","assets/images/bottom.png","assets/images/close.png","assets/images/trophy.png","assets/images/trophy_silver.png","assets/images/trophy_bronze.png","assets/images/clock.png","assets/images/fruit_gold.png","assets/images/ranking.png"],(function(){e.imageLoader.hasError?e.errorOccurred=!0:(e.assetsLoaded=!0,e.btnFullScreen.loadImage(e.imageLoader),e.btnPause.loadImage(e.imageLoader),e.btnRank.loadImage(e.imageLoader),e.btnTopArrow.loadImage(e.imageLoader),e.btnBottomArrow.loadImage(e.imageLoader),e.btnLeftArrow.loadImage(e.imageLoader),e.btnRightArrow.loadImage(e.imageLoader),e.start())}),this)},g.prototype.startDraw=function(){var e=this;requestAnimationFrame((function(){e.killed||(document.hasFocus()||e.paused||e.controller.pause(),e.draw(),e.lastTime=Date.now(),e.frame++,(!e.paused&&!e.onlineMode||e.onlineMode)&&(e.offsetFrame+=Date.now()-e.lastFrameTime,e.lastFrameTime=Date.now()),e.startDraw())}))},g.prototype.draw=function(){var e=this;if(this.outputType!=o.OutputType.TEXT||this.killed){if(this.outputType==o.OutputType.GRAPHICAL&&!this.killed){var t=this.canvasCtx,n=!1,a=this.getCurrentPlayer();if(this.fontSize=o.Setting.FONT_SIZE,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT,this.canvas.width<=o.Setting.CANVAS_WIDTH/1.25?(this.fontSize/=1.25,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT/1.25):this.canvas.width>=1.5*o.Setting.CANVAS_WIDTH&&(this.fontSize*=1.25,this.headerHeight=1.25*o.Setting.HEADER_HEIGHT_DEFAULT),this.btnPause.width=.85*this.headerHeight,this.btnPause.height=this.btnPause.width,this.btnPause.y=this.headerHeight/2-this.btnPause.height/2,this.btnFullScreen.width=.85*this.headerHeight,this.btnFullScreen.height=this.btnFullScreen.width,this.btnFullScreen.y=this.headerHeight/2-this.btnFullScreen.height/2,this.btnRank.width=.85*this.headerHeight,this.btnRank.height=this.btnRank.width,this.btnRank.y=this.headerHeight/2-this.btnRank.height/2,this.menu.fontSize=this.fontSize,this.menu.fontSizeInitial=this.fontSize,l.Constants.Setting.FONT_SIZE=this.fontSize,this.menu.disable(),p.clear(t),t.fillStyle="rgba(204, 207, 211, 1)",t.fillRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="#27AE60",t.fillRect(0,0,this.canvas.width,this.headerHeight),t.font=this.fontSize+"px "+o.Setting.FONT_FAMILY,t.fillStyle="black",this.btnFullScreen.draw(this.canvasCtx),this.enablePause?(this.btnPause.x=this.btnFullScreen.x-this.btnPause.width-10,this.btnPause.draw(this.canvasCtx),null!=this.snakes&&this.snakes.length>1&&(this.btnRank.x=this.btnPause.x-this.btnPause.width-10,this.btnRank.draw(this.canvasCtx))):null!=this.snakes&&this.snakes.length>1&&(this.btnRank.x=this.btnPause.x-this.btnFullScreen.width-10,this.btnRank.draw(this.canvasCtx)),(this.gameRanking.closing||this.gameRanking.closed)&&this.assetsLoaded?this.btnRank.color="rgba(0, 0, 0, 0)":this.assetsLoaded&&(this.btnRank.color=this.btnRank.colorHover),this.assetsLoaded&&!this.errorOccurred){if(null!=this.bestScoreToDisplay&&null!=this.bestScoreToDisplay&&(n=!0),p.drawImage(t,this.imageLoader.get("assets/images/fruit.png"),5,5,.85*this.headerHeight*(n?.5:1),.85*this.headerHeight*(n?.5:1)),null!=this.snakes&&this.snakes.length<=1?p.drawText(t,"Ã— "+this.snakes[0].score,"black",.43*this.headerHeight*(n?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(n?.58:1),.67*this.headerHeight*(n?.63:1)):p.drawText(t,i.t("engine.num")+(null!=this.numFruit?this.numFruit:"???"),"black",.43*this.headerHeight*(n?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(n?.58:1),.67*this.headerHeight*(n?.63:1)),n&&(p.drawImage(t,this.imageLoader.get("assets/images/trophy.png"),5,8+.425*this.headerHeight,.425*this.headerHeight,.425*this.headerHeight),p.drawText(t,this.bestScoreToDisplay,"black",.43*this.headerHeight*(n?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(n?.58:1),.425*this.headerHeight+.67*this.headerHeight*(n?.63:1))),null!=this.grid&&(!this.grid.maze||this.grid.maze&&(!this.paused||this.gameOver||this.gameFinished))){for(var c=Math.floor((this.canvas.height-this.headerHeight)/this.grid.height),u=Math.floor(this.canvas.width/this.grid.width),h=(u=u>(c=c>u?u:c)?c:u)*this.grid.width,f=0;f<this.grid.height;f++)for(var g=0;g<this.grid.width;g++){var m=Math.floor(g*u+(this.canvas.width-h)/2),y=this.headerHeight+f*c;t.fillStyle=f%2==0&&g%2==0||f%2==1&&g%2==1?"rgba(127, 140, 141, 0.75)":"rgba(44, 62, 80, 0.75)",t.fillRect(m,y,u,c),p.drawImage(t,this.imageLoader.get(this.grid.getImageCase(new s(g,f))),m,y,u,c)}this.drawSnake(t,u,c,h,a)}null!=this.timerToDisplay&&null!=this.timerToDisplay&&!isNaN(this.timerToDisplay)&&this.timerToDisplay>=0&&(p.drawImage(t,this.imageLoader.get("assets/images/clock.png"),.24*this.headerHeight,this.headerHeight+15,.64*this.headerHeight,.64*this.headerHeight),p.drawText(t,""+r.secondsFormat(this.timerToDisplay),"rgba(0, 0, 0, 0.5)",o.Setting.FONT_SIZE,o.Setting.FONT_FAMILY,"default","default",this.headerHeight,this.headerHeight+15+.475*this.headerHeight))}else if(!this.assetsLoaded){var v=Math.floor(100*Object.keys(this.imageLoader.images).length/this.imageLoader.nbImagesToLoad);this.menu.set([],i.t("engine.loading")+"\n"+v+"%","white")}null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof d&&!this.notificationMessage.foreGround&&this.notificationMessage.draw(this,this.btnCloseNotification),null!=this.snakes&&(this.getNBPlayer(o.PlayerType.HUMAN)>0||this.getNBPlayer(o.PlayerType.HYBRID_HUMAN_AI)>0)&&(this.getNBPlayer(o.PlayerType.HUMAN)<=1||this.getNBPlayer(o.PlayerType.HYBRID_HUMAN_AI)<=1||null!=this.currentPlayer)&&!this.spectatorMode&&(this.btnTopArrow.draw(this.canvasCtx),this.btnBottomArrow.draw(this.canvasCtx),this.btnRightArrow.draw(this.canvasCtx),this.btnLeftArrow.draw(this.canvasCtx)),null!=this.snakes&&this.snakes.length<=1&&this.gameRanking.forceClose(),this.gameFinished||this.gameOver||!this.assetsLoaded||(this.gameRanking.set(this.snakes,this.fontSize,this.headerHeight),this.gameRanking.draw(this.canvasCtx,this,a)),this.disableAllButtons(),this.searchingPlayers&&this.lastTime>0?this.timeStart-=Math.max(0,Date.now()-this.lastTime):this.timeStart=0;var E=this.timeStart>0?"\n\n"+i.t("engine.servers.nextGameStart")+" "+r.millisecondsFormat(this.timeStart):"";if(this.exited)this.menu.set(this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.exited"),"white"),this.btnExitFullScreen.addClickAction((function(){e.toggleFullscreen()}));else if(this.errorOccurred)this.menu.set([this.btnQuit],this.imageLoader.hasError?i.t("engine.errorLoading"):i.t("engine.error"),"#E74C3C"),this.btnQuit.addClickAction((function(){e.confirmExit=!1,e.selectedButton=0,e.exit()}));else if(this.getInfosGame)this.menu.set([this.btnOK],(null!=this.snakes&&this.snakes.length<=1&&!this.spectatorMode?i.t("engine.player")+" "+(null!=this.snakes&&this.snakes[0].player==o.PlayerType.HUMAN&&!this.spectatorMode||null!=this.snakes&&this.snakes[0].player==o.PlayerType.HYBRID_HUMAN_AI?i.t("engine.playerHuman"):i.t("engine.playerAI")):"")+(this.getNBPlayer(o.PlayerType.AI)>0?"\n"+i.t("engine.aiLevel")+" "+this.getPlayer(1,o.PlayerType.AI).getAILevelText():"")+"\n"+i.t("engine.sizeGrid")+" "+(null!=this.grid&&this.grid.width?this.grid.width:"???")+"Ã—"+(null!=this.grid&&this.grid.height?this.grid.height:"???")+"\n"+i.t("engine.currentSpeed")+" "+(null!=this.initialSpeed?this.initialSpeed:"???")+(null!=this.snakes&&this.snakes.length<=1&&this.progressiveSpeed?"\n"+i.t("engine.progressiveSpeed"):"")+(null==this.grid||this.grid.maze||null==this.snakes||this.snakes[0].player!=o.PlayerType.HYBRID_HUMAN_AI?"":"\n"+i.t("engine.assistAI"))+(null!=this.grid&&this.grid.maze?"\n"+i.t("engine.mazeModeMin"):"")+(this.onlineMode?"\n"+i.t("engine.onlineMode"):""),"white"),this.btnOK.addClickAction((function(){e.getInfosGame=!1,e.selectedButton=0}));else if(this.getInfos)this.menu.set([this.btnInfosGame,this.btnOK],i.t("engine.aboutScreen.title")+"\nwww.eliastiksofts.com\n\n"+i.t("engine.aboutScreen.versionAndDate",{version:o.Setting.APP_VERSION,date:new Intl.DateTimeFormat(i.language).format(new Date(o.Setting.DATE_VERSION)),interpolation:{escapeValue:!1}}),"white"),this.btnInfosGame.addClickAction((function(){e.getInfosGame=!0,e.selectedButton=0})),this.btnOK.addClickAction((function(){e.getInfos=!1,e.selectedButton=0}));else if(this.confirmExit)this.menu.set([this.btnNo,this.btnYes],i.t("engine.exitConfirm"),"#E74C3C"),this.btnYes.addClickAction((function(){e.confirmExit=!1,e.selectedButton=0,e.exit()})),this.btnNo.addClickAction((function(){e.confirmExit=!1,e.selectedButton=0}));else if(this.assetsLoaded&&this.countBeforePlay>=0)if(null!=this.snakes&&(this.snakes.length>1&&this.getNBPlayer(o.PlayerType.HUMAN)<=1&&null!=this.getPlayer(1,o.PlayerType.HUMAN)||this.snakes.length>1&&this.getNBPlayer(o.PlayerType.HYBRID_HUMAN_AI)<=1&&null!=this.getPlayer(1,o.PlayerType.HYBRID_HUMAN_AI)||null!=this.currentPlayer)){if(null!=this.currentPlayer)var b=this.getPlayer(this.currentPlayer,o.PlayerType.HUMAN);else if(null!=this.getPlayer(1,o.PlayerType.HUMAN))b=this.getPlayer(1,o.PlayerType.HUMAN);else b=this.getPlayer(1,o.PlayerType.HYBRID_HUMAN_AI);if(null!=b)var w=r.hslToName(r.addHue(o.Setting.IMAGE_SNAKE_HUE,b.color),o.Setting.IMAGE_SNAKE_SATURATION,o.Setting.IMAGE_SNAKE_VALUE),A=r.hsvToRgb(r.addHue(o.Setting.IMAGE_SNAKE_HUE,b.color)/360,o.Setting.IMAGE_SNAKE_SATURATION/100,o.Setting.IMAGE_SNAKE_VALUE/100);this.countBeforePlay>0?(this.menu.set(this.fullscreen?[]:[this.btnEnterFullScreen],this.countBeforePlay+(null!=b?"\n"+(this.isFilterHueAvailable&&"???"!=w?i.t("engine.colorPlayer",{color:w}):i.t("engine.arrowPlayer")):""),this.isFilterHueAvailable&&"???"!=w?["white","rgb("+A[0]+", "+A[1]+", "+A[2]+")"]:["white","#3498db"]),this.btnEnterFullScreen.addClickAction((function(){e.toggleFullscreen()}))):(this.menu.set(this.fullscreen?[]:[this.btnEnterFullScreen],i.t("engine.ready")+(null!=b?"\n"+(this.isFilterHueAvailable&&"???"!=w?i.t("engine.colorPlayer",{color:w}):i.t("engine.arrowPlayer")):""),this.isFilterHueAvailable&&"???"!=w?["white","rgb("+A[0]+", "+A[1]+", "+A[2]+")"]:["white","#3498db"]),this.btnEnterFullScreen.addClickAction((function(){e.toggleFullscreen()})))}else this.countBeforePlay>0?(this.menu.set(this.fullscreen?[]:[this.btnEnterFullScreen],""+this.countBeforePlay,"white"),this.btnEnterFullScreen.addClickAction((function(){e.toggleFullscreen()}))):(this.menu.set(this.fullscreen?[]:[this.btnEnterFullScreen],i.t("engine.ready"),"white"),this.btnEnterFullScreen.addClickAction((function(){e.toggleFullscreen()})));else if(this.confirmReset&&!this.gameOver)this.menu.set([this.btnNo,this.btnYes],i.t("engine.resetConfirm"),"#E74C3C"),this.btnYes.addClickAction((function(){e.confirmReset=!1,e.selectedButton=0,e.reset()})),this.btnNo.addClickAction((function(){e.confirmReset=!1,e.selectedButton=0}));else if(this.gameFinished)this.menu.set(this.enableRetry?[this.btnRetry,this.btnQuit]:[this.btnQuit],this.grid.maze&&this.gameMazeWin?i.t("engine.mazeWin"):i.t("engine.gameFinished")+E,this.grid.maze&&this.gameMazeWin?"#2ecc71":"white"),this.btnRetry.addClickAction((function(){e.selectedButton=0,e.reset()})),this.btnQuit.addClickAction((function(){e.confirmExit=!0,e.selectedButton=0}));else if(this.scoreMax&&this.snakes.length<=1)this.menu.set(this.enableRetry?[this.btnRetry,this.btnQuit]:this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.scoreMax")+E,"#2ecc71"),this.btnRetry.addClickAction((function(){e.selectedButton=0,e.reset()})),this.btnQuit.addClickAction((function(){e.confirmExit=!0,e.selectedButton=0})),this.btnExitFullScreen.addClickAction((function(){e.toggleFullscreen()}));else if(this.gameOver&&this.snakes.length<=1)this.menu.set(this.enableRetry&&!this.snakes[0].autoRetry?[this.btnRetry,this.btnQuit]:this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.gameOver")+E,"#E74C3C"),this.snakes[0].autoRetry&&null==this.timeoutAutoRetry?this.timeoutAutoRetry=setTimeout((function(){e.selectedButton=0,e.reset(),e.timeoutAutoRetry=null}),500):(this.btnRetry.addClickAction((function(){e.selectedButton=0,e.reset()})),this.btnQuit.addClickAction((function(){e.confirmExit=!0,e.selectedButton=0})),this.btnExitFullScreen.addClickAction((function(){e.toggleFullscreen()})));else if(this.assetsLoaded&&this.searchingPlayers)this.menu.set(this.onlineMaster?[this.btnStartGame,this.btnQuit]:[this.btnQuit],i.t("engine.servers.waitingPlayers")+"\n"+this.playerNumber+"/"+this.maxPlayers+(this.timeStart>0?"\n\n"+i.t("engine.servers.gameStart")+" "+r.millisecondsFormat(this.timeStart):""),"white"),this.btnQuit.addClickAction((function(){e.confirmExit=!0})),this.btnStartGame.addClickAction((function(){e.forceStart()}));else if(this.paused&&!this.gameOver&&this.assetsLoaded)this.menu.set(this.enablePause?this.enableRetry&&this.enableRetryPauseMenu?[this.btnContinue,this.btnRetry,this.btnAbout,this.btnQuit]:[this.btnContinue,this.btnAbout,this.btnQuit]:[this.btnContinue,this.btnAbout],i.t("engine.pause"),"white"),this.btnContinue.addClickAction((function(){e.selectedButton=0,e.start()})),this.btnRetry.addClickAction((function(){e.confirmReset=!0,e.selectedButton=0})),this.btnQuit.addClickAction((function(){e.confirmExit=!0,e.selectedButton=0})),this.btnAbout.addClickAction((function(){e.getInfos=!0,e.selectedButton=0}));else if(this.assetsLoaded){if(this.btnFullScreen.enable(),null!=this.snakes)for(f=0;f<this.snakes.length;f++)if(this.snakes[f].player==o.PlayerType.HUMAN||this.snakes[f].player==o.PlayerType.HYBRID_HUMAN_AI){this.btnTopArrow.enable(),this.btnBottomArrow.enable(),this.btnLeftArrow.enable(),this.btnRightArrow.enable();break}this.enablePause&&this.btnPause.enable(),null!=this.snakes&&this.snakes.length>1&&this.btnRank.enable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof d&&!this.notificationMessage.foreGround&&this.notificationMessage.enableCloseButton()}this.menu.draw(this.canvasCtx),(this.gameFinished||this.gameOver)&&null!=this.snakes&&this.snakes.length>1&&(this.gameRanking.open(),this.gameRanking.draw(this.canvasCtx,this,a)),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof d&&this.notificationMessage.foreGround&&(this.notificationMessage.draw(this.canvasCtx,this.btnCloseNotification),this.notificationMessage.enableCloseButton()),this.displayFPS&&p.drawText(t,this.getDebugText(),"rgba(255, 255, 255, 0.5)",this.fontSize/1.5,o.Setting.FONT_FAMILY,"right","bottom",null,null,!0),this.spectatorMode&&p.drawText(t,i.t("engine.servers.spectatorMode"),"rgba(255, 255, 255, 0.5)",this.fontSize,o.Setting.FONT_FAMILY,"left","bottom",null,null,!0)}}else null!=this.grid&&(this.textarea.style.width=16.5*this.grid.width+"px",this.textarea.style.height=16*this.grid.height+100+"px"),this.textarea.innerHTML=this.toString()},g.prototype.setDisplayFPS=function(e){this.displayFPS=e},g.prototype.disableAllButtons=function(){this.outputType==o.OutputType.GRAPHICAL&&(this.btnContinue.disable(),this.btnRetry.disable(),this.btnQuit.disable(),this.btnYes.disable(),this.btnNo.disable(),this.btnOK.disable(),this.btnOK.disable(),this.btnAbout.disable(),this.btnInfosGame.disable(),this.btnFullScreen.disable(),this.btnPause.disable(),this.btnRank.disable(),this.btnExitFullScreen.disable(),this.btnEnterFullScreen.disable(),this.btnStartGame.disable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof d&&this.notificationMessage.disableCloseButton(),this.btnTopArrow.disable(),this.btnBottomArrow.disable(),this.btnRightArrow.disable(),this.btnLeftArrow.disable())},g.prototype.setNotification=function(e){null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof d&&this.notificationMessage.close(),this.notificationMessage=e,this.notificationMessage instanceof d&&this.disableAnimation&&(this.notificationMessage.disableAnimation=!0),this.notificationMessage&&this.notificationMessage.open()},g.prototype.setTimeToDisplay=function(e){this.timerToDisplay=e},g.prototype.setBestScore=function(e){null!=e&&null!=e&&""!=e.trim()&&(this.bestScoreToDisplay=e)},g.prototype.getDebugText=function(){return i.t("engine.debug.fps")+" : "+this.currentFPS+" / "+i.t("engine.debug.frames")+" : "+this.frame+" / "+i.t("engine.debug.ticks")+" : "+this.ticks+" / "+i.t("engine.debug.speed")+" : "+this.speed},g.prototype.toString=function(){return(null!=this.grid?this.grid.toString():"")+"\n"+(null!=this.snakes&&this.snakes.length<=1?i.t("engine.score")+" : "+(null!=this.snakes?this.snakes[0].score:""):"")+(this.displayFPS?"\n"+this.getDebugText():"")+(this.gameOver&&!this.scoreMax?"\n"+i.t("engine.gameOver"):"")+(this.scoreMax?"\n"+i.t("engine.scoreMax"):"")+(!this.gameOver&&this.paused?"\n"+i.t("engine.debug.paused"):"")+(this.countBeforePlay>0?"\n"+this.countBeforePlay:"")},g.prototype.getCurrentPlayer=function(){if(null!=this.snakes)for(var e=this.getNBPlayer(o.PlayerType.HUMAN),t=this.getNBPlayer(o.PlayerType.HYBRID_HUMAN_AI),n=0;n<this.snakes.length;n++)if(null==this.currentPlayer&&e<=1&&t<=1&&(this.snakes[n].player==o.PlayerType.HUMAN||this.snakes[n].player==o.PlayerType.HYBRID_HUMAN_AI)||this.currentPlayer==n+1)return n;return-1},g.prototype.drawSnake=function(e,t,n,i,r){var s=document.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height;var a=s.getContext("2d");if(null!=this.snakes){for(var l=0;l<this.snakes.length;l++){a.clearRect(0,0,s.width,s.height),null!=this.snakes[l].color&&(a.filter="hue-rotate("+this.snakes[l].color+"deg)");for(var c=this.snakes[l].length()-1;c>=-1&&this.snakes[l].length()>1||c>=0;c--){if(-1==c)var u=this.snakes[l].get(this.snakes[l].length()-1);else u=this.snakes[l].get(c);var h=0,d=0,f=u.direction,g=0,m="",y=!0;if(f=0==c?this.snakes[l].getHeadPosition().direction:-1==c?this.disableAnimation||this.snakes[l].gameOver||this.snakes[l].scoreMax||this.gameFinished||!this.snakes[l].lastTailMoved?this.snakes[l].get(this.snakes[l].length()-2).direction:this.snakes[l].getTailPosition().direction:this.snakes[l].getGraphicDirection(c),!this.disableAnimation&&(0==c||-1==c&&this.snakes[l].lastTailMoved)&&!this.snakes[l].gameOver&&!this.snakes[l].scoreMax&&!this.gameFinished){var v,E=t*(v=(v=this.offsetFrame/(this.speed*o.Setting.TIME_MULTIPLIER))>1?1:v)-t,b=n*v-n,w=u;if(0==c)if(this.snakes[l].length()>1)var A=this.snakes[l].getGraphicDirection(1);else A=this.snakes[l].getGraphicDirection(0);else if(-1==c)A=this.snakes[l].getGraphicDirectionFor(this.snakes[l].getTailPosition(),this.snakes[l].lastTail,this.snakes[l].get(this.snakes[l].length()-2));switch(-1==c&&this.snakes[l].length()>1&&(w=this.snakes[l].get(this.snakes[l].length()-1)),0!=c&&-1!=c||A!=o.Direction.ANGLE_1&&A!=o.Direction.ANGLE_2&&A!=o.Direction.ANGLE_3&&A!=o.Direction.ANGLE_4||(0==c&&(g=-90),0==c?g+=-128.073*Math.pow(v,2)+222.332*v-5.47066:-1==c&&(g+=126.896*Math.pow(v,2)+-33.6471*v+1.65942),(0==c&&(A==o.Direction.ANGLE_4&&f==o.Direction.UP||A==o.Direction.ANGLE_1&&f==o.Direction.LEFT||A==o.Direction.ANGLE_2&&f==o.Direction.BOTTOM||A==o.Direction.ANGLE_3&&f==o.Direction.RIGHT)||-1==c&&(A==o.Direction.ANGLE_4&&f==o.Direction.RIGHT||A==o.Direction.ANGLE_3&&f==o.Direction.BOTTOM||A==o.Direction.ANGLE_1&&f==o.Direction.UP||A==o.Direction.ANGLE_2&&f==o.Direction.LEFT))&&(g=-g),y=!1),w.direction){case o.Direction.UP:d-=b;break;case o.Direction.BOTTOM:d+=b;break;case o.Direction.RIGHT:h+=E;break;case o.Direction.LEFT:h-=E}}c==this.snakes[l].length()-1&&(f=this.snakes[l].getGraphicDirectionFor(u,this.snakes[l].get(c-1),this.snakes[l].lastTail));var k=u.x,I=u.y;if(h+=Math.floor(k*t+(this.canvas.width-i)/2),d+=this.headerHeight+I*n,0==c)if(this.snakes[l].gameOver&&!this.snakes[l].scoreMax)switch(f){case o.Direction.BOTTOM:m="assets/images/snake_dead.png";break;case o.Direction.RIGHT:m="assets/images/snake_dead_2.png";break;case o.Direction.UP:m="assets/images/snake_dead_3.png";break;case o.Direction.LEFT:m="assets/images/snake_dead_4.png"}else switch(f){case o.Direction.BOTTOM:m="assets/images/snake.png";break;case o.Direction.RIGHT:m="assets/images/snake_2.png";break;case o.Direction.UP:m="assets/images/snake_3.png";break;case o.Direction.LEFT:m="assets/images/snake_4.png"}else if(-1==c)switch(f){case o.Direction.BOTTOM:m="assets/images/body_end.png";break;case o.Direction.RIGHT:m="assets/images/body_2_end.png";break;case o.Direction.UP:m="assets/images/body_3_end.png";break;case o.Direction.LEFT:m="assets/images/body_4_end.png"}else switch(f){case o.Direction.UP:case o.Direction.BOTTOM:m="assets/images/body.png";break;case o.Direction.RIGHT:case o.Direction.LEFT:m="assets/images/body_2.png";break;case o.Direction.ANGLE_1:m="assets/images/body_angle_1.png";break;case o.Direction.ANGLE_2:m="assets/images/body_angle_2.png";break;case o.Direction.ANGLE_3:m="assets/images/body_angle_3.png";break;case o.Direction.ANGLE_4:m="assets/images/body_angle_4.png"}p.drawImage(a,this.imageLoader.get(m),h,d,t,n,null,null,null,null,y,g)}p.drawImageData(e,s,Math.floor((this.canvas.width-i)/2),this.headerHeight,i,n*this.grid.height,Math.floor((this.canvas.width-i)/2),this.headerHeight,i,n*this.grid.height),a.filter="none"}this.snakes.length>1&&this.drawSnakeInfos(e,i,t,n,r)}},g.prototype.drawSnakeInfos=function(e,t,n,r,s){for(var a=0,l=0,c=0;c<this.snakes.length;c++){this.snakes[c].player==o.PlayerType.HUMAN||this.snakes[c].player==o.PlayerType.HYBRID_HUMAN_AI?a++:l++;var u=this.snakes[c].get(0);if(null!=u){var h=u.x,d=u.y,f=Math.floor(h*n+(this.canvas.width-t)/2),g=this.headerHeight+d*r;if(!this.disableAnimation&&!this.snakes[c].gameOver){var m,y=n*(m=(m=this.offsetFrame/(this.speed*o.Setting.TIME_MULTIPLIER))>1?1:m)-n,v=r*m-r;switch(u.direction){case o.Direction.UP:g-=v;break;case o.Direction.BOTTOM:g+=v;break;case o.Direction.RIGHT:f+=y;break;case o.Direction.LEFT:f-=y}}p.drawText(e,(this.snakes[c].player==o.PlayerType.HUMAN||this.snakes[c].player==o.PlayerType.HYBRID_HUMAN_AI?i.t("engine.playerMin")+a:i.t("engine.aiMin")+l)+"\nÃ— "+this.snakes[c].score,"rgb(255, 255, 255)",Math.round(r/2),o.Setting.FONT_FAMILY,null,null,f,g-Math.round(r/1.75),!1,!0),s==c&&this.countBeforePlay>=0&&(null!=s||this.isFilterHueAvailable&&this.snakes.length>2||!this.isFilterHueAvailable&&this.snakes.length>1)&&p.drawArrow(e,f+n/2,g-2*r,f+n/2,g-5)}}},e.exports=g},function(e,t,n){var i=n(7);function r(e){this.games=null==e?[]:e,this.reactor=new i,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onScoreIncreased"),this.init()}r.prototype.init=function(){for(var e=this,t=0;t<this.games.length;t++)0==t&&(e.games[t].enableKeyMenu=!0),this.games[t].onPause(function(t){return function(){e.pauseAll(t)}}(t)),this.games[t].onContinue(function(t){return function(){e.startAll(t)}}(t)),this.games[t].onExit(function(t){return function(){e.checkExit(t)}}(t)),this.games[t].onStop(function(t){return function(){e.checkStop(t)}}(t)),this.games[t].onReset(function(t){return function(){e.resetAll(t)}}(t)),this.games[t].onScoreIncreased(function(t){return function(){e.checkOnScoreIncreased(t)}}(t))},r.prototype.start=function(){this.startAll(null)},r.prototype.startAll=function(e){for(var t=0;t<this.games.length;t++)!this.games[t].paused||this.games[t].starting||null!=e&&t==e||this.games[t].start();this.reactor.dispatchEvent("onStart")},r.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},r.prototype.pauseAll=function(e){for(var t=0;t<this.games.length;t++)this.games[t].paused||null!=e&&t==e||this.games[t].pause();this.reactor.dispatchEvent("onPause")},r.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},r.prototype.resetAll=function(e){for(var t=0;t<this.games.length;t++)this.games[t].isReseted||null!=e&&t==e||this.games[t].reset();this.reactor.dispatchEvent("onReset")},r.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},r.prototype.checkExit=function(e){allExited=!0;for(var t=0;t<this.games.length;t++)this.games[t].exited||(allExited=!1);allExited?this.reactor.dispatchEvent("onExit"):this.startAll(e)},r.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},r.prototype.checkStop=function(){allStopped=!0;for(var e=0;e<this.games.length;e++)this.games[e].gameOver||(allStopped=!1);allStopped&&this.reactor.dispatchEvent("onStop")},r.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},r.prototype.stopAll=function(e){for(var t=0;t<this.games.length;t++)e?this.games[t].finish(!0):this.games[t].stop()},r.prototype.killAll=function(){for(var e=0;e<this.games.length;e++)this.games[e].kill()},r.prototype.checkOnScoreIncreased=function(){this.reactor.dispatchEvent("onScoreIncreased")},r.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},r.prototype.setDisplayFPS=function(e){for(var t=0;t<this.games.length;t++)this.games[t].setDisplayFPS(e)},r.prototype.setNotification=function(e){for(var t=0;t<this.games.length;t++)this.games[t].setNotification(e.copy())},r.prototype.closeNotification=function(){for(var e=0;e<this.games.length;e++)this.games[e].setNotification(null)},r.prototype.errorOccurred=function(){for(var e=0;e<this.games.length;e++)if(this.games[e].errorOccurred)return!0;return!1},r.prototype.closeRanking=function(){for(var e=0;e<this.games.length;e++)this.games[e].closeRanking();return!1},r.prototype.getWinners=function(){winners=[],index=[],maxScore=-1;for(var e=0;e<this.games.length;e++)for(var t=0;t<this.games[e].snakes.length;t++)this.games[e].snakes[t].score>maxScore&&(maxScore=this.games[e].snakes[t].score);if(maxScore>=0){var n=0;for(e=0;e<this.games.length;e++)for(t=0;t<this.games[e].snakes.length;t++)this.games[e].snakes[t].score>=maxScore&&(winners.push(this.games[e].snakes[t]),index.push(n)),n++}return{winners:winners,score:maxScore,index:index}},e.exports=r},function(e,t,n){var i=n(0),r=n(6),o=n(13),s=n(9),a=n(15);"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame),"undefined"!=typeof document&&void 0===document.fullscreenElement&&Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.oFullscreenElement}}),"undefined"!=typeof document&&(document.exitFullscreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),"undefined"!=typeof screen&&(screen.orientation=screen.msOrientation||screen.mozOrientation||screen.orientation),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),PLAYER_AI=i.PlayerType.AI,PLAYER_HUMAN=i.PlayerType.HUMAN,PLAYER_HYBRID_HUMAN_AI=i.PlayerType.HYBRID_HUMAN_AI,AI_LEVEL_RANDOM=i.AiLevel.RANDOM,AI_LEVEL_LOW=i.AiLevel.LOW,AI_LEVEL_DEFAULT=i.AiLevel.DEFAULT,AI_LEVEL_HIGH=i.AiLevel.HIGH,AI_LEVEL_ULTRA=i.AiLevel.ULTRA,UP=i.Direction.UP,RIGHT=i.Direction.RIGHT,BOTTOM=i.Direction.BOTTOM,LEFT=i.Direction.LEFT,ANGLE_1=i.Direction.ANGLE_1,ANGLE_2=i.Direction.ANGLE_2,ANGLE_3=i.Direction.ANGLE_3,ANGLE_4=i.Direction.ANGLE_4,APP_VERSION=i.Setting.APP_VERSION,DATE_VERSION=i.Setting.DATE_VERSION,e.exports=function(e,t,n,i,l,c,u,h,d,p,f,g){var m,y=new a(e,t,n,l,c,u);y.init();try{if(!window.Worker)throw"Worker not supported";new Worker("src/gameEngineWorker.js").terminate(),m=new o(y)}catch(e){m=new r(y)}return m.gameUI=new s(m,i,h,d,p,f,g),m.init(),m}},function(e,t,n){function i(e){this.name=e,this.callbacks=[]}i.prototype.registerCallback=function(e){this.callbacks.push(e)},e.exports=i},function(e,t,n){var i=n(6),r=n(2),o=n(5),s=n(3);function a(e,t){i.call(this,e,t),this.worker,this.init=function(){if(window.Worker){try{this.worker=new Worker("src/gameEngineWorker.js")}catch(e){return void this.update("init",{errorOccurred:!0})}if(this.worker instanceof Worker){this.worker.postMessage(["init",e]);var t=this;this.worker.onmessage=function(e){var n=e.data;if(n.length>1){var i=t.gameUI.grid;if(n[1].hasOwnProperty("grid")&&null!=n[1].grid&&(i=Object.assign(new r,n[1].grid),n[1].grid=i),n[1].hasOwnProperty("snakes")&&null!=n[1].snakes)for(var a=0;a<n[1].snakes.length;a++){n[1].snakes[a].grid=i,n[1].snakes[a]=Object.assign(new o,n[1].snakes[a]);for(var l=0;l<n[1].snakes[a].queue.length;l++)n[1].snakes[a].queue[l]=Object.assign(new s,n[1].snakes[a].queue[l])}switch(t.update(n[0],n[1]),n[0]){case"reset":t.reactor.dispatchEvent("onReset");break;case"start":t.reactor.dispatchEvent("onStart");break;case"pause":t.reactor.dispatchEvent("onPause");break;case"continue":t.reactor.dispatchEvent("onContinue");break;case"stop":t.reactor.dispatchEvent("onStop");break;case"exit":t.reactor.dispatchEvent("onExit");break;case"kill":t.reactor.dispatchEvent("onKill"),t.worker.terminate();break;case"scoreIncreased":t.reactor.dispatchEvent("onScoreIncreased");break;case"update":t.reactor.dispatchEvent("onUpdate");break;case"updateCounter":t.reactor.dispatchEvent("onUpdateCounter")}}}}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})},this.reset=function(){this.worker instanceof Worker&&this.worker.postMessage(["reset"])},this.start=function(){this.worker instanceof Worker&&this.worker.postMessage(["start"])},this.stop=function(){this.worker instanceof Worker&&this.worker.postMessage(["stop"])},this.finish=function(e){this.worker instanceof Worker&&this.worker.postMessage([e?"finish":"stop"])},this.pause=function(){this.worker instanceof Worker&&this.worker.postMessage(["pause"])},this.kill=function(){this.worker instanceof Worker&&this.worker.postMessage(["kill"])},this.tick=function(){this.worker instanceof Worker&&this.worker.postMessage(["tick"])},this.exit=function(){this.worker instanceof Worker&&this.worker.postMessage(["exit"])},this.key=function(e){this.worker instanceof Worker&&this.worker.postMessage(["key",e])},this.forceStart=function(){this.worker instanceof Worker&&this.worker.postMessage(["forceStart"])}}a.prototype=Object.create(i).prototype,a.prototype.constructor=a,e.exports=a},function(module,exports,__webpack_require__){!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let n=0;n<e.length;n++){if(void 0!==e[n].graph.get(this)._connectivity)continue;let i=[e[n]];for(t++;i.length;){let e=i.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map(e=>{void 0===e.graph.get(this)._connectivity&&0>i.indexOf(e)&&i.push(e)})}}}add(e){return 1<arguments.length?Array.from(arguments).map(e=>this.add(e)):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map(e=>this.delete(e)):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,n=1,i=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===n?e.graph.get(this).delete(t):e.graph.get(this).set(t,n),null===i?t.graph.get(this).delete(e):t.graph.get(this).set(e,i),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,n={}){let i=e.fromArray.X(t,n.order),r=e.fromArray.Y(t,n.order),o=e.fromArray.at.bind(null,t,n.order),s=[],a=null;for(let t,l=1;l<Math.max(2,arguments.length);l++){t=new e,s.push(t),n=arguments[l]||{};let c=e.fromArray.id.bind(null,i,r,n.torus),u=n.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,u);for(let e=0;e<i;e++)for(let n,i=0;i<r;i++)n=t.add(a?a.get(c(e,i)):new f(c(e,i))),n.x=e,n.y=i,n.graph.get(t)._data=o(e,i),h(n,t.nodes.get(c(e-1,i))),h(n,t.nodes.get(c(e+1,i))),h(n,t.nodes.get(c(e,i-1))),h(n,t.nodes.get(c(e,i+1)));if(n.diagonals)for(let e=0;e<i;e++)for(let i=0;i<r;i++){let r=t.nodes.get(c(e,i)),o=t.adjacent(r,t.nodes.get(c(e-1,i))),s=t.adjacent(r,t.nodes.get(c(e+1,i))),a=t.adjacent(r,t.nodes.get(c(e,i-1))),l=t.adjacent(r,t.nodes.get(c(e,i+1)));"strict"===n.cutting?(o&&a&&h(r,t.nodes.get(c(e-1,i-1))),o&&l&&h(r,t.nodes.get(c(e-1,i+1))),s&&a&&h(r,t.nodes.get(c(e+1,i-1))),s&&l&&h(r,t.nodes.get(c(e+1,i+1)))):((o||a||n.cutting)&&h(r,t.nodes.get(c(e-1,i-1))),(o||l||n.cutting)&&h(r,t.nodes.get(c(e-1,i+1))),(s||a||n.cutting)&&h(r,t.nodes.get(c(e+1,i-1))),(s||l||n.cutting)&&h(r,t.nodes.get(c(e+1,i+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>c(e.x,e.y)}),t.connect(),t.X=i,t.Y=r,t.TORUS=n.torus,a||(a=t.nodes)}return 1<s.length?s:s[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",n,i){return"xy"===t?e[n][i]:e[i][n]},e.fromArray.id=function(e=0,t=0,n=!1,i,r){return n?(r+t)%t*e+(i+e)%e:0<=i&&i<e&&0<=r&&r<t?r*e+i:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,n,i){i&&e.edge(n,i,t(e.data(n),e.data(i)),t(e.data(i),e.data(n)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let n in this.id=e,this.graph=new Map,t)"id"!=n&&"graph"!=n&&(this[n]=t[n])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let n=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=n,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],n=this.score(t);for(;0<e;){let i=Math.floor((e+1)/2)-1,r=this.nodes[i];if(n>=this.score(r))break;this.nodes[i]=t,this.nodes[e]=r,e=i}return this}sink(e){let t=this.nodes[e],n=this.score(t);for(;;){let i=2*(e+1),r=i-1,o=null;if(r<this.size&&this.score(this.nodes[r])<n&&(o=r),i<this.size&&this.score(this.nodes[i])<(o?this.score(this.nodes[o]):n)&&(o=i),null===o)break;this.nodes[e]=this.nodes[o],this.nodes[o]=t,e=o}return this}}let h={manhattan:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return(n.multiplier||1)*(i+r)},manhattanTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)},diagonal:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return m*(i+r)+(dm-2*m)*c(i,r)},diagonalTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,r)},euclidian:function(e,t,n={}){let i=d(t.x-e.x),r=d(t.y-e.y);return(n.multiplier||1)*Math.sqrt(i*i+r*r)},euclidianTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),r=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+r)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,r)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(`${n.thread} couldn't be opened.`)}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,n={})=>{this._worker_path_callback=n.callback,delete n.callback,this.worker.postMessage(["path",e,t,n])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);switch(t[0]){case"path":this._worker_path_callback(t[1])}}}}path(e,t,n={}){if(n.jps)return this.jps(e,t,n);let i=new g(e=>e.estimated),r=new Map,o=this.graphs[n.layer||0];if(e=o.node(e,!0),t=o.node(t,!0),i.add({node:e,estimated:0}),r.set(e,{score:0,from:null}),!n.static||o.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;o.neighbors(e).map(s=>{let a=(r.has(e)?r.get(e).score:0)+o.cost(e,s);a<(r.has(s)?r.get(s).score:1/0)&&(r.set(s,{score:a,from:e}),i.set({node:s,estimated:a+h[n.heuristic||this.heuristic](s,t,n.heuristicOptions||this.heuristicOptions)}))}),i.delete(e)}let s=[];if(r.has(t)){let e=t;for(s.push(t);null!==(e=r.get(e).from);)s.push(e);s=s.reverse()}return n.callback&&n.callback(s,r),s}}if(j.JPS=class{constructor(){}static access(e,t,n,i){return e.adjacent(t,i?e.node(n,!0):n)}static neighborhood(e,t,n,i){let r=[],o=n.get(i).from||null;if(null===o)return t.neighbors(i);{let n={x:b(i.x-o.x),y:b(i.y-o.y)};if(0!=n.x&&0!=n.y){let o=e(i,{x:i.x+n.x,y:i.y},!0),s=e(i,{x:i.x,y:i.y+n.y},!0);(o||s)&&(r.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),o&&(r.push(t.node({x:i.x+n.x,y:i.y},!0)),!e(i,{x:i.x,y:i.y-n.y},!0)&&r.push(t.node({x:i.x+n.x,y:i.y-n.y},!0))),s&&(r.push(t.node({x:i.x,y:i.y+n.y},!0)),!e(i,{x:i.x-n.x,y:i.y},!0)&&r.push(t.node({x:i.x-n.x,y:i.y+n.y},!0))))}else e(i,{x:i.x+n.x,y:i.y+n.y},!0)&&(r.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),0==n.x?0!=n.y&&(!e(i,{x:i.x-1,y:i.y},!0)&&r.push(t.node({x:i.x-1,y:i.y+n.y},!0)),!e(i,{x:i.x+1,y:i.y},!0)&&r.push(t.node({x:i.x+1,y:i.y+n.y},!0))):(!e(i,{x:i.x,y:i.y-1},!0)&&r.push(t.node({x:i.x+n.x,y:i.y-1},!0)),!e(i,{x:i.x,y:i.y+1},!0)&&r.push(t.node({x:i.x+n.x,y:i.y+1},!0))))}return r.filter(e=>e)}static jump(e,t,n,i,r,o){for(;;){if(!e(o,r))return null;if(r.x===i.x&&r.y===i.y)return r;let s={x:b(r.x-o.x),y:b(r.y-o.y)};if(0!=s.x&&0!=s.y){if(!e(r,{x:r.x-s.x,y:r.y},!0)&&e(r,{x:r.x-s.x,y:r.y+s.y},!0)||!e(r,{x:r.x,y:r.y-s.y},!0)&&e(r,{x:r.x+s.x,y:r.y-s.y},!0))return r;let o=j.JPS.jump.bind(this,e,t,n,i);if(null!==o(t.node({x:r.x+s.x,y:r.y},!0),r)||null!==o(t.node({x:r.x,y:r.y+s.y},!0),r))return r}else if(0!=s.x){if(!e(r,{x:r.x,y:r.y-1},!0)&&e(r,{x:r.x+s.x,y:r.y-1},!0)||!e(r,{x:r.x,y:r.y+1},!0)&&e(r,{x:r.x+s.x,y:r.y+1},!0))return r}else if(0!=s.y&&(!e(r,{x:r.x-1,y:r.y},!0)&&e(r,{x:r.x-1,y:r.y+s.y},!0)||!e(r,{x:r.x+1,y:r.y},!0)&&e(r,{x:r.x+1,y:r.y+s.y},!0)))return r;o=r,r=t.node({x:r.x+s.x,y:r.y+s.y},!0)}return null}},j.prototype.jps=function(e,t,n={}){if(this.graphs[n.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),n.callback&&n.callback([],new Map),[];let i=new g(e=>e.estimated),r=new Map,o=this.graphs[n.layer||0],s=null;e=o.node(e,!0),t=o.node(t,!0),i.add({node:e,estimated:0}),r.set(e,{score:0,from:null});let a=j.JPS.access.bind(this,o),l=j.JPS.neighborhood.bind(this,a,o,r),c=j.JPS.jump.bind(this,a,o,r,t);if(!n.static||o.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;l(e).map(a=>{if(null!==(s=c(a,e))){let a=(r.has(e)?r.get(e).score:0)+o.cost(e,s);a<(r.has(s)?r.get(s).score:1/0)&&(r.set(s,{score:a,from:e,jumped:!0}),i.set({node:s,estimated:a+h[n.heuristic||this.heuristic](s,t,n.heuristicOptions||this.heuristicOptions)}))}}),i.delete(e)}let u=[];if(r.has(t)){let n=t;for(;n.x!=e.x||n.y!=e.y;)for(let e=r.get(n).from;n.x!=e.x||n.y!=e.y;)u.push(n),n=o.node({x:n.x+b(e.x-n.x),y:n.y+b(e.y-n.y)},!0);u.push(n),u.reverse()}return n.callback&&n.callback(u,r),u},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?this:window)},function(e,t,n){var i=n(4),r=n(0),o=n(7),s=n(2),a=n(5);function l(e,t,n,i,r,s){this.grid=e,this.snakes=t,this.speed=null==n?8:n,this.initialSpeed=null==n?8:n,this.initialSpeedUntouched=null==n?8:n,this.enablePause=null==i||i,this.enableRetry=null==r||r,this.progressiveSpeed=null!=s&&s,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.intervalPlay,this.reactor=new o,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}l.prototype.init=function(){null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes];for(var e=i.randRange(0,360),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof a==0?this.errorOccurred=!0:(e=i.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e);this.grid instanceof s==0?this.errorOccurred=!0:this.errorOccurred||this.grid.setFruit(this.snakes.length)},l.prototype.reset=function(){if(this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.grid.init(),null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.grid.setFruit(this.snakes.length),this.reactor.dispatchEvent("onReset"),this.start()},l.prototype.start=function(){this.reactor.dispatchEvent("onUpdateCounter");var e=this;if(!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&(e.clearIntervalPlay(),e.paused=!1,e.isReseted=!1,e.firstStart=!1,e.starting=!1,e.reactor.dispatchEvent("onStart"),e.tick())}),1e3))}},l.prototype.clearIntervalPlay=function(){clearInterval(this.intervalPlay)},l.prototype.continue=function(){this.start(),this.reactor.dispatchEvent("onContinue")},l.prototype.stop=function(e){this.gameOver||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))},l.prototype.pause=function(){this.paused||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))},l.prototype.kill=function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}},l.prototype.exit=function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))},l.prototype.getNBPlayer=function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t},l.prototype.getPlayer=function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null},l.prototype.tick=function(){var e=this;setTimeout((function(){if(!e.paused&&!e.killed){if(0==e.lastTime&&(e.lastTime=time),e.ticks++,!e.grid.maze||e.grid.mazeForceAuto||e.grid.maze&&e.getNBPlayer(r.PlayerType.HUMAN)<=0&&e.getNBPlayer(r.PlayerType.HYBRID_HUMAN_AI)<=0||e.grid.maze&&(e.getNBPlayer(r.PlayerType.HUMAN)>0||e.getNBPlayer(r.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=(e.getPlayer(1,r.PlayerType.HYBRID_HUMAN_AI)||e.getPlayer(1,r.PlayerType.HUMAN)).lastKey){for(var t=0;t<e.snakes.length;t++){var n=e.snakes[t].direction,i=!1,o=!1,s=!1;if(e.snakes[t].lastTailMoved=!1,!e.snakes[t].gameOver&&!e.snakes[t].scoreMax){e.snakes[t].player==r.PlayerType.HUMAN||e.snakes[t].player==r.PlayerType.HYBRID_HUMAN_AI?(e.snakes[t].moveTo(e.snakes[t].lastKey),e.snakes[t].lastKey=-1):e.snakes[t].player==r.PlayerType.AI&&e.snakes[t].moveTo(e.snakes[t].ai(!0));var a=e.snakes[t].getHeadPosition();e.snakes[t].player==r.PlayerType.HYBRID_HUMAN_AI&&e.grid.isDeadPosition(e.snakes[t].getNextPosition(a,e.snakes[t].direction))&&(e.snakes[t].direction=n,e.snakes[t].moveTo(e.snakes[t].ai(!0)),e.snakes[t].lastKey=-1),a=e.snakes[t].getNextPosition(a,e.snakes[t].direction),e.grid.isDeadPosition(a)?e.snakes[t].setGameOver():e.grid.get(a)==r.CaseType.FRUIT||e.grid.get(a)==r.CaseType.FRUIT_GOLD?(e.grid.get(a)==r.CaseType.FRUIT?e.snakes[t].score++:e.grid.get(a)==r.CaseType.FRUIT_GOLD&&(e.snakes[t].score+=3,e.grid.set(r.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null,s=!0),e.reactor.dispatchEvent("onScoreIncreased"),e.snakes[t].insert(a),e.grid.maze?(e.stop(),e.gameMazeWin=!0,e.gameFinished=!0):e.snakes[t].hasMaxScore()&&e.snakes.length<=1?(e.scoreMax=!0,e.snakes[t].scoreMax=!0):(e.numFruit++,s||(i=!0)),e.snakes.length<=1&&e.progressiveSpeed&&e.snakes[t].score>0&&e.initialSpeed>1&&(e.initialSpeed=Math.ceil(-e.initialSpeedUntouched/100*e.snakes[t].score+e.initialSpeedUntouched),e.initialSpeed=e.initialSpeed<1?1:e.initialSpeed)):(e.snakes[t].insert(a),e.grid.maze||(e.snakes[t].remove(),e.snakes[t].lastTailMoved=!0))}!e.scoreMax&&i&&(o=!e.grid.setFruit(e.snakes.length))}e.scoreMax||o||!e.grid.isFruitSurrounded(e.grid.fruitPos,!0)||(o=!e.grid.setFruit(e.snakes.length)),!e.scoreMax&&null!=e.grid.fruitPosGold&&e.grid.isFruitSurrounded(e.grid.fruitPosGold,!0)&&(e.grid.set(r.CaseType.EMPTY,e.grid.fruitPosGold),e.grid.fruitPosGold=null);for(var l=0,c=0;c<e.snakes.length;c++)(e.snakes[c].gameOver||e.snakes[c].scoreMax)&&l++;(l>=e.snakes.length||o)&&(e.stop(),e.snakes.length>1&&(e.gameFinished=!0)),e.reactor.dispatchEvent("onUpdate")}e.tick()}}),this.initialSpeed*r.Setting.TIME_MULTIPLIER)},l.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},l.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},l.prototype.onContinue=function(e){this.reactor.addEventListener("onContinue",e)},l.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},l.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},l.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},l.prototype.onKill=function(e){this.reactor.addEventListener("onKill",e)},l.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},l.prototype.onUpdate=function(e){this.reactor.addEventListener("onUpdate",e)},l.prototype.onUpdateCounter=function(e){this.reactor.addEventListener("onUpdateCounter",e)},e.exports=l},function(e,t,n){var i=n(25),r=n(17),o=n(0);function s(){this.url,this.port,this.socket,this.token,this.id,this.serverSettings,this.currentRoom,this.game,this.intervalReconnect,this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1}s.prototype.connect=function(e,t,n){this.disconnect(),this.url=e,this.port=t,null!=this.url&&"/"==this.url.charAt(this.url.length-1)&&(this.url=this.url.substring(0,this.url.length-1)),this.socket=new i(this.getURL()+(this.token?"?token="+this.token:""));var r=this;this.socket.once("connect",(function(){r.socket.once("authent",(function(e){e==o.GameState.AUTHENTICATION_SUCCESS?n(!0):n(!1,e,r.socket.id)})),r.socket.once("token",(function(e){r.token=e,successConnect=!0,r.connect(r.url,r.port,n)}))})),this.socket.on("error",(function(e){n(!1,e),r.disconnect()})),this.socket.on("connect_error",(function(e){n(!1,e),r.disconnect()}))},s.prototype.disconnect=function(){null!=this.socket&&(this.stopGame(),this.socket.close(),this.creatingRoom=!1,this.joiningRoom=!1,this.loadingRooms=!1)},s.prototype.stopGame=function(){null!=this.game&&null!=this.game.gameUI&&(this.game.kill(),this.game.gameUI.setKill())},s.prototype.displayRooms=function(e){if(this.loadingRooms)e(!1,null);else{this.loadingRooms=!0;var t=this,n=new i(this.getURL()+"/rooms"+(this.token?"?token="+this.token:""));n.once("rooms",(function(i){e(!0,i),n.close(),t.loadingRooms=!1,t.serverSettings=i.settings})),n.once("error",(function(i){e(!1,i),n.close(),t.loadingRooms=!1})),n.once("authent",(function(i){i==o.Error.AUTHENTICATION_REQUIRED&&(e(!1,i),n.close(),t.loadingRooms=!1)})),n.once("connect_error",(function(){e(!1,data),n.close(),t.loadingRooms=!1}))}},s.prototype.createRoom=function(e,t){if(this.creatingRoom)t({success:!1,connection_error:!1});else{this.creatingRoom=!0;var n=this,r=new i(this.getURL()+"/createRoom"+(this.token?"?token="+this.token:""));r.once("connect",(function(){r.emit("create",e)})),r.once("process",(function(e){null!=e.success?t({success:e.success,connection_error:!1,code:e.code,errorCode:e.errorCode}):t({success:!1,connection_error:!0,code:null,errorCode:null!=e?e:null}),r.close(),n.creatingRoom=!1})),r.once("error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),r.close(),n.creatingRoom=!1})),r.once("authent",(function(e){e==o.Error.AUTHENTICATION_REQUIRED&&(t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),r.close(),n.creatingRoom=!1)})),r.once("connect_error",(function(e){t({success:!1,connection_error:!0,errorCode:null!=e?e:null}),r.close(),n.creatingRoom=!1}))}},s.prototype.joinRoom=function(e,t){if(this.joiningRoom)t({success:!1});else if(this.joiningRoom=!0,null!=this.socket){this.socket.emit("join-room",{code:e,version:o.Setting.APP_VERSION});var n=this;this.socket.once("join-room",(function(i){n.currentRoom=e,successConnect=!0,t(i),n.joiningRoom=!1}))}},s.prototype.getGame=function(e){if(null!=this.socket&&this.currentRoom&&null!=e)return this.game=null,this.stopGame(),this.game=new r(this.socket,e),e.controller=this.game,this.game},s.prototype.getURL=function(){return null!=this.port&&""!=this.port.trim()?this.url+":"+this.port:this.url},e.exports=s},function(e,t,n){var i=n(1),r=n(6),o=n(2),s=n(5),a=n(3),l=n(8).NotificationMessage;function c(e,t){r.call(this,null,t),this.socket=e,this.parseData=function(e,t){var n=[e,t];if(n.length>1){var i=this.gameUI.grid;if(n[1].hasOwnProperty("grid")&&null!=n[1].grid&&(i=Object.assign(new o,n[1].grid),n[1].grid=i),n[1].hasOwnProperty("snakes")&&null!=n[1].snakes)for(var r=0;r<n[1].snakes.length;r++){n[1].snakes[r].grid=i,n[1].snakes[r]=Object.assign(new s,n[1].snakes[r]);for(var l=0;l<n[1].snakes[r].queue.length;l++)n[1].snakes[r].queue[l]=Object.assign(new a,n[1].snakes[r].queue[l])}this.update(n[0],n[1])}},this.init=function(){var e=this;this.socket.on("init",(function(t){e.parseData("init",t)})),this.socket.on("reset",(function(t){e.parseData("reset",t),e.reactor.dispatchEvent("onReset")})),this.socket.on("start",(function(t){e.parseData("start",t),e.reactor.dispatchEvent("onStart")})),this.socket.on("pause",(function(t){e.parseData("pause",t),e.reactor.dispatchEvent("onPause")})),this.socket.on("continue",(function(t){e.parseData("continue",t),e.reactor.dispatchEvent("onContinue")})),this.socket.on("stop",(function(t){e.parseData("stop",t),e.reactor.dispatchEvent("onStop")})),this.socket.on("exit",(function(t){e.parseData("exit",t),e.reactor.dispatchEvent("onExit")})),this.socket.on("kill",(function(t){e.parseData("kill",t),e.reactor.dispatchEvent("onKill")})),this.socket.on("scoreIncreased",(function(t){e.parseData("scoreIncreased",t),e.reactor.dispatchEvent("onScoreIncreased")})),this.socket.on("update",(function(t){e.parseData("update",t),e.reactor.dispatchEvent("onUpdate")})),this.socket.on("updateCounter",(function(t){e.parseData("updateCounter",t),e.reactor.dispatchEvent("onUpdateCounter")})),this.socket.on("connect_error",(function(){e.gameUI.setNotification(new l(i.t("engine.servers.errorConnection"),null,"rgba(231, 76, 60, 0.5)",null,null,null,null,!0))})),this.socket.on("reconnect_error",(function(){e.gameUI.setNotification(new l(i.t("engine.servers.errorConnection"),null,"rgba(231, 76, 60, 0.5)",null,null,null,null,!0))}))},this.reset=function(){this.socket.emit("reset")},this.start=function(){this.socket.emit("start")},this.stop=function(){this.socket.emit("stop")},this.finish=function(e){this.socket.emit(e?"finish":"stop")},this.pause=function(){this.socket.emit("pause")},this.kill=function(){this.socket.emit("kill")},this.tick=function(){this.socket.emit("tick")},this.exit=function(){this.socket.emit("exit")},this.key=function(e){this.socket.emit("key",e)},this.forceStart=function(){this.socket.emit("forceStart")}}c.prototype=Object.create(r).prototype,c.prototype.constructor=c,e.exports=c},function(e,t,n){e.exports={LocalesInit:n(19),LocalesMenu:n(21),LocalesEngine:n(22),Main:n(23),GameConstants:n(0),Event:n(12),Reactor:n(7),Grid:n(2),Snake:n(5),GameGroup:n(10),GameUtils:n(4),Position:n(3),GameEngine:n(15),Game:n(11),GameController:n(6),GameControllerWorker:n(13),GameControllerSocket:n(17),GameGroup:n(10),GameUI:n(9),OnlineClient:n(16)}},function(e,t,n){var i=n(1),r=n(20);i.use(r).init({fallbackLng:["en","fr"],load:"languageOnly",detection:{order:["localStorage","querystring","navigator","htmlTag"],lookupQuerystring:"lng",lookupLocalStorage:"i18nextLng",caches:["localStorage"]}})},function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=[],n=t.forEach,i=t.slice;function r(e){return n.call(i.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var o,s={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&function(e,t,n,i){var r;if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),r="; expires="+o.toGMTString()}else r="";i=i?"domain="+i+";":"",document.cookie=e+"="+t+r+";"+i+"path=/"}(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain)}},a={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("=");r>0&&n[i].substring(0,r)===e.lookupQuerystring&&(t=n[i].substring(r+1))}return t}};try{o="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){o=!1}var l={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&o){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&o&&window.localStorage.setItem(t.lookupLocalStorage,e)}},c={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},u={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},h={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},d={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}},p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}var n,i;return n=t,(i=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=r(t,this.options||{},{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],checkWhitelist:!0}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(s),this.addDetector(a),this.addDetector(l),this.addDetector(c),this.addDetector(u),this.addDetector(h),this.addDetector(d)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n,i=[];if(e.forEach((function(e){if(t.detectors[e]){var n=t.detectors[e].lookup(t.options);n&&"string"==typeof n&&(n=[n]),n&&(i=i.concat(n))}})),i.forEach((function(e){if(!n){var i=t.services.languageUtils.formatLanguageCode(e);t.options.checkWhitelist&&!t.services.languageUtils.isWhitelisted(i)||(n=i)}})),!n){var r=this.i18nOptions.fallbackLng;"string"==typeof r&&(r=[r]),r||(r=[]),n="[object Array]"===Object.prototype.toString.apply(r)?r[0]:r[0]||r.default&&r.default[0]}return n}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}])&&e(n.prototype,i),t}();return p.type="languageDetector",p}()},function(e,t,n){var i=n(1);i.addResourceBundle("fr","translation",{debugModeEnabled:"Mode de debug activÃ©",lang:{fr:"FranÃ§ais",en:"English"},update:{updateAvailable:"Une mise Ã  jour du jeu est disponible",version:"Version",of:"du",current:"Vous disposez actuellement de la version",versionDate:"{{date, DD/MM/YYYY}}",download:"TÃ©lÃ©charger la mise Ã  jour",getURL:"Obtenir l'adresse URL du tÃ©lÃ©chargement",getChanges:"Obtenir la liste des changements",URLToDownload:"Adresse URL menant au tÃ©lÃ©chargement :",noChanges:"Aucun changement renseignÃ©.",changes:"Changements de la nouvelle version :"},menu:{selectGame:"SÃ©lectionnez un mode de jeu :",soloAi:"IA solo",soloPlayer:"Joueur solo",playerVsAi:"Joueur VS IA",aiVsAi:"IA VS IA",battleRoyale:"Battle Royale",onlineBattleRoyale:"Battle Royale en ligne",levelsSoloPlayer:"Niveaux (joueur solo)",levelsSoloAI:"Niveaux (IA solo)",version:"Version",versionDate:"{{date, DD/MM/YYYY}}",by:"Par",infos:"Plus d'infos",readme:"Fichier Lisez-moi",source:"TÃ©lÃ©charger la source",language:"Langue :",enableAnimations:"Activer les animations"},settings:{title:"ParamÃ¨tres de la partie :",possibleFailInitGame:"Il est possible que l'initialisation de la partie Ã©choue avec vos paramÃ¨tres car il n'y aura pas assez d'espace pour placer tous les Snake. Dans ce cas, un message Â« Une erreur est survenue Â» peut s'afficher. Essayez avec d'autres paramÃ¨tres.",gridSize:"Taille de la grille :",placeholderHeight:"Hauteur",placeholderWidth:"Largeur",invalidSize:"Cette valeur doit Ãªtre comprise entre {{min}} et {{max}}",options:"Autres options :",borderWalls:"Entourer la grille de murs",generateWalls:"GÃ©nÃ©rer des murs Ã  des positions alÃ©atoires",mazeGrid:"GÃ©nÃ©rer un labyrinthe",sameGrid:"Partie sur la mÃªme grille",speed:"Vitesse du jeu :",speedSelect:{1:"1 â€“ La plus rapide",3:"3 â€“ Rapide",5:"5 â€“ Moyenne",8:"8 â€“ Normale",10:"10 â€“ Assez lente",15:"15 â€“ Lente",20:"20 â€“ TrÃ¨s lente",25:"25 â€“ ExtrÃªmement lente",custom:"Vitesse personnalisÃ©eâ€¦"},invalidSpeed:"Cette valeur doit Ãªtre comprise entre {{min}} et {{max}}",progressiveSpeed:"Augmenter la vitesse progressivement",customSpeed:"Vitesse personnalisÃ©e :",placeholderCustomSpeed:"Entrez la vitesseâ€¦",customSpeedHelp:"Plus le nombre est Ã©levÃ©, plus la vitesse du jeu est lente, et inversement",playerSettings:"Options du joueur :",aiAssistant:"Activer l'assistant IA",aiAssistantInfos:"En activant cette option, une IA tentera de corriger votre trajectoire si vous Ãªtes sur le point de vous Ã©craser sur un obstacle. RÃ©duit la difficultÃ© du jeu.",aiLevel:"Niveau de l'IA :",aiLevelSelect:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Ã‰levÃ©",ultra:"Ultra"},invalidaiLevel:"Cette valeur est invalide",autoRetry:"Faire que l'IA recommence auto sa partie aprÃ¨s un Game Over",numberIA:"Nombre d'IA :",placeholderNumberIA:"Entrez le nombreâ€¦",invalidIANumber:"Cette valeur doit Ãªtre comprise entre 2 et 100",battleAgainstAIs:"Jouer contre les IA",validate:"Valider",reset:"RÃ©initialiser",backToMenu:"Retour au menu",privateGame:"Garder la partie privÃ©e"},game:{backToMenu:"Retour au menu",currentMode:"Mode de jeu actuel :",confirmQuit:"ÃŠtes-vous sÃ»r de vouloir retourner au menu ?",equalityPlayerVSAI:"Vous avez fini ex-aequo avec l'IA !",winPlayerVSAI:"Bravo, vous avez gagnÃ© !",losePlayerVSAI:"Dommage, l'IA vous a battu avec un score supÃ©rieur !",oneWinnerAIVSAI:"L'IA nÂ°{{numWinner}} a gagnÃ© !",equalityAIVSAI:"Les deux IA ont fini ex-aequo !",oneWinnerBattleRoyale:"L'IA nÂ°{{numWinner}} a gagnÃ© avec un score de {{score}} !",winnersBattleRoyale:"Les IA",winnerAIBattleRoyale:"L'IA",winnersNumBattleRoyale:"nÂ°{{numWinner}}",andWinnersBattleRoyale:"et",andPlayerWinnersBattleRoyale:"ainsi que vous",winScoreBattleRoyale:"ont gagnÃ© avec un score de {{score}} !",winPlayerScoreBattleRoyale:"avez gagnÃ© avec un score de {{score}} !",playerWinnerBattleRoyale:"Vous avez gagnÃ© avec un score de {{score}} !"},levels:{default:"Niveaux par dÃ©faut",downloaded:"Niveaux tÃ©lÃ©chargÃ©s",titlePlayer:"Niveaux (joueur solo)",titleAI:"Niveaux (IA solo)",emptyList:"Aucun niveau trouvÃ©â€¦",download:"TÃ©lÃ©charger des niveaux",downloadLink:"Les niveaux seront tÃ©lÃ©chargÃ©s depuis {{url}}",editDownloadURL:"Modifier l'URL de tÃ©lÃ©chargement",editDownloadURLPrompt:"Entrez l'URL de tÃ©lÃ©chargement des niveaux.\n* Variables disponibles :\n{player} - type de joueur (humain, IA)\n{appVersion} - version de l'application.\n\nLa modification de ce paramÃ¨tre peut faire planter le jeu ou vous exposer Ã  des problÃ¨mes de sÃ©curitÃ©. Ne la modifiez que si vous savez ce que vous faites. Ce paramÃ¨tre n'est pas persistant et sera effacÃ© si vous rechargez l'application.",downloading:"TÃ©lÃ©chargement en cours, veuillez patienterâ€¦ Si le bouton reste grisÃ© aprÃ¨s plus de 10 secondes, cliquez sur le bouton ci-dessous pour le dÃ©bloquer et rÃ©essayer le tÃ©lÃ©chargement :",buttonDeblock:"DÃ©bloquer le tÃ©lÃ©chargement",disabledLevel:"Niveau bloquÃ©. Terminez les niveaux prÃ©cÃ©dents pour le dÃ©bloquer.",notCompatible:"Ce niveau n'est pas compatible avec cette version du jeu. Mettez-le Ã  jour.",goalAchieved:"Objectif atteint ! Vous pouvez passer au prochain niveau.",goalNotAchieved:"Objectif ratÃ© ! Essayez Ã  nouveau.",level:"Niveau",reachScore:"Atteignez au moins le score de {{value}} pour passer ce niveau !",reachScoreTime:"Atteignez le score de {{value}} en moins de {{count}} seconde !",reachScoreTime_plural:"Atteignez le score de {{value}} en moins de {{count}} secondes !",reachMaxScore:"Atteignez le score maximal pour cette grille pour passer ce niveau !",multiBestScore:"Terminez cette partie en obtenant un meilleur score que l'adversaire pour passer ce niveau !",multiBestScore_plural:"Terminez cette partie en obtenant un meilleur score que les adversaires pour passer ce niveau !",multiReachScoreFirst:"Atteignez le score de {{value}} avant l'adversaire pour passer ce niveau !",multiReachScoreFirst_plural:"Atteignez le score de {{value}} avant les adversaires pour passer ce niveau !",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour passer ce niveau.\nLe Snake n'avance pas automatiquement.",bestScore:"Meilleur score : {{count}}",bestTime:"Meilleur temps : {{count}} seconde",bestTime_plural:"Meilleur temps : {{count}} secondes",bestScoreShort:"Ã— {{count}}",bestTimeShort:"{{count}} seconde",bestTimeShort_plural:"{{count}} secondes",timerRemaining:"Il reste {{count}} seconde",timerRemaining_plural:"Il reste {{count}} secondes",localstorageDisabled:"Les cookies sont dÃ©sactivÃ©s sur votre navigateur. Vous perdrez votre progression au prochain rechargement de la page. Activez-les puis rechargez la page pour Ã©viter cela.",difficulty:"DifficultÃ© :"},servers:{serverList:"Liste des serveurs",selectInfo:"SÃ©lectionnez un serveur :",noServerFound:"Aucun serveur trouvÃ©â€¦",loadingList:"Chargement de la liste des serveursâ€¦ Veuillez patienter.",noRoomound:"Aucune salle trouvÃ©eâ€¦",infos:"{{width}}Ã—{{height}} â€“ Vitesse : {{speed}}",infosBorderWalls:"Grille entourÃ©e de murs",infosGenerateWalls:"Murs gÃ©nÃ©rÃ©s alÃ©atoirement",infosPlayers:"{{count}} joueur/{{max}}",infosPlayers_plural:"{{count}} joueurs/{{max}}",infosSpectators:"{{count}} spectateur",infosSpectators_plural:"{{count}} spectateurs",backToList:"Retour Ã  la liste des serveurs",roomsListTitle:"Liste des salles",roomsListInfos:"SÃ©lectionnez une salle :",loadingRooms:"Chargement de la liste des sallesâ€¦ Veuillez patienter.",createRoom:"CrÃ©er une salle",connectionError:"Une erreur est survenue lors de la connexion au serveur. Veuillez rÃ©essayer.",errorLoadingRooms:"Une erreur est survenue lors du chargement de la liste des salles. Veuillez rÃ©essayer.",creatingRoom:"CrÃ©ation de la salleâ€¦ Veuillez patienter.",room:"Salle nÂ°{{number}}",errorRoomCreation:"Une erreur est survenue lors de la crÃ©ation de la salle. Veuillez rÃ©essayer.",joinPrivateRoom:"Rejoindre une salle privÃ©e",enterCode:"Entrez le code de la salle :",customServer:"Serveur personnalisÃ©â€¦",enterCustomServer:"Entrez l'adresse du serveur :",connectingToServer:"Connexion au serveurâ€¦ Veuillez patienter.",cancel:"Annuler",refreshRooms:"Actualiser la liste",joinRoom:"Connexion Ã  la salleâ€¦ Veuillez patienter.",errorRoomJoin:"Une erreur est survenue lors de la connexion Ã  la salle. Veuillez rÃ©essayer.",errorReason:"Raison de l'erreur :",errorReason_unknown:"Inconnue",errorRoomJoinReason_roomNotFound:"La salle n'a pas Ã©tÃ© trouvÃ©e.",errorRoomJoinReason_roomAlreadyJoined:"Vous avez dÃ©jÃ  rejoint cette salle.",errorRoomCreationReason_maxRoomLimitReached:"Le nombre maximal de salles que le serveur peut gÃ©rer a Ã©tÃ© atteint.",errorRoomCreationReason_invalidSettings:"ParamÃ¨tres invalides.",errorRoomCreationReason_alreadyCreatedRoom:"Vous avez dÃ©jÃ  crÃ©Ã© une salle ou vous avez dÃ©jÃ  rejoint une salle.",errorServerVersion:"La version de ce serveur ({{server_version}}) est diffÃ©rente de votre version du jeu ({{client_version}}). Vous risquez de rencontrer des problÃ¨mes.",addressLabel:"Adresse du serveur :",roomCode:"Code de la salle :",untitled:"Sans titre",searchingPlayers:"(recherche de joueurs)",started:"(partie dÃ©marrÃ©e)",starting:"(dÃ©marrage en cours)",authenticationServer:"Authentification au serveur",linkAuthenticationServer:"Si le formulaire ne s'affiche pas, cliquez ici"}},!0,!1),i.addResourceBundle("en","translation",{debugModeEnabled:"Debug mode enabled",lang:{fr:"FranÃ§ais",en:"English"},update:{updateAvailable:"An update of the game is available",version:"Version",of:"of",current:"You currently have the version",versionDate:"{{date, MM/DD/YYYY}}",download:"Download the update",getURL:"Get the URL of the download",getChanges:"Get the list of changes",URLToDownload:"Download URL:",noChanges:"No change filled.",changes:"Changes in the new version:"},menu:{selectGame:"Select a game mode:",soloAi:"Single AI",soloPlayer:"Single player",playerVsAi:"Player VS AI",aiVsAi:"AI VS AI",battleRoyale:"Battle Royale",onlineBattleRoyale:"Online Battle Royale",levelsSoloPlayer:"Levels (single player)",levelsSoloAI:"Levels (single AI)",version:"Version",versionDate:"{{date, MM/DD/YYYY}}",by:"By",infos:"More informations",readme:"Readme file",source:"Download the source",language:"Language:",enableAnimations:"Enable the animations"},settings:{title:"Game settings:",possibleFailInitGame:'It\'s possible that the initialization of the game fails with your settings because there will not be enough space to place all Snake. In this case, a message "An error has occurred" may be displayed. Try with other settings.',gridSize:"Grid size:",placeholderHeight:"Height",placeholderWidth:"Width",invalidSize:"This value must be between {{min}} and {{max}}",options:"Others options:",borderWalls:"Surround the grid with walls",generateWalls:"Generate walls at random positions",mazeGrid:"Generate a maze",sameGrid:"Game on the same grid",speed:"Speed:",speedSelect:{1:"1 â€“ Fastest",3:"3 â€“ Fast",5:"5 â€“ Medium",8:"8 â€“ Normal",10:"10 â€“ Quite slow",15:"15 â€“ Slow",20:"20 â€“ Very slow",25:"25 â€“ Extremely slow",custom:"Custom speedâ€¦"},invalidSpeed:"This value must be between {{min}} and {{max}}",progressiveSpeed:"Increase the speed progressively",customSpeed:"Custom speed:",placeholderCustomSpeed:"Enter the speedâ€¦",customSpeedHelp:"The higher the number, the slower the game speed, and inversely",playerSettings:"Player options:",aiAssistant:"Enable the AI assistant",aiAssistantInfos:"By enabling this option, an AI â€‹â€‹will try to correct your trajectory if you are about to crash into an obstacle. Reduces the difficulty of the game.",aiLevel:"AI level:",aiLevelSelect:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},invalidaiLevel:"This value is invalid",autoRetry:"Make the AI restart its game after a Game Over",numberIA:"Number of AI:",placeholderNumberIA:"Enter the numberâ€¦",invalidIANumber:"This value must be between 2 and 100",battleAgainstAIs:"Play against AIs",validate:"Validate",reset:"Reset",backToMenu:"Back to the menu",privateGame:"Keep the game private"},game:{backToMenu:"Back to the menu",currentMode:"Current game mode:",confirmQuit:"Are you sure that you want to go back to the menu?",equalityPlayerVSAI:"You finished tied with AI!",winPlayerVSAI:"Congratulations, you won!",losePlayerVSAI:"Too bad, the AI â€‹â€‹beat you with a higher score!",oneWinnerAIVSAI:"The AI nÂ°{{numWinner}} won!",equalityAIVSAI:"The two AIs finished tied!",oneWinnerBattleRoyale:"The AI nÂ°{{numWinner}} won with a score of {{score}}!",winnersBattleRoyale:"The AIs",winnerAIBattleRoyale:"The AI",winnersNumBattleRoyale:"nÂ°{{numWinner}}",andWinnersBattleRoyale:"and",andPlayerWinnersBattleRoyale:"as well as you",winScoreBattleRoyale:"won with a score of {{score}}!",winPlayerScoreBattleRoyale:"won with a score of {{score}}!",playerWinnerBattleRoyale:"You won with a score of {{score}}!"},levels:{default:"Default levels",downloaded:"Downloaded levels",titlePlayer:"Levels (single player)",titleAI:"Levels (single AI)",emptyList:"No level foundâ€¦",download:"Download levels",downloadLink:"The levels will be downloaded from {{url}}",editDownloadURL:"Edit the download URL",editDownloadURLPrompt:"Enter the download URL of the levels.\n* Available variables:\n{player} - player type (human, AI)\n{appVersion} - version of the application.\n\nChanging this setting may cause the game to crash or expose you to security issues. Only change it if you know what you are doing. This setting is not persistent and will be erased if you reload the application.",downloading:"Downloading, please waitâ€¦ If the button remains gray after more than 10 seconds, click on the button below to unblock and try again:",buttonDeblock:"Unlock the download",disabledLevel:"Level locked. Complete the previous levels to unlock it.",notCompatible:"This level is not compatible with this version of the game. Update it.",goalAchieved:"Goal achieved! You can move to the next level.",goalNotAchieved:"Goal missed! Try again.",level:"Level",reachScore:"Reach at least the score of {{value}} to pass this level!",reachScoreTime:"Reach the score of {{value}} in less than {{count}} second!",reachScoreTime_plural:"Reach the score of {{value}} in less than {{count}} seconds!",reachMaxScore:"Reach the maximum score for this grid to pass this level!",multiBestScore:"Finish this game by getting a better score than the opponent to pass this level!",multiBestScore_plural:"Finish this game by getting a better score than the opponents to pass this level!",multiReachScoreFirst:"Reach the score of {{value}} before the opponent to pass this level!",multiReachScoreFirst_plural:"Reach the score of {{value}} before the opponents to pass this level!",mazeMode:"Maze mode! Find the path to the apple to pass this level.\nThe Snake doesn't move automatically.",bestScore:"Best score: {{count}}",bestTime:"Best time: {{count}} second",bestTime_plural:"Best time: {{count}} seconds",timerRemaining:"{{count}} second left",timerRemaining_plural:"{{count}} seconds left",bestScoreShort:"Ã— {{count}}",bestTimeShort:"{{count}} second",bestTimeShort_plural:"{{count}} seconds",localstorageDisabled:"Cookies are disabled on your browser. You will lose your progress the next time you reload the page. Activate them and reload the page to avoid this.",difficulty:"Difficulty :"},servers:{serverList:"Servers list",selectInfo:"Select a server:",noServerFound:"No server foundâ€¦",loadingList:"Loading servers listâ€¦ Please wait.",noRoomound:"No room foundâ€¦",infos:"{{width}}Ã—{{height}} â€“ Speed: {{speed}}",infosBorderWalls:"Grid bordered by walls",infosGenerateWalls:"Random walls",infosPlayers:"{{count}} player/{{max}}",infosPlayers_plural:"{{count}} players/{{max}}",infosSpectators:"{{count}} spectator",infosSpectators_plural:"{{count}} spectators",backToList:"Back to the servers list",roomsListTitle:"Rooms list",roomsListInfos:"Select a room:",loadingRooms:"Loading the rooms listâ€¦ Please wait.",createRoom:"Create a room",connectionError:"An error has occurred when connecting to the server. Please retry.",errorLoadingRooms:"An error has occurred when loading the rooms list. Please retry.",creatingRoom:"Creating the roomâ€¦ Please wait.",room:"Room nÂ°{{number}}",errorRoomCreation:"An error has occurred when creating the room. Please retry.",joinPrivateRoom:"Join a private room",enterCode:"Enter the code of the room:",customServer:"Custom serverâ€¦",enterCustomServer:"Enter the address of the server:",connectingToServer:"Connecting to the serverâ€¦ Please wait.",cancel:"Cancel",refreshRooms:"Refresh the list",joinRoom:"Joining the roomâ€¦ Please wait.",errorRoomJoin:"An error has occurred when joining the room. Please retry.",errorReason:"Error reason:",errorReason_unknown:"Unknown",errorRoomJoinReason_roomNotFound:"The room was not found.",errorRoomJoinReason_roomAlreadyJoined:"You already joined this room.",errorRoomCreationReason_maxRoomLimitReached:"The maximum number of rooms the server can manage has been reached.",errorRoomCreationReason_invalidSettings:"Invalid settings.",errorRoomCreationReason_alreadyCreatedRoom:"You have already created a room or you have already joined a room.",errorServerVersion:"This server version ({{server_version}}) is different from your version of the game ({{client_version}}). You may encounter problems.",addressLabel:"Server address:",roomCode:"Room code:",untitled:"Untitled",searchingPlayers:"(searching players)",started:"(game started)",starting:"(game starting)",authenticationServer:"Server authentication",linkAuthenticationServer:"If the form does not appear, click here"}},!0,!1)},function(e,t,n){var i=n(1);i.addResourceBundle("fr","translation",{engine:{score:"Score",num:"nÂ°",initFailed:"Ã‰chec de l'initialisation du jeu : le Snake est plus grand que la grille",continue:"Reprendre",reset:"Recommencer la partie",retryInit:"RÃ©essayer",exit:"Quitter",yes:"Oui",no:"Non",ok:"OK",about:"Ã€ proposâ€¦",infosGame:"Infos partie",player:"Joueur :",playerHuman:"Vous",playerAI:"IA",aiLevel:"Niveau de l'IA :",aiLevelList:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Ã‰levÃ©",ultra:"Ultra"},sizeGrid:"Taille de la grille :",currentSpeed:"Vitesse actuelle :",progressiveSpeed:"Vitesse progressive",loading:"Chargement des ressourcesâ€¦",exited:"Cette partie a Ã©tÃ© dÃ©finitivement quittÃ©e. En attente de la fin des autres partiesâ€¦",error:"Une erreur est survenue !",errorLoading:"Une erreur est survenue lors du chargement des ressources. VÃ©rifiez votre connexion Internet.",exitConfirm:"ÃŠtes-vous sÃ»r de vouloir quitter la partie ?",resetConfirm:"ÃŠtes-vous sÃ»r de vouloir recommencer la partie ?",scoreMax:"Score maximal atteint !",gameOver:"Game Over !",gameFinished:"Partie terminÃ©e !",pause:"Pause",playerMin:"J",aiMin:"IA",aboutScreen:{title:"SnakeIA par Eliastik",versionAndDate:"Version {{version}} ({{date, DD/MM/YYYY}})"},debug:{fps:"IPS",frames:"Images",ticks:"Tours",speed:"Vit.",paused:"En pause"},colors:{white:"Blanc",gray:"Gris",black:"Noir",red:"Rouge",brown:"Marron",orange:"Orange",yellow:"Jaune",green:"Vert",blue:"Bleu",purple:"Mauve",pink:"Rose"},colorPlayer:"Vous Ãªtes le Snake\nen {{color}}",arrowPlayer:"Vous Ãªtes le Snake\nindiquÃ© par la\nflÃ¨che",ready:"Partez !",assistAI:"Assistant IA",exitFullScreen:"Quitter plein-Ã©cran",enterFullScreen:"Mode plein-Ã©cran",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour rÃ©ussir la partie.\nLe Snake n'avance pas automatiquement.",mazeWin:"Bien jouÃ© !",mazeModeMin:"Mode labyrinthe",onlineMode:"Jeu en ligne",ranking:"Classement",servers:{errorConnection:"Une erreur est survenue lors de la connexion au serveur.",waitingPlayers:"En attente de joueursâ€¦",gameStart:"DÃ©but de la partie\ndans",nextGameStart:"Prochaine partie\ndans",spectatorMode:"Mode spectateur",startGame:"Commencer la partie"}}},!0,!1),i.addResourceBundle("en","translation",{engine:{score:"Score",num:"nÂ°",initFailed:"Game init failed: the Snake is bigger than the grid",continue:"Continue",reset:"Reset the game",retryInit:"Retry",exit:"Exit",yes:"Yes",no:"No",ok:"OK",about:"Aboutâ€¦",infosGame:"Current game infos",player:"Player:",playerHuman:"You",playerAI:"AI",aiLevel:"AI level:",aiLevelList:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},sizeGrid:"Grid size:",currentSpeed:"Current speed:",progressiveSpeed:"Progressive speed",loading:"Loading resourcesâ€¦",exited:"This game has been definitively exited. Waiting for the end of the other gamesâ€¦",error:"An error has occurred!",errorLoading:"An error occurred while loading resources. Check your Internet connection.",exitConfirm:"Are you sure that you want to exit the game?",resetConfirm:"Are you sure that you want to reset the game?",scoreMax:"Maximum score reached!",gameFinished:"Game finished!",gameOver:"Game Over!",pause:"Pause",playerMin:"P",aiMin:"AI",aboutScreen:{title:"SnakeIA by Eliastik",versionAndDate:"Version {{version}} ({{date, MM/DD/YYYY}})"},debug:{fps:"FPS",frames:"Frames",ticks:"Ticks",speed:"Speed",paused:"Paused"},colors:{white:"White",gray:"Gray",black:"Black",red:"Red",brown:"Brown",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"},colorPlayer:"You are the Snake\nin {{color}}",arrowPlayer:"You are the Snake\npointed by the\narrow",ready:"Go!",assistAI:"AI assistant",exitFullScreen:"Exit fullscreen",enterFullScreen:"Fullscreen mode",mazeMode:"Maze mode! Find the path to the apple to finish this game.\nThe Snake doesn't move automatically.",mazeWin:"Good game!",mazeModeMin:"Maze mode",onlineMode:"Online game",ranking:"Ranking",servers:{errorConnection:"An error has occurred when connecting to the server.",waitingPlayers:"Waiting for playersâ€¦",gameStart:"Start of the game\nin",nextGameStart:"Next game\nin",spectatorMode:"Spectator mode",startGame:"Start the game"}}},!0,!1)},function(e,t,n){var i=n(1),r=n(11),o=n(0),s=n(5),a=n(2),l=n(10),c=n(16),u=n(9),h=n(8).NotificationMessage;window.SOLO_AI="SOLO_AI",window.SOLO_PLAYER="SOLO_PLAYER",window.PLAYER_VS_AI="PLAYER_VS_AI",window.AI_VS_AI="AI_VS_AI",window.BATTLE_ROYALE="BATTLE_ROYALE",window.BATTLE_ROYALE_ONLINE="BATTLE_ROYALE_ONLINE",window.UPDATER_URI="https://www.eliastiksofts.com/snakeia/update.php",window.SERVERS_LIST_URI="https://www.eliastiksofts.com/snakeia/serversList.php",window.LEVEL_REACH_SCORE="LEVEL_REACH_SCORE",window.LEVEL_REACH_MAX_SCORE="LEVEL_REACH_MAX_SCORE",window.LEVEL_MULTI_BEST_SCORE="LEVEL_MULTI_BEST_SCORE",window.LEVEL_MULTI_REACH_SCORE_FIRST="LEVEL_MULTI_REACH_SCORE_FIRST",window.LEVEL_REACH_SCORE_ON_TIME="LEVEL_REACH_SCORE_ON_TIME",window.LEVEL_MAZE_WIN="LEVEL_MAZE_WIN",window.DEFAULT_LEVEL="DEFAULT_LEVEL",window.DOWNLOADED_LEVEL="DOWNLOADED_LEVEL",window.DEFAULT_LEVELS_SOLO_PLAYER={1:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},2:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},3:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:15,version:o.Setting.APP_VERSION},4:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,60],version:o.Setting.APP_VERSION},5:{settings:[10,10,!0,!1,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},6:{settings:[15,15,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},7:{settings:[15,15,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,45],version:o.Setting.APP_VERSION},8:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:35,version:o.Setting.APP_VERSION},9:{settings:[15,15,!1,!1,!1,null,!1,null,1],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:o.Setting.APP_VERSION},10:{settings:[10,10,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[10,15],version:o.Setting.APP_VERSION},11:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION},12:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION},13:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:o.Setting.APP_VERSION},14:{settings:[20,20,!0,!1,!0,5,!0,null,0],type:LEVEL_REACH_SCORE,typeValue:30,version:o.Setting.APP_VERSION},15:{settings:[15,15,!1,!1,!0,null,!1,null,1],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:o.Setting.APP_VERSION},16:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:75,version:o.Setting.APP_VERSION},17:{settings:[15,15,!0,!1,!0,15,!1,null,2],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:o.Setting.APP_VERSION},18:{settings:[5,5,!0,!1,!0,25,!1,null,0],type:LEVEL_REACH_MAX_SCORE,typeValue:null,version:o.Setting.APP_VERSION},19:{settings:[5,5,!1,!0,!0,10,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:10,version:o.Setting.APP_VERSION},20:{settings:[20,20,!1,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION}},window.SOLO_PLAYER_SAVE="snakeia_solo_player_",window.DEFAULT_LEVELS_SOLO_AI=DEFAULT_LEVELS_SOLO_PLAYER,window.SOLO_AI_SAVE="snakeia_solo_ai_",window.DOWNLOAD_DEFAULT_URI="https://www.eliastiksofts.com/snakeia/downloadLevels.php?player={player}&ver={appVersion}",window.SOLO_PLAYER_DOWNLOAD_LEVELS_TO="snakeia_solo_player_downloadedLevels",window.SOLO_AI_DOWNLOAD_LEVELS_TO="snakeia_solo_ai_downloadedLevels";var d=SOLO_AI,p=!0,f=!1,g=new c;document.getElementById("versionTxt").innerHTML=o.Setting.APP_VERSION,document.getElementById("appVersion").innerHTML=o.Setting.APP_VERSION,document.getElementById("dateTxt").innerHTML=DATE_VERSION,document.getElementById("appUpdateDate").innerHTML=DATE_VERSION,document.getElementById("enableAnimations").onchange=function(){p=this.checked},String.prototype.strcmp=function(e){return this==e?0:this>e?1:-1};var m,y=new function(e){var t={};try{e=e||window.localStorage}catch(t){e=null}function n(){try{var t="__some_random_key_you_are_not_going_to_use__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}this.isSupported=function(){return n()},this.clear=function(){n()?e.clear():t={}},this.getItem=function(i){return n()?e.getItem(i):t.hasOwnProperty(i)?t[i]:null},this.key=function(i){return n()?e.key(i):Object.keys(t)[i]||null},this.removeItem=function(i){n()?e.removeItem(i):delete t[i]},this.setItem=function(i,r){n()?e.setItem(i,r):t[i]=String(r)},this.length=function(){return n()?e.length:Object.keys(t).length}};function v(e,t,n){var i,r,o=t;this.pause=function(){window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),o-=Date.now()-r},this.resume=function(){r=Date.now(),window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),i=window.setTimeout(e,o),null!=n&&null!=n.start&&n.start()},this.reset=function(){window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),o=t},this.getTime=function(){return o-(Date.now()-r)}}function E(e){this.interval,this.start=function(){this.interval=setInterval(e,1e3)},this.stop=function(){clearInterval(this.interval)}}function b(e,t){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",g.connect(e,t,(function(e,t,n){if(document.getElementById("connectingToServer").style.display="none",e)T();else if(t==o.Error.AUTHENTICATION_REQUIRED||t==o.Error.BANNED){document.getElementById("authenticationServerContainer").innerHTML="";var r=document.createElement("iframe");r.id="authent_frame",r.src=g.getURL()+"/authentication?lang="+i.language.substr(0,2)+(n?"&id="+n:""),r.classList.add("frame-responsive"),document.getElementById("authenticationServerContainer").appendChild(r),document.getElementById("linkAuthenticationServer").href=g.getURL()+"/authentication?lang="+i.language.substr(0,2)+(n?"&id="+n:""),document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="block"}else alert(i.t("servers.connectionError")),S()}))}function w(){document.getElementById("loadingRoomsOnlineList").style.display="inline-block",document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("refreshRooms").disabled="disabled",document.getElementById("errorRoomJoin").style.display="none",document.getElementById("errorServerVersion").style.display="none",g.displayRooms((function(e,t){if(document.getElementById("roomsOnlineListGroup").innerHTML="",document.getElementById("errorRoomsList").style.display="none",document.getElementById("refreshRooms").disabled="",e)if(null!=t.rooms&&Object.keys(t.rooms).length>0)for(var n=0;n<Object.keys(t.rooms).length;n++){var r=t.rooms[Object.keys(t.rooms)[n]],s=r.code,a=document.createElement("a");a.classList.add("list-group-item"),a.classList.add("list-group-item-action"),a.textContent=i.t("servers.room",{number:n+1})+(null!=r.state?" "+(r.state==o.GameState.SEARCHING_PLAYERS?i.t("servers.searchingPlayers"):r.state==o.GameState.STARTING?i.t("servers.starting"):r.state==o.GameState.STARTED?i.t("servers.started"):""):""),a.onclick=function(){A(s)};var l=document.createElement("div");l.classList.add("small"),l.classList.add("text-muted"),l.textContent=i.t("servers.infos",{width:r.width,height:r.height,speed:r.speed});var c=document.createElement("div");c.classList.add("small"),c.classList.add("text-muted"),c.textContent=r.borderWalls?i.t("servers.infosBorderWalls"):"";var u=document.createElement("div");u.classList.add("small"),u.classList.add("text-muted"),u.textContent=r.generateWalls?i.t("servers.infosGenerateWalls"):"";var h=document.createElement("div");if(h.classList.add("small"),h.classList.add("text-muted"),h.textContent=i.t("servers.infosPlayers",{count:r.players,max:r.maxPlayers}),a.appendChild(l),a.appendChild(c),a.appendChild(u),a.appendChild(h),r.spectators>0){var d=document.createElement("div");d.classList.add("small"),d.classList.add("text-muted"),d.textContent=i.t("servers.infosSpectators",{count:r.spectators}),a.appendChild(d)}document.getElementById("roomsOnlineListGroup").appendChild(a)}else{var p=document.createElement("strong");p.textContent=i.t("servers.noRoomound"),document.getElementById("roomsOnlineListGroup").appendChild(p)}else t==o.Error.AUTHENTICATION_REQUIRED?b(g.url,g.port):document.getElementById("errorRoomsList").style.display="block";null!=t&&null!=t.version&&t.version!=o.Setting.APP_VERSION&&(document.getElementById("errorServerVersion").style.display="block",document.getElementById("errorServerVersionText").textContent=i.t("servers.errorServerVersion",{server_version:t.version,client_version:o.Setting.APP_VERSION})),document.getElementById("loadingRoomsOnlineList").style.display="none",document.getElementById("serverAddress").textContent=g.url+(null!=g.port&&""!=g.port.trim()?":"+g.port:"")}))}function A(e){document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="block",document.getElementById("authenticationServer").style.display="none",document.getElementById("errorRoomJoin").style.display="none",g.joinRoom(e,(function(t){if(document.getElementById("roomsOnlineJoin").style.display="none",t.success){var n=new u(null,document.getElementById("gameContainer"),null,null,!!f,null,!p),r=g.getGame(n);r.init(),document.getElementById("gameContainer").style.display="block",document.getElementById("titleGame").innerHTML=i.t("game.currentMode")+" "+i.t("menu.onlineBattleRoyale"),document.getElementById("gameOrder").textContent=i.t("servers.roomCode")+" "+e,document.getElementById("gameStatus").textContent="",document.getElementById("gameStatusError").textContent="",null!=n.canvas&&n.canvas.scrollIntoView(),r.onExit((function(){g.stopGame(),T()})),r.onKill((function(){g.stopGame(),T()})),document.getElementById("backToMenuGame").onclick=function(){confirm(i.t("game.confirmQuit"))&&(g.stopGame(),T(),group=null)}}else{var s="";switch(t.errorCode){case o.Error.ROOM_NOT_FOUND:s=i.t("servers.errorRoomJoinReason_roomNotFound");break;case o.Error.ROOM_ALREADY_JOINED:s=i.t("servers.errorRoomJoinReason_roomAlreadyJoined");break;case o.Error.ALREADY_CREATED_ROOM:s=i.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:s=i.t("servers.errorReason_unknown")}document.getElementById("errorRoomJoinReason").textContent=s,document.getElementById("errorRoomJoin").style.display="block",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block"}}))}function k(e){(d=e)==SOLO_PLAYER?document.getElementById("iaSettings").style.display="none":document.getElementById("iaSettings").style.display="block",d==SOLO_AI?document.getElementById("autoRetrySettings").style.display="block":document.getElementById("autoRetrySettings").style.display="none",d==BATTLE_ROYALE?document.getElementById("numberIASettings").style.display="block":document.getElementById("numberIASettings").style.display="none",d==PLAYER_VS_AI||d==AI_VS_AI||d==BATTLE_ROYALE?document.getElementById("sameGridDiv").style.display="block":document.getElementById("sameGridDiv").style.display="none",d==SOLO_AI||d==SOLO_PLAYER?document.getElementById("mazeGridDiv").style.display="block":document.getElementById("mazeGridDiv").style.display="none",d==BATTLE_ROYALE_ONLINE?(document.getElementById("sameGridDiv").style.display="none",document.getElementById("mazeGridDiv").style.display="none",document.getElementById("iaSettings").style.display="none",document.getElementById("autoRetrySettings").style.display="none",document.getElementById("progressiveSpeedDiv").style.display="none",document.getElementById("privateGameDiv").style.display="block"):(document.getElementById("progressiveSpeedDiv").style.display="block",document.getElementById("privateGameDiv").style.display="none"),document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("settings").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",R(),C(),_(),O(),x(),P(!1),d==BATTLE_ROYALE_ONLINE?document.getElementById("backToMenu").onclick=function(){T()}:document.getElementById("backToMenu").onclick=function(){I()}}function I(){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("menu").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none"}function S(){k(BATTLE_ROYALE_ONLINE),document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="block",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",function(){var e=document.createElement("script");e.src=SERVERS_LIST_URI,document.getElementsByTagName("head")[0].appendChild(e),document.getElementById("loadingServersList").style.display="inline-block",document.getElementById("serverListGroup").innerHTML=""}()}function T(){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="block",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",w()}function L(e){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="block",document.getElementById("gameContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",e==PLAYER_HUMAN?(document.getElementById("titleLevelList").innerHTML=i.t("levels.titlePlayer"),document.getElementById("levelListDefault").innerHTML=Y(PLAYER_HUMAN,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="none",document.getElementById("levelListDownloadPlayer").style.display="block",document.getElementById("levelListDownloadPlayer").innerHTML=Y(PLAYER_HUMAN,DOWNLOADED_LEVEL)):e==PLAYER_AI&&(document.getElementById("titleLevelList").innerHTML=i.t("levels.titleAI"),document.getElementById("levelListDefault").innerHTML=Y(PLAYER_AI,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="block",document.getElementById("levelListDownloadPlayer").style.display="none",document.getElementById("levelListDownloadAI").innerHTML=Y(PLAYER_AI,DOWNLOADED_LEVEL))}function R(){!document.getElementById("sameGrid").checked||d!=PLAYER_VS_AI&&d!=AI_VS_AI&&d!=BATTLE_ROYALE?(document.getElementById("progressiveSpeed").disabled=!1,document.getElementById("autoRetry").disabled=!1):(document.getElementById("progressiveSpeed").checked=!1,document.getElementById("progressiveSpeed").disabled=!0,document.getElementById("autoRetry").checked=!1,document.getElementById("autoRetry").disabled=!0)}function C(){"custom"==document.getElementById("gameSpeed").value?document.getElementById("customSpeedSettings").style.display="block":document.getElementById("customSpeedSettings").style.display="none"}function _(){d==SOLO_PLAYER||d==PLAYER_VS_AI||d==BATTLE_ROYALE&&document.getElementById("battleAgainstAIs").checked?document.getElementById("playerSettings").style.display="block":document.getElementById("playerSettings").style.display="none"}function x(){!document.getElementById("mazeGrid").checked||d!=SOLO_AI&&d!=SOLO_PLAYER?(document.getElementById("borderWalls").disabled=!1,document.getElementById("generateWalls").disabled=!1,document.getElementById("aiAssistant").disabled=!1):(document.getElementById("borderWalls").checked=!1,document.getElementById("borderWalls").disabled=!0,document.getElementById("generateWalls").checked=!1,document.getElementById("generateWalls").disabled=!0,document.getElementById("aiAssistant").checked=!1,document.getElementById("aiAssistant").disabled=!0)}function O(){if(document.getElementById("possibleFailInitGame").style.display="none",B(!0)){var e=document.getElementById("heightGrid").value,t=document.getElementById("widthGrid").value,n=document.getElementById("borderWalls").checked,i=document.getElementById("generateWalls").checked,r=document.getElementById("sameGrid").checked,o=document.getElementById("numberIA").value,s=document.getElementById("battleAgainstAIs").checked,a=1;d==PLAYER_VS_AI||d==AI_VS_AI?r&&(a=2):d==BATTLE_ROYALE&&r&&(a=s?parseInt(o)+1:o),function(e,t,n,i,r){var o=(e=parseInt(e))*(t=parseInt(t));return n&&(o-=2*(t+e)-4),i&&(o-=n?e*t*.1:e*t*.1675),!(o>=5*r)}(e,t,n,i,a)&&(document.getElementById("possibleFailInitGame").style.display="block")}}function P(e){document.getElementById("invalidHeight").style.display="none",document.getElementById("invalidWidth").style.display="none",document.getElementById("heightGrid").classList.remove("is-invalid"),document.getElementById("widthGrid").classList.remove("is-invalid"),document.getElementById("gameSpeed").classList.remove("is-invalid"),document.getElementById("invalidSpeed").style.display="none",document.getElementById("customSpeed").classList.remove("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="none",document.getElementById("aiLevel").classList.remove("is-invalid"),document.getElementById("invalidaiLevel").style.display="none",document.getElementById("numberIA").classList.remove("is-invalid"),document.getElementById("invalidIANumber").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",e&&(document.getElementById("heightGrid").value=20,document.getElementById("widthGrid").value=20,document.getElementById("borderWalls").checked=!1,document.getElementById("generateWalls").checked=!1,document.getElementById("mazeGrid").checked=!1,document.getElementById("sameGrid").checked=!0,document.getElementById("gameSpeed").value=8,document.getElementById("progressiveSpeed").checked=!1,document.getElementById("customSpeed").value=8,document.getElementById("customSpeedSettings").style.display="none",document.getElementById("aiLevel").value="normal",document.getElementById("autoRetry").checked=!1,document.getElementById("numberIA").value=20,document.getElementById("battleAgainstAIs").checked=!1,document.getElementById("aiAssistant").checked=!1,document.getElementById("privateGame").checked=!1),R(),C(),_(),O(),x()}function B(e){e||P(!1);var t=document.getElementById("heightGrid").value,n=document.getElementById("widthGrid").value,c=document.getElementById("borderWalls").checked,u=document.getElementById("generateWalls").checked,m=document.getElementById("mazeGrid").checked,y=document.getElementById("sameGrid").checked,v=document.getElementById("gameSpeed").value,E=document.getElementById("progressiveSpeed").checked,w=document.getElementById("customSpeed").value,k=document.getElementById("aiLevel").value,L=document.getElementById("autoRetry").checked,R=document.getElementById("numberIA").value,C=document.getElementById("battleAgainstAIs").checked,_=5,x=100,O=1,B=100;if(d==BATTLE_ROYALE_ONLINE&&g.serverSettings){var D=g.serverSettings;_=null!=D.minGridSize?D.minGridSize:_,x=null!=D.maxGridSize?D.maxGridSize:x,O=null!=D.minSpeed?D.minSpeed:O,B=null!=D.maxSpeed?D.maxSpeed:B}if(document.getElementById("invalidHeight").textContent=i.t("settings.invalidSize",{min:_,max:x}),document.getElementById("invalidWidth").textContent=i.t("settings.invalidSize",{min:_,max:x}),document.getElementById("invalidSpeed").textContent=i.t("settings.invalidSpeed",{min:O,max:B}),document.getElementById("invalidCustomSpeed").textContent=i.t("settings.invalidSpeed",{min:O,max:B}),document.getElementById("aiAssistant").checked)var M=PLAYER_HYBRID_HUMAN_AI;else M=PLAYER_HUMAN;var F=!0;if(""==t.trim()||isNaN(t)||t<_||t>x?(F=!1,e||(document.getElementById("heightGrid").classList.add("is-invalid"),document.getElementById("invalidHeight").style.display="block")):t=parseInt(t),""==n.trim()||isNaN(n)||n<_||n>x?(F=!1,e||(document.getElementById("widthGrid").classList.add("is-invalid"),document.getElementById("invalidWidth").style.display="block")):n=parseInt(n),"custom"!=v&&(""==v.trim()||isNaN(v)||v<O||v>B)?(F=!1,e||(document.getElementById("gameSpeed").classList.add("is-invalid"),document.getElementById("invalidSpeed").style.display="block")):"custom"!=v&&(v=parseInt(v)),"custom"==v&&(""==w.trim()||isNaN(w)||w<O||w>B)?(F=!1,e||(document.getElementById("customSpeed").classList.add("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="block")):"custom"==v&&(v=parseInt(w)),d!=SOLO_PLAYER&&d!=BATTLE_ROYALE_ONLINE&&"low"!=k&&"normal"!=k&&"high"!=k&&"random"!=k)F=!1,e||(document.getElementById("aiLevel").classList.add("is-invalid"),document.getElementById("invalidaiLevel").style.display="block");else if(d!=SOLO_PLAYER&&d!=BATTLE_ROYALE_ONLINE)switch(k){case"random":k=AI_LEVEL_RANDOM;break;case"low":k=AI_LEVEL_LOW;break;case"normal":k=AI_LEVEL_DEFAULT;break;case"high":k=AI_LEVEL_HIGH;break;case"ultra":k=AI_LEVEL_ULTRA;break;default:k=AI_LEVEL_DEFAULT}if(d==BATTLE_ROYALE&&(""==R.trim()||isNaN(R)||R<2||R>100)?(F=!1,e||(document.getElementById("numberIA").classList.add("is-invalid"),document.getElementById("invalidIANumber").style.display="block")):d==BATTLE_ROYALE&&(R=parseInt(R)),d!=SOLO_AI&&(L=!1),e)return F;if(F)if(document.getElementById("roomsOnlineCreation").style.display="block",document.getElementById("settings").style.display="none",document.getElementById("errorRoomCreation").style.display="none",d==BATTLE_ROYALE_ONLINE)g.createRoom({speed:v,heightGrid:t,widthGrid:n,borderWalls:c,generateWalls:u,customSpeed:w,enableAI:!1,private:document.getElementById("privateGame").checked},(function(e){var t=e.errorCode;if(e.connection_error)t==o.Error.AUTHENTICATION_REQUIRED?b(g.url,g.port):(alert(i.t("servers.connectionError")),S());else if(e.success)A(e.code);else if(t==o.Error.AUTHENTICATION_REQUIRED)b(g.url,g.port);else{var n="";switch(t){case o.Error.INVALID_SETTINGS:n=i.t("servers.errorRoomCreationReason_invalidSettings");break;case o.Error.MAX_ROOM_LIMIT_REACHED:n=i.t("servers.errorRoomCreationReason_maxRoomLimitReached");break;case o.Error.ALREADY_CREATED_ROOM:n=i.t("servers.errorRoomCreationReason_alreadyCreatedRoom");break;default:n=i.t("servers.errorReason_unknown")}document.getElementById("errorRoomCreation").style.display="block",document.getElementById("errorRoomCreationReason").textContent=n,T()}}));else{document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none";var N="";switch(d){case SOLO_AI:N=i.t("menu.soloAi");break;case SOLO_PLAYER:N=i.t("menu.soloPlayer");break;case PLAYER_VS_AI:N=i.t("menu.playerVsAi");break;case AI_VS_AI:N=i.t("menu.aiVsAi");break;case BATTLE_ROYALE:N=i.t("menu.battleRoyale")}document.getElementById("titleGame").innerHTML=i.t("game.currentMode")+" "+N;var U=[];if(d==SOLO_AI){var H=new a(n,t,u,c,m),G=new s(RIGHT,3,H,PLAYER_AI,k,L);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}else if(d==SOLO_PLAYER){H=new a(n,t,u,c,m),G=new s(RIGHT,3,H,M);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}else if(d==PLAYER_VS_AI){H=new a(n,t,u,c),G=new s(RIGHT,3,H,M);if(y){var V=new s(RIGHT,3,H,PLAYER_AI,k,L);U.push(new r(H,[G,V],v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}else{var z=new a(n,t,u,c);V=new s(RIGHT,3,z,PLAYER_AI,k,L);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!1,E,null,null,null,null,!p)),U.push(new r(z,V,v,document.getElementById("gameContainer"),!1,!1,E,null,null,null,null,!p))}}else if(d==AI_VS_AI){H=new a(n,t,u,c),G=new s(RIGHT,3,H,PLAYER_AI,k,L);if(y){V=new s(RIGHT,3,H,PLAYER_AI,k,L);U.push(new r(H,[G,V],v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}else{z=new a(n,t,u,c),V=new s(RIGHT,3,z,PLAYER_AI,k,L);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p)),U.push(new r(z,V,v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}}else if(d==BATTLE_ROYALE)if(y){H=new a(n,t,u,c);var Y=[];C&&Y.push(new s(RIGHT,3,H,M,k,L));for(var j=0;j<R;j++)Y.push(new s(RIGHT,3,H,PLAYER_AI,k,L));U.push(new r(H,Y,v,document.getElementById("gameContainer"),!0,!0,E,null,null,null,null,!p))}else{if(C){H=new a(n,t,u,c),G=new s(RIGHT,3,H,M,k,L);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!1,E,350,250,null,null,!p))}for(j=0;j<R;j++){H=new a(n,t,u,c),G=new s(RIGHT,3,H,PLAYER_AI,k,L);U.push(new r(H,G,v,document.getElementById("gameContainer"),!0,!1,E,350,250,null,null,!p))}}var W=new l(U);W.setDisplayFPS(!!f),W.start(),null!=W.games[0].canvas&&W.games[0].canvas.scrollIntoView(),!m||d!=SOLO_AI&&d!=SOLO_PLAYER||W.setNotification(new h(i.t("engine.mazeMode"),null,"rgba(52, 152, 219, 0.5)",5,null,null,null,!0)),document.getElementById("backToMenuGame").onclick=function(){confirm(i.t("game.confirmQuit"))&&(W.killAll(),I(),W=null)},W.onStop((function(){if(d==PLAYER_VS_AI||d==AI_VS_AI||d==BATTLE_ROYALE&&!W.errorOccurred()){var e="",t=W.getWinners();if(d==PLAYER_VS_AI)2==t.index.length?e=i.t("game.equalityPlayerVSAI"):0==t.index[0]?e=i.t("game.winPlayerVSAI"):1==t.index[0]&&(e=i.t("game.losePlayerVSAI"));else if(d==AI_VS_AI)1==t.index.length?e=i.t("game.oneWinnerAIVSAI",{numWinner:t.index[0]+1}):2==t.index.length&&(e=i.t("game.equalityAIVSAI"));else if(d==BATTLE_ROYALE)if(1==t.index.length)e=C&&0==t.index[0]?i.t("game.playerWinnerBattleRoyale",{score:t.score}):i.t("game.oneWinnerBattleRoyale",{numWinner:C?t.index[0]:t.index[0]+1,score:t.score});else if(C&&2==t.index.length&&0==t.index[0])e=i.t("game.winnerAIBattleRoyale")+" "+i.t("game.winnersNumBattleRoyale",{numWinner:t.index[1]})+" "+i.t("game.andPlayerWinnersBattleRoyale")+" "+i.t("game.winPlayerScoreBattleRoyale",{score:t.score});else if(t.index.length>1){var n=!1;e=i.t("game.winnersBattleRoyale")+" ";for(var r=0;r<t.index.length;r++)if(C&&0==t.index[r])n=!0;else e+=i.t("game.winnersNumBattleRoyale",{numWinner:C?t.index[r]:t.index[r]+1}),r+1<t.index.length-1?e+=", ":r+1==t.index.length-1&&(e=e+" "+i.t("game.andWinnersBattleRoyale")+" ");e=C&&n?e+" "+i.t("game.andPlayerWinnersBattleRoyale")+" "+i.t("game.winPlayerScoreBattleRoyale",{score:t.score}):e+" "+i.t("game.winScoreBattleRoyale",{score:t.score})}""!=e.trim()&&(document.getElementById("gameOrder").innerHTML=e,W.setNotification(new h(e,null,"rgba(52, 152, 219, 0.5)",15,null,null,null,!0)))}})),W.onExit((function(){(d==SOLO_AI||d==SOLO_PLAYER||d==AI_VS_AI||d==PLAYER_VS_AI&&y||d==BATTLE_ROYALE&&y)&&(W.killAll(),I())})),W.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",W.closeNotification()}))}}function D(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)var n=SOLO_PLAYER_SAVE+"defautLevelsSave";else if(e==PLAYER_AI)n=SOLO_AI_SAVE+"defautLevelsSave"}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)n=SOLO_PLAYER_SAVE+"downloadedLevelsSave";else if(e==PLAYER_AI)n=SOLO_AI_SAVE+"downloadedLevelsSave";return n}function M(e,t){null==y.getItem(D(e,t))&&U(e,t,!1);try{return JSON.parse(y.getItem(D(e,t)))}catch(n){return U(e,t,!0),M(e,t)}}function F(e,t,n){return M(t,n)[e]}function N(e,t,n,i){var r=D(n,i),o=M(n,i),s=H(n,i);return null!=o&&(Array.isArray(e)&&e.length>=2&&Array.isArray(o[t])&&o[t].length>=2&&1==o[t][0]&&(s[t].type!=LEVEL_REACH_SCORE_ON_TIME&&s[t].type!=LEVEL_MULTI_REACH_SCORE_FIRST&&s[t].type!=LEVEL_MAZE_WIN?e[1]<o[t][1]&&(e[1]=o[t][1]):e[1]>o[t][1]&&(e[1]=o[t][1])),o[t]=e,y.setItem(r,JSON.stringify(o)),!0)}function U(e,t,n){if("undefined"!=typeof Storage){var i=D(e,t);return(null==y.getItem(i)||n)&&(y.setItem(i,JSON.stringify({version:o.Setting.APP_VERSION})),N([!1,0],1,e,t)),!1}return!1}function H(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return DEFAULT_LEVELS_SOLO_PLAYER;if(e==PLAYER_AI)return DEFAULT_LEVELS_SOLO_AI}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)try{return JSON.parse(y.getItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO))}catch(e){return null}else if(e==PLAYER_AI)try{return JSON.parse(y.getItem(SOLO_AI_DOWNLOAD_LEVELS_TO))}catch(e){return null}return null}function G(e,t,n){var i=!0,r=H(t,n);if(null==r)return!1;for(var o=1;o<e;o++){var s=F(o,t,n);(null==s||!s[0]&&V(r[o].type,r[o].version))&&(i=!1)}return i}function V(e,t){return!(e!=LEVEL_REACH_SCORE&&e!=LEVEL_REACH_MAX_SCORE&&e!=LEVEL_MULTI_BEST_SCORE&&e!=LEVEL_REACH_SCORE_ON_TIME&&e!=LEVEL_MULTI_REACH_SCORE_FIRST&&e!=LEVEL_MAZE_WIN||o.Setting.APP_VERSION.strcmp(t)<0)}function z(e,t,n,r,o){var s,a="";return null==(s=F(e,t,r))||(s=s[1])<=0?"":(o?n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?a=i.t("levels.bestScoreShort",{count:s}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(a=i.t("levels.bestTimeShort",{count:Math.round(s)})):n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?a=i.t("levels.bestScore",{count:s}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(a=i.t("levels.bestTime",{count:Math.round(s)})),a)}function Y(e,t){var n=H(e,t),r="";if(t==DOWNLOADED_LEVEL&&(r+='<div class="row mb-3"><div class="col text-center"><button class="btn btn-lg btn-warning" onclick="downloadLevels('+e+', this);"><span class="fui-plus-circle"></span>&nbsp; '+i.t("levels.download")+'</button><br /><a href="#null" onclick="editDownloadURL();" class="small"><span class="fui-new"></span>&nbsp; '+i.t("levels.editDownloadURL")+"</a></div></div>"),null==n)return r+"<strong>"+i.t("levels.emptyList")+"</strong>";var o=1,s=!0;for(var a in n){if(n.hasOwnProperty(a)){if(G(a,e,t))if(V(n[a].type,n[a].version))l='<button class="btn btn-lg btn-primary btn-block-85" onclick="playLevel('+a+", "+e+", "+t+');" '+(""!=z(a,e,n[a].type,t).trim()?'aria-label="'+z(a,e,n[a].type,t)+'" data-balloon-length="fit" data-balloon-pos="up"':"")+">"+i.t("levels.level")+" "+o+"</button>";else var l='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+i.t("levels.notCompatible")+'" data-balloon-length="fit" data-balloon-pos="up">'+i.t("levels.level")+" "+o+"</button>";else var l='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+i.t("levels.disabledLevel")+'" data-balloon-length="fit" data-balloon-pos="up">'+i.t("levels.level")+" "+o+"</button>";1==o&&(r+='<div class="row mb-2">'),r+=o%2==0?'<div class="col pl-0 justify-content-center">'+l+'</div></div><div class="row mb-2">':'<div class="col pr-0 justify-content-center">'+l+"</div>",s=!1}o++}return s?r+"<strong>"+i.t("levels.emptyList")+"</strong>":(o%2==0&&(r+='<div class="col pr-0 justify-content-center"></div>'),r+"</div>")}function j(){!function(e){if(null!=e){document.getElementById("languageSelect").disabled=!0,document.getElementById("languageSelect").innerHTML="";for(var t=0;t<e.length;t++)document.getElementById("languageSelect").innerHTML=document.getElementById("languageSelect").innerHTML+'<option data-i18n="lang.'+e[t]+'" value="'+e[t]+'"></option>';document.getElementById("languageSelect").value=i.language.substr(0,2),document.getElementById("languageSelect").disabled=!1}}(i.languages);for(var e=document.querySelectorAll("[data-i18n]"),t=0,n=e.length;t<n;t++)e[t].innerHTML=i.t(e[t].dataset.i18n);document.getElementById("dateTxt").innerHTML=i.t("menu.versionDate",{date:new Intl.DateTimeFormat(i.language.substr(0,2)).format(new Date(DATE_VERSION))}),document.getElementById("heightGrid").placeholder=i.t("settings.placeholderHeight"),document.getElementById("widthGrid").placeholder=i.t("settings.placeholderWidth"),document.getElementById("customSpeed").placeholder=i.t("settings.placeholderCustomSpeed"),document.getElementById("numberIA").placeholder=i.t("settings.placeholderNumberIA"),document.getElementById("appDownloadURLGet").setAttribute("aria-label",i.t("update.getURL")),document.getElementById("appUpdateChanges").setAttribute("aria-label",i.t("update.getChanges")),document.getElementById("appUpdateDateLocalized").innerHTML=i.t("update.versionDate",{date:new Intl.DateTimeFormat(i.language.substr(0,2)).format(new Date(document.getElementById("appUpdateDate").innerHTML))}),document.getElementById("aiAssistantInfos").setAttribute("aria-label",i.t("settings.aiAssistantInfos"))}y.isSupported()||(document.getElementById("localstorageDisabled").style.display="block"),window.enableDebugMode=function(){f=!0,console.log(i.t("debugModeEnabled"))},window.updateCallback=function(e){if(null!=e&&void 0!==e.version&&null!==e.version&&o.Setting.APP_VERSION.strcmp(e.version)<0){document.getElementById("updateAvailable").style.display="block",document.getElementById("appUpdateVersion").textContent=e.version;var t=DATE_VERSION;if(void 0!==e.date&&null!==e.date)t=e.date;document.getElementById("appUpdateDate").textContent=t;var n="http://eliastiksofts.com/snakeia/downloads/index.php";if(void 0!==e.url&&null!==e.url)n=e.url;document.getElementById("appDownloadLink").onclick=function(){window.open(n,"_blank")},document.getElementById("appDownloadURLGet").onclick=function(){prompt(i.t("update.URLToDownload"),n)};var r=i.t("update.noChanges");if(void 0!==e.changes&&null!==e.changes)r=e.changes;document.getElementById("appUpdateChanges").onclick=function(){alert(i.t("update.changes")+"\n"+r)},j()}},(m=document.createElement("script")).src=UPDATER_URI,document.getElementsByTagName("head")[0].appendChild(m),window.listServersCallback=function(e){if(document.getElementById("serverListGroup").innerHTML="",null!=e&&e.length>0){for(var t=0;t<e.length;t++)if(null!=e[t].url){var n=e[t].url,r=e[t].port,o=e[t].name,s=document.createElement("a");s.classList.add("list-group-item"),s.classList.add("list-group-item-action"),s.textContent=null!=o?o:i.t("servers.untitled"),s.onclick=function(e,t){return function(){b(e,t)}}(n,r);var a=document.createElement("div");a.classList.add("small"),a.classList.add("text-muted"),null!=r&&""!=r.trim()?a.textContent=n+":"+r:a.textContent=n,s.appendChild(a),document.getElementById("serverListGroup").appendChild(s)}}else{var l=document.createElement("strong");l.textContent=i.t("servers.noServerFound"),document.getElementById("serverListGroup").appendChild(l)}document.getElementById("loadingServersList").style.display="none"},document.getElementById("linkCustomServer").onclick=function(){var e=prompt(i.t("servers.enterCustomServer"),"http://");null!=e&&""!=e.trim()&&b(e)},document.getElementById("cancelConnectingToServer").onclick=function(){document.getElementById("connectingToServer").style.display="none",g.disconnect(),S()},document.getElementById("cancelAuthenticationToServer").onclick=function(){document.getElementById("authenticationServerContainer").innerHTML="",document.getElementById("connectingToServer").style.display="none",g.disconnect(),S()},document.getElementById("refreshRooms").onclick=function(){w()},document.getElementById("joinPrivateRoom").onclick=function(){var e=prompt(i.t("servers.enterCode"));null!=e&&A(e)},document.getElementById("soloAi").onclick=function(){k(SOLO_AI)},document.getElementById("soloPlayer").onclick=function(){k(SOLO_PLAYER)},document.getElementById("playerVsAi").onclick=function(){k(PLAYER_VS_AI)},document.getElementById("aiVsAi").onclick=function(){k(AI_VS_AI)},document.getElementById("battleRoyale").onclick=function(){k(BATTLE_ROYALE)},document.getElementById("createRoom").onclick=function(){k(BATTLE_ROYALE_ONLINE)},document.getElementById("backToMenu").onclick=function(){I()},document.getElementById("backToMenuLevelList").onclick=function(){I()},document.getElementById("backToMenuServerList").onclick=function(){g.disconnect(),I()},document.getElementById("onlineBattleRoyale").onclick=function(){S()},document.getElementById("backToServersRoomsList").onclick=function(){g.disconnect(),S()},document.getElementById("levelsSoloPlayer").onclick=function(){L(PLAYER_HUMAN)},document.getElementById("levelsSoloAI").onclick=function(){L(PLAYER_AI)},document.getElementById("gameSpeed").onchange=function(){C()},document.getElementById("heightGrid").onchange=function(){O()},document.getElementById("widthGrid").onchange=function(){O()},document.getElementById("borderWalls").onchange=function(){O()},document.getElementById("generateWalls").onchange=function(){O()},document.getElementById("sameGrid").onchange=function(){R(),C(),O()},document.getElementById("numberIA").onchange=function(){O()},document.getElementById("battleAgainstAIs").onchange=function(){_(),O()},document.getElementById("mazeGrid").onchange=function(){x()},document.getElementById("resetSettings").onclick=function(){P(!0)},document.getElementById("validateSettings").onclick=function(){B()},window.playLevel=function(e,t,n){var o=H(t,n);if(null==o)return!1;if(null==o[e])return!1;{var c=o[e],u=c.settings,d=c.type,g=c.typeValue,m=c.version;if(!V(d,m))return alert(i.t("levels.notCompatible")),!1;if(!G(e,t,n))return alert(i.t("levels.disabledLevel")),!1;var y=u[0],b=u[1],w=u[2],A=u[3],k=u[4],I=u[5],S=u[6],T=u[7],R=u[8],C=u[9],_=u[10],x=u[11],O=[],P=new a(b,y,A,w,C,_,x);if(t==PLAYER_AI)var B=new s(RIGHT,3,P,t,AI_LEVEL_HIGH);else if(t==PLAYER_HUMAN)B=new s(RIGHT,3,P,t);if(k){for(var D=[B],M=0;M<R;M++)D.push(new s(RIGHT,3,P,PLAYER_AI,T));var F=new r(P,D,I,document.getElementById("gameContainer"),!0,!0,S,null,null,null,null,!p);O.push(F)}else{if(R+1<=2)var U=null,Y=null;else U=350,Y=250;F=new r(P,B,I,document.getElementById("gameContainer"),!0,!0,S,U,Y,null,null,!p);O.push(F);for(M=0;M<R;M++){P=new a(b,y,A,w);var j=new s(RIGHT,3,P,PLAYER_AI,T,!1);O.push(new r(P,j,I,document.getElementById("gameContainer"),!1,!1,S,U,Y,null,null,!p))}}document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("serverListContainer").style.display="none",document.getElementById("roomsOnlineListContainer").style.display="none",document.getElementById("roomsOnlineCreation").style.display="none",document.getElementById("errorRoomCreation").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("connectingToServer").style.display="none",document.getElementById("roomsOnlineJoin").style.display="none",document.getElementById("authenticationServer").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",document.getElementById("titleGame").innerHTML=i.t("levels.level")+" "+e;var W=new l(O);W.setDisplayFPS(!!f),W.start(),W.closeRanking(),document.getElementById("gameOrder").scrollIntoView();var q,K,J=new v(null,0),X=!1,Q=!1,Z="rgba(231, 76, 60, 0.5)";function $(){F.setBestScore(z(e,t,d,n,!0)),d==LEVEL_REACH_SCORE?K=i.t("levels.reachScore",{value:g}):d==LEVEL_REACH_SCORE_ON_TIME?(K=i.t("levels.reachScoreTime",{value:g[0],count:g[1]}),document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:g[1]}),F.setTimeToDisplay(g[1])):d==LEVEL_REACH_MAX_SCORE?K=i.t("levels.reachMaxScore"):d==LEVEL_MULTI_BEST_SCORE?K=i.t("levels.multiBestScore",{count:R}):d==LEVEL_MULTI_REACH_SCORE_FIRST?K=i.t("levels.multiReachScoreFirst",{value:g,count:R}):d==LEVEL_MAZE_WIN&&(K=i.t("levels.mazeMode",{value:g,count:R})),document.getElementById("gameOrder").innerHTML=K.replace("\n","<br />")}document.getElementById("backToMenuGame").onclick=function(){confirm(i.t("game.confirmQuit"))&&(J.pause(),W.killAll(),L(t),W=null)},function(){if(d==LEVEL_REACH_SCORE)F.onScoreIncreased((function(){F.snakes[0].score>=g&&(N([!0,F.snakes[0].score],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"))),X=!0))})),F.onStop((function(){F.snakes[0].score<g&&(X||(F.setNotification(new h(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),X=!0))}));else if(d==LEVEL_REACH_SCORE_ON_TIME)J=new v((function(){F.setTimeToDisplay(0),document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:0}),X||(F.setNotification(new h(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),X=!0),W.stopAll(!0)}),1e3*g[1]-1,new E((function(){document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:Math.round(J.getTime()/1e3)}),F.setTimeToDisplay(Math.round(J.getTime()/1e3))}))),F.onStart((function(){J.resume()})),F.onPause((function(){J.pause()})),F.onReset((function(){J.reset()})),F.onStop((function(){J.pause()})),F.onScoreIncreased((function(){if(F.snakes[0].score>=g[0]){var r=1e3*g[1]-J.getTime();J.reset(),W.stopAll(!0),N([!0,r/1e3],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),X=!0)}}));else if(d==LEVEL_REACH_MAX_SCORE)F.onStop((function(){F.scoreMax?(N([!0,F.snakes[0].score],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),X=!0)):X||(F.setNotification(new h(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),X=!0)}));else if(d==LEVEL_MULTI_BEST_SCORE)W.onStop((function(){for(var r=W.getWinners(),o=!1,s=0;s<r.winners.length;s++)r.winners[s]==F.snakes[0]&&(o=!0,N([!0,F.snakes[0].score],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),X=!0));o||X||(F.setNotification(new h(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),X=!0)}));else if(d==LEVEL_MULTI_REACH_SCORE_FIRST){var r=0,o=new E((function(){r++}));F.onStart((function(){o.start()})),F.onPause((function(){o.stop()})),F.onReset((function(){r=0,o.stop()})),F.onStop((function(){o.stop()})),W.onScoreIncreased((function(){for(var o=0;o<W.games.length;o++)for(var s=0;s<W.games[o].snakes.length;s++)W.games[o].snakes[s].score>=g&&(W.games[o].snakes[s]==F.snakes[0]?(W.stopAll(!0),N([!0,r],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),X=!0)):(W.stopAll(!0),X||(F.setNotification(new h(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),X=!0)))}))}else if(d==LEVEL_MAZE_WIN){r=0,o=new E((function(){r++}));F.onStart((function(){o.start()})),F.onPause((function(){o.stop()})),F.onReset((function(){r=0,o.stop()})),F.onStop((function(){o.stop()})),F.onScoreIncreased((function(){F.snakes[0].score>=1&&(N([!0,r],e,t,n),F.setBestScore(z(e,t,d,n,!0)),X||(F.setNotification(new h(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),X=!0))}))}}(),$(),W.onExit((function(){J.pause(),W.killAll(),L(t)})),W.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",X=!1,Q=!1,$()})),F.onStart((function(){X||Q||(q=new h(K,null,"rgba(52, 152, 219, 0.5)",10),F.setNotification(q),Q=!0)}))}},window.editDownloadURL=function(){var e=window.prompt(i.t("levels.editDownloadURLPrompt"),DOWNLOAD_DEFAULT_URI);null!=e&&(DOWNLOAD_DEFAULT_URI=e)},window.downloadLevels=function(e,t){var n=DOWNLOAD_DEFAULT_URI;n=(n=n.replace("{player}",e)).replace("{appVersion}",o.Setting.APP_VERSION);var r=document.createElement("script");r.src=n;var s=!1;window.callbackDownloadLevels=function(e,t){s||(e==PLAYER_HUMAN?y.setItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO,JSON.stringify(t)):e==PLAYER_AI&&y.setItem(SOLO_AI_DOWNLOAD_LEVELS_TO,JSON.stringify(t)),L(e)),document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML=""},t.disabled=!0;var a=document.createElement("button");a.classList="btn btn-lg btn-warning",a.innerHTML=i.t("levels.buttonDeblock"),document.getElementById("levelDownloading").innerHTML="<strong>"+i.t("levels.downloading")+"</strong>",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].appendChild(r),a.onclick=function(){s=!0,function(e,t){e.disabled=!1,t.src=null,document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].removeChild(t)}(t,r)},document.getElementById("btnDeblockDiv").appendChild(a)},document.getElementById("languageSelect").onchange=function(){i.changeLanguage(document.getElementById("languageSelect").value,(function(e,t){j()}))},window.addEventListener("load",(function(){setTimeout((function(){j()}),250)})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},function(e,t,n){var i=n(0),r=n(8).Utils,o=n(1);function s(e,t,n,r,o){this.snakes=e,this.fontSize=t||Math.floor(i.Setting.FONT_SIZE/1.25),this.fontFamily=n||i.Setting.FONT_FAMILY,this.backgroundColor=null==o?"rgba(44, 62, 80, 0.75)":o,this.headerHeight=null==r?i.Setting.HEADER_HEIGHT_DEFAULT:r,this.closed=null!=this.closed&&this.closed,this.closing=null!=this.closing&&this.closing,this.opening=null!=this.opening&&this.opening,this.forceClosing=null!=this.forceClosing&&this.forceClosing,this.overflow=null!=this.overflow&&this.overflow,this.back=null!=this.back&&this.back,this.timeLastFrame=null==this.timeLastFrame?Date.now():this.timeLastFrame,this.offsetX=null==this.offsetX?0:this.offsetX,this.offsetY=null==this.offsetY?0:this.offsetY,this.totalTimeX=null==this.totalTimeX?0:this.totalTimeX,this.totalTime=null==this.totalTime?0:this.totalTime}s.prototype.draw=function(e,t,n){if(null==this.snakes||this.closed)this.overflow=!1,this.back=!1,this.timeLastFrame=Date.now(),this.offsetY=0,this.totalTime=0;else{var s=t.imageLoader,a=e.canvas;e.save();var l=o.t("engine.ranking"),c=e.measureText(l).width,u=[],h=0,d=0;e.font=this.fontSize/1.5+"px "+this.fontFamily;for(var p=e.measureText(""+this.snakes.length).width+15,f=0;f<this.snakes.length;f++){var g=this.snakes[f];g.player==i.PlayerType.HUMAN||g.player==i.PlayerType.HYBRID_HUMAN_AI?h++:d++;var m=g.name+" Ã— "+g.score+" ("+(n==f?o.t("engine.playerHuman"):this.snakes[f].player==i.PlayerType.HUMAN||this.snakes[f].player==i.PlayerType.HYBRID_HUMAN_AI?o.t("engine.playerMin")+h:o.t("engine.aiMin")+d)+")",y=e.measureText(m).width+30;y>c&&(c=y),u[f]={username:g.name,score:g.score,gameOver:g.gameOver,text:m,rank:0,id:f},k=g.score}var v=c+p+15,E=a.height-this.headerHeight;e.fillStyle="rgba(75, 75, 75, 0.35)",e.fillRect(-this.offsetX,this.headerHeight,v,E),e.font=this.fontSize+"px "+this.fontFamily;var b=this.headerHeight+this.fontSize-this.offsetY;b-this.fontSize>=this.headerHeight&&r.drawText(e,o.t("engine.ranking"),"rgba(255, 255, 255, 0.5)",this.fontSize,this.fontFamily,"default",null,v/2-e.measureText(l).width/2-this.offsetX,b,!1,!0);var w=u.sort((function(e,t){return t.score-e.score})),A=0,k=0;for(f=0;f<w.length;f++)w[f].score<k&&A++,w[f].rank=A,k=w[f].score;var I=b+this.fontSize/1.5;this.overflow=!1;var S=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now();for(f=0;f<w.length;f++){if(I>this.headerHeight){if(w[f].rank>=0&&w[f].rank<3&&w[f].score>0)switch(w[f].rank){case 0:r.drawImage(e,s.get("assets/images/trophy.png"),5-this.offsetX,I,this.fontSize,this.fontSize);break;case 1:r.drawImage(e,s.get("assets/images/trophy_silver.png"),5-this.offsetX,I,this.fontSize,this.fontSize);break;case 2:r.drawImage(e,s.get("assets/images/trophy_bronze.png"),5-this.offsetX,I,this.fontSize,this.fontSize)}else r.drawText(e,""+(w[f].rank+1),"rgba(255, 255, 255, 0.5)",this.fontSize/1.5,this.fontFamily,null,null,this.fontSize/1.5/2+5-this.offsetX,I+this.fontSize/1.5);r.drawText(e,w[f].text,w[f].gameOver?"rgba(231, 76, 60, 0.5)":"rgba(255, 255, 255, 0.5)",this.fontSize/1.5,this.fontFamily,null,null,5+p+this.fontSize/1.5-this.offsetX,I+this.fontSize/1.5)}if((I+=this.fontSize+5)>a.height&&!this.back){this.totalTime+=S,this.totalTime>5e3&&(this.overflow=!0);break}f==this.snakes.length-1&&(this.back||(this.totalTime=0),this.back=!0)}this.back?(this.totalTime+=S,this.totalTime>5e3&&(this.offsetY>0?this.offsetY-=S/20:(this.back=!1,this.totalTime=0))):this.overflow&&(this.offsetY+=S/20),t.disableAnimation&&this.closing?(this.closing=!1,this.closed=!0):t.disableAnimation&&this.closing?(this.opening=!1,this.closed=!1):this.closing?(this.forceClosing?this.offsetX=v:this.offsetX+=S/3,this.offsetX>=v&&(this.closing=!1,this.closed=!0,this.forceClosing=!1)):this.opening&&(this.offsetX-=S/3,this.offsetX<=0&&(this.offsetX=0,this.opening=!1,this.closed=!1)),e.restore()}},s.prototype.close=function(){this.closing=!0,this.opening=!1,this.forceClosing=!1},s.prototype.forceClose=function(){this.closing=!0,this.opening=!1,this.forceClosing=!0},s.prototype.open=function(){this.closing=!1,this.opening=!0,this.closed=!1,this.forceClosing=!1},s.prototype.set=function(e,t,n){s.apply(this,[e,t,null,n])},e.exports=s},function(e,t,n){(function(t){
/*!
 * Socket.IO v2.3.0
 * (c) 2014-2019 Guillermo Rauch
 * Released under the MIT License.
 */
e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,c=i.id,u=i.path,h=l[c]&&u in l[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||h?(a("ignoring socket cache for %s",o),n=s(o,t)):(l[c]||(a("new io instance for %s",o),l[c]=s(o,t)),n=l[c]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}var r=n(1),o=n(7),s=n(15),a=n(3)("socket.io-client");e.exports=t=i;var l=t.managers={};t.protocol=o.protocol,t.connect=i,t.Manager=n(15),t.Socket=n(39)},function(e,t,n){var i=n(2),r=n(3)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=n.exec(e||""),a={},l=14;l--;)a[i[l]]=s[l]||"";return-1!=r&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){(function(i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))})),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(5)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){f&&d&&(f=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!f){var e=r(o);f=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,u,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var d,p=[],f=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||f||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){function n(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(n.enabled){var s=n,a=Number(new Date),l=a-(i||a);s.diff=l,s.prev=i,s.curr=a,i=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;c++;var i=r.formatters[n];if("function"==typeof i){var o=t[c];e=i.call(s,o),t.splice(c,1),c--}return e})),r.formatArgs.call(s,t);var u=s.log||r.log;u.apply(s,t)}}var i=void 0;return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=t(e),n.destroy=o,n.extend=s,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function s(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat(i(r.names.map(a)),i(r.skips.map(a).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t=void 0,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(6),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){function n(e){var t=Math.abs(e);return t>=a?i(e,t,a,"day"):t>=s?i(e,t,s,"hour"):t>=o?i(e,t,o,"minute"):t>=r?i(e,t,r,"second"):e+" ms"}function i(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}var r=1e3,o=60*r,s=60*o,a=24*s,l=7*a,c=365.25*a;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*l;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&isFinite(e))return t.long?n(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=s?Math.round(e/s)+"h":t>=o?Math.round(e/o)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function i(){}function r(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return f;n+=i}return c("encoded %j as %s",e,n),n}function o(){this.reconstructor=null}function s(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return l("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var r="";"-"!==e.charAt(++n)&&(r+=e.charAt(n),n!=e.length););if(r!=Number(r)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(r)}if("/"===e.charAt(n+1))for(i.nsp="";++n&&","!==(s=e.charAt(n))&&(i.nsp+=s,n!==e.length););else i.nsp="/";var o=e.charAt(n+1);if(""!==o&&Number(o)==o){for(i.id="";++n;){var s;if(null==(s=e.charAt(n))||Number(s)!=s){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var a=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!1===a||i.type!==t.ERROR&&!d(a))return l("invalid payload");i.data=a}return c("decoded %s as %j",e,i),i}function a(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:t.ERROR,data:"parser error: "+e}}var c=n(8)("socket.io-parser"),u=n(11),h=n(12),d=n(13),p=n(14);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=i,t.Decoder=o;var f=t.ERROR+'"encode error"';i.prototype.encode=function(e,n){c("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){h.removeBlobs(e,(function(e){var n=h.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}))}(e,n):n([r(e)])},u(o.prototype),o.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new a(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(i){"use strict";function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(t=e.exports=n(9)).log=function(){return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),e.splice(o,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(t,n(4))},function(e,t,n){"use strict";function i(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;l++;var r=t.formatters[i];if("function"==typeof r){var o=s[l];n=r.call(e,o),s.splice(l,1),l--}return n})),t.formatArgs.call(e,s);var c=n.log||t.log||console.log.bind(console);c.apply(e,s)}}var i;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),n.destroy=r,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(10),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){return i(e,a,"day")||i(e,s,"hour")||i(e,o,"minute")||i(e,r,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var r=1e3,o=60*r,s=60*o,a=24*s,l=365.25*a;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?n(e):function(e){return e>=a?Math.round(e/a)+"d":e>=s?Math.round(e/s)+"h":e>=o?Math.round(e/o)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,r=0;r<n.length;r++)if((i=n[r])===t||i.fn===t){n.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var i=n(13),r=n(14),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=function e(t,n){if(!t)return t;if(r(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(i(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],n);return s}if("object"==typeof t&&!(t instanceof Date)){for(var l in s={},t)s[l]=e(t[l],n);return s}return t}(n,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(i(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;(function e(l,c,u){if(!l)return l;if(s&&l instanceof Blob||a&&l instanceof File){n++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:o=this.result,--n||t(o)},h.readAsArrayBuffer(l)}else if(i(l))for(var d=0;d<l.length;d++)e(l[d],d,l);else if("object"==typeof l&&!r(l))for(var p in l)e(l[p],p,l)})(o),n||t(o)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,n){e.exports=function(e){return i&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||o(e))};var i="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer,o=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}},function(e,t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var r=n(16),o=n(39),s=n(11),a=n(7),l=n(41),c=n(42),u=n(3)("socket.io-client:manager"),h=n(38),d=n(43),p=Object.prototype.hasOwnProperty;e.exports=i,i.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},i.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=l(n,"open",(function(){i.onopen(),e&&e()})),s=l(n,"error",(function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var c=setTimeout((function(){u("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",a)}),a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(e,"ping",c(this,"onping"))),this.subs.push(l(e,"pong",c(this,"onpong"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},i.prototype.socket=function(e,t){function n(){~h(r.connecting,i)||r.connecting.push(i)}var i=this.nsps[e];if(!i){i=new o(this,e,t),this.nsps[e]=i;var r=this;i.on("connecting",n),i.on("connect",(function(){i.id=r.generateId(e)})),this.autoConnect&&n()}return i},i.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},i.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()})))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(17),e.exports.parser=n(24)},function(e,t,n){function i(e,t){return this instanceof i?(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new i(e,t)}var r=n(18),o=n(11),s=n(3)("engine.io-client:socket"),a=n(38),l=n(24),c=n(2),u=n(32);e.exports=i,i.priorWebsocketSuccess=!1,o(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=n(23),i.transports=n(18),i.parser=n(24),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=l.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},i.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;h=h||t}h||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",(function(t){if(!h)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"===u.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause((function(){h||"closed"!==d.readyState&&(s("changing transport and sending upgrade packet"),c(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())}))}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,d.emit("upgradeError",n)}})))}function n(){h||(h=!0,c(),u.close(),u=null)}function r(t){var i=new Error("probe error: "+t);i.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",i)}function o(){r("transport closed")}function a(){r("socket closed")}function l(e){u&&e.name!==u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function c(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",o),d.removeListener("close",a),d.removeListener("upgrading",l)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),h=!1,d=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",o),this.once("close",a),this.once("upgrading",l),u.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},i.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},i.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():e()})):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(s('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t,n){var i=n(19),r=n(21),o=n(35),s=n(36);t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,l=location.port;l||(l=a?443:80),t=e.hostname!==location.hostname||l!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},function(e,t,n){var i=n(20);e.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){function i(){}function r(e){if(l.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=n(19),l=n(22),c=n(11),u=n(33),h=n(3)("engine.io-client:polling-xhr");if(e.exports=r,e.exports.Request=o,u(r,l),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",(function(e){r.onError("xhr post error",e)})),this.sendXhr=i},r.prototype.doPoll=function(){h("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),n=this;try{h("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},h("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",s);else if("function"==typeof addEventListener){var d="onpagehide"in self?"pagehide":"unload";addEventListener(d,s,!1)}},function(e,t,n){function i(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}var r=n(23),o=n(32),s=n(24),a=n(33),l=n(34),c=n(3)("engine.io-client:polling");e.exports=i;var u=null!=new(n(19))({xdomain:!1}).responseType;a(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||t()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||t()})))}else t()},i.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;c("polling got data %s",e),s.decodePayload(e,this.socket.binaryType,(function(e,n,i){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var r=n(24),o=n(11);e.exports=i,o(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){function i(e,n){return n("b"+t.packets[e.type]+e.data.data)}function r(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=m[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function o(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(g)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){t.encodePacket({type:e.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(e.data)}(e,n,i);var r=new Uint8Array(1);return r[0]=m[e.type],i(new E([r.buffer,e.data]))}function s(e,t,n){for(var i=new Array(e.length),r=h(e.length,n),o=function(e,n,r){t(n,(function(t,n){i[e]=n,r(t,i)}))},s=0;s<e.length;s++)o(s,e[s],r)}var a,l=n(25),c=n(26),u=n(27),h=n(28),d=n(29);"undefined"!=typeof ArrayBuffer&&(a=n(30));var p="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),f="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=p||f;t.protocol=3;var m=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=l(m),v={type:"error",data:"parser error"},E=n(31);t.encodePacket=function(e,t,n,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof n&&(s=n,n=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return r(e,t,s);if(void 0!==E&&a instanceof E)return o(e,t,s);if(a&&a.base64)return i(e,s);var l=m[e.type];return void 0!==e.data&&(l+=n?d.encode(String(e.data),{strict:!1}):String(e.data)),s(""+l)},t.encodeBase64Packet=function(e,n){var i,r="b"+t.packets[e.type];if(void 0!==E&&e.data instanceof E){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(r+e)},o.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s[l];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},t.decodePacket=function(e,n,i){if(void 0===e)return v;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&!1===(e=function(e){try{e=d.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return v;var r=e.charAt(0);return Number(r)==r&&y[r]?e.length>1?{type:y[r],data:e.substring(1)}:{type:y[r]}:v}r=new Uint8Array(e)[0];var o=u(e,1);return E&&"blob"===n&&(o=new E([o])),{type:y[r],data:o}},t.decodeBase64Packet=function(e,t){var n=y[e.charAt(0)];if(!a)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=a.decode(e.substr(1));return"blob"===t&&E&&(i=new E([i])),{type:n,data:i}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var r=c(e);return n&&r?E&&!g?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,(function(e,i){t.encodePacket(e,!!r&&n,!1,(function(e){i(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return i(t.join(""))})):i("0:")},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===e)return i(v,0,1);for(var o,s,a="",l=0,c=e.length;l<c;l++){var u=e.charAt(l);if(":"===u){if(""===a||a!=(o=Number(a)))return i(v,0,1);if(a!=(s=e.substr(l+1,o)).length)return i(v,0,1);if(s.length){if(r=t.decodePacket(s,n,!1),v.type===r.type&&v.data===r.data)return i(v,0,1);if(!1===i(r,l+o,c))return}l+=o,a=""}else a+=u}return""!==a?i(v,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){return e.length?void s(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var i=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),r=new Uint8Array(i),o=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}r[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)r[o++]=parseInt(a[s]);for(r[o++]=255,i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]})),n(r.buffer)})):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){s(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)s[r]=parseInt(o[r]);if(s[o.length]=255,E){var a=new E([t.buffer,s.buffer,e]);n(null,a)}}))}),(function(e,t){return n(new E(t))}))},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var r=e,o=[];r.byteLength>0;){for(var s=new Uint8Array(r),a=0===s[0],l="",c=1;255!==s[c];c++){if(l.length>310)return i(v,0,1);l+=s[c]}r=u(r,2+l.length),l=parseInt(l);var h=u(r,0,l);if(a)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(e){var d=new Uint8Array(h);for(h="",c=0;c<d.length;c++)h+=String.fromCharCode(d[c])}o.push(h),r=u(r,l)}var p=o.length;o.forEach((function(e,r){i(t.decodePacket(e,n,!0),r,p)}))}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,n,i){var r=i(13),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var i=0,o=n.length;i<o;i++)if(e(n[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)&&e(n[l]))return!0;return!1}},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,i){function r(e,n){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=i):0!==r.count||o||t(null,n)}var o=!1;return i=i||n,r.count=e,0===e?t():r}},function(e,t){function n(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function i(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function r(e,t){return h(e>>t&63|128)}function o(e,t){if(0==(4294967168&e))return h(e);var n="";return 0==(4294965248&e)?n=h(e>>6&31|192):0==(4294901760&e)?(i(e,t)||(e=65533),n=h(e>>12&15|224),n+=r(e,6)):0==(4292870144&e)&&(n=h(e>>18&7|240),n+=r(e,12),n+=r(e,6)),n+h(63&e|128)}function s(){if(u>=c)throw Error("Invalid byte index");var e=255&l[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function a(e){var t,n;if(u>c)throw Error("Invalid byte index");if(u==c)return!1;if(t=255&l[u],u++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|s())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|s()<<6|s())>=2048)return i(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|s()<<12|s()<<6|s())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}/*! https://mths.be/utf8js v2.1.2 by @mathias */
var l,c,u,h=String.fromCharCode;e.exports={version:"2.1.2",encode:function(e,t){for(var i=!1!==(t=t||{}).strict,r=n(e),s=r.length,a=-1,l="";++a<s;)l+=o(r[a],i);return l},decode:function(e,t){var i=!1!==(t=t||{}).strict;l=n(e),c=l.length,u=0;for(var r,o=[];!1!==(r=a(i));)o.push(r);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=h(t);return r}(o)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,i,r,o,s,a=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(t=0;t<l;t+=4)i=n[e.charCodeAt(t)],r=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],h[c++]=i<<2|r>>4,h[c++]=(15&r)<<4|o>>2,h[c++]=(3&o)<<6|63&s;return u}}()},function(e,t){function n(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function i(e,t){t=t||{};var i=new o;return n(e).forEach((function(e){i.append(e)})),t.type?i.getBlob(t.type):i.getBlob()}function r(e,t){return new Blob(n(e),t||{})}var o=void 0!==o?o:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),l=o&&o.prototype.append&&o.prototype.getBlob;"undefined"!=typeof Blob&&(i.prototype=Blob.prototype,r.prototype=Blob.prototype),e.exports=s?a?Blob:r:l?i:void 0},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do{t=o[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function i(){var e=n(+new Date);return e!==r?(l=0,r=e):e+"."+n(l++)}for(var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},l=0,c=0;c<s;c++)a[o[c]]=c;i.encode=n,i.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*s+a[e.charAt(c)];return t},e.exports=i},function(e,t,n){(function(t){function i(){}function r(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function o(e){if(s.call(this,e),this.query=this.query||{},!l){var t=r();l=t.___eio=t.___eio||[]}this.index=l.length;var n=this;l.push((function(e){n.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=i)}),!1)}var s=n(22),a=n(33);e.exports=o;var l,c=/\n/g,u=/\\n/g;a(o,s),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},o.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,n,i){function r(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=o&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(p=s),a.call(this,e)}var o,s,a=i(23),l=i(24),c=i(32),u=i(33),h=i(34),d=i(3)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?o=WebSocket:"undefined"!=typeof self&&(o=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{s=i(37)}catch(e){}var p=o||s;e.exports=r,u(r,a),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new p(e,t):new p(e):new p(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){var n=this;this.writable=!1;for(var i=e.length,r=0,o=i;r<o;r++)!function(e){l.encodePacket(e,n.supportsBinary,(function(r){if(!n.usingBrowserWebSocket){var o={};e.options&&(o.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof r?t.byteLength(r):r.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(r):n.ws.send(r,o)}catch(e){d("websocket closed before onclose event")}--i||(n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0))}))}(e[r])},r.prototype.onClose=function(){a.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=h()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===r.prototype.name)}},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,n){function i(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r=n(7),o=n(11),s=n(40),a=n(41),l=n(42),c=n(3)("socket.io-client:socket"),u=n(32),h=n(26);e.exports=i;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",l(this,"onopen")),a(e,"packet",l(this,"onpacket")),a(e,"close",l(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:h(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);c("sending ack %j",i),t.packet({type:h(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags.compress=e,this},i.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])}).call(this,n(26).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(28),r=n(29),o=n(30);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=a(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return H(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,r){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(e,o+d)!==c(t,d)){h=!1;break}if(h)return o}return-1}function E(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function b(e,t,n,i){return V(H(t,e.length-n),e,n,i)}function w(e,t,n,i){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function A(e,t,n,i){return w(e,t,n,i)}function k(e,t,n,i){return V(G(t),e,n,i)}function I(e,t,n,i){return V(function(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,s,a,l,c=e[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[r+1],s=e[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(i,r),u=e.slice(t,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function C(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=U(e[o]);return r}function _(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function P(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function D(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,i,o){return o||D(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,o){return o||D(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:H(new l(e,i).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(27))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=c(e),s=i[0],a=i[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(u(e,s,s+16383>a?a:s+16383));1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var r,o,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,r),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+p]=255&s,p+=f,s/=256,c-=8);e[n+p-f]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}]);