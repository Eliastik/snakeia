!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){e.exports={CaseType:{EMPTY:0,SNAKE:1,FRUIT:2,WALL:3,SNAKE_DEAD:4,SURROUNDED:5},PlayerType:{AI:"PLAYER_AI",HUMAN:"PLAYER_HUMAN",HYBRID_HUMAN_AI:"PLAYER_HYBRID_HUMAN_AI"},AiLevel:{RANDOM:"AI_LEVEL_RANDOM",LOW:"AI_LEVEL_LOW",DEFAULT:"AI_LEVEL_DEFAULT",HIGH:"AI_LEVEL_HIGH",ULTRA:"AI_LEVEL_ULTRA"},OutputType:{TEXT:"OUTPUT_TEXT",GRAPHICAL:"OUTPUT_GRAPHICAL"},Setting:{CANVAS_WIDTH:800,CANVAS_HEIGHT:600,FONT_FAMILY:"Delius",FONT_SIZE:32,HEADER_HEIGHT_DEFAULT:75,TARGET_FPS:60,TIME_MULTIPLIER:15,IMAGE_SNAKE_HUE:75,IMAGE_SNAKE_SATURATION:50,IMAGE_SNAKE_VALUE:77,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","Ã—"],APP_VERSION:"1.5",DATE_VERSION:"01/31/2020"},Direction:{UP:0,TOP:0,RIGHT:1,BOTTOM:2,DOWN:2,LEFT:3,ANGLE_1:4,ANGLE_2:5,ANGLE_3:6,ANGLE_4:7},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13}}},function(e,t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(n){return(t="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)})(n)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){n(e,t,i[t])}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}var d={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var n;console&&console[e]&&(n=console)[e].apply(n,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))}},g=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.init(t,n)}return a(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||d,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,i({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),p=function(){function e(){s(this,e),this.observers={}}return a(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function f(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function m(e){return null==e?"":""+e}function y(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function s(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(s())return{};var a=i(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return s()?{}:{obj:e,k:i(o.shift())}}function v(e,t,n){var i=y(e,t,Object);i.obj[i.k]=n}function E(e,t){var n=y(e,t),i=n.obj,s=n.k;if(i)return i[s]}function A(e,t,n){var i=E(e,n);return void 0!==i?i:E(t,n)}function b(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function I(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return L[e]})):e}var S=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return s(this,t),n=l(this,c(t).call(this)),p.call(r(n)),n.data=e||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return h(t,p),a(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(o=e.split(".")),E(this.data,o)}},{key:"addResource",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(a=e.split("."))[1]),this.addNamespaces(t),v(this.data,a,i),s.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var s in n)"string"!=typeof n[s]&&"[object Array]"!==Object.prototype.toString.apply(n[s])||this.addResource(e,t,s,n[s],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,s,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},r=[e,t];e.indexOf(".")>-1&&(s=n,n=t,t=(r=e.split("."))[1]),this.addNamespaces(t);var l=E(this.data,r)||{};s?function e(t,n,i){for(var s in n)s in t?"string"==typeof t[s]||t[s]instanceof String||"string"==typeof n[s]||n[s]instanceof String?i&&(t[s]=n[s]):e(t[s],n[s],i):t[s]=n[s];return t}(l,n,o):l=i({},l,n),v(this.data,r,l),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?i({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),T={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,s){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,s))})),t}},w={},k=function(e){function n(e){var t,i,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,n),t=l(this,c(n).call(this)),p.call(r(t)),i=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o=e,a=r(t),i.forEach((function(e){o[e]&&(a[e]=o[e])})),t.options=u,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=g.create("translator"),t}return h(n,p),a(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(s=o.shift()),e=o.join(i)}return"string"==typeof s&&(s=[s]),{key:e,namespaces:s}}},{key:"translate",value:function(e,n){var s=this;if("object"!==t(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),r=a.key,l=a.namespaces,c=l[l.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return c+d+r}return r}var g=this.resolve(e,n),p=g&&g.res,f=g&&g.usedKey||r,m=g&&g.exactUsedKey||r,y=Object.prototype.toString.apply(p),v=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject;if(E&&p&&"string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p&&["[object Number]","[object Function]","[object RegExp]"].indexOf(y)<0&&("string"!=typeof v||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,n):"key '".concat(r," (").concat(this.language,")' returned an object instead of string.");if(o){var A="[object Array]"===y,b=A?[]:{},L=A?m:f;for(var I in p)if(Object.prototype.hasOwnProperty.call(p,I)){var S="".concat(L).concat(o).concat(I);b[I]=this.translate(S,i({},n,{joinArrays:!1,ns:l})),b[I]===S&&(b[I]=p[I])}p=b}}else if(E&&"string"==typeof v&&"[object Array]"===y)(p=p.join(v))&&(p=this.extendTranslation(p,e,n));else{var T=!1,w=!1;if(!this.isValidLookup(p)&&void 0!==n.defaultValue){if(T=!0,void 0!==n.count){var k=this.pluralResolver.getSuffix(u,n.count);p=n["defaultValue".concat(k)]}p||(p=n.defaultValue)}this.isValidLookup(p)||(w=!0,p=r);var _=n.defaultValue&&n.defaultValue!==p&&this.options.updateMissing;if(w||T||_){this.logger.log(_?"updateKey":"missingKey",u,c,r,_?n.defaultValue:p);var x=[],R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&R&&R[0])for(var O=0;O<R.length;O++)x.push(R[O]);else"all"===this.options.saveMissingTo?x=this.languageUtils.toResolveHierarchy(n.lng||this.language):x.push(n.lng||this.language);var P=function(e,t){s.options.missingKeyHandler?s.options.missingKeyHandler(e,c,t,_?n.defaultValue:p,_,n):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(e,c,t,_?n.defaultValue:p,_,n),s.emit("missingKey",e,c,t,p)};if(this.options.saveMissing){var M=void 0!==n.count&&"string"!=typeof n.count;this.options.saveMissingPlurals&&M?x.forEach((function(e){s.pluralResolver.getPluralFormsOfKey(e,r).forEach((function(t){return P([e],t)}))})):P(x,r)}}p=this.extendTranslation(p,e,n,g),w&&p===r&&this.options.appendNamespaceToMissingKey&&(p="".concat(c,":").concat(r)),w&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(e,t,n,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(i({},n,{interpolation:i({},this.options.interpolation,n.interpolation)}));var a=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(a=i({},this.options.interpolation.defaultVariables,a)),e=this.interpolator.interpolate(e,a,n.lng||this.language,n),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){return o.translate.apply(o,arguments)}),n)),n.interpolation&&this.interpolator.reset()}var r=n.postProcess||this.options.postProcess,l="string"==typeof r?[r]:r;return null!=e&&l&&l.length&&!1!==n.applyPostProcessor&&(e=T.handle(l,e,t,this.options&&this.options.postProcessPassResolved?i({i18nResolved:s},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,s,o,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,r),c=l.key;n=c;var u=l.namespaces;a.options.fallbackNS&&(u=u.concat(a.options.fallbackNS));var h=void 0!==r.count&&"string"!=typeof r.count,d=void 0!==r.context&&"string"==typeof r.context&&""!==r.context,g=r.lngs?r.lngs:a.languageUtils.toResolveHierarchy(r.lng||a.language,r.fallbackLng);u.forEach((function(e){a.isValidLookup(t)||(o=e,!w["".concat(g[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(w["".concat(g[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for namespace "').concat(o,'" for languages "').concat(g.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((function(n){if(!a.isValidLookup(t)){s=n;var o,l,u=c,g=[u];for(a.i18nFormat&&a.i18nFormat.addLookupKeys?a.i18nFormat.addLookupKeys(g,c,n,e,r):(h&&(o=a.pluralResolver.getSuffix(n,r.count)),h&&d&&g.push(u+o),d&&g.push(u+="".concat(a.options.contextSeparator).concat(r.context)),h&&g.push(u+=o));l=g.pop();)a.isValidLookup(t)||(i=l,t=a.getResource(n,e,l,r))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:s,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}]),n}();function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}var x=function(){function e(t){s(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=g.create("languageUtils")}return a(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=_(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=_(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=_(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],o=function(e){e&&(n.isWhitelisted(e)?s.push(e):n.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){s.indexOf(e)<0&&o(n.formatLanguageCode(e))})),s}}]),e}(),R=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],O={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}},P=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.languageUtils=t,this.options=i,this.logger=g.create("pluralResolver"),this.rules=(n={},R.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:O[e.fc]}}))})),n)}return a(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,i=[],s=this.getRule(e);return s?(s.numbers.forEach((function(s){var o=n.getSuffix(e,s);i.push("".concat(t).concat(o))})),i):i}},{key:"getSuffix",value:function(e,t){var n=this,i=this.getRule(e);if(i){var s=i.noAbs?i.plurals(t):i.plurals(Math.abs(t)),o=i.numbers[s];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON?a():this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.logger=g.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return a(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:I,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?b(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?b(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?b(t.nestingPrefix):t.nestingPrefixEscaped||b("$t("),this.nestingSuffix=t.nestingSuffix?b(t.nestingSuffix):t.nestingSuffixEscaped||b(")"),this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var s,o,a,r=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(r.formatSeparator)<0){var s=A(t,l,e);return r.alwaysFormat?r.format(s,void 0,n):s}var o=e.split(r.formatSeparator),a=o.shift().trim(),c=o.join(r.formatSeparator).trim();return r.format(A(t,l,a),c,n,i)};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler;for(a=0;s=this.regexpUnescape.exec(e);){if(void 0===(o=u(s[1].trim())))if("function"==typeof h){var d=h(e,s,i);o="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(s[1]," for interpolating ").concat(e)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=m(o));if(e=e.replace(s[0],c(o)),this.regexpUnescape.lastIndex=0,++a>=this.maxReplaces)break}for(a=0;s=this.regexp.exec(e);){if(void 0===(o=u(s[1].trim())))if("function"==typeof h){var g=h(e,s,i);o="string"==typeof g?g:""}else this.logger.warn("missed to pass in variable ".concat(s[1]," for interpolating ").concat(e)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=m(o));if(o=this.escapeValue?c(this.escape(o)):c(o),e=e.replace(s[0],o),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var n,s,o=i({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});function a(e,t){if(e.indexOf(",")<0)return e;var n=e.split(",");e=n.shift();var s=n.join(",");s=(s=this.interpolate(s,o)).replace(/'/g,'"');try{o=JSON.parse(s),t&&(o=i({},t,o))}catch(t){this.logger.error("failed parsing options string in nesting for key ".concat(e),t)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){if((s=t(a.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof s)return s;"string"!=typeof s&&(s=m(s)),s||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),s=""),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}]),e}();function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,s=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var B=function(e){function t(e,n,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s(this,t),o=l(this,c(t).call(this)),p.call(r(o)),o.backend=e,o.store=n,o.services=i,o.languageUtils=i.languageUtils,o.options=a,o.logger=g.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(i,a.backend,a),o}return h(t,p),a(t,[{key:"queueLoad",value:function(e,t,n,i){var s=this,o=[],a=[],r=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var r="".concat(e,"|").concat(t);!n.reload&&s.store.hasResourceBundle(e,t)?s.state[r]=2:s.state[r]<0||(1===s.state[r]?a.indexOf(r)<0&&a.push(r):(s.state[r]=1,i=!1,a.indexOf(r)<0&&a.push(r),o.indexOf(r)<0&&o.push(r),l.indexOf(t)<0&&l.push(t)))})),i||r.push(e)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:i}),{toLoad:o,pending:a,toLoadLanguages:r,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=D(e.split("|"),2),s=i[0],o=i[1];t&&this.emit("failedLoading",s,o,t),n&&this.store.addResourceBundle(s,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var i,r,l,c,u;i=n.loaded,r=o,(c=(l=y(i,[s],Object)).obj)[u=l.k]=c[u]||[],c[u].push(r),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(r,l){r&&l&&s<5?setTimeout((function(){i.read.call(i,e,t,n,s+1,2*o,a)}),o):a(r,l)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=D(e.split("|"),2),s=i[0],o=i[1];this.read(s,o,"read",void 0,void 0,(function(i,a){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(s," failed"),i),!i&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(s),a),t.loaded(e,i,a)}))}},{key:"saveMissing",value:function(e,t,n,s,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" for namespace "').concat(t,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,s,null,i({},a,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,s))}}]),t}();function C(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function N(){}return new(function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(s(this,n),e=l(this,c(n).call(this)),p.call(r(e)),e.options=C(t),e.services={},e.logger=g,e.modules={external:[]},i&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,i),l(e,r(e));setTimeout((function(){e.init(t,i)}),0)}return e}return h(n,p),a(n,[{key:"init",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;function o(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof n&&(s=n,n={}),this.options=i({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if("object"===t(e[1])&&(n=e[1]),"string"==typeof e[1]&&(n.defaultValue=e[1]),"string"==typeof e[2]&&(n.tDescription=e[2]),"object"===t(e[2])||"object"===t(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){n[e]=i[e]}))}return n},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,C(n)),this.format=this.options.interpolation.format,s||(s=N),!this.options.isClone){this.modules.logger?g.init(o(this.modules.logger),this.options):g.init(null,this.options);var a=new x(this.options);this.store=new S(this.options.resources,this.options);var r=this.services;r.logger=g,r.resourceStore=this.store,r.languageUtils=a,r.pluralResolver=new P(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),r.interpolator=new M(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new B(o(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(r.languageDetector=o(this.modules.languageDetector),r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=o(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new k(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=f(),c=function(){e.changeLanguage(e.options.lng,(function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(n),s(t,n)}))};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,i="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var s=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)})),this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(s,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var i=f();return e||(e=this.languages),t||(t=this.options.ns),n||(n=N),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&T.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=f();this.emit("languageChanging",e);var s=function(e){e&&(n.language||(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e)),n.translator.language||n.translator.changeLanguage(e),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(e)),n.loadResources(e,(function(s){!function(e,s){s?(n.language=s,n.languages=n.services.languageUtils.toResolveHierarchy(s),n.translator.changeLanguage(s),n.isLanguageChangingTo=void 0,n.emit("languageChanged",s),n.logger.log("languageChanged",s)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(s,e)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,n){var s=this,o=function e(n,o){var a;if("object"!==t(o)){for(var r=arguments.length,l=new Array(r>2?r-2:0),c=2;c<r;c++)l[c-2]=arguments[c];a=s.options.overloadTranslationOptionHandler([n,o].concat(l))}else a=i({},o);return a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,s.t(n,a)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],i=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};return!!this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||!(!o(n,e)||i&&!o(s,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=f();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=f();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],s=e.filter((function(e){return i.indexOf(e)<0}));return s.length?(this.options.preload=i.concat(s),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,o=i({},this.options,t,{isClone:!0}),a=new n(o);return["store","services","language"].forEach((function(t){a[t]=e[t]})),a.translator=new k(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.emit.apply(a,[e].concat(n))})),a.init(o,s),a.translator.options=a.options,a}}]),n}())}()},function(e,t,n){var i=n(1),s=n(2);s={randRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},addHue:function(e,t){var n=e+t;return n>360?n-=360:n<0&&(n=360+n),n},hsvToRgb:function(e,t,n){var i,s,o,a,r,l,c,u;switch(l=n*(1-t),c=n*(1-(r=6*e-(a=Math.floor(6*e)))*t),u=n*(1-(1-r)*t),a%6){case 0:i=n,s=u,o=l;break;case 1:i=c,s=n,o=l;break;case 2:i=l,s=n,o=u;break;case 3:i=l,s=c,o=n;break;case 4:i=u,s=l,o=n;break;case 5:i=n,s=l,o=c}return[Math.round(255*i),Math.round(255*s),Math.round(255*o)]},hslToName:function(e,t,n){return t<=10&&n>=90?i.t("engine.colors.white"):t<=10&&n<=70||0==t?i.t("engine.colors.gray"):n<=15?i.t("engine.colors.black"):e>=0&&e<=6||e>=350?i.t("engine.colors.red"):e>=7&&e<=42?i.t("engine.colors.orange"):e>=43&&e<=70?i.t("engine.colors.yellow"):e>=71&&e<=156?i.t("engine.colors.green"):e>=157&&e<=221?i.t("engine.colors.blue"):e>=222&&e<=290?i.t("engine.colors.purple"):e>=291&&e<=349?i.t("engine.colors.pink"):void 0},isFilterHueAvailable:function(){var e=document.createElement("canvas");e.width=5,e.height=5;var t=e.getContext("2d");t.fillStyle="#FF0000",t.filter="hue-rotate(90deg)",t.fillRect(0,0,5,5);var n=t.getImageData(0,0,1,1).data;return 255!=n[0]||0!=n[1]||0!=n[2]},shuffle:function(e){for(var t,n,i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),n=e[i],e[i]=e[t],e[t]=n;return e}};e.exports=s},function(e,t,n){var i=n(14),s=n(2),o=n(0),a=n(4);function r(e,t,n,i,s,r,l){this.width=null==e?20:e,this.height=null==t?20:t,this.generateWalls=null!=n&&n,this.borderWalls=null!=i&&i,this.maze=null!=s&&s,this.mazeFirstPosition=new a(1,1,o.Direction.RIGHT),this.mazeForceAuto=null!=l&&l,this.grid,this.initialGrid,this.fruitPos,this.init(r)}r.prototype.init=function(e){if(null!=e||null!=this.initialGrid){var t;t=null!=this.initialGrid?this.initialGrid:e,this.height=t.length,this.width=t[0].length,this.initialGrid=new Array(this.height),this.grid=new Array(this.height);for(var n=0;n<this.height;n++)this.initialGrid[n]=t[n].slice(),this.grid[n]=t[n].slice()}else{this.grid=new Array(this.height);for(n=0;n<this.height;n++){this.grid[n]=new Array(this.width);for(var i=0;i<this.width;i++)this.borderWalls&&(0==n||n==this.height-1||0==i||i==this.width-1)||this.generateWalls&&Math.random()>.65||this.maze?this.grid[n][i]=o.CaseType.WALL:this.grid[n][i]=o.CaseType.EMPTY}this.maze?this.generateMaze():this.generateWalls&&this.fixWalls(this.borderWalls)}},r.prototype.fixWalls=function(e){if(e)var t=1,n=this.height-1,i=1,s=this.width-1;else t=0,n=this.height,i=0,s=this.width;for(var r=t;r<n;r++)for(var l=i;l<s;l++){var c=new a(l,r),u=this.getNextPosition(c,o.Direction.UP),h=this.getNextPosition(u,o.Direction.LEFT),d=this.getNextPosition(u,o.Direction.RIGHT),g=this.getNextPosition(c,o.Direction.BOTTOM),p=this.getNextPosition(g,o.Direction.LEFT),f=this.getNextPosition(g,o.Direction.RIGHT);this.get(h)!=o.CaseType.WALL&&this.get(d)!=o.CaseType.WALL&&this.get(p)!=o.CaseType.WALL&&this.get(f)!=o.CaseType.WALL||this.set(o.CaseType.EMPTY,c)}},r.prototype.maze_recursion=function(e,t){for(var n=s.shuffle([o.Direction.UP,o.Direction.RIGHT,o.Direction.BOTTOM,o.Direction.LEFT]),i=0;i<n.length;i++)switch(n[i]){case o.Direction.UP:if(e-2<=0)continue;this.get(new a(t,e-2))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new a(t,e-2)),this.set(o.CaseType.EMPTY,new a(t,e-1)),this.maze_recursion(e-2,t));break;case o.Direction.RIGHT:if(t+2>=this.width-1)continue;this.get(new a(t+2,e))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new a(t+2,e)),this.set(o.CaseType.EMPTY,new a(t+1,e)),this.maze_recursion(e,t+2));break;case o.Direction.BOTTOM:if(e+2>=this.height-1)continue;this.get(new a(t,e+2))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new a(t,e+2)),this.set(o.CaseType.EMPTY,new a(t,e+1)),this.maze_recursion(e+2,t));break;case o.Direction.LEFT:if(t-2<=0)continue;this.get(new a(t-2,e))!=o.CaseType.EMPTY&&(this.set(o.CaseType.EMPTY,new a(t-2,e)),this.set(o.CaseType.EMPTY,new a(t-1,e)),this.maze_recursion(e,t-2))}},r.prototype.generateMaze=function(){this.mazeFirstPosition=new a(1,1,o.Direction.RIGHT),this.set(o.CaseType.EMPTY,this.mazeFirstPosition),this.maze_recursion(1,1)},r.prototype.set=function(e,t){this.grid[t.y][t.x]=e},r.prototype.get=function(e){return this.grid[e.y][e.x]},r.prototype.valToChar=function(e){switch(e){case o.CaseType.EMPTY:return"-";case o.CaseType.SNAKE:return"o";case o.CaseType.SNAKE_DEAD:return"O";case o.CaseType.FRUIT:return"x";case o.CaseType.WALL:return"#";case o.CaseType.SURROUNDED:return"/"}},r.prototype.getImageCase=function(e){var t="";switch(this.get(e)){case o.CaseType.WALL:t="assets/images/wall.png";break;case o.CaseType.FRUIT:t="assets/images/fruit.png"}return t},r.prototype.getGraph=function(e){for(var t=new Array(this.height),n=0;n<this.height;n++){t[n]=new Array(this.width);for(var i=0;i<this.width;i++){var s=new a(i,n);e&&this.get(s)==o.CaseType.SNAKE?t[n][i]=0:this.isDeadPosition(s)?t[n][i]=1:t[n][i]=0}}return t},r.prototype.getRandomPosition=function(){return new a(s.randRange(0,this.width-1),s.randRange(0,this.height-1))},r.prototype.setFruit=function(){var e=[1];if(null!=this.fruitPos&&this.get(this.fruitPos)==o.CaseType.FRUIT&&this.set(o.CaseType.EMPTY,this.fruitPos),!(this.getTotal(o.CaseType.EMPTY)>0))return!1;for(var t=this.getRandomPosition();this.get(t)!=o.CaseType.EMPTY||this.isFruitSurrounded(t,!0)||this.maze&&!this.testFruitMaze(t,e);){if(this.getTotal(o.CaseType.EMPTY)<=0)return!1;t=this.getRandomPosition()}return this.fruitPos=t,this.set(o.CaseType.FRUIT,t),!0},r.prototype.testFruitMaze=function(e,t){var n=this.getGraph(!0);return new i.Astar.Configuration(n,{order:"yx",torus:!1,diagonals:!1,cutting:!1,cost:(e,t)=>1==t?null:1}).path({x:this.mazeFirstPosition.x,y:this.mazeFirstPosition.y},{x:e.x,y:e.y}).length<Math.ceil(this.getTotal(o.CaseType.EMPTY)/(1*Math.ceil(t[0]/4)))?(t[0]++,!1):(t[0]++,!0)},r.prototype.isCaseSurrounded=function(e,t,n,i){if(null==e||null==e)return!1;t=null!=t&&t;for(var s=[e],a=[];s.length>0;){var r=s[0];s.shift();for(var l=[this.getNextPosition(r,o.Direction.UP),this.getNextPosition(r,o.Direction.BOTTOM),this.getNextPosition(r,o.Direction.LEFT),this.getNextPosition(r,o.Direction.RIGHT)],c=0;c<l.length;c++){var u=!1;if((l[c].indexIn(a)>-1||l[c].indexIn(s)>-1)&&(u=!0),!u&&i.indexOf(this.get(l[c]))>-1){if(s.push(l[c]),n.indexOf(this.get(l[c]))>-1)return!1;t&&this.get(l[c])==o.CaseType.EMPTY&&this.set(o.CaseType.SURROUNDED,l[c])}}a.push(r)}return!t||this.get(e)!=o.CaseType.EMPTY&&this.get(e)!=o.CaseType.FRUIT||this.set(o.CaseType.SURROUNDED,e),!0},r.prototype.isFruitSurrounded=function(e,t){var n=this.isCaseSurrounded(e,!1,[o.CaseType.SNAKE],[o.CaseType.EMPTY,o.CaseType.SNAKE]);return n&&t&&this.isCaseSurrounded(e,!0,[o.CaseType.SNAKE],[o.CaseType.EMPTY,o.CaseType.SNAKE]),n},r.prototype.getOnLine=function(e,t){for(var n=0,i=0;i<this.width;i++)this.get(new a(i,t))==e&&n++;return n},r.prototype.getTotal=function(e){for(var t=0,n=0;n<this.height;n++)t+=this.getOnLine(e,n);return t},r.prototype.getNextPosition=function(e,t){var n=new a(e.x,e.y,t);switch(t){case o.Direction.LEFT:n.x--,n.direction=o.Direction.LEFT;break;case o.Direction.UP:n.y--,n.direction=o.Direction.UP;break;case o.Direction.RIGHT:n.x++,n.direction=o.Direction.RIGHT;break;case o.Direction.BOTTOM:n.y++,n.direction=o.Direction.BOTTOM;break;case o.Key.LEFT:n.x--,n.direction=o.Key.LEFT;break;case o.Key.UP:n.y--,n.direction=o.Key.UP;break;case o.Key.RIGHT:n.x++,n.direction=o.Direction.RIGHT;break;case o.Key.BOTTOM:n.y++,n.direction=o.Direction.BOTTOM}return n.x<0?n.x=this.width-1:n.x>=this.width&&(n.x=0),n.y<0?n.y=this.height-1:n.y>=this.height&&(n.y=0),n},r.prototype.getDirectionTo=function(e,t){return this.getNextPosition(e,o.Direction.UP).equals(t)?o.Direction.UP:this.getNextPosition(e,o.Direction.BOTTOM).equals(t)?o.Direction.BOTTOM:this.getNextPosition(e,o.Direction.RIGHT).equals(t)?o.Direction.RIGHT:this.getNextPosition(e,o.Direction.LEFT).equals(t)?o.Direction.LEFT:-1},r.prototype.isDeadPosition=function(e){return this.get(e)==o.CaseType.SNAKE||this.get(e)==o.CaseType.WALL||this.get(e)==o.CaseType.SNAKE_DEAD},r.prototype.toString=function(){res="";for(var e=0;e<this.height;e++){for(var t=0;t<this.width;t++)res+=this.valToChar(this.get(new a(t,e)))+" ";res+="\n"}return res},e.exports=r},function(e,t,n){var i=n(0);function s(e,t,n){this.x=e,this.y=t,this.direction=n}s.prototype.copy=function(){return new s(this.x,this.y,this.direction)},s.prototype.convertToKeyDirection=function(){switch(this.direction){case i.Direction.UP:return i.Key.UP;case i.Direction.RIGHT:return i.Key.RIGHT;case i.Direction.LEFT:return i.Key.LEFT;case i.Direction.BOTTOM:return i.Key.BOTTOM;default:return this.direction}},s.prototype.convertToSimpleDirection=function(){switch(this.direction){case i.Key.UP:return i.Direction.UP;case i.Key.RIGHT:return i.Direction.RIGHT;case i.Key.LEFT:return i.Direction.LEFT;case i.Key.BOTTOM:return i.Direction.BOTTOM;default:return this.direction}},s.prototype.equals=function(e){return null!=e&&(this.x==e.x&&this.y==e.y)},s.prototype.indexIn=function(e){for(var t=0;t<e.length;t++)if(this.equals(e[t]))return t;return-1},e.exports=s},function(e,t,n){var i=n(12);function s(){this.events={}}s.prototype.registerEvent=function(e){var t=new i(e);this.events[e]=t},s.prototype.dispatchEvent=function(e,t){for(var n=this.events[e].callbacks,i=0,s=n.length;i<s;i++)n[i](t)},s.prototype.addEventListener=function(e,t){this.events[e].registerCallback(t)},e.exports=s},function(e,t,n){var i=n(1),s=n(14),o=n(2),a=n(0),r=n(4),l=n(3);function c(e,t,n,i,s,o){this.direction=null==e?a.Direction.RIGHT:e,this.initialDirection=null==e?a.Direction.RIGHT:e,this.initialLength=null==t?3:t,this.initTriedDirections=[],this.errorInit=!1,this.grid=n||new l,this.queue=[],this.lastTail,this.lastTailMoved,this.player=null==i?a.PlayerType.HUMAN:i,this.aiLevel=null==s?a.AiLevel.DEFAULT:s,this.autoRetry=null!=o&&o,this.score=0,this.gameOver=!1,this.scoreMax=!1,this.color,this.init()}c.prototype.init=function(){if(this.initialLength<=0)return this.errorInit=!0,!1;this.grid.maze&&this.initTriedDirections.length<=0&&(this.initialDirection=this.grid.mazeFirstPosition.direction,this.direction=this.initialDirection);var e=0,t=0;if(this.initialDirection==a.Direction.RIGHT&&-1==this.initTriedDirections.indexOf(a.Direction.RIGHT)||this.initialDirection==a.Direction.LEFT&&-1==this.initTriedDirections.indexOf(a.Direction.LEFT)){for(var n=0;n<this.grid.height;n++)for(var i=0,s=0;s<this.grid.width;s++)if(this.grid.get(new r(s,n))==a.CaseType.EMPTY?i++:i=0,i>=this.initialLength){e++;break}}else if(this.initialDirection==a.Direction.UP&&-1==this.initTriedDirections.indexOf(a.Direction.UP)||this.initialDirection==a.Direction.BOTTOM&&-1==this.initTriedDirections.indexOf(a.Direction.BOTTOM))for(n=0;n<this.grid.width;n++){var o=0;for(s=0;s<this.grid.height;s++)if(this.grid.get(new r(n,s))==a.CaseType.EMPTY?o++:o=0,o>=this.initialLength){t++;break}}if(this.initTriedDirections.push(this.initialDirection),e<=0&&(this.initialDirection==a.Direction.RIGHT||this.initialDirection==a.Direction.LEFT)||t<=0&&(this.initialDirection==a.Direction.UP||this.initialDirection==a.Direction.BOTTOM))return-1==this.initTriedDirections.indexOf(a.Direction.RIGHT)?(this.initialDirection=a.Direction.RIGHT,this.direction=a.Direction.RIGHT,this.init()):-1==this.initTriedDirections.indexOf(a.Direction.LEFT)?(this.initialDirection=a.Direction.LEFT,this.direction=a.Direction.LEFT,this.init()):-1==this.initTriedDirections.indexOf(a.Direction.UP)?(this.initialDirection=a.Direction.UP,this.direction=a.Direction.UP,this.init()):-1==this.initTriedDirections.indexOf(a.Direction.BOTTOM)?(this.initialDirection=a.Direction.BOTTOM,this.direction=a.Direction.BOTTOM,this.init()):(this.errorInit=!0,!1);for(var l,c,u=!0,h=[];u;){u=!1,l=this.grid.maze?this.grid.mazeFirstPosition:this.grid.getRandomPosition(),c=new r(l.x,l.y,this.initialDirection),h=[];for(n=this.initialLength-1;n>=0;n--)n<this.initialLength-1&&(this.initialDirection==a.Direction.RIGHT?c=this.grid.getNextPosition(new r(c.x,c.y,this.initialDirection),a.Direction.RIGHT):this.initialDirection==a.Direction.LEFT?c=this.grid.getNextPosition(new r(c.x,c.y,this.initialDirection),a.Direction.LEFT):this.initialDirection==a.Direction.BOTTOM?c=this.grid.getNextPosition(new r(c.x,c.y,this.initialDirection),a.Direction.BOTTOM):this.initialDirection==a.Direction.UP&&(c=this.grid.getNextPosition(new r(c.x,c.y,this.initialDirection),a.Direction.UP))),this.grid.get(c)!=a.CaseType.EMPTY?u=!0:h.push(new r(c.x,c.y,c.direction));if(this.grid.maze&&u)return this.init()}for(n=0;n<h.length;n++)this.insert(h[n]);return this.grid.maze&&this.player==a.PlayerType.HYBRID_HUMAN_AI&&(this.player=a.PlayerType.HUMAN),this.player==a.PlayerType.HYBRID_HUMAN_AI&&(this.aiLevel=a.AiLevel.HIGH),this.lastTail=this.get(this.queue.length-1),!0},c.prototype.reset=function(){this.direction=this.initialDirection,this.initTriedDirections=[],this.queue=[],this.score=0,this.gameOver=!1,this.scoreMax=!1,this.lastTailMoved=!0,this.init()},c.prototype.insert=function(e){this.queue.unshift(e),this.grid.set(a.CaseType.SNAKE,e)},c.prototype.remove=function(){var e=this.queue.pop();this.grid.set(a.CaseType.EMPTY,e),this.lastTail=e},c.prototype.length=function(){return this.queue.length},c.prototype.get=function(e){return null!=this.queue[e]?this.queue[e].copy():null},c.prototype.set=function(e,t){e>=0&&e<this.length()&&(this.queue[e]=t)},c.prototype.getHeadPosition=function(){return this.get(0)},c.prototype.getTailPosition=function(){return this.get(this.length()-1)},c.prototype.hasMaxScore=function(){return this.grid.getTotal(a.CaseType.EMPTY)<=0},c.prototype.setGameOver=function(){this.gameOver=!0;for(var e=0;e<this.length();e++)this.grid.set(a.CaseType.SNAKE_DEAD,this.get(e))},c.prototype.kill=function(){this.autoRetry=!1,this.grid=null,this.queue=null},c.prototype.moveTo=function(e){e==a.Key.LEFT&&this.direction!=a.Direction.RIGHT&&this.direction!=a.Direction.LEFT&&(this.direction=a.Direction.LEFT),e==a.Key.UP&&this.direction!=a.Direction.BOTTOM&&this.direction!=a.Direction.UP&&(this.direction=a.Direction.UP),e==a.Key.RIGHT&&this.direction!=a.Direction.LEFT&&this.direction!=a.Direction.RIGHT&&(this.direction=a.Direction.RIGHT),e==a.Key.BOTTOM&&this.direction!=a.Direction.UP&&this.direction!=a.Direction.BOTTOM&&(this.direction=a.Direction.BOTTOM)},c.prototype.getNextPosition=function(e,t){return this.grid.getNextPosition(e,t)},c.prototype.getDirectionTo=function(e,t){return this.grid.getDirectionTo(e,t)},c.prototype.getGraphicDirectionFor=function(e,t,n){if(null==t||null==n)return e.direction;var i=this.getDirectionTo(e,n),s=this.getDirectionTo(e,t);a.Direction.UP;return i==a.Direction.LEFT&&s==a.Direction.BOTTOM||i==a.Direction.BOTTOM&&s==a.Direction.LEFT?a.Direction.ANGLE_1:i==a.Direction.RIGHT&&s==a.Direction.BOTTOM||i==a.Direction.BOTTOM&&s==a.Direction.RIGHT?a.Direction.ANGLE_2:i==a.Direction.UP&&s==a.Direction.RIGHT||i==a.Direction.RIGHT&&s==a.Direction.UP?a.Direction.ANGLE_3:i==a.Direction.UP&&s==a.Direction.LEFT||i==a.Direction.LEFT&&s==a.Direction.UP?a.Direction.ANGLE_4:e.direction},c.prototype.getGraphicDirection=function(e){return this.getGraphicDirectionFor(this.get(e),this.get(e-1),this.get(e+1))},c.prototype.copy=function(){for(var e=new c(direction,3,new l(this.grid.width,this.grid.height,!1,!1),this.player,this.aiLevel,!1),t=0;t<e.grid.height;t++)for(var n=0;n<e.grid.width;n++)e.grid.set(this.grid.get(new r(n,t)),new r(n,t));e.queue=[];for(t=0;t<this.queue.length;t++)e.queue.push(elem.copy());return e},c.prototype.randomAI=function(){var e=this.getHeadPosition(),t=this.grid.isDeadPosition(this.getNextPosition(e,a.Key.UP)),n=this.grid.isDeadPosition(this.getNextPosition(e,a.Key.LEFT)),i=this.grid.isDeadPosition(this.getNextPosition(e,a.Key.BOTTOM)),s=this.grid.isDeadPosition(this.getNextPosition(e,a.Key.RIGHT));if(t&&n&&i&&s)return a.Key.UP;for(var r=null;null==r||this.grid.isDeadPosition(this.getNextPosition(e,r));){switch(o.randRange(1,4)){case 1:r=a.Key.UP;break;case 2:r=a.Key.LEFT;break;case 3:r=a.Key.BOTTOM;break;case 4:r=a.Key.RIGHT}}return r},c.prototype.simpleAI=function(){if(null!=this.grid.fruitPos){var e=this.getHeadPosition(),t=this.grid.fruitPos.copy(),n=a.Key.RIGHT;t.x>e.x?n=t.x-e.x>this.grid.width/2?a.Key.LEFT:a.Key.RIGHT:t.x<e.x?n=e.x-t.x>this.grid.width/2?a.Key.RIGHT:a.Key.LEFT:t.y<e.y?n=e.y-t.y>this.grid.height/2?a.Key.BOTTOM:a.Key.UP:t.y>e.y&&(n=t.y-e.y>this.grid.height/2?a.Key.UP:a.Key.BOTTOM);var i=this.getNextPosition(e,n);if(this.grid.isDeadPosition(i)){for(var s=this.direction,o=null,r=1;r<this.queue.length;r++)if(this.get(r).direction!=s){o=this.get(r).direction;break}i=this.getNextPosition(e,o),this.grid.isDeadPosition(i)?this.grid.isDeadPosition(this.getNextPosition(e,a.Key.UP))?this.grid.isDeadPosition(this.getNextPosition(e,a.Key.RIGHT))?this.grid.isDeadPosition(this.getNextPosition(e,a.Key.BOTTOM))?this.grid.isDeadPosition(this.getNextPosition(e,a.Key.LEFT))||(n=a.Key.LEFT):n=a.Key.BOTTOM:n=a.Key.RIGHT:n=a.Key.UP:n=i.convertToKeyDirection()}return n}},c.prototype.ai=function(e){var t=a.Key.RIGHT;if(this.aiLevel==a.AiLevel.RANDOM)t=this.randomAI();else if(this.aiLevel==a.AiLevel.LOW)t=this.simpleAI();else if(null!=this.grid.fruitPos){var n=this.getHeadPosition(),i=this.grid.fruitPos.copy(),o=this.grid.getGraph(!1),l=new s.Astar.Configuration(o,{order:"yx",torus:this.aiLevel==a.AiLevel.HIGH||this.aiLevel==a.AiLevel.ULTRA,diagonals:!1,cutting:!1,static:!0,cost:(e,t)=>1==t?null:1}),c=l.path({x:n.x,y:n.y},{x:i.x,y:i.y});if(c.length>1){var u=new r(c[1].x,c[1].y);t=new r(null,null,this.getDirectionTo(n,u)).convertToKeyDirection()}else this.aiLevel!=a.AiLevel.HIGH&&this.aiLevel!=a.AiLevel.ULTRA||(t=this.simpleAI());c=null}return t},c.prototype.getAILevelText=function(){switch(this.aiLevel){case a.AiLevel.RANDOM:return i.t("engine.aiLevelList.random");case a.AiLevel.LOW:return i.t("engine.aiLevelList.low");case a.AiLevel.DEFAULT:return i.t("engine.aiLevelList.normal");case a.AiLevel.HIGH:return i.t("engine.aiLevelList.high");case a.AiLevel.ULTRA:return i.t("engine.aiLevelList.ultra");default:return i.t("engine.aiLevelList.normal")}},e.exports=c},function(e,t,n){var i=n(0);function s(e,t,n,s,o,a,r,l,c,u,h,d,g,p){this.x=t||0,this.y=n||0,this.initialX=t,this.initialY=n,this.width=r||"auto",this.height=l||"auto",this.autoWidth="auto"==this.width,this.autoHeight="auto"==this.height,this.clicked=!1,this.hovered=!1,this.text=e,this.fontSize=c||Math.floor(i.Setting.FONT_SIZE/1.25),this.fontFamily=u||i.Setting.FONT_FAMILY,this.fontColor=h||"white",this.color=o||"rgba(0, 0, 0, 0)",this.colorHover=a||"#95a5a6",this.triggerClick,this.triggerHover,this.init=!1,this.disabled=!1,this.alignement=s||"default",this.image,this.imgSrc=d,this.verticalAlignement=p||"default",this.selected=!1,this.imageLoader=g}s.prototype.draw=function(e){var t=e.canvas,n=t.getContext("2d"),i=n.fillStyle,s=n.font;this.fontSize=this.getFontSize(n),n.font=this.fontSize+"px "+this.fontFamily;var o=n.measureText(this.text);if(null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image){var a=this.image.width,r=this.image.height;this.autoWidth&&(this.width=1.25*a),this.autoHeight&&(this.height=1.5*r)}else if(null!=this.text){var l=e.wrapTextLines(n,this.text,null,this.fontSize).height;this.autoWidth&&(this.width=o.width+25),this.autoHeight&&(this.height=l+this.fontSize/1.5)}if("center"==this.alignement?this.x=t.width/2-this.width/2-this.initialX:"right"==this.alignement?this.x=t.width-this.width-5-this.initialX:"left"==this.alignement&&(this.x=5),"bottom"==this.verticalAlignement?this.y=t.height-this.height-5-this.initialY:"center"==this.verticalAlignement?this.y=t.height/2-this.height/2-this.initialY:"top"==this.verticalAlignement&&(this.y=15),this.hovered?n.fillStyle=this.colorHover:n.fillStyle=this.color,n.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.selected){var c=n.strokeStyle,u=n.lineWidth;n.strokeStyle="#a2cdd8",n.lineWidth=3,n.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),n.strokeStyle=c,n.lineWidth=u}if(null!=this.image){if(this.image.width>this.width||this.image.height>this.height){var h=this.image.width/this.image.height;a=Math.floor(this.width/1.25),r=Math.floor(a/h)}var d=this.x+this.width/2-a/2,g=this.y+this.height/2-r/2;n.drawImage(this.image,Math.round(d),Math.round(g),Math.round(a),Math.round(r))}else if(null!=this.text){n.fillStyle=this.fontColor;var p=this.x+this.width/2-o.width/2,f=this.y+this.fontSize+this.fontSize/5;e.drawText(n,this.text,this.fontColor,this.fontSize,this.fontFamily,"center"==this.alignement?"center":"default","default",Math.round(p),Math.round(f),!0)}if(n.fillStyle=i,n.font=s,!this.init&&null!=e){var m=this;e.canvas.addEventListener("mousemove",(function(t){m.disabled||(m.isInside(m.getMousePos(e.canvas,t))?(null==m.triggerHover||m.disabled||m.triggerHover(),m.hovered=!0,m.clicked=!1):m.hovered=!1)}),!1),e.canvas.addEventListener("click",(function(e){m.disabled||(m.isInside(m.getMousePos(t,e))?(null!=m.triggerClick&&m.triggerClick(),m.hovered=!1,m.clicked=!0):m.clicked=!1)}),!1)}this.init=!0},s.prototype.getFontSize=function(e){return Math.floor(parseInt(e.font.match(/\d+/),10)/1.25)},s.prototype.getMousePos=function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}},s.prototype.isInside=function(e){return e.x>this.x&&e.x<this.x+this.width&&e.y<this.y+this.height&&e.y>this.y},s.prototype.addClickAction=function(e,t){this.triggerClick=t},s.prototype.removeClickAction=function(e){null!=e.triggerClick&&(e.triggerClick=null)},s.prototype.addMouseOverAction=function(e,t){this.triggerHover=t},s.prototype.removeHoverAction=function(e){null!=e.triggerHover&&(e.triggerHover=null)},s.prototype.disable=function(){this.disabled=!0},s.prototype.enable=function(){this.disabled=!1},s.prototype.loadImage=function(e){this.image=e.get(this.imgSrc)},e.exports={Button:s,ButtonImage:function(e,t,n,i,o,a,r,l,c,u){return new s(null,t,n,i,l,c,a,r,null,null,null,e,u,o)}}},function(e,t,n){var i=n(0),s=n(5);function o(e,t){this.gameUI=t,this.gameEngine=e,this.snakes=null,this.paused=!1,this.isReseted=!1,this.exited=!1,this.gameOver=!1,this.starting=!1,this.scoreMax=!1,this.gameFinished=!1,this.errorOccurred=!1,this.reactor=new s,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter")}o.prototype.init=function(){var e=this;this.update("init",{snakes:this.gameEngine.snakes,grid:this.gameEngine.grid,enablePause:this.gameEngine.enablePause,enableRetry:this.gameEngine.enableRetry,progressiveSpeed:this.gameEngine.progressiveSpeed,offsetFrame:this.gameEngine.speed*i.Setting.TIME_MULTIPLIER,errorOccurred:this.gameEngine.errorOccurred}),this.gameEngine.onReset((function(){e.update("reset",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,offsetFrame:e.gameEngine.speed,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred,offsetFrame:game.speed*i.Setting.TIME_MULTIPLIER}),e.reactor.dispatchEvent("onReset")})),this.gameEngine.onStart((function(){e.update("start",{snakes:e.gameEngine.snakes,grid:e.gameEngine.grid,starting:e.gameEngine.starting,countBeforePlay:e.gameEngine.countBeforePlay,paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStart")})),this.gameEngine.onPause((function(){e.update("pause",{paused:e.gameEngine.paused,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onPause")})),this.gameEngine.onContinue((function(){e.update("continue",{confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onContinue")})),this.gameEngine.onStop((function(){e.update("stop",{paused:e.gameEngine.paused,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onStop")})),this.gameEngine.onExit((function(){e.update("exit",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,exited:e.gameEngine.exited,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onExit")})),this.gameEngine.onKill((function(){e.update("kill",{paused:e.gameEngine.paused,gameOver:e.gameEngine.gameOver,killed:e.gameEngine.killed,snakes:e.gameEngine.snakes,gameFinished:e.gameEngine.gameFinished,grid:e.gameEngine.grid,confirmReset:!1,confirmExit:!1,getInfos:!1,getInfosGame:!1,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onKill")})),this.gameEngine.onScoreIncreased((function(){e.update("scoreIncreased",{snakes:e.gameEngine.snakes,scoreMax:e.gameEngine.scoreMax,gameFinished:e.gameEngine.gameFinished,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onScoreIncreased")})),this.gameEngine.onUpdate((function(){e.update("update",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,numFruit:e.gameEngine.numFruit,offsetFrame:0,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onUpdate")})),this.gameEngine.onUpdateCounter((function(){e.update("updateCounter",{paused:e.gameEngine.paused,isReseted:e.gameEngine.isReseted,exited:e.gameEngine.exited,grid:e.gameEngine.grid,numFruit:e.gameEngine.numFruit,ticks:e.gameEngine.ticks,scoreMax:e.gameEngine.scoreMax,gameOver:e.gameEngine.gameOver,gameFinished:e.gameEngine.gameFinished,gameMazeWin:e.gameEngine.gameMazeWin,starting:e.gameEngine.starting,initialSpeed:e.gameEngine.initialSpeed,speed:e.gameEngine.speed,snakes:e.gameEngine.snakes,countBeforePlay:e.gameEngine.countBeforePlay,numFruit:e.gameEngine.numFruit,errorOccurred:e.gameEngine.errorOccurred}),e.reactor.dispatchEvent("onUpdateCounter")}))},o.prototype.reset=function(){this.gameEngine.reset()},o.prototype.start=function(){this.gameEngine.start()},o.prototype.stop=function(){this.gameEngine.stop()},o.prototype.finish=function(e){this.gameEngine.stop(e)},o.prototype.pause=function(){this.gameEngine.pause()},o.prototype.kill=function(){this.gameEngine.kill()},o.prototype.tick=function(){this.gameEngine.tick()},o.prototype.exit=function(){this.gameEngine.exit()},o.prototype.setDisplayFPS=function(e){this.gameUI.setDisplayFPS(e)},o.prototype.setNotification=function(e){this.gameUI.setNotification(e)},o.prototype.setTimeToDisplay=function(e){this.gameUI.setTimeToDisplay(e)},o.prototype.setBestScore=function(e){this.gameUI.setBestScore(e)},o.prototype.key=function(e){this.gameEngine.lastKey=e},o.prototype.update=function(e,t){if(null!=this.gameUI&&null!=t){for(var n=Object.keys(t),i=0;i<n.length;i++)Object.prototype.hasOwnProperty.call(this.gameUI,n[i])&&"function"!=typeof t[n[i]]&&"function"!=typeof this.gameUI[n[i]]&&(this.gameUI[n[i]]=t[n[i]]),Object.prototype.hasOwnProperty.call(this,n[i])&&"function"!=typeof t[n[i]]&&"function"!=typeof this[n[i]]&&(this[n[i]]=t[n[i]]);t.hasOwnProperty("killed")&&t.killed&&this.gameUI.setKill()}},o.prototype.getNBPlayer=function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t},o.prototype.getPlayer=function(e,t){var n=0;if(null!=this.snakes)for(var i=0;i<this.snakes.length;i++)if(this.snakes[i].player==t&&n++,n==e)return this.snakes[i];return null},o.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},o.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},o.prototype.onContinue=function(e){this.reactor.addEventListener("onContinue",e)},o.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},o.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},o.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},o.prototype.onKill=function(e){this.reactor.addEventListener("onKill",e)},o.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},e.exports=o},function(e,t,n){var i=n(7),s=n(0),o=n(7),a=(i=o.Button,o.ButtonImage);function r(e,t,n,i,o,a,r,l,c){this.text=e,this.textColor=null==t?"rgba(255, 255, 255, 0.75)":t,this.backgroundColor=null==n?"rgba(46, 204, 113, 0.5)":n,this.delayBeforeClosing=null==i?5:i,this.fontSize=null==a?Math.floor(s.Setting.FONT_SIZE/1.25):a,this.fontFamily=null==r?s.Setting.FONT_FAMILY:r,this.animationDelay=null==o?500:o,this.foreGround=null!=l&&l,this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1,this.disableAnimation=null!=c&&c,this.closeButton}r.prototype.draw=function(e){var t=this;if(null!=this.text){var n=e.canvas;this.init||(this.timeLastFrame=Date.now(),this.closeButton=new a("assets/images/close.png",null,5,"right",null,32,32,null,null,e.imageLoader),this.closeButton.addClickAction(n,(function(){t.close()})));var i=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close();var s=n.getContext("2d");this.fontSize=1.25*this.getFontSize(s);var o=e.wrapTextLines(s,this.text,null,this.fontSize).height+this.fontSize/2,r=n.width,l=1;if(this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=i:this.animationTime+=i,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed)this.disableCloseButton();else{this.disableAnimation||(l=this.animationTime/this.animationDelay);var c=n.height-o*(l<=1?l:1);s.fillStyle=this.backgroundColor,s.fillRect(0,c,r,o),e.drawText(s,this.text,this.textColor,this.fontSize,this.fontFamily,"center","default",null,c+this.fontSize,!0),this.closeButton.y=c+5,this.foreGround||this.closeButton.draw(e),this.disableCloseButton()}this.init=!0}},r.prototype.close=function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)},r.prototype.open=function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1},r.prototype.disableCloseButton=function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof i&&this.closeButton.disable()},r.prototype.enableCloseButton=function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof i&&this.closeButton.enable()},r.prototype.copy=function(){return new r(this.text,this.textColor,this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.fontSize,this.fontFamily,this.foreGround)},r.prototype.getFontSize=function(e){return Math.floor(parseInt(e.font.match(/\d+/),10)/1.25)},e.exports=r},function(e,t,n){var i=n(5);function s(e){this.games=null==e?[]:e,this.reactor=new i,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onScoreIncreased"),this.init()}s.prototype.init=function(){for(var e=this,t=0;t<this.games.length;t++)0==t&&(e.games[t].enableKeyMenu=!0),this.games[t].onPause(function(t){return function(){e.pauseAll(t)}}(t)),this.games[t].onContinue(function(t){return function(){e.startAll(t)}}(t)),this.games[t].onExit(function(t){return function(){e.checkExit(t)}}(t)),this.games[t].onStop(function(t){return function(){e.checkStop(t)}}(t)),this.games[t].onReset(function(t){return function(){e.resetAll(t)}}(t)),this.games[t].onScoreIncreased(function(t){return function(){e.checkOnScoreIncreased(t)}}(t))},s.prototype.start=function(){this.startAll(null)},s.prototype.startAll=function(e){for(var t=0;t<this.games.length;t++)!this.games[t].paused||this.games[t].starting||null!=e&&t==e||this.games[t].start();this.reactor.dispatchEvent("onStart")},s.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},s.prototype.pauseAll=function(e){for(var t=0;t<this.games.length;t++)this.games[t].paused||null!=e&&t==e||this.games[t].pause();this.reactor.dispatchEvent("onPause")},s.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},s.prototype.resetAll=function(e){for(var t=0;t<this.games.length;t++)this.games[t].isReseted||null!=e&&t==e||this.games[t].reset();this.reactor.dispatchEvent("onReset")},s.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},s.prototype.checkExit=function(e){allExited=!0;for(var t=0;t<this.games.length;t++)this.games[t].exited||(allExited=!1);allExited?this.reactor.dispatchEvent("onExit"):this.startAll(e)},s.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},s.prototype.checkStop=function(){allStopped=!0;for(var e=0;e<this.games.length;e++)this.games[e].gameOver||(allStopped=!1);allStopped&&this.reactor.dispatchEvent("onStop")},s.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},s.prototype.stopAll=function(e){for(var t=0;t<this.games.length;t++)e?this.games[t].finish(!0):this.games[t].stop()},s.prototype.killAll=function(){for(var e=0;e<this.games.length;e++)this.games[e].kill()},s.prototype.checkOnScoreIncreased=function(){this.reactor.dispatchEvent("onScoreIncreased")},s.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},s.prototype.setDisplayFPS=function(e){for(var t=0;t<this.games.length;t++)this.games[t].setDisplayFPS(e)},s.prototype.setNotification=function(e){for(var t=0;t<this.games.length;t++)this.games[t].setNotification(e.copy())},s.prototype.closeNotification=function(){for(var e=0;e<this.games.length;e++)this.games[e].setNotification(null)},s.prototype.errorOccurred=function(){for(var e=0;e<this.games.length;e++)if(this.games[e].errorOccurred)return!0;return!1},s.prototype.getWinners=function(){winners=[],index=[],maxScore=-1;for(var e=0;e<this.games.length;e++)for(var t=0;t<this.games[e].snakes.length;t++)this.games[e].snakes[t].score>maxScore&&(maxScore=this.games[e].snakes[t].score);if(maxScore>=0){var n=0;for(e=0;e<this.games.length;e++)for(t=0;t<this.games[e].snakes.length;t++)this.games[e].snakes[t].score>=maxScore&&(winners.push(this.games[e].snakes[t]),index.push(n)),n++}return{winners:winners,score:maxScore,index:index}},e.exports=s},function(e,t,n){var i=n(0),s=n(8),o=n(13),a=n(15),r=n(17);"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame),"undefined"!=typeof document&&void 0===document.fullscreenElement&&Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.oFullscreenElement}}),"undefined"!=typeof document&&(document.exitFullscreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),"undefined"!=typeof screen&&(screen.orientation=screen.msOrientation||screen.mozOrientation||screen.orientation),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),PLAYER_AI=i.PlayerType.AI,PLAYER_HUMAN=i.PlayerType.HUMAN,PLAYER_HYBRID_HUMAN_AI=i.PlayerType.HYBRID_HUMAN_AI,AI_LEVEL_RANDOM=i.AiLevel.RANDOM,AI_LEVEL_LOW=i.AiLevel.LOW,AI_LEVEL_DEFAULT=i.AiLevel.DEFAULT,AI_LEVEL_HIGH=i.AiLevel.HIGH,AI_LEVEL_ULTRA=i.AiLevel.ULTRA,UP=i.Direction.UP,RIGHT=i.Direction.RIGHT,BOTTOM=i.Direction.BOTTOM,LEFT=i.Direction.LEFT,ANGLE_1=i.Direction.ANGLE_1,ANGLE_2=i.Direction.ANGLE_2,ANGLE_3=i.Direction.ANGLE_3,ANGLE_4=i.Direction.ANGLE_4,APP_VERSION=i.Setting.APP_VERSION,DATE_VERSION=i.Setting.DATE_VERSION,e.exports=function(e,t,n,i,l,c,u,h,d,g,p,f){var m;try{if(!window.Worker)throw"Worker not supported";new Worker("src/gameEngineWorker.js").terminate(),m=new o(new r(e,t,n,l,c,u))}catch(i){m=new s(new r(e,t,n,l,c,u))}return m.gameUI=new a(m,i,h,d,g,p,f),m.init(),m}},function(e,t,n){function i(e){this.name=e,this.callbacks=[]}i.prototype.registerCallback=function(e){this.callbacks.push(e)},e.exports=i},function(e,t,n){var i=n(8),s=n(3),o=n(6),a=n(4);function r(e,t){i.call(this,e,t),this.worker,this.init=function(){if(window.Worker){try{this.worker=new Worker("src/gameEngineWorker.js")}catch(e){return void this.update("init",{errorOccurred:!0})}if(this.worker instanceof Worker){this.worker.postMessage(["init",e]);var t=this;this.worker.onmessage=function(e){var n=e.data;if(n.length>1){var i=t.gameUI.grid;if(n[1].hasOwnProperty("grid")&&null!=n[1].grid&&(i=Object.assign(new s,n[1].grid),n[1].grid=i),n[1].hasOwnProperty("snakes")&&null!=n[1].snakes)for(var r=0;r<n[1].snakes.length;r++){n[1].snakes[r].grid=i,n[1].snakes[r]=Object.assign(new o,n[1].snakes[r]);for(var l=0;l<n[1].snakes[r].queue.length;l++)n[1].snakes[r].queue[l]=Object.assign(new a,n[1].snakes[r].queue[l])}switch(t.update(n[0],n[1]),n[0]){case"reset":t.reactor.dispatchEvent("onReset");break;case"start":t.reactor.dispatchEvent("onStart");break;case"pause":t.reactor.dispatchEvent("onPause");break;case"continue":t.reactor.dispatchEvent("onContinue");break;case"stop":t.reactor.dispatchEvent("onStop");break;case"exit":t.reactor.dispatchEvent("onExit");break;case"kill":t.reactor.dispatchEvent("onKill"),t.worker.terminate();break;case"scoreIncreased":t.reactor.dispatchEvent("onScoreIncreased");break;case"update":t.reactor.dispatchEvent("onUpdate");break;case"updateCounter":t.reactor.dispatchEvent("onUpdateCounter")}}}}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})}else null!=this.gameUI&&this.update("init",{errorOccurred:!0})},this.reset=function(){this.worker instanceof Worker&&this.worker.postMessage(["reset"])},this.start=function(){this.worker instanceof Worker&&this.worker.postMessage(["start"])},this.stop=function(){this.worker instanceof Worker&&this.worker.postMessage(["stop"])},this.finish=function(e){this.worker instanceof Worker&&this.worker.postMessage([e?"finish":"stop"])},this.pause=function(){this.worker instanceof Worker&&this.worker.postMessage(["pause"])},this.kill=function(){this.worker instanceof Worker&&this.worker.postMessage(["kill"])},this.tick=function(){this.worker instanceof Worker&&this.worker.postMessage(["tick"])},this.exit=function(){this.worker instanceof Worker&&this.worker.postMessage(["exit"])},this.key=function(e){this.worker instanceof Worker&&this.worker.postMessage(["key",e])}}r.prototype=Object.create(i).prototype,r.prototype.constructor=r,e.exports=r},function(module,exports,__webpack_require__){!function(a){var b=Math.sign,c=Math.min,d=Math.abs;void 0===a.Lowlight&&(a.Lowlight={}),"object"==typeof module.exports&&(module.exports=a.Lowlight);class e{constructor(){this.nodes=new Map}id(e){return e}node(e,t=!1){return t?this.nodes.get(this.id(arguments[0])):this.nodes.get(e)}data(e,t){return 2===arguments.length&&(e.graph.get(this)._data=t),e.graph.get(this)._data}adjacent(e,t){return e.graph.get(this).has(t)}neighbors(e){return Array.from(e.graph.get(this).keys())}connected(e,t){return e.graph.get(this)._connectivity===t.graph.get(this)._connectivity}connect(){let e=Array.from(this.nodes.values()),t=0;for(let t=0;t<e.length;t++)e[t].graph.get(this)._connectivity=void 0;for(let n=0;n<e.length;n++){if(void 0!==e[n].graph.get(this)._connectivity)continue;let i=[e[n]];for(t++;i.length;){let e=i.shift();e.graph.get(this)._connectivity=t,this.neighbors(e).map(e=>{void 0===e.graph.get(this)._connectivity&&0>i.indexOf(e)&&i.push(e)})}}}add(e){return 1<arguments.length?Array.from(arguments).map(e=>this.add(e)):(e.graph.set(this,new Map),this.nodes.set(e.id,e),e)}delete(e){return 1<arguments.length?Array.from(arguments).map(e=>this.delete(e)):(e.graph.delete(this),this.nodes.delete(e.id),e)}edge(e,t,n=1,i=1){if(!e.graph.has(this)||!t.graph.has(this))throw new Error("Nodes must be on the same graph");return null===n?e.graph.get(this).delete(t):e.graph.get(this).set(t,n),null===i?t.graph.get(this).delete(e):t.graph.get(this).set(e,i),this}cost(e,t){return this.adjacent(e,t)?e.graph.get(this).get(t):null}}e.fromArray=function(t,n={}){let i=e.fromArray.X(t,n.order),s=e.fromArray.Y(t,n.order),o=e.fromArray.at.bind(null,t,n.order),a=[],r=null;for(let t,l=1;l<Math.max(2,arguments.length);l++){t=new e,a.push(t),n=arguments[l]||{};let c=e.fromArray.id.bind(null,i,s,n.torus),u=n.cost||e.fromArray.cost,h=e.fromArray.edge.bind(null,t,u);for(let e=0;e<i;e++)for(let n,i=0;i<s;i++)n=t.add(r?r.get(c(e,i)):new f(c(e,i))),n.x=e,n.y=i,n.graph.get(t)._data=o(e,i),h(n,t.nodes.get(c(e-1,i))),h(n,t.nodes.get(c(e+1,i))),h(n,t.nodes.get(c(e,i-1))),h(n,t.nodes.get(c(e,i+1)));if(n.diagonals)for(let e=0;e<i;e++)for(let i=0;i<s;i++){let s=t.nodes.get(c(e,i)),o=t.adjacent(s,t.nodes.get(c(e-1,i))),a=t.adjacent(s,t.nodes.get(c(e+1,i))),r=t.adjacent(s,t.nodes.get(c(e,i-1))),l=t.adjacent(s,t.nodes.get(c(e,i+1)));"strict"===n.cutting?(o&&r&&h(s,t.nodes.get(c(e-1,i-1))),o&&l&&h(s,t.nodes.get(c(e-1,i+1))),a&&r&&h(s,t.nodes.get(c(e+1,i-1))),a&&l&&h(s,t.nodes.get(c(e+1,i+1)))):((o||r||n.cutting)&&h(s,t.nodes.get(c(e-1,i-1))),(o||l||n.cutting)&&h(s,t.nodes.get(c(e-1,i+1))),(a||r||n.cutting)&&h(s,t.nodes.get(c(e+1,i-1))),(a||l||n.cutting)&&h(s,t.nodes.get(c(e+1,i+1))))}Object.defineProperty(t,"id",{enumerable:!1,configurable:!1,writable:!0,value:e=>c(e.x,e.y)}),t.connect(),t.X=i,t.Y=s,t.TORUS=n.torus,r||(r=t.nodes)}return 1<a.length?a:a[0]},e.fromArray.X=function(e,t="yx"){return"xy"===t?e.length:"yx"===t?e[0].length:0},e.fromArray.Y=function(e,t="yx"){return"xy"===t?e[0].length:"yx"===t?e.length:0},e.fromArray.at=function(e,t="yx",n,i){return"xy"===t?e[n][i]:e[i][n]},e.fromArray.id=function(e=0,t=0,n=!1,i,s){return n?(s+t)%t*e+(i+e)%e:0<=i&&i<e&&0<=s&&s<t?s*e+i:null},e.fromArray.cost=function(){return 1},e.fromArray.edge=function(e,t,n,i){i&&e.edge(n,i,t(e.data(n),e.data(i)),t(e.data(i),e.data(n)))},e.fromArray.update=function(){console.warn("Graph.fromArray isn't implemented yet")};class f{constructor(e,t){for(let n in this.id=e,this.graph=new Map,t)"id"!=n&&"graph"!=n&&(this[n]=t[n])}}class g{constructor(e){this.nodes=[],this.score="function"==typeof e?e:e=>+e}get size(){return this.nodes.length}add(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return this.nodes.push(e),this.bubble(this.size-1)}set(e){let t=this.nodes.indexOf(e);return~t?this.score(e)<=this.score(this.nodes[t])?this.bubble(this.nodes.indexOf(e)):this.sink(this.nodes.indexOf(e)):this.add(e)}pop(){let e=this.nodes[0],t=this.nodes.pop();return 0<this.size&&(this.nodes[0]=t,this.sink(0)),e}top(){return this.nodes[0]}delete(e){if(1<arguments.length){for(let e=0;e<arguments.length;e++)this.delete(arguments[e]);return this}for(let t=0;t<this.size;t++){if(this.nodes[t]!=e)continue;let n=this.nodes.pop();return t==this.size-1?this:(this.nodes[t]=n,this.bubble(t).sink(t))}}bubble(e){let t=this.nodes[e],n=this.score(t);for(;0<e;){let i=Math.floor((e+1)/2)-1,s=this.nodes[i];if(n>=this.score(s))break;this.nodes[i]=t,this.nodes[e]=s,e=i}return this}sink(e){let t=this.nodes[e],n=this.score(t);for(;;){let i=2*(e+1),s=i-1,o=null;if(s<this.size&&this.score(this.nodes[s])<n&&(o=s),i<this.size&&this.score(this.nodes[i])<(o?this.score(this.nodes[o]):n)&&(o=i),null===o)break;this.nodes[e]=this.nodes[o],this.nodes[o]=t,e=o}return this}}let h={manhattan:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return(n.multiplier||1)*(i+s)},manhattanTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)},diagonal:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return m*(i+s)+(dm-2*m)*c(i,s)},diagonalTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,s)},euclidian:function(e,t,n={}){let i=d(t.x-e.x),s=d(t.y-e.y);return(n.multiplier||1)*Math.sqrt(i*i+s*s)},euclidianTorus:function(e,t,n={}){let i=c(d(t.x-e.x),t.x+(n.x||0)-e.x,e.x+(n.x||0)-t.x),s=c(d(t.y-e.y),t.y+(n.y||0)-e.y,e.y+(n.y||0)-t.y);return(n.multiplier||1)*(i+s)+((n.diagonalMultiplier||1.4)-2*(n.multiplier||1))*c(i,s)}};class i extends Error{constructor(e){super(e),this.name="WorkerError"}}class j{constructor(t,n={}){if(this.graphs=[],this.heuristic=n.heuristic||"manhattan",this.heuristicOptions=n.heuristicOptions||{},Array.isArray(t)&&(this.heuristic=n.heuristic in h?n.heuristic:n.diagonals?n.torus?"diagonalTorus":"diagonal":n.torus?"manhattanTorus":"manhattan",this.heuristicOptions.x=e.fromArray.X(t,n.order),this.heuristicOptions.y=e.fromArray.Y(t,n.order),this.graphs=e.fromArray.apply(this,arguments),!Array.isArray(this.graphs)&&(this.graphs=[this.graphs])),n.thread&&("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))){this.worker=null;try{this.worker=new Worker(n.thread)}catch(t){throw"file:"===window.location.protocol&&console.warn("WebWorkers in local files may not be supported by your browser."),new i(`${n.thread} couldn't be opened.`)}"cost"in n&&(n.cost=n.cost.toString()),this.worker.postMessage(["constructor",t,n]),this.path=(e,t,n={})=>{this._worker_path_callback=n.callback,delete n.callback,this.worker.postMessage(["path",e,t,n])},this.worker.onmessage=e=>{let t=JSON.parse(e.data);switch(t[0]){case"path":this._worker_path_callback(t[1])}}}}path(e,t,n={}){if(n.jps)return this.jps(e,t,n);let i=new g(e=>e.estimated),s=new Map,o=this.graphs[n.layer||0];if(e=o.node(e,!0),t=o.node(t,!0),i.add({node:e,estimated:0}),s.set(e,{score:0,from:null}),!n.static||o.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;o.neighbors(e).map(a=>{let r=(s.has(e)?s.get(e).score:0)+o.cost(e,a);r<(s.has(a)?s.get(a).score:1/0)&&(s.set(a,{score:r,from:e}),i.set({node:a,estimated:r+h[n.heuristic||this.heuristic](a,t,n.heuristicOptions||this.heuristicOptions)}))}),i.delete(e)}let a=[];if(s.has(t)){let e=t;for(a.push(t);null!==(e=s.get(e).from);)a.push(e);a=a.reverse()}return n.callback&&n.callback(a,s),a}}if(j.JPS=class{constructor(){}static access(e,t,n,i){return e.adjacent(t,i?e.node(n,!0):n)}static neighborhood(e,t,n,i){let s=[],o=n.get(i).from||null;if(null===o)return t.neighbors(i);{let n={x:b(i.x-o.x),y:b(i.y-o.y)};if(0!=n.x&&0!=n.y){let o=e(i,{x:i.x+n.x,y:i.y},!0),a=e(i,{x:i.x,y:i.y+n.y},!0);(o||a)&&(s.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),o&&(s.push(t.node({x:i.x+n.x,y:i.y},!0)),!e(i,{x:i.x,y:i.y-n.y},!0)&&s.push(t.node({x:i.x+n.x,y:i.y-n.y},!0))),a&&(s.push(t.node({x:i.x,y:i.y+n.y},!0)),!e(i,{x:i.x-n.x,y:i.y},!0)&&s.push(t.node({x:i.x-n.x,y:i.y+n.y},!0))))}else e(i,{x:i.x+n.x,y:i.y+n.y},!0)&&(s.push(t.node({x:i.x+n.x,y:i.y+n.y},!0)),0==n.x?0!=n.y&&(!e(i,{x:i.x-1,y:i.y},!0)&&s.push(t.node({x:i.x-1,y:i.y+n.y},!0)),!e(i,{x:i.x+1,y:i.y},!0)&&s.push(t.node({x:i.x+1,y:i.y+n.y},!0))):(!e(i,{x:i.x,y:i.y-1},!0)&&s.push(t.node({x:i.x+n.x,y:i.y-1},!0)),!e(i,{x:i.x,y:i.y+1},!0)&&s.push(t.node({x:i.x+n.x,y:i.y+1},!0))))}return s.filter(e=>e)}static jump(e,t,n,i,s,o){for(;;){if(!e(o,s))return null;if(s.x===i.x&&s.y===i.y)return s;let a={x:b(s.x-o.x),y:b(s.y-o.y)};if(0!=a.x&&0!=a.y){if(!e(s,{x:s.x-a.x,y:s.y},!0)&&e(s,{x:s.x-a.x,y:s.y+a.y},!0)||!e(s,{x:s.x,y:s.y-a.y},!0)&&e(s,{x:s.x+a.x,y:s.y-a.y},!0))return s;let o=j.JPS.jump.bind(this,e,t,n,i);if(null!==o(t.node({x:s.x+a.x,y:s.y},!0),s)||null!==o(t.node({x:s.x,y:s.y+a.y},!0),s))return s}else if(0!=a.x){if(!e(s,{x:s.x,y:s.y-1},!0)&&e(s,{x:s.x+a.x,y:s.y-1},!0)||!e(s,{x:s.x,y:s.y+1},!0)&&e(s,{x:s.x+a.x,y:s.y+1},!0))return s}else if(0!=a.y&&(!e(s,{x:s.x-1,y:s.y},!0)&&e(s,{x:s.x-1,y:s.y+a.y},!0)||!e(s,{x:s.x+1,y:s.y},!0)&&e(s,{x:s.x+1,y:s.y+a.y},!0)))return s;o=s,s=t.node({x:s.x+a.x,y:s.y+a.y},!0)}return null}},j.prototype.jps=function(e,t,n={}){if(this.graphs[n.layer||0].TORUS)return console.warn("Torus map aren't yet supported by JPS"),n.callback&&n.callback([],new Map),[];let i=new g(e=>e.estimated),s=new Map,o=this.graphs[n.layer||0],a=null;e=o.node(e,!0),t=o.node(t,!0),i.add({node:e,estimated:0}),s.set(e,{score:0,from:null});let r=j.JPS.access.bind(this,o),l=j.JPS.neighborhood.bind(this,r,o,s),c=j.JPS.jump.bind(this,r,o,s,t);if(!n.static||o.connected(e,t))for(;i.size;){let e=i.pop().node;if(e===t)break;l(e).map(r=>{if(null!==(a=c(r,e))){let r=(s.has(e)?s.get(e).score:0)+o.cost(e,a);r<(s.has(a)?s.get(a).score:1/0)&&(s.set(a,{score:r,from:e,jumped:!0}),i.set({node:a,estimated:r+h[n.heuristic||this.heuristic](a,t,n.heuristicOptions||this.heuristicOptions)}))}}),i.delete(e)}let u=[];if(s.has(t)){let n=t;for(;n.x!=e.x||n.y!=e.y;)for(let e=s.get(n).from;n.x!=e.x||n.y!=e.y;)u.push(n),n=o.node({x:n.x+b(e.x-n.x),y:n.y+b(e.y-n.y)},!0);u.push(n),u.reverse()}return n.callback&&n.callback(u,s),u},"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let a;onmessage=function(b){let c=b.data;switch(c[0]){case"constructor":if("cost"in c[2]){let a=/^\((.*?)\)\s*=>\s*{/.test(c[2].cost),b=/^function /.test(c[2].cost);c[2].cost=eval(`(${a||b?"":"function "}${c[2].cost})`)}a=new j(c[1],c[2]);break;case"path":postMessage(JSON.stringify(["path",a.path(c[1],c[2],c[3])]))}}}a.Lowlight.Astar={Graph:e,Node:f,BinaryHeap:g,Heuristic:h,Configuration:j,WorkerError:i}}("undefined"==typeof window?this:window)},function(e,t,n){var i=n(1),s=n(2),o=n(0),a=n(4),r=n(16),l=n(7),c=l.Button,u=l.ButtonImage,h=n(9);function d(e,t,n,i,s,a,r){this.imageLoader,this.assetsLoaded=!1,this.controller=e,this.appendTo=t,this.displayFPS=null!=s&&s,this.outputType=null==a?o.OutputType.GRAPHICAL:a,this.disableAnimation=null!=r&&r,this.lastKey=-1,this.frame=0,this.lastFrame=0,this.offsetFrame=0,this.lastFrameTime=0,this.currentFPS=0,this.grid=null,this.snakes=null,this.speed=8,this.initialSpeed=8,this.ticks=0,this.countBeforePlay=3,this.numFruit=0,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.enablePause=!1,this.enableRetry=!1,this.progressiveSpeed=!1,this.errorOccurred=!1,this.fullscreen=!1,this.lastKeyMenu=-1,this.selectedButton=0,this.confirmReset=!1,this.confirmExit=!1,this.getInfos=!1,this.getInfosGame=!1,this.timeoutAutoRetry=null,this.textarea,this.canvas,this.canvasCtx,this.canvasWidth=null==n?o.Setting.CANVAS_WIDTH:n,this.canvasHeight=null==i?o.Setting.CANVAS_HEIGHT:i,this.fontSize=o.Setting.FONT_SIZE,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT,this.timerToDisplay,this.bestScoreToDisplay,this.preRenderedFont,this.intervalCountFPS,this.btnFullScreen,this.btnPause,this.btnContinue,this.btnRetry,this.btnQuit,this.btnYes,this.btnNo,this.btnOK,this.btnAbout,this.btnInfosGame,this.btnTopArrow,this.btnRightArrow,this.btnLeftArrow,this.btnBottomArrow,this.btnExitFullScreen,this.btnEnterFullScreen,this.notificationMessage,this.init()}d.prototype.init=function(){var e=this;this.imageLoader=new r,this.outputType==o.OutputType.TEXT?(this.textarea=document.createElement("textarea"),this.appendTo.appendChild(this.textarea),this.assetsLoaded=!0):this.outputType==o.OutputType.GRAPHICAL&&(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvasCtx=this.canvas.getContext("2d"),this.appendTo.appendChild(this.canvas),this.btnFullScreen=new u("assets/images/fullscreen.png",null,5,"right",null,64,64),this.btnPause=new u("assets/images/pause.png",null,5,null,null,64,64),this.btnContinue=new c(i.t("engine.continue"),null,null,"center","#3498db","#246A99"),this.btnRetry=new c(i.t("engine.reset"),null,null,"center","#3498db","#246A99"),this.btnQuit=new c(i.t("engine.exit"),null,null,"center","#3498db","#246A99"),this.btnYes=new c(i.t("engine.yes"),null,null,"center","#3498db","#246A99"),this.btnNo=new c(i.t("engine.no"),null,null,"center","#3498db","#246A99"),this.btnOK=new c(i.t("engine.ok"),null,null,"center","#3498db","#246A99"),this.btnAbout=new c(i.t("engine.about"),null,null,"center","#3498db","#246A99"),this.btnInfosGame=new c(i.t("engine.infosGame"),null,null,"center","#3498db","#246A99"),this.btnTopArrow=new u("assets/images/up.png",64,92,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnRightArrow=new u("assets/images/right.png",0,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnLeftArrow=new u("assets/images/left.png",128,46,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnBottomArrow=new u("assets/images/bottom.png",64,0,"right","bottom",64,64,"rgba(255, 255, 255, 0.25)","rgba(149, 165, 166, 0.25)"),this.btnExitFullScreen=new c(i.t("engine.exitFullScreen"),null,null,"center","#3498db","#246A99"),this.btnEnterFullScreen=new c(i.t("engine.enterFullScreen"),null,null,"center","#3498db","#246A99"),this.btnFullScreen.addClickAction(this.canvas,(function(){e.toggleFullscreen(),e.pause()})),this.btnPause.addClickAction(this.canvas,(function(){e.pause()})),this.btnTopArrow.addClickAction(this.canvas,(function(){e.controller.key(o.Key.UP)})),this.btnBottomArrow.addClickAction(this.canvas,(function(){e.controller.key(o.Key.BOTTOM)})),this.btnLeftArrow.addClickAction(this.canvas,(function(){e.controller.key(o.Key.LEFT)})),this.btnRightArrow.addClickAction(this.canvas,(function(){e.controller.key(o.Key.RIGHT)}))),this.setIntervalCountFPS(),document.addEventListener("keydown",(function(t){if(!e.killed){var n=t.keyCode;90!=n&&87!=n||(n=o.Key.UP),65!=n&&81!=n||(n=o.Key.LEFT),83==n&&(n=o.Key.BOTTOM),68==n&&(n=o.Key.RIGHT),e.paused?e.countBeforePlay<0&&(e.lastKeyMenu=n):e.controller.key(n),t.preventDefault()}})),window.addEventListener("blur",(function(){e.paused||e.pause()}),!1),window.addEventListener("resize",(function(){e.autoResizeCanvas()}),!0),this.autoResizeCanvas(),this.loadAssets(),this.startDraw()},d.prototype.autoResizeCanvas=function(){if(this.outputType==o.OutputType.GRAPHICAL&&!this.killed)if(document.fullscreenElement)document.fullscreenElement==this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight);else if(this.canvasWidth>=.85*document.documentElement.clientWidth){var e=this.canvasWidth/this.canvasHeight;this.canvas.width=.85*document.documentElement.clientWidth,this.canvas.height=this.canvas.width/e}else this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight},d.prototype.setIntervalCountFPS=function(){var e=this;this.clearIntervalCountFPS(),this.intervalCountFPS=window.setInterval((function(){e.countFPS()}),1e3)},d.prototype.countFPS=function(){this.lastFrame>0&&(this.currentFPS=this.frame-this.lastFrame),this.lastFrame=this.frame},d.prototype.clearIntervalCountFPS=function(){clearInterval(this.intervalCountFPS)},d.prototype.getNBPlayer=function(e){return this.controller.getNBPlayer(e)},d.prototype.getPlayer=function(e,t){return this.controller.getPlayer(e,t)},d.prototype.reset=function(){this.controller.reset()},d.prototype.start=function(){this.controller.start()},d.prototype.stop=function(){this.controller.stop()},d.prototype.pause=function(){this.controller.pause()},d.prototype.kill=function(){this.controller.kill()},d.prototype.exit=function(){this.controller.exit()},d.prototype.tick=function(){this.controller.tick()},d.prototype.setKill=function(){this.killed=!0,this.clearIntervalCountFPS(),this.grid=null,this.snakes=null,this.preRenderedFont=null,this.outputType==o.OutputType.TEXT?(this.appendTo.removeChild(this.textarea),this.textarea=null):this.outputType==o.OutputType.GRAPHICAL&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.appendTo.removeChild(this.canvas),this.canvas=null,this.canvasCtx=null,this.imageLoader.clear())},d.prototype.toggleFullscreen=function(){var e=this;if(this.outputType==o.OutputType.GRAPHICAL&&!this.killed){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():this.canvas.requestFullscreen?this.canvas.requestFullscreen():this.canvas.mozRequestFullScreen?this.canvas.mozRequestFullScreen():this.canvas.webkitRequestFullscreen?this.canvas.webkitRequestFullscreen():this.canvas.msRequestFullscreen?this.canvas.msRequestFullscreen():this.canvas.oRequestFullscreen&&this.canvas.oRequestFullscreen();var t=function(){e.outputType!=o.OutputType.GRAPHICAL||e.killed||(document.fullscreenElement==e.canvas?e.fullscreen=!0:e.fullscreen=!1,e.autoResizeCanvas(),document.fullscreenElement==e.canvas&&void 0!==screen.orientation&&void 0!==screen.orientation.lock&&screen.orientation.lock("landscape").catch((function(){})))};void 0!==document.onfullscreenchange?document.onfullscreenchange=t:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=t:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=t:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=t:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=t),t()}},d.prototype.loadAssets=function(){var e=this;this.errorOccurred||this.outputType==o.OutputType.TEXT?this.errorOccurred||this.outputType!=o.OutputType.TEXT||(this.assetsLoaded=!0,this.start()):this.imageLoader.load(["assets/images/snake_4.png","assets/images/snake_3.png","assets/images/snake_2.png","assets/images/snake.png","assets/images/body_4_end.png","assets/images/body_3_end.png","assets/images/body_2_end.png","assets/images/body_end.png","assets/images/body_2.png","assets/images/body.png","assets/images/wall.png","assets/images/fruit.png","assets/images/body_angle_1.png","assets/images/body_angle_2.png","assets/images/body_angle_3.png","assets/images/body_angle_4.png","assets/images/pause.png","assets/images/fullscreen.png","assets/images/snake_dead_4.png","assets/images/snake_dead_3.png","assets/images/snake_dead_2.png","assets/images/snake_dead.png","assets/images/up.png","assets/images/left.png","assets/images/right.png","assets/images/bottom.png","assets/images/close.png","assets/images/trophy.png","assets/images/clock.png"],(function(){1==e.imageLoader.hasError?e.errorOccurred=!0:(e.assetsLoaded=!0,e.btnFullScreen.loadImage(e.imageLoader),e.btnPause.loadImage(e.imageLoader),e.btnTopArrow.loadImage(e.imageLoader),e.btnBottomArrow.loadImage(e.imageLoader),e.btnLeftArrow.loadImage(e.imageLoader),e.btnRightArrow.loadImage(e.imageLoader),e.start())}),this)},d.prototype.startDraw=function(e){var t=this;requestAnimationFrame((function(){t.killed||(document.hasFocus()||this.paused||t.controller.pause(),t.draw(e),t.frame++,t.paused||(t.offsetFrame+=Date.now()-t.lastFrameTime,t.lastFrameTime=Date.now()),t.startDraw())}))},d.prototype.draw=function(e){var t=this;if(this.outputType!=o.OutputType.TEXT||this.killed){if(this.outputType==o.OutputType.GRAPHICAL&&!this.killed){var n=this.canvasCtx,r=!1;e=null!=e&&e;if(this.fontSize=o.Setting.FONT_SIZE,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT,this.canvas.width<=o.Setting.CANVAS_WIDTH/1.25?(this.fontSize/=1.25,this.headerHeight=o.Setting.HEADER_HEIGHT_DEFAULT/1.25):this.canvas.width>=1.5*o.Setting.CANVAS_WIDTH&&(this.fontSize*=1.25,this.headerHeight=1.25*o.Setting.HEADER_HEIGHT_DEFAULT),this.btnPause.width=.85*this.headerHeight,this.btnPause.height=this.btnPause.width,this.btnPause.y=this.headerHeight/2-this.btnPause.height/2,this.btnFullScreen.width=.85*this.headerHeight,this.btnFullScreen.height=this.btnFullScreen.width,this.btnFullScreen.y=this.headerHeight/2-this.btnFullScreen.height/2,e&&(n.filter="blur(5px)"),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.fillStyle="rgba(204, 207, 211, 1)",n.fillRect(0,0,this.canvas.width,this.canvas.height),n.fillStyle="#27AE60",n.fillRect(0,0,this.canvas.width,this.headerHeight),n.font=this.fontSize+"px "+o.Setting.FONT_FAMILY,n.fillStyle="black",this.btnFullScreen.draw(this),this.enablePause&&(this.btnPause.x=this.btnFullScreen.x-this.btnPause.width-10,this.btnPause.draw(this)),this.assetsLoaded&&!this.errorOccurred){if(null!=this.bestScoreToDisplay&&null!=this.bestScoreToDisplay&&(r=!0),this.drawImage(n,"assets/images/fruit.png",5,5,.85*this.headerHeight*(r?.5:1),.85*this.headerHeight*(r?.5:1)),null!=this.snakes&&this.snakes.length<=1?this.drawText(n,"Ã— "+this.snakes[0].score,"black",.43*this.headerHeight*(r?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(r?.58:1),.67*this.headerHeight*(r?.63:1)):this.drawText(n,i.t("engine.num")+(null!=this.numFruit?this.numFruit:"???"),"black",.43*this.headerHeight*(r?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(r?.58:1),.67*this.headerHeight*(r?.63:1)),r&&(this.drawImage(n,"assets/images/trophy.png",5,8+.425*this.headerHeight,.425*this.headerHeight,.425*this.headerHeight),this.drawText(n,this.bestScoreToDisplay,"black",.43*this.headerHeight*(r?.75:1),o.Setting.FONT_FAMILY,"default","default",.9*this.headerHeight*(r?.58:1),.425*this.headerHeight+.67*this.headerHeight*(r?.63:1))),null!=this.grid&&(!this.grid.maze||this.grid.maze&&(!this.paused||this.gameOver||this.gameFinished))){for(var l=Math.floor((this.canvas.height-this.headerHeight)/this.grid.height),c=Math.floor(this.canvas.width/this.grid.width),u=(c=c>(l=l>c?c:l)?l:c)*this.grid.width,d=0;d<this.grid.height;d++)for(var g=0;g<this.grid.width;g++){var p=Math.floor(g*c+(this.canvas.width-u)/2),f=this.headerHeight+d*l;n.fillStyle=d%2==0&&g%2==0||d%2==1&&g%2==1?"rgba(127, 140, 141, 0.75)":"rgba(44, 62, 80, 0.75)",n.fillRect(p,f,c,l),this.drawImage(n,this.grid.getImageCase(new a(g,d)),p,f,c,l)}this.drawSnake(n,c,l,u,e)}null!=this.timerToDisplay&&null!=this.timerToDisplay&&this.timerToDisplay>=0&&(this.drawImage(n,"assets/images/clock.png",.24*this.headerHeight,this.headerHeight+15,.64*this.headerHeight,.64*this.headerHeight),this.drawText(n,""+this.timerToDisplay,"rgba(0, 0, 0, 0.5)",o.Setting.FONT_SIZE,o.Setting.FONT_FAMILY,"default","default",this.headerHeight,this.headerHeight+15+.475*this.headerHeight))}else if(!this.assetsLoaded&&!e){var m=Math.floor(100*Object.keys(this.imageLoader.images).length/this.imageLoader.nbImagesToLoad);this.drawMenu(n,[],i.t("engine.loading")+"\n"+m+"%","white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0)}if(null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&!this.notificationMessage.foreGround&&this.notificationMessage.draw(this),null!=this.snakes)for(d=0;d<this.snakes.length;d++)if(this.snakes[d].player==o.PlayerType.HUMAN||this.snakes[d].player==o.PlayerType.HYBRID_HUMAN_AI){this.btnTopArrow.draw(this),this.btnBottomArrow.draw(this),this.btnRightArrow.draw(this),this.btnLeftArrow.draw(this);break}if(this.disableAllButtons(),!e)if(this.exited)this.drawMenu(n,this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.exited"),"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnExitFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))}));else if(this.errorOccurred)this.drawMenu(n,[this.btnQuit],this.imageLoader.hasError?i.t("engine.errorLoading"):i.t("engine.error"),"red",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnQuit.addClickAction(t.canvas,(function(){t.confirmExit=!1,t.selectedButton=0,t.exit()}))}));else if(this.getInfosGame)this.drawMenu(n,[this.btnOK],(null!=this.snakes&&this.snakes.length<=1?i.t("engine.player")+" "+(null!=this.snakes&&this.snakes[0].player==o.PlayerType.HUMAN||null!=this.snakes&&this.snakes[0].player==o.PlayerType.HYBRID_HUMAN_AI?i.t("engine.playerHuman"):i.t("engine.playerAI")):"")+(this.getNBPlayer(o.PlayerType.AI)>0?"\n"+i.t("engine.aiLevel")+" "+this.getPlayer(1,o.PlayerType.AI).getAILevelText():"")+"\n"+i.t("engine.sizeGrid")+" "+(null!=this.grid&&this.grid.width?this.grid.width:"???")+"Ã—"+(null!=this.grid&&this.grid.height?this.grid.height:"???")+"\n"+i.t("engine.currentSpeed")+" "+(null!=this.initialSpeed?this.initialSpeed:"???")+(null!=this.snakes&&this.snakes.length<=1&&this.progressiveSpeed?"\n"+i.t("engine.progressiveSpeed"):"")+(null==this.grid||this.grid.maze||null==this.snakes||this.snakes[0].player!=o.PlayerType.HYBRID_HUMAN_AI?"":"\n"+i.t("engine.assistAI"))+(null!=this.grid&&this.grid.maze?"\n"+i.t("engine.mazeModeMin"):""),"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnOK.addClickAction(t.canvas,(function(){t.getInfosGame=!1,t.selectedButton=0}))}));else if(this.getInfos)this.drawMenu(n,[this.btnInfosGame,this.btnOK],i.t("engine.aboutScreen.title")+"\nwww.eliastiksofts.com\n\n"+i.t("engine.aboutScreen.versionAndDate",{version:o.Setting.APP_VERSION,date:new Intl.DateTimeFormat(i.language).format(new Date(o.Setting.DATE_VERSION)),interpolation:{escapeValue:!1}}),"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnInfosGame.addClickAction(t.canvas,(function(){t.getInfosGame=!0,t.selectedButton=0})),t.btnOK.addClickAction(t.canvas,(function(){t.getInfos=!1,t.selectedButton=0}))}));else if(this.confirmExit)this.drawMenu(n,[this.btnNo,this.btnYes],i.t("engine.exitConfirm"),"#E74C3C",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnYes.addClickAction(t.canvas,(function(){t.confirmExit=!1,t.selectedButton=0,t.exit()})),t.btnNo.addClickAction(t.canvas,(function(){t.confirmExit=!1,t.selectedButton=0}))}));else if(this.assetsLoaded&&this.countBeforePlay>=0)if(null!=this.snakes&&(this.snakes.length>1&&this.getNBPlayer(o.PlayerType.HUMAN)<=1&&null!=this.getPlayer(1,o.PlayerType.HUMAN)||this.snakes.length>1&&this.getNBPlayer(o.PlayerType.HYBRID_HUMAN_AI)<=1&&null!=this.getPlayer(1,o.PlayerType.HYBRID_HUMAN_AI))){if(null!=this.getPlayer(1,o.PlayerType.HUMAN))var y=this.getPlayer(1,o.PlayerType.HUMAN);else y=this.getPlayer(1,o.PlayerType.HYBRID_HUMAN_AI);var v=s.hslToName(s.addHue(o.Setting.IMAGE_SNAKE_HUE,y.color),o.Setting.IMAGE_SNAKE_SATURATION,o.Setting.IMAGE_SNAKE_VALUE),E=s.hsvToRgb(s.addHue(o.Setting.IMAGE_SNAKE_HUE,y.color)/360,o.Setting.IMAGE_SNAKE_SATURATION/100,o.Setting.IMAGE_SNAKE_VALUE/100);this.countBeforePlay>0?this.drawMenu(n,this.fullscreen?[]:[this.btnEnterFullScreen],this.countBeforePlay+"\n"+(s.isFilterHueAvailable()?i.t("engine.colorPlayer",{color:v}):i.t("engine.arrowPlayer")),s.isFilterHueAvailable()?["white","rgb("+E[0]+", "+E[1]+", "+E[2]+")"]:["white","#3498db"],this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnEnterFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))})):this.drawMenu(n,this.fullscreen?[]:[this.btnEnterFullScreen],i.t("engine.ready")+"\n"+(s.isFilterHueAvailable()?i.t("engine.colorPlayer",{color:v}):i.t("engine.arrowPlayer")),s.isFilterHueAvailable()?["white","rgb("+E[0]+", "+E[1]+", "+E[2]+")"]:["white","#3498db"],this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnEnterFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))}),!0)}else this.countBeforePlay>0?this.drawMenu(n,this.fullscreen?[]:[this.btnEnterFullScreen],""+this.countBeforePlay,"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnEnterFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))})):this.drawMenu(n,this.fullscreen?[]:[this.btnEnterFullScreen],i.t("engine.ready"),"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnEnterFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))}),!0);else if(this.confirmReset&&!this.gameOver)this.drawMenu(n,[this.btnNo,this.btnYes],i.t("engine.resetConfirm"),"#E74C3C",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnYes.addClickAction(t.canvas,(function(){t.confirmReset=!1,t.selectedButton=0,t.reset()})),t.btnNo.addClickAction(t.canvas,(function(){t.confirmReset=!1,t.selectedButton=0}))}));else if(this.gameFinished)this.drawMenu(n,this.enableRetry?[this.btnRetry,this.btnQuit]:[this.btnQuit],this.grid.maze&&this.gameMazeWin?i.t("engine.mazeWin"):i.t("engine.gameFinished"),this.grid.maze&&this.gameMazeWin?"#2ecc71":"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnRetry.addClickAction(t.canvas,(function(){t.selectedButton=0,t.reset()})),t.btnQuit.addClickAction(t.canvas,(function(){t.confirmExit=!0,t.selectedButton=0}))}));else if(this.scoreMax&&this.snakes.length<=1)this.drawMenu(n,this.enableRetry?[this.btnRetry,this.btnQuit]:this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.scoreMax"),"#2ecc71",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!0,(function(){t.btnRetry.addClickAction(t.canvas,(function(){t.selectedButton=0,t.reset()})),t.btnQuit.addClickAction(t.canvas,(function(){t.confirmExit=!0,t.selectedButton=0})),t.btnExitFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()}))}));else if(this.gameOver&&this.snakes.length<=1)this.drawMenu(n,this.enableRetry&&!this.snakes[0].autoRetry?[this.btnRetry,this.btnQuit]:this.fullscreen?[this.btnExitFullScreen]:[],i.t("engine.gameOver"),"#E74C3C",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.snakes[0].autoRetry&&null==t.timeoutAutoRetry?t.timeoutAutoRetry=setTimeout((function(){t.selectedButton=0,t.reset(),t.timeoutAutoRetry=null}),500):(t.btnRetry.addClickAction(t.canvas,(function(){t.selectedButton=0,t.reset()})),t.btnQuit.addClickAction(t.canvas,(function(){t.confirmExit=!0,t.selectedButton=0})),t.btnExitFullScreen.addClickAction(t.canvas,(function(){t.toggleFullscreen()})))}));else if(this.paused&&!this.gameOver&&this.assetsLoaded)this.drawMenu(n,this.enablePause?this.enableRetry?[this.btnContinue,this.btnRetry,this.btnAbout,this.btnQuit]:[this.btnContinue,this.btnAbout,this.btnQuit]:[this.btnContinue,this.btnAbout],i.t("engine.pause"),"white",this.fontSize,o.Setting.FONT_FAMILY,"center",null,!1,(function(){t.btnContinue.addClickAction(t.canvas,(function(){t.selectedButton=0,t.start()})),t.btnRetry.addClickAction(t.canvas,(function(){t.confirmReset=!0,t.selectedButton=0})),t.btnQuit.addClickAction(t.canvas,(function(){t.confirmExit=!0,t.selectedButton=0})),t.btnAbout.addClickAction(t.canvas,(function(){t.getInfos=!0,t.selectedButton=0}))}));else if(this.assetsLoaded){if(this.btnFullScreen.enable(),null!=this.snakes)for(d=0;d<this.snakes.length;d++)if(this.snakes[d].player==o.PlayerType.HUMAN||this.snakes[d].player==o.PlayerType.HYBRID_HUMAN_AI){this.btnTopArrow.enable(),this.btnBottomArrow.enable(),this.btnLeftArrow.enable(),this.btnRightArrow.enable();break}this.enablePause&&this.btnPause.enable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&!this.notificationMessage.foreGround&&this.notificationMessage.enableCloseButton(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&this.notificationMessage.foreGround&&this.notificationMessage.draw(this)}this.displayFPS&&this.drawText(n,this.getDebugText(),"rgba(255, 255, 255, 0.5)",this.fontSize/1.5,o.Setting.FONT_FAMILY,"right","bottom",null,null,!0),e&&(n.filter="none")}}else null!=this.grid&&(this.textarea.style.width=16.5*this.grid.width+"px",this.textarea.style.height=16*this.grid.height+100+"px"),this.textarea.innerHTML=this.toString()},d.prototype.setDisplayFPS=function(e){this.displayFPS=e},d.prototype.disableAllButtons=function(){this.outputType==o.OutputType.GRAPHICAL&&(this.btnContinue.disable(),this.btnRetry.disable(),this.btnQuit.disable(),this.btnYes.disable(),this.btnNo.disable(),this.btnOK.disable(),this.btnOK.disable(),this.btnAbout.disable(),this.btnInfosGame.disable(),this.btnFullScreen.disable(),this.btnPause.disable(),this.btnExitFullScreen.disable(),this.btnEnterFullScreen.disable(),null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&!this.notificationMessage.foreGround&&this.notificationMessage.disableCloseButton(),this.btnTopArrow.disable(),this.btnBottomArrow.disable(),this.btnRightArrow.disable(),this.btnLeftArrow.disable())},d.prototype.setNotification=function(e){null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&this.notificationMessage.close(),this.notificationMessage=e,this.notificationMessage instanceof h&&this.disableAnimation&&(this.notificationMessage.disableAnimation=!0)},d.prototype.setTimeToDisplay=function(e){this.timerToDisplay=e},d.prototype.setBestScore=function(e){null!=e&&null!=e&&""!=e.trim()&&(this.bestScoreToDisplay=e)},d.prototype.getDebugText=function(){return i.t("engine.debug.fps")+" : "+this.currentFPS+" / "+i.t("engine.debug.frames")+" : "+this.frame+" / "+i.t("engine.debug.ticks")+" : "+this.ticks+" / "+i.t("engine.debug.speed")+" : "+this.speed},d.prototype.toString=function(){return(null!=this.grid?this.grid.toString():"")+"\n"+(null!=this.snakes&&this.snakes.length<=1?i.t("engine.score")+" : "+(null!=this.snakes?this.snakes[0].score:""):"")+(this.displayFPS?"\n"+this.getDebugText():"")+(this.gameOver&&!this.scoreMax?"\n"+i.t("engine.gameOver"):"")+(this.scoreMax?"\n"+i.t("engine.scoreMax"):"")+(!this.gameOver&&this.paused?"\n"+i.t("engine.debug.paused"):"")+(this.countBeforePlay>0?"\n"+this.countBeforePlay:"")},d.prototype.preRenderFont=function(e,t,n,i){e.push("?"),e.push(" "),e.push("A");for(var s=0;s<e.length;s++){var o=document.createElement("canvas"),a=o.getContext("2d");a.font=t+"px "+i;var r=a.measureText(e[s]).width;o.width=r,o.height=t+t/6,a.font=t+"px "+i,a.fillStyle=n,a.textBaseline="top",a.fillText(e[s],0,0),this.preRenderedFont[e[s]]=o}},d.prototype.drawImage=function(e,t,n,i,s,o,a,r,l,c,u,h){this.drawImageWrapper(e,this.imageLoader.get(t),n,i,s,o,a,r,l,c,u,h)},d.prototype.drawImageData=function(e,t,n,i,s,o,a,r,l,c,u,h){this.drawImageWrapper(e,t,n,i,s,o,a,r,l,c,u,h)},d.prototype.drawImageWrapper=function(e,t,n,i,s,o,a,r,l,c,u,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),s=null==s||isNaN(s)?null:Math.round(s),o=null==o||isNaN(o)?null:Math.round(o),a=null==a||isNaN(a)?null:Math.round(a),r=null==r||isNaN(r)?null:Math.round(r),l=null==l||isNaN(l)?null:Math.round(l),c=null==c||isNaN(c)?null:Math.round(c),u=null!=u&&u;null!=(h=null==h||isNaN(h)?null:h)&&(e.save(),e.translate(n+s/2,i+o/2),e.rotate(h*Math.PI/180),n=-s/2,i=-o/2),u&&e.clearRect(n,i,s,o),null!=e&&null!=t&&(null!=a&&null!=r&&null!=l&&null!=c?e.drawImage(t,a,r,l,c,n,i,s,o):e.drawImage(t,n,i,s,o)),null!=h&&e.restore()},d.prototype.drawText=function(e,t,n,i,s,o,a,r,l,c,u){var h=e.fillStyle,d=e.font,g=e.filter;Array.isArray(n)||(e.fillStyle=n),e.font=(u?"bold ":"")+i+"px "+s,e.filter="none",c&&(t=this.wrapTextLines(e,t).text);var p=t.split("\n");"center"==a?l=this.canvas.height/2-i*p.length/2:"top"==a?l=5:"bottom"==a&&(l=this.canvas.height-i*p.length/2-i/5);for(var f=0;f<p.length;f++){var m=p[f];if(Array.isArray(n)){var y=f;y>n.length-1&&(y=n.length-1),e.fillStyle=n[y]}"center"==o?e.fillText(m,Math.round(this.canvas.width/2-e.measureText(m).width/2),Math.round(l+i*f)):"right"==o?e.fillText(m,Math.round(this.canvas.width-e.measureText(m).width-15),Math.round(l+i*f)):"left"==o?e.fillText(m,5,Math.round(l+i*f)):e.fillText(m,Math.round(r),Math.round(l+i*f))}return e.fillStyle=h,e.font=d,e.filter=g,{x:r,y:l,height:i*p.length}},d.prototype.drawTextBitmap=function(e,t,n,i,s,a,r){if(null!=t&&null!=t||(this.preRenderedFont={},this.preRenderFont(o.Setting.CARS_TO_PRERENDER,2*o.Setting.FONT_SIZE,"white",o.Setting.FONT_FAMILY),t=this.preRenderedFont),r){var l=t.A;n=this.wrapTextLines(e,n,l.width*(i/l.height),i).text}for(var c=n.split("\n"),u=a,h=0;h<c.length;h++){for(var d=c[h],g=s,p=0;p<d.length;p++){var f=d.charAt(p);if(null==t[f]||null==t[f])var m=t["?"];else m=t[f];var y=m.width*(i/m.height);this.drawImageData(e,m,g,u,y,i,0,0,m.width,m.height),g+=y}d.length>0&&(u+=i)}},d.prototype.wrapText=function(e,t){if(e.length>t){for(var n=t;n>0&&" "!=e[n];n--);if(n>0){var i=e.substring(0,n),s=e.substring(n+1);return i+"\n"+this.wrapText(s,t)}}return e},d.prototype.wrapTextLines=function(e,t,n,i){for(var s=t.split("\n"),o="",a=n||e.measureText("A").width,r=Math.round(this.canvas.width/a),l=0,c=0;c<s.length;c++){var u=this.wrapText(s[c],r);o+=u,c<s.length-1&&(o+="\n");for(var h=0;h<u.split("\n").length;h++)l+=parseFloat(i)}return{text:o,height:l}},d.prototype.drawMenu=function(e,t,n,i,s,a,r,l,c,u){e.fillStyle="rgba(44, 62, 80, 0.75)",e.fillRect(0,0,this.canvas.width,this.canvas.height);var d=this.wrapTextLines(e,n,null,s).height,g=0;if(null!=t){this.lastKeyMenu==o.Key.UP?this.selectedButton--:this.lastKeyMenu==o.Key.BOTTOM&&this.selectedButton++,this.selectedButton>=t.length?this.selectedButton=0:this.selectedButton<0&&(this.selectedButton=t.length-1);for(var p=0;p<t.length;p++)t[p].autoHeight?g+=this.wrapTextLines(e,t[p].text,null,t[p].getFontSize(e)).height+8:g+=t[p].height+5}var f=d+g,m=this.canvas.height/2-f/2+16,y=m+d;this.drawText(e,n,i,s,a,r,"default",l,m,!0);var v=!1;if(null!=t)for(p=0;p<t.length;p++){if(t[p].y=y,this.selectedButton==p?t[p].selected=!0:t[p].selected=!1,t[p].enable(),t[p].draw(this),this.selectedButton==p&&this.lastKeyMenu==o.Key.ENTER&&null!=t[p].triggerClick&&!t[p].disabled){v=!0,t[p].triggerClick();break}y+=t[p].height+8}null!=this.notificationMessage&&null!=this.notificationMessage&&this.notificationMessage instanceof h&&this.notificationMessage.foreGround&&!v&&this.notificationMessage.draw(this),null!=u&&u(!0),this.lastKeyMenu=-1},d.prototype.drawSnake=function(e,t,n,i,s){var a=document.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height;var r=a.getContext("2d");if(null!=this.snakes){for(var l=0;l<this.snakes.length;l++){r.clearRect(0,0,a.width,a.height),null!=this.snakes[l].color&&(r.filter="hue-rotate("+this.snakes[l].color+"deg)"),s&&(r.filter=r.filter+" blur(5px)");for(var c=this.snakes[l].length()-1;c>=-1&&this.snakes[l].length()>1||c>=0;c--){if(-1==c)var u=this.snakes[l].get(this.snakes[l].length()-1);else u=this.snakes[l].get(c);var h=0,d=0,g=u.direction,p=0,f="",m=!0;if(g=0==c?this.snakes[l].getHeadPosition().direction:-1==c?this.disableAnimation||this.snakes[l].gameOver||this.snakes[l].scoreMax||this.gameFinished||!this.snakes[l].lastTailMoved?this.snakes[l].get(this.snakes[l].length()-2).direction:this.snakes[l].getTailPosition().direction:this.snakes[l].getGraphicDirection(c),!this.disableAnimation&&(0==c||-1==c&&this.snakes[l].lastTailMoved)&&!this.snakes[l].gameOver&&!this.snakes[l].scoreMax&&!this.gameFinished){var y,v=t*(y=(y=this.offsetFrame/(this.speed*o.Setting.TIME_MULTIPLIER))>1?1:y)-t,E=n*y-n,A=u;if(0==c)if(this.snakes[l].length()>1)var b=this.snakes[l].getGraphicDirection(1);else b=this.snakes[l].getGraphicDirection(0);else if(-1==c)b=this.snakes[l].getGraphicDirectionFor(this.snakes[l].getTailPosition(),this.snakes[l].lastTail,this.snakes[l].get(this.snakes[l].length()-2));switch(-1==c&&this.snakes[l].length()>1&&(A=this.snakes[l].get(this.snakes[l].length()-1)),0!=c&&-1!=c||b!=o.Direction.ANGLE_1&&b!=o.Direction.ANGLE_2&&b!=o.Direction.ANGLE_3&&b!=o.Direction.ANGLE_4||(0==c&&(p=-90),0==c?p+=-128.073*Math.pow(y,2)+222.332*y-5.47066:-1==c&&(p+=126.896*Math.pow(y,2)+-33.6471*y+1.65942),0==c&&(b==o.Direction.ANGLE_4&&g==o.Direction.UP||b==o.Direction.ANGLE_1&&g==o.Direction.LEFT||b==o.Direction.ANGLE_2&&g==o.Direction.BOTTOM||b==o.Direction.ANGLE_3&&g==o.Direction.RIGHT)?p=-p:-1==c&&(b==o.Direction.ANGLE_4&&g==o.Direction.RIGHT||b==o.Direction.ANGLE_3&&g==o.Direction.BOTTOM||b==o.Direction.ANGLE_1&&g==o.Direction.UP||b==o.Direction.ANGLE_2&&g==o.Direction.LEFT)&&(p=-p),m=!1),A.direction){case o.Direction.UP:d-=E;break;case o.Direction.BOTTOM:d+=E;break;case o.Direction.RIGHT:h+=v;break;case o.Direction.LEFT:h-=v}}c==this.snakes[l].length()-1&&(g=this.snakes[l].getGraphicDirectionFor(u,this.snakes[l].get(c-1),this.snakes[l].lastTail));var L=u.x,I=u.y;if(h+=Math.floor(L*t+(this.canvas.width-i)/2),d+=this.headerHeight+I*n,0==c)if(this.snakes[l].gameOver&&!this.snakes[l].scoreMax)switch(g){case o.Direction.BOTTOM:f="assets/images/snake_dead.png";break;case o.Direction.RIGHT:f="assets/images/snake_dead_2.png";break;case o.Direction.UP:f="assets/images/snake_dead_3.png";break;case o.Direction.LEFT:f="assets/images/snake_dead_4.png"}else switch(g){case o.Direction.BOTTOM:f="assets/images/snake.png";break;case o.Direction.RIGHT:f="assets/images/snake_2.png";break;case o.Direction.UP:f="assets/images/snake_3.png";break;case o.Direction.LEFT:f="assets/images/snake_4.png"}else if(-1==c)switch(g){case o.Direction.BOTTOM:f="assets/images/body_end.png";break;case o.Direction.RIGHT:f="assets/images/body_2_end.png";break;case o.Direction.UP:f="assets/images/body_3_end.png";break;case o.Direction.LEFT:f="assets/images/body_4_end.png"}else switch(g){case o.Direction.UP:case o.Direction.BOTTOM:f="assets/images/body.png";break;case o.Direction.RIGHT:case o.Direction.LEFT:f="assets/images/body_2.png";break;case o.Direction.ANGLE_1:f="assets/images/body_angle_1.png";break;case o.Direction.ANGLE_2:f="assets/images/body_angle_2.png";break;case o.Direction.ANGLE_3:f="assets/images/body_angle_3.png";break;case o.Direction.ANGLE_4:f="assets/images/body_angle_4.png"}this.drawImage(r,f,h,d,t,n,null,null,null,null,m,p)}this.drawImageData(e,a,Math.floor((this.canvas.width-i)/2),this.headerHeight,i,n*this.grid.height,Math.floor((this.canvas.width-i)/2),this.headerHeight,i,n*this.grid.height),r.filter="none"}this.snakes.length>1&&this.drawSnakeInfos(e,i,t,n)}},d.prototype.drawArrow=function(e,t,n,i,s){var o=e.lineCap,a=e.lineWidth,r=e.strokeStyle,l=e.filter;e.lineCap="round",e.lineWidth=8,e.strokeStyle="#FF0000",e.filter="",e.beginPath();var c=i-t,u=s-n,h=Math.atan2(u,c);e.moveTo(t,n),e.lineTo(i,s),e.moveTo(i,s),e.lineTo(i-20*Math.cos(h-Math.PI/6),s-20*Math.sin(h-Math.PI/6)),e.moveTo(i,s),e.lineTo(i-20*Math.cos(h+Math.PI/6),s-20*Math.sin(h+Math.PI/6)),e.stroke(),e.lineCap=o,e.lineWidth=a,e.strokeStyle=r,e.filter=l},d.prototype.drawSnakeInfos=function(e,t,n,a){for(var r=0,l=0,c=0;c<this.snakes.length;c++){this.snakes[c].player==o.PlayerType.HUMAN||this.snakes[c].player==o.PlayerType.HYBRID_HUMAN_AI?r++:l++;var u=this.snakes[c].get(0);if(null!=u){var h=u.x,d=u.y,g=Math.floor(h*n+(this.canvas.width-t)/2),p=this.headerHeight+d*a;if(!this.disableAnimation&&!this.snakes[c].gameOver){var f,m=n*(f=(f=this.offsetFrame/(this.speed*o.Setting.TIME_MULTIPLIER))>1?1:f)-n,y=a*f-a;switch(u.direction){case o.Direction.UP:p-=y;break;case o.Direction.BOTTOM:p+=y;break;case o.Direction.RIGHT:g+=m;break;case o.Direction.LEFT:g-=m}}this.drawText(e,(this.snakes[c].player==o.PlayerType.HUMAN||this.snakes[c].player==o.PlayerType.HYBRID_HUMAN_AI?i.t("engine.playerMin")+r:i.t("engine.aiMin")+l)+"\nÃ— "+this.snakes[c].score,"rgb(255, 255, 255)",Math.round(a/2),o.Setting.FONT_FAMILY,null,null,g,p-Math.round(a/1.75),!1,!0),(this.snakes[c].player==o.PlayerType.HUMAN||this.snakes[c].player==o.PlayerType.HYBRID_HUMAN_AI)&&this.countBeforePlay>=0&&(s.isFilterHueAvailable()&&this.snakes.length>2||!s.isFilterHueAvailable()&&this.snakes.length>1)&&this.drawArrow(e,g+n/2,p-2*a,g+n/2,p-5)}}},e.exports=d},function(e,t,n){function i(){this.images={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}i.prototype.load=function(e,t,n){var i=this;if(this.firstImage&&(this.nbImagesToLoad=e.length,this.firstImage=!1),!(e.length>0))return t();this.loadImage(e[0],(function(s){if(1!=s)return i.hasError=!0,t();e.shift(),i.load(e,t,n)}))},i.prototype.loadImage=function(e,t){var n=this;this.triedLoading++;var i=new Image;i.src=e,i.onload=function(){return null==n.images?t(!1):(n.images[e]=i,n.triedLoading=0,t(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[e]=i),n.triedLoading=0,t(!1);setTimeout((function(){n.loadImage(e,t)}),250)}},i.prototype.get=function(e){return null!=this.images?this.images[e]:null},i.prototype.clear=function(){this.images=null},e.exports=i},function(e,t,n){var i=n(2),s=n(0),o=n(5),a=n(3),r=n(6);function l(e,t,n,i,s,a){this.grid=e,this.snakes=t,this.speed=null==n?8:n,this.initialSpeed=null==n?8:n,this.initialSpeedUntouched=null==n?8:n,this.enablePause=null==i||i,this.enableRetry=null==s||s,this.progressiveSpeed=null!=a&&a,this.countBeforePlay=3,this.lastKey=-1,this.numFruit=1,this.ticks=0,this.firstStart=!0,this.starting=!1,this.paused=!0,this.exited=!1,this.killed=!1,this.isReseted=!0,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.scoreMax=!1,this.errorOccurred=!1,this.intervalPlay,this.reactor=new o,this.reactor.registerEvent("onStart"),this.reactor.registerEvent("onPause"),this.reactor.registerEvent("onContinue"),this.reactor.registerEvent("onReset"),this.reactor.registerEvent("onStop"),this.reactor.registerEvent("onExit"),this.reactor.registerEvent("onKill"),this.reactor.registerEvent("onScoreIncreased"),this.reactor.registerEvent("onUpdate"),this.reactor.registerEvent("onUpdateCounter"),this.init()}l.prototype.init=function(){null==this.snakes||null==this.snakes?(this.errorOccurred=!0,this.snakes=[]):Array.isArray(this.snakes)?(Array.isArray(this.snakes)&&this.snakes.length<=0||this.grid.maze&&this.snakes.length>1)&&(this.errorOccurred=!0):this.snakes=[this.snakes];for(var e=i.randRange(0,360),t=0;t<this.snakes.length;t++)this.snakes[t]instanceof r==0?this.errorOccurred=!0:(e=i.addHue(e,Math.round(360/this.snakes.length)),this.snakes[t].color=e);this.grid instanceof a==0?this.errorOccurred=!0:this.errorOccurred||this.grid.setFruit()},l.prototype.reset=function(){if(this.paused=!0,this.isReseted=!0,this.exited=!1,this.clearIntervalPlay(),this.grid.init(),null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].reset();this.numFruit=1,this.ticks=0,this.lastKey=-1,this.scoreMax=!1,this.errorOccurred=!1,this.gameOver=!1,this.gameFinished=!1,this.gameMazeWin=!1,this.starting=!1,this.initialSpeed=this.initialSpeedUntouched,this.speed=this.initialSpeedUntouched,this.grid.setFruit(),this.reactor.dispatchEvent("onReset"),this.start()},l.prototype.start=function(){this.reactor.dispatchEvent("onUpdateCounter");var e=this;if(!this.errorOccurred){if(null!=this.snakes)for(var t=0;t<this.snakes.length;t++)this.snakes[t].errorInit&&(this.errorOccurred=!0,this.stop());!this.paused||this.gameOver||this.killed||this.scoreMax||this.starting||(this.starting=!0,this.firstStart||this.reactor.dispatchEvent("onContinue"),this.countBeforePlay=3,this.clearIntervalPlay(),this.reactor.dispatchEvent("onUpdateCounter"),this.intervalPlay=setInterval((function(){e.countBeforePlay--,e.reactor.dispatchEvent("onUpdateCounter"),e.countBeforePlay<0&&(e.clearIntervalPlay(),e.paused=!1,e.isReseted=!1,e.firstStart=!1,e.starting=!1,e.reactor.dispatchEvent("onStart"),e.tick())}),1e3))}},l.prototype.clearIntervalPlay=function(){clearInterval(this.intervalPlay)},l.prototype.continue=function(){this.start(),this.reactor.dispatchEvent("onContinue")},l.prototype.stop=function(e){this.gameOver||(this.paused=!0,this.gameOver=!0,e&&(this.gameFinished=!0),this.clearIntervalPlay(),this.reactor.dispatchEvent("onStop"))},l.prototype.pause=function(){this.paused||(this.paused=!0,this.clearIntervalPlay(),this.reactor.dispatchEvent("onPause"))},l.prototype.kill=function(){if(!this.killed){if(this.paused=!0,this.gameOver=!0,this.killed=!0,null!=this.snakes)for(var e=0;e<this.snakes.length;e++)this.snakes[e].kill(),this.snakes[e]=null;this.clearIntervalPlay(),this.grid=null,this.snakes=null,this.reactor.dispatchEvent("onKill")}},l.prototype.exit=function(){this.exited||(this.stop(),this.exited=!0,this.reactor.dispatchEvent("onExit"))},l.prototype.getNBPlayer=function(e){var t=0;if(null!=this.snakes)for(var n=0;n<this.snakes.length;n++)this.snakes[n].player==e&&t++;return t},l.prototype.tick=function(){var e=this;setTimeout((function(){if(!e.paused&&!e.killed){if(0==e.lastTime&&(e.lastTime=time),e.ticks++,e.paused||e.lastKey==s.Key.ENTER&&(e.pause(),e.lastKey=-1),!e.grid.maze||e.grid.mazeForceAuto||e.grid.maze&&e.getNBPlayer(s.PlayerType.HUMAN)<=0&&e.getNBPlayer(s.PlayerType.HYBRID_HUMAN_AI)<=0||e.grid.maze&&(e.getNBPlayer(s.PlayerType.HUMAN)>0||e.getNBPlayer(s.PlayerType.HYBRID_HUMAN_AI)>0)&&-1!=e.lastKey){for(var t=0;t<e.snakes.length;t++){var n=e.snakes[t].direction,i=!1,o=!1;if(e.snakes[t].lastTailMoved=!1,!e.snakes[t].gameOver&&!e.snakes[t].scoreMax){e.snakes[t].player==s.PlayerType.HUMAN||e.snakes[t].player==s.PlayerType.HYBRID_HUMAN_AI?(e.snakes[t].moveTo(e.lastKey),e.lastKey=-1):e.snakes[t].player==s.PlayerType.AI&&e.snakes[t].moveTo(e.snakes[t].ai(!0));var a=e.snakes[t].getHeadPosition();if(e.snakes[t].player==s.PlayerType.HYBRID_HUMAN_AI&&e.grid.isDeadPosition(e.snakes[t].getNextPosition(a,e.snakes[t].direction))&&(e.snakes[t].direction=n,e.snakes[t].moveTo(e.snakes[t].ai(!0)),e.lastKey=-1),a=e.snakes[t].getNextPosition(a,e.snakes[t].direction),e.grid.isDeadPosition(a))e.snakes[t].setGameOver();else if(e.grid.get(a)==s.CaseType.FRUIT){if(e.snakes[t].score++,e.reactor.dispatchEvent("onScoreIncreased"),e.snakes[t].insert(a),e.grid.maze)e.stop(),e.gameMazeWin=!0,e.gameFinished=!0;else if(e.snakes[t].hasMaxScore()&&e.snakes.length<=1)e.scoreMax=!0,e.snakes[t].scoreMax=!0;else{e.numFruit++;i=!0}e.snakes.length<=1&&e.progressiveSpeed&&e.snakes[t].score>0&&e.initialSpeed>1&&(e.initialSpeed=Math.ceil(-e.initialSpeedUntouched/100*e.snakes[t].score+e.initialSpeedUntouched),e.initialSpeed=e.initialSpeed<1?1:e.initialSpeed)}else e.snakes[t].insert(a),e.grid.maze||(e.snakes[t].remove(),e.snakes[t].lastTailMoved=!0)}if(!e.scoreMax&&i)o=!e.grid.setFruit()}if(!e.scoreMax&&!o&&e.grid.isFruitSurrounded(e.grid.fruitPos,!0))o=!e.grid.setFruit();for(var r=0,l=0;l<e.snakes.length;l++)(e.snakes[l].gameOver||e.snakes[l].scoreMax)&&r++;(r>=e.snakes.length||o)&&(e.stop(),e.snakes.length>1&&(e.gameFinished=!0)),e.reactor.dispatchEvent("onUpdate")}e.tick()}}),this.initialSpeed*s.Setting.TIME_MULTIPLIER)},l.prototype.onReset=function(e){this.reactor.addEventListener("onReset",e)},l.prototype.onStart=function(e){this.reactor.addEventListener("onStart",e)},l.prototype.onContinue=function(e){this.reactor.addEventListener("onContinue",e)},l.prototype.onStop=function(e){this.reactor.addEventListener("onStop",e)},l.prototype.onPause=function(e){this.reactor.addEventListener("onPause",e)},l.prototype.onExit=function(e){this.reactor.addEventListener("onExit",e)},l.prototype.onKill=function(e){this.reactor.addEventListener("onKill",e)},l.prototype.onScoreIncreased=function(e){this.reactor.addEventListener("onScoreIncreased",e)},l.prototype.onUpdate=function(e){this.reactor.addEventListener("onUpdate",e)},l.prototype.onUpdateCounter=function(e){this.reactor.addEventListener("onUpdateCounter",e)},e.exports=l},function(e,t,n){e.exports={LocalesInit:n(19),LocalesMenu:n(21),LocalesEngine:n(22),Main:n(23),GameConstants:n(0),Event:n(12),Reactor:n(5),Grid:n(3),Snake:n(6),GameGroup:n(10),GameUtils:n(2),Position:n(4),GameEngine:n(17),Game:n(11),Button:n(7),GameController:n(8),GameControllerWorker:n(13),GameGroup:n(10),GameUI:n(15),ImageLoader:n(16),NotificationMessage:n(9)}},function(e,t,n){var i=n(1),s=n(20);i.use(s).init({fallbackLng:["en","fr"],load:"languageOnly",detection:{order:["localStorage","querystring","navigator","htmlTag"],lookupQuerystring:"lng",lookupLocalStorage:"i18nextLng",caches:["localStorage"]}})},function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=[],n=t.forEach,i=t.slice;function s(e){return n.call(i.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var o,a={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null}(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&function(e,t,n,i){var s;if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),s="; expires="+o.toGMTString()}else s="";i=i?"domain="+i+";":"",document.cookie=e+"="+t+s+";"+i+"path=/"}(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain)}},r={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var s=n[i].indexOf("=");s>0&&n[i].substring(0,s)===e.lookupQuerystring&&(t=n[i].substring(s+1))}return t}};try{o="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){o=!1}var l={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&o){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&o&&window.localStorage.setItem(t.lookupLocalStorage,e)}},c={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},u={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},h={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},d={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}},g=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}var n,i;return n=t,(i=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=s(t,this.options||{},{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],checkWhitelist:!0}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(a),this.addDetector(r),this.addDetector(l),this.addDetector(c),this.addDetector(u),this.addDetector(h),this.addDetector(d)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n,i=[];if(e.forEach((function(e){if(t.detectors[e]){var n=t.detectors[e].lookup(t.options);n&&"string"==typeof n&&(n=[n]),n&&(i=i.concat(n))}})),i.forEach((function(e){if(!n){var i=t.services.languageUtils.formatLanguageCode(e);t.options.checkWhitelist&&!t.services.languageUtils.isWhitelisted(i)||(n=i)}})),!n){var s=this.i18nOptions.fallbackLng;"string"==typeof s&&(s=[s]),s||(s=[]),n="[object Array]"===Object.prototype.toString.apply(s)?s[0]:s[0]||s.default&&s.default[0]}return n}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}])&&e(n.prototype,i),t}();return g.type="languageDetector",g}()},function(e,t,n){var i=n(1);i.addResourceBundle("fr","translation",{debugModeEnabled:"Mode de debug activÃ©",lang:{fr:"FranÃ§ais",en:"English"},update:{updateAvailable:"Une mise Ã  jour du jeu est disponible",version:"Version",of:"du",current:"Vous disposez actuellement de la version",versionDate:"{{date, DD/MM/YYYY}}",download:"TÃ©lÃ©charger la mise Ã  jour",getURL:"Obtenir l'adresse URL du tÃ©lÃ©chargement",getChanges:"Obtenir la liste des changements",URLToDownload:"Adresse URL menant au tÃ©lÃ©chargement :",noChanges:"Aucun changement renseignÃ©.",changes:"Changements de la nouvelle version :"},menu:{selectGame:"SÃ©lectionnez un mode de jeu :",soloAi:"IA solo",soloPlayer:"Joueur solo",playerVsAi:"Joueur VS IA",aiVsAi:"IA VS IA",battleRoyale:"Battle Royale",levelsSoloPlayer:"Niveaux (joueur solo)",levelsSoloAI:"Niveaux (IA solo)",version:"Version",versionDate:"{{date, DD/MM/YYYY}}",by:"Par",infos:"Plus d'infos",readme:"Fichier Lisez-moi",source:"TÃ©lÃ©charger la source",language:"Langue :",enableAnimations:"Activer les animations"},settings:{title:"ParamÃ¨tres de la partie :",possibleFailInitGame:"Il est possible que l'initialisation de la partie Ã©choue avec vos paramÃ¨tres car il n'y aura pas assez d'espace pour placer tous les Snake. Dans ce cas, un message Â« Une erreur est survenue Â» peut s'afficher. Essayez avec d'autres paramÃ¨tres.",gridSize:"Taille de la grille :",placeholderHeight:"Hauteur",placeholderWidth:"Largeur",invalidHeight:"Cette valeur doit Ãªtre comprise entre 5 et 100",invalidWidth:"Cette valeur doit Ãªtre comprise entre 5 et 100",options:"Autres options :",borderWalls:"Entourer la grille de murs",generateWalls:"GÃ©nÃ©rer des murs Ã  des positions alÃ©atoires",mazeGrid:"GÃ©nÃ©rer un labyrinthe",sameGrid:"Partie sur la mÃªme grille",speed:"Vitesse du jeu :",speedSelect:{1:"1 â€“ La plus rapide",3:"3 â€“ Rapide",5:"5 â€“ Moyenne",8:"8 â€“ Normale",10:"10 â€“ Assez lente",15:"15 â€“ Lente",20:"20 â€“ TrÃ¨s lente",25:"25 â€“ ExtrÃªmement lente",custom:"Vitesse personnalisÃ©eâ€¦"},invalidSpeed:"Cette valeur doit Ãªtre comprise entre 1 et 100",progressiveSpeed:"Augmenter la vitesse progressivement",customSpeed:"Vitesse personnalisÃ©e :",placeholderCustomSpeed:"Entrez la vitesseâ€¦",invalidCustomSpeed:"Cette valeur doit Ãªtre comprise entre 1 et 100",customSpeedHelp:"Plus le nombre est Ã©levÃ©, plus la vitesse du jeu est lente, et inversement",playerSettings:"Options du joueur :",aiAssistant:"Activer l'assistant IA",aiAssistantInfos:"En activant cette option, une IA tentera de corriger votre trajectoire si vous Ãªtes sur le point de vous Ã©craser sur un obstacle. RÃ©duit la difficultÃ© du jeu.",aiLevel:"Niveau de l'IA :",aiLevelSelect:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Ã‰levÃ©",ultra:"Ultra"},invalidaiLevel:"Cette valeur est invalide",autoRetry:"Faire que l'IA recommence auto sa partie aprÃ¨s un Game Over",numberIA:"Nombre d'IA :",placeholderNumberIA:"Entrez le nombreâ€¦",invalidIANumber:"Cette valeur doit Ãªtre comprise entre 2 et 100",battleAgainstAIs:"Jouer contre les IA",validate:"Valider",reset:"RÃ©initialiser",backToMenu:"Retour au menu"},game:{backToMenu:"Retour au menu",currentMode:"Mode de jeu actuel :",confirmQuit:"ÃŠtes-vous sÃ»r de vouloir retourner au menu ?",equalityPlayerVSAI:"Vous avez fini ex-aequo avec l'IA !",winPlayerVSAI:"Bravo, vous avez gagnÃ© !",losePlayerVSAI:"Dommage, l'IA vous a battu avec un score supÃ©rieur !",oneWinnerAIVSAI:"L'IA nÂ°{{numWinner}} a gagnÃ© !",equalityAIVSAI:"Les deux IA ont fini ex-aequo !",oneWinnerBattleRoyale:"L'IA nÂ°{{numWinner}} a gagnÃ© avec un score de {{score}} !",winnersBattleRoyale:"Les IA",winnerAIBattleRoyale:"L'IA",winnersNumBattleRoyale:"nÂ°{{numWinner}}",andWinnersBattleRoyale:"et",andPlayerWinnersBattleRoyale:"ainsi que vous",winScoreBattleRoyale:"ont gagnÃ© avec un score de {{score}} !",winPlayerScoreBattleRoyale:"avez gagnÃ© avec un score de {{score}} !",playerWinnerBattleRoyale:"Vous avez gagnÃ© avec un score de {{score}} !"},levels:{default:"Niveaux par dÃ©faut",downloaded:"Niveaux tÃ©lÃ©chargÃ©s",titlePlayer:"Niveaux (joueur solo)",titleAI:"Niveaux (IA solo)",emptyList:"Aucun niveau trouvÃ©â€¦",download:"TÃ©lÃ©charger des niveaux",downloadLink:"Les niveaux seront tÃ©lÃ©chargÃ©s depuis {{url}}",editDownloadURL:"Modifier l'URL de tÃ©lÃ©chargement",editDownloadURLPrompt:"Entrez l'URL de tÃ©lÃ©chargement des niveaux.\n* Variables disponibles :\n{player} - type de joueur (humain, IA)\n{appVersion} - version de l'application.\n\nLa modification de ce paramÃ¨tre peut faire planter le jeu ou vous exposer Ã  des problÃ¨mes de sÃ©curitÃ©. Ne la modifiez que si vous savez ce que vous faites. Ce paramÃ¨tre n'est pas persistant et sera effacÃ© si vous rechargez l'application.",downloading:"TÃ©lÃ©chargement en cours, veuillez patienterâ€¦ Si le bouton reste grisÃ© aprÃ¨s plus de 10 secondes, cliquez sur le bouton ci-dessous pour le dÃ©bloquer et rÃ©essayer le tÃ©lÃ©chargement :",buttonDeblock:"DÃ©bloquer le tÃ©lÃ©chargement",disabledLevel:"Niveau bloquÃ©. Terminez les niveaux prÃ©cÃ©dents pour le dÃ©bloquer.",notCompatible:"Ce niveau n'est pas compatible avec cette version du jeu. Mettez-le Ã  jour.",goalAchieved:"Objectif atteint ! Vous pouvez passer au prochain niveau.",goalNotAchieved:"Objectif ratÃ© ! Essayez Ã  nouveau.",level:"Niveau",reachScore:"Atteignez au moins le score de {{value}} pour passer ce niveau !",reachScoreTime:"Atteignez le score de {{value}} en moins de {{count}} seconde !",reachScoreTime_plural:"Atteignez le score de {{value}} en moins de {{count}} secondes !",reachMaxScore:"Atteignez le score maximal pour cette grille pour passer ce niveau !",multiBestScore:"Terminez cette partie en obtenant un meilleur score que l'adversaire pour passer ce niveau !",multiBestScore_plural:"Terminez cette partie en obtenant un meilleur score que les adversaires pour passer ce niveau !",multiReachScoreFirst:"Atteignez le score de {{value}} avant l'adversaire pour passer ce niveau !",multiReachScoreFirst_plural:"Atteignez le score de {{value}} avant les adversaires pour passer ce niveau !",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour passer ce niveau.\nLe Snake n'avance pas automatiquement.",bestScore:"Meilleur score : {{count}}",bestTime:"Meilleur temps : {{count}} seconde",bestTime_plural:"Meilleur temps : {{count}} secondes",bestScoreShort:"Ã— {{count}}",bestTimeShort:"{{count}} seconde",bestTimeShort_plural:"{{count}} secondes",timerRemaining:"Il reste {{count}} seconde",timerRemaining_plural:"Il reste {{count}} secondes",localstorageDisabled:"Les cookies sont dÃ©sactivÃ©s sur votre navigateur. Vous perdrez votre progression au prochain rechargement de la page. Activez-les puis rechargez la page pour Ã©viter cela.",difficulty:"DifficultÃ© :"}},!0,!1),i.addResourceBundle("en","translation",{debugModeEnabled:"Debug mode enabled",lang:{fr:"FranÃ§ais",en:"English"},update:{updateAvailable:"An update of the game is available",version:"Version",of:"of",current:"You currently have the version",versionDate:"{{date, MM/DD/YYYY}}",download:"Download the update",getURL:"Get the URL of the download",getChanges:"Get the list of changes",URLToDownload:"Download URL:",noChanges:"No change filled.",changes:"Changes in the new version:"},menu:{selectGame:"Select a game mode:",soloAi:"Single AI",soloPlayer:"Single player",playerVsAi:"Player VS AI",aiVsAi:"AI VS AI",battleRoyale:"Battle Royale",levelsSoloPlayer:"Levels (single player)",levelsSoloAI:"Levels (single AI)",version:"Version",versionDate:"{{date, MM/DD/YYYY}}",by:"By",infos:"More informations",readme:"Readme file",source:"Download the source",language:"Language:",enableAnimations:"Enable the animations"},settings:{title:"Game settings:",possibleFailInitGame:'It\'s possible that the initialization of the game fails with your settings because there will not be enough space to place all Snake. In this case, a message "An error has occurred" may be displayed. Try with other settings.',gridSize:"Grid size:",placeholderHeight:"Height",placeholderWidth:"Width",invalidHeight:"This value must be between 5 and 100",invalidWidth:"This value must be between 5 and 100",options:"Others options:",borderWalls:"Surround the grid with walls",generateWalls:"Generate walls at random positions",mazeGrid:"Generate a maze",sameGrid:"Game on the same grid",speed:"Speed:",speedSelect:{1:"1 â€“ Fastest",3:"3 â€“ Fast",5:"5 â€“ Medium",8:"8 â€“ Normal",10:"10 â€“ Quite slow",15:"15 â€“ Slow",20:"20 â€“ Very slow",25:"25 â€“ Extremely slow",custom:"Custom speedâ€¦"},invalidSpeed:"This value must be between 1 and 100",progressiveSpeed:"Increase the speed progressively",customSpeed:"Custom speed:",placeholderCustomSpeed:"Enter the speedâ€¦",invalidCustomSpeed:"This value must be between 1 and 100",customSpeedHelp:"The higher the number, the slower the game speed, and inversely",playerSettings:"Player options:",aiAssistant:"Enable the AI assistant",aiAssistantInfos:"By enabling this option, an AI â€‹â€‹will try to correct your trajectory if you are about to crash into an obstacle. Reduces the difficulty of the game.",aiLevel:"AI level:",aiLevelSelect:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},invalidaiLevel:"This value is invalid",autoRetry:"Make the AI restart its game after a Game Over",numberIA:"Number of AI:",placeholderNumberIA:"Enter the numberâ€¦",invalidIANumber:"This value must be between 2 and 100",battleAgainstAIs:"Play against AIs",validate:"Validate",reset:"Reset",backToMenu:"Back to the menu"},game:{backToMenu:"Back to the menu",currentMode:"Current game mode:",confirmQuit:"Are you sure that you want to go back to the menu?",equalityPlayerVSAI:"You finished tied with AI!",winPlayerVSAI:"Congratulations, you won!",losePlayerVSAI:"Too bad, the AI â€‹â€‹beat you with a higher score!",oneWinnerAIVSAI:"The AI nÂ°{{numWinner}} won!",equalityAIVSAI:"The two AIs finished tied!",oneWinnerBattleRoyale:"The AI nÂ°{{numWinner}} won with a score of {{score}}!",winnersBattleRoyale:"The AIs",winnerAIBattleRoyale:"The AI",winnersNumBattleRoyale:"nÂ°{{numWinner}}",andWinnersBattleRoyale:"and",andPlayerWinnersBattleRoyale:"as well as you",winScoreBattleRoyale:"won with a score of {{score}}!",winPlayerScoreBattleRoyale:"won with a score of {{score}}!",playerWinnerBattleRoyale:"You won with a score of {{score}}!"},levels:{default:"Default levels",downloaded:"Downloaded levels",titlePlayer:"Levels (single player)",titleAI:"Levels (single AI)",emptyList:"No level foundâ€¦",download:"Download levels",downloadLink:"The levels will be downloaded from {{url}}",editDownloadURL:"Edit the download URL",editDownloadURLPrompt:"Enter the download URL of the levels.\n* Available variables:\n{player} - player type (human, AI)\n{appVersion} - version of the application.\n\nChanging this setting may cause the game to crash or expose you to security issues. Only change it if you know what you are doing. This setting is not persistent and will be erased if you reload the application.",downloading:"Downloading, please waitâ€¦ If the button remains gray after more than 10 seconds, click on the button below to unblock and try again:",buttonDeblock:"Unlock the download",disabledLevel:"Level locked. Complete the previous levels to unlock it.",notCompatible:"This level is not compatible with this version of the game. Update it.",goalAchieved:"Goal achieved! You can move to the next level.",goalNotAchieved:"Goal missed! Try again.",level:"Level",reachScore:"Reach at least the score of {{value}} to pass this level!",reachScoreTime:"Reach the score of {{value}} in less than {{count}} second!",reachScoreTime_plural:"Reach the score of {{value}} in less than {{count}} seconds!",reachMaxScore:"Reach the maximum score for this grid to pass this level!",multiBestScore:"Finish this game by getting a better score than the opponent to pass this level!",multiBestScore_plural:"Finish this game by getting a better score than the opponents to pass this level!",multiReachScoreFirst:"Reach the score of {{value}} before the opponent to pass this level!",multiReachScoreFirst_plural:"Reach the score of {{value}} before the opponents to pass this level!",mazeMode:"Maze mode! Find the path to the apple to pass this level.\nThe Snake doesn't move automatically.",bestScore:"Best score: {{count}}",bestTime:"Best time: {{count}} second",bestTime_plural:"Best time: {{count}} seconds",timerRemaining:"{{count}} second left",timerRemaining_plural:"{{count}} seconds left",bestScoreShort:"Ã— {{count}}",bestTimeShort:"{{count}} second",bestTimeShort_plural:"{{count}} seconds",localstorageDisabled:"Cookies are disabled on your browser. You will lose your progress the next time you reload the page. Activate them and reload the page to avoid this.",difficulty:"Difficulty :"}},!0,!1)},function(e,t,n){var i=n(1);i.addResourceBundle("fr","translation",{engine:{score:"Score",num:"nÂ°",initFailed:"Ã‰chec de l'initialisation du jeu : le Snake est plus grand que la grille",continue:"Reprendre",reset:"Recommencer la partie",retryInit:"RÃ©essayer",exit:"Quitter",yes:"Oui",no:"Non",ok:"OK",about:"Ã€ proposâ€¦",infosGame:"Infos partie",player:"Joueur :",playerHuman:"Vous",playerAI:"IA",aiLevel:"Niveau de l'IA :",aiLevelList:{random:"Au hasard",low:"Faible",normal:"Normal",high:"Ã‰levÃ©",ultra:"Ultra"},sizeGrid:"Taille de la grille :",currentSpeed:"Vitesse actuelle :",progressiveSpeed:"Vitesse progressive",loading:"Chargement des ressourcesâ€¦",exited:"Cette partie a Ã©tÃ© dÃ©finitivement quittÃ©e. En attente de la fin des autres partiesâ€¦",error:"Une erreur est survenue !",errorLoading:"Une erreur est survenue lors du chargement des ressources. VÃ©rifiez votre connexion Internet.",exitConfirm:"ÃŠtes-vous sÃ»r de vouloir quitter la partie ?",resetConfirm:"ÃŠtes-vous sÃ»r de vouloir recommencer la partie ?",scoreMax:"Score maximal atteint !",gameOver:"Game Over !",gameFinished:"Partie terminÃ©e !",pause:"Pause",playerMin:"J",aiMin:"IA",aboutScreen:{title:"SnakeIA par Eliastik",versionAndDate:"Version {{version}} ({{date, DD/MM/YYYY}})"},debug:{fps:"IPS",frames:"Images",ticks:"Tours",speed:"Vit.",paused:"En pause"},colors:{white:"Blanc",gray:"Gris",black:"Noir",red:"Rouge",brown:"Marron",orange:"Orange",yellow:"Jaune",green:"Vert",blue:"Bleu",purple:"Mauve",pink:"Rose"},colorPlayer:"Vous Ãªtes le Snake\nen {{color}}",arrowPlayer:"Vous Ãªtes le Snake\nindiquÃ© par la\nflÃ¨che",ready:"Partez !",assistAI:"Assistant IA",exitFullScreen:"Quitter plein-Ã©cran",enterFullScreen:"Mode plein-Ã©cran",mazeMode:"Mode labyrinthe ! Trouvez le chemin vers la pomme pour rÃ©ussir la partie.\nLe Snake n'avance pas automatiquement.",mazeWin:"Bien jouÃ© !",mazeModeMin:"Mode labyrinthe"}},!0,!1),i.addResourceBundle("en","translation",{engine:{score:"Score",num:"nÂ°",initFailed:"Game init failed: the Snake is bigger than the grid",continue:"Continue",reset:"Reset the game",retryInit:"Retry",exit:"Exit",yes:"Yes",no:"No",ok:"OK",about:"Aboutâ€¦",infosGame:"Current game infos",player:"Player:",playerHuman:"You",playerAI:"AI",aiLevel:"AI level:",aiLevelList:{random:"Random",low:"Low",normal:"Normal",high:"High",ultra:"Ultra"},sizeGrid:"Grid size:",currentSpeed:"Current speed:",progressiveSpeed:"Progressive speed",loading:"Loading resourcesâ€¦",exited:"This game has been definitively exited. Waiting for the end of the other gamesâ€¦",error:"An error has occurred!",errorLoading:"An error occurred while loading resources. Check your Internet connection.",exitConfirm:"Are you sure that you want to exit the game?",resetConfirm:"Are you sure that you want to reset the game?",scoreMax:"Maximum score reached!",gameFinished:"Game finished!",gameOver:"Game Over!",pause:"Pause",playerMin:"P",aiMin:"AI",aboutScreen:{title:"SnakeIA by Eliastik",versionAndDate:"Version {{version}} ({{date, MM/DD/YYYY}})"},debug:{fps:"FPS",frames:"Frames",ticks:"Ticks",speed:"Speed",paused:"Paused"},colors:{white:"White",gray:"Gray",black:"Black",red:"Red",brown:"Brown",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"},colorPlayer:"You are the Snake\nin {{color}}",arrowPlayer:"You are the Snake\npointed by the\narrow",ready:"Go!",assistAI:"AI assistant",exitFullScreen:"Exit fullscreen",enterFullScreen:"Fullscreen mode",mazeMode:"Maze mode! Find the path to the apple to succeed this game.\nThe Snake doesn't move automatically.",mazeWin:"Good game!",mazeModeMin:"Maze mode"}},!0,!1)},function(e,t,n){var i=n(1),s=n(11),o=n(0),a=n(6),r=n(3),l=n(9),c=n(10);window.SOLO_AI="SOLO_AI",window.SOLO_PLAYER="SOLO_PLAYER",window.PLAYER_VS_AI="PLAYER_VS_AI",window.AI_VS_AI="AI_VS_AI",window.BATTLE_ROYALE="BATTLE_ROYALE",window.UPDATER_URI="https://www.eliastiksofts.com/snakeia/update.php",window.LEVEL_REACH_SCORE="LEVEL_REACH_SCORE",window.LEVEL_REACH_MAX_SCORE="LEVEL_REACH_MAX_SCORE",window.LEVEL_MULTI_BEST_SCORE="LEVEL_MULTI_BEST_SCORE",window.LEVEL_MULTI_REACH_SCORE_FIRST="LEVEL_MULTI_REACH_SCORE_FIRST",window.LEVEL_REACH_SCORE_ON_TIME="LEVEL_REACH_SCORE_ON_TIME",window.LEVEL_MAZE_WIN="LEVEL_MAZE_WIN",window.DEFAULT_LEVEL="DEFAULT_LEVEL",window.DOWNLOADED_LEVEL="DOWNLOADED_LEVEL",window.DEFAULT_LEVELS_SOLO_PLAYER={1:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},2:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},3:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:15,version:o.Setting.APP_VERSION},4:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,60],version:o.Setting.APP_VERSION},5:{settings:[10,10,!0,!1,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},6:{settings:[15,15,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:20,version:o.Setting.APP_VERSION},7:{settings:[15,15,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[20,45],version:o.Setting.APP_VERSION},8:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:35,version:o.Setting.APP_VERSION},9:{settings:[15,15,!1,!1,!1,null,!1,null,1],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:o.Setting.APP_VERSION},10:{settings:[10,10,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[10,15],version:o.Setting.APP_VERSION},11:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION},12:{settings:[20,20,!0,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION},13:{settings:[20,20,!0,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:o.Setting.APP_VERSION},14:{settings:[20,20,!0,!1,!0,5,!0,null,0],type:LEVEL_REACH_SCORE,typeValue:30,version:o.Setting.APP_VERSION},15:{settings:[15,15,!1,!1,!0,null,!1,null,1],type:LEVEL_REACH_SCORE_ON_TIME,typeValue:[15,60],version:o.Setting.APP_VERSION},16:{settings:[20,20,!1,!1,!0,null,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:75,version:o.Setting.APP_VERSION},17:{settings:[15,15,!0,!1,!0,15,!1,null,2],type:LEVEL_MULTI_BEST_SCORE,typeValue:null,version:o.Setting.APP_VERSION},18:{settings:[5,5,!0,!1,!0,25,!1,null,0],type:LEVEL_REACH_MAX_SCORE,typeValue:null,version:o.Setting.APP_VERSION},19:{settings:[5,5,!1,!0,!0,10,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:10,version:o.Setting.APP_VERSION},20:{settings:[20,20,!1,!0,!0,15,!1,null,0],type:LEVEL_REACH_SCORE,typeValue:50,version:o.Setting.APP_VERSION}},window.SOLO_PLAYER_SAVE="snakeia_solo_player_",window.DEFAULT_LEVELS_SOLO_AI=DEFAULT_LEVELS_SOLO_PLAYER,window.SOLO_AI_SAVE="snakeia_solo_ai_",window.DOWNLOAD_DEFAULT_URI="https://www.eliastiksofts.com/snakeia/downloadLevels.php?player={player}&ver={appVersion}",window.SOLO_PLAYER_DOWNLOAD_LEVELS_TO="snakeia_solo_player_downloadedLevels",window.SOLO_AI_DOWNLOAD_LEVELS_TO="snakeia_solo_ai_downloadedLevels";var u=SOLO_AI,h=!0,d=!1;document.getElementById("versionTxt").innerHTML=o.Setting.APP_VERSION,document.getElementById("appVersion").innerHTML=o.Setting.APP_VERSION,document.getElementById("dateTxt").innerHTML=DATE_VERSION,document.getElementById("appUpdateDate").innerHTML=DATE_VERSION,document.getElementById("enableAnimations").onchange=function(){h=this.checked},String.prototype.strcmp=function(e){return this==e?0:this>e?1:-1};var g,p=new function(e){var t={};try{e=e||window.localStorage}catch(t){e=null}function n(){try{var t="__some_random_key_you_are_not_going_to_use__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}this.isSupported=function(){return n()},this.clear=function(){n()?e.clear():t={}},this.getItem=function(i){return n()?e.getItem(i):t.hasOwnProperty(i)?t[i]:null},this.key=function(i){return n()?e.key(i):Object.keys(t)[i]||null},this.removeItem=function(i){n()?e.removeItem(i):delete t[i]},this.setItem=function(i,s){n()?e.setItem(i,s):t[i]=String(s)},this.length=function(){return n()?e.length:Object.keys(t).length}};function f(e,t,n){var i,s,o=t;this.pause=function(){window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),o-=Date.now()-s},this.resume=function(){s=Date.now(),window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),i=window.setTimeout(e,o),null!=n&&null!=n.start&&n.start()},this.reset=function(){window.clearTimeout(i),null!=n&&null!=n.stop&&n.stop(),o=t},this.getTime=function(){return o-(Date.now()-s)}}function m(e){this.interval,this.start=function(){this.interval=setInterval(e,1e3)},this.stop=function(){clearInterval(this.interval)}}function y(e){(u=e)==SOLO_PLAYER?document.getElementById("iaSettings").style.display="none":document.getElementById("iaSettings").style.display="block",u==SOLO_AI?document.getElementById("autoRetrySettings").style.display="block":document.getElementById("autoRetrySettings").style.display="none",u==BATTLE_ROYALE?document.getElementById("numberIASettings").style.display="block":document.getElementById("numberIASettings").style.display="none",u==PLAYER_VS_AI||u==AI_VS_AI||u==BATTLE_ROYALE?document.getElementById("sameGridDiv").style.display="block":document.getElementById("sameGridDiv").style.display="none",u==SOLO_AI||u==SOLO_PLAYER?document.getElementById("mazeGridDiv").style.display="block":document.getElementById("mazeGridDiv").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("settings").style.display="block",A(),b(),L(),S(),I()}function v(){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="none",document.getElementById("menu").style.display="block"}function E(e){document.getElementById("settings").style.display="none",document.getElementById("levelContainer").style.display="block",document.getElementById("gameContainer").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",e==PLAYER_HUMAN?(document.getElementById("titleLevelList").innerHTML=i.t("levels.titlePlayer"),document.getElementById("levelListDefault").innerHTML=C(PLAYER_HUMAN,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="none",document.getElementById("levelListDownloadPlayer").style.display="block",document.getElementById("levelListDownloadPlayer").innerHTML=C(PLAYER_HUMAN,DOWNLOADED_LEVEL)):e==PLAYER_AI&&(document.getElementById("titleLevelList").innerHTML=i.t("levels.titleAI"),document.getElementById("levelListDefault").innerHTML=C(PLAYER_AI,DEFAULT_LEVEL),document.getElementById("levelListDownloadAI").style.display="block",document.getElementById("levelListDownloadPlayer").style.display="none",document.getElementById("levelListDownloadAI").innerHTML=C(PLAYER_AI,DOWNLOADED_LEVEL))}function A(){!document.getElementById("sameGrid").checked||u!=PLAYER_VS_AI&&u!=AI_VS_AI&&u!=BATTLE_ROYALE?(document.getElementById("progressiveSpeed").disabled=!1,document.getElementById("autoRetry").disabled=!1):(document.getElementById("progressiveSpeed").checked=!1,document.getElementById("progressiveSpeed").disabled=!0,document.getElementById("autoRetry").checked=!1,document.getElementById("autoRetry").disabled=!0)}function b(){"custom"==document.getElementById("gameSpeed").value?document.getElementById("customSpeedSettings").style.display="block":document.getElementById("customSpeedSettings").style.display="none"}function L(){u==SOLO_PLAYER||u==PLAYER_VS_AI||u==BATTLE_ROYALE&&document.getElementById("battleAgainstAIs").checked?document.getElementById("playerSettings").style.display="block":document.getElementById("playerSettings").style.display="none"}function I(){!document.getElementById("mazeGrid").checked||u!=SOLO_AI&&u!=SOLO_PLAYER?(document.getElementById("borderWalls").disabled=!1,document.getElementById("generateWalls").disabled=!1,document.getElementById("aiAssistant").disabled=!1):(document.getElementById("borderWalls").checked=!1,document.getElementById("borderWalls").disabled=!0,document.getElementById("generateWalls").checked=!1,document.getElementById("generateWalls").disabled=!0,document.getElementById("aiAssistant").checked=!1,document.getElementById("aiAssistant").disabled=!0)}function S(){if(document.getElementById("possibleFailInitGame").style.display="none",w(!0)){var e=document.getElementById("heightGrid").value,t=document.getElementById("widthGrid").value,n=document.getElementById("borderWalls").checked,i=document.getElementById("generateWalls").checked,s=document.getElementById("sameGrid").checked,o=document.getElementById("numberIA").value,a=document.getElementById("battleAgainstAIs").checked,r=1;u==PLAYER_VS_AI||u==AI_VS_AI?s&&(r=2):u==BATTLE_ROYALE&&s&&(r=a?parseInt(o)+1:o),function(e,t,n,i,s){var o=(e=parseInt(e))*(t=parseInt(t));return n&&(o-=2*(t+e)-4),i&&(o-=n?e*t*.1:e*t*.1675),!(o>=5*s)}(e,t,n,i,r)&&(document.getElementById("possibleFailInitGame").style.display="block")}}function T(e){document.getElementById("invalidHeight").style.display="none",document.getElementById("invalidWidth").style.display="none",document.getElementById("heightGrid").classList.remove("is-invalid"),document.getElementById("widthGrid").classList.remove("is-invalid"),document.getElementById("gameSpeed").classList.remove("is-invalid"),document.getElementById("invalidSpeed").style.display="none",document.getElementById("customSpeed").classList.remove("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="none",document.getElementById("aiLevel").classList.remove("is-invalid"),document.getElementById("invalidaiLevel").style.display="none",document.getElementById("numberIA").classList.remove("is-invalid"),document.getElementById("invalidIANumber").style.display="none",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",e&&(document.getElementById("heightGrid").value=20,document.getElementById("widthGrid").value=20,document.getElementById("borderWalls").checked=!1,document.getElementById("generateWalls").checked=!1,document.getElementById("mazeGrid").checked=!1,document.getElementById("sameGrid").checked=!0,document.getElementById("gameSpeed").value=8,document.getElementById("progressiveSpeed").checked=!1,document.getElementById("customSpeed").value=8,document.getElementById("customSpeedSettings").style.display="none",document.getElementById("aiLevel").value="normal",document.getElementById("autoRetry").checked=!1,document.getElementById("numberIA").value=20,document.getElementById("battleAgainstAIs").checked=!1,document.getElementById("aiAssistant").checked=!1),A(),b(),L(),S(),I()}function w(e){e||T(!1);var t=document.getElementById("heightGrid").value,n=document.getElementById("widthGrid").value,o=document.getElementById("borderWalls").checked,g=document.getElementById("generateWalls").checked,p=document.getElementById("mazeGrid").checked,f=document.getElementById("sameGrid").checked,m=document.getElementById("gameSpeed").value,y=document.getElementById("progressiveSpeed").checked,E=document.getElementById("customSpeed").value,A=document.getElementById("aiLevel").value,b=document.getElementById("autoRetry").checked,L=document.getElementById("numberIA").value,I=document.getElementById("battleAgainstAIs").checked;if(document.getElementById("aiAssistant").checked)var S=PLAYER_HYBRID_HUMAN_AI;else S=PLAYER_HUMAN;var w=!0;if(""==t.trim()||isNaN(t)||t<5||t>100?(w=!1,e||(document.getElementById("heightGrid").classList.add("is-invalid"),document.getElementById("invalidHeight").style.display="block")):t=parseInt(t),""==n.trim()||isNaN(n)||n<5||n>100?(w=!1,e||(document.getElementById("widthGrid").classList.add("is-invalid"),document.getElementById("invalidWidth").style.display="block")):n=parseInt(n),"custom"!=m&&(""==m.trim()||isNaN(m)||m<1||m>100)?(w=!1,e||(document.getElementById("gameSpeed").classList.add("is-invalid"),document.getElementById("invalidSpeed").style.display="block")):"custom"!=m&&(m=parseInt(m)),"custom"==m&&(""==E.trim()||isNaN(E)||E<1||E>100)?(w=!1,e||(document.getElementById("customSpeed").classList.add("is-invalid"),document.getElementById("invalidCustomSpeed").style.display="block")):"custom"==m&&(m=parseInt(E)),u!=SOLO_PLAYER&&"low"!=A&&"normal"!=A&&"high"!=A&&"random"!=A)w=!1,e||(document.getElementById("aiLevel").classList.add("is-invalid"),document.getElementById("invalidaiLevel").style.display="block");else if(u!=SOLO_PLAYER)switch(A){case"random":A=AI_LEVEL_RANDOM;break;case"low":A=AI_LEVEL_LOW;break;case"normal":A=AI_LEVEL_DEFAULT;break;case"high":A=AI_LEVEL_HIGH;break;case"ultra":A=AI_LEVEL_ULTRA;break;default:A=AI_LEVEL_DEFAULT}if(u==BATTLE_ROYALE&&(""==L.trim()||isNaN(L)||L<2||L>100)?(w=!1,e||(document.getElementById("numberIA").classList.add("is-invalid"),document.getElementById("invalidIANumber").style.display="block")):u==BATTLE_ROYALE&&(L=parseInt(L)),u!=SOLO_AI&&(b=!1),e)return w;if(w){document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="block";var k="";switch(u){case SOLO_AI:k=i.t("menu.soloAi");break;case SOLO_PLAYER:k=i.t("menu.soloPlayer");break;case PLAYER_VS_AI:k=i.t("menu.playerVsAi");break;case AI_VS_AI:k=i.t("menu.aiVsAi");break;case BATTLE_ROYALE:k=i.t("menu.battleRoyale")}document.getElementById("titleGame").innerHTML=i.t("game.currentMode")+" "+k;var _=[];if(u==SOLO_AI){var x=new r(n,t,g,o,p),R=new a(RIGHT,3,x,PLAYER_AI,A,b);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}else if(u==SOLO_PLAYER){x=new r(n,t,g,o,p),R=new a(RIGHT,3,x,S);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}else if(u==PLAYER_VS_AI){x=new r(n,t,g,o),R=new a(RIGHT,3,x,S);if(f){var O=new a(RIGHT,3,x,PLAYER_AI,A,b);_.push(new s(x,[R,O],m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}else{var P=new r(n,t,g,o);O=new a(RIGHT,3,P,PLAYER_AI,A,b);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!1,y,null,null,null,null,!h)),_.push(new s(P,O,m,document.getElementById("gameContainer"),!1,!1,y,null,null,null,null,!h))}}else if(u==AI_VS_AI){x=new r(n,t,g,o),R=new a(RIGHT,3,x,PLAYER_AI,A,b);if(f){O=new a(RIGHT,3,x,PLAYER_AI,A,b);_.push(new s(x,[R,O],m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}else{P=new r(n,t,g,o),O=new a(RIGHT,3,P,PLAYER_AI,A,b);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h)),_.push(new s(P,O,m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}}else if(u==BATTLE_ROYALE)if(f){x=new r(n,t,g,o);var M=[];I&&M.push(new a(RIGHT,3,x,S,A,b));for(var D=0;D<L;D++)M.push(new a(RIGHT,3,x,PLAYER_AI,A,b));_.push(new s(x,M,m,document.getElementById("gameContainer"),!0,!0,y,null,null,null,null,!h))}else{if(I){x=new r(n,t,g,o),R=new a(RIGHT,3,x,S,A,b);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!1,y,350,250,null,null,!h))}for(D=0;D<L;D++){x=new r(n,t,g,o),R=new a(RIGHT,3,x,PLAYER_AI,A,b);_.push(new s(x,R,m,document.getElementById("gameContainer"),!0,!1,y,350,250,null,null,!h))}}var B=new c(_);B.setDisplayFPS(!!d),B.start(),null!=B.games[0].canvas&&B.games[0].canvas.scrollIntoView(),!p||u!=SOLO_AI&&u!=SOLO_PLAYER||B.setNotification(new l(i.t("engine.mazeMode"),null,"rgba(52, 152, 219, 0.5)",5,null,null,null,!0)),document.getElementById("backToMenuGame").onclick=function(){confirm(i.t("game.confirmQuit"))&&(B.killAll(),v(),B=null)},B.onStop((function(){if(u==PLAYER_VS_AI||u==AI_VS_AI||u==BATTLE_ROYALE&&!B.errorOccurred()){var e="",t=B.getWinners();if(u==PLAYER_VS_AI)2==t.index.length?e=i.t("game.equalityPlayerVSAI"):0==t.index[0]?e=i.t("game.winPlayerVSAI"):1==t.index[0]&&(e=i.t("game.losePlayerVSAI"));else if(u==AI_VS_AI)1==t.index.length?e=i.t("game.oneWinnerAIVSAI",{numWinner:t.index[0]+1}):2==t.index.length&&(e=i.t("game.equalityAIVSAI"));else if(u==BATTLE_ROYALE)if(1==t.index.length)e=I&&0==t.index[0]?i.t("game.playerWinnerBattleRoyale",{score:t.score}):i.t("game.oneWinnerBattleRoyale",{numWinner:I?t.index[0]:t.index[0]+1,score:t.score});else if(I&&2==t.index.length&&0==t.index[0])e=i.t("game.winnerAIBattleRoyale")+" "+i.t("game.winnersNumBattleRoyale",{numWinner:t.index[1]})+" "+i.t("game.andPlayerWinnersBattleRoyale")+" "+i.t("game.winPlayerScoreBattleRoyale",{score:t.score});else if(t.index.length>1){var n=!1;e=i.t("game.winnersBattleRoyale")+" ";for(var s=0;s<t.index.length;s++)if(I&&0==t.index[s])n=!0;else e+=i.t("game.winnersNumBattleRoyale",{numWinner:I?t.index[s]:t.index[s]+1}),s+1<t.index.length-1?e+=", ":s+1==t.index.length-1&&(e=e+" "+i.t("game.andWinnersBattleRoyale")+" ");e=I&&n?e+" "+i.t("game.andPlayerWinnersBattleRoyale")+" "+i.t("game.winPlayerScoreBattleRoyale",{score:t.score}):e+" "+i.t("game.winScoreBattleRoyale",{score:t.score})}""!=e.trim()&&(document.getElementById("gameOrder").innerHTML=e,B.setNotification(new l(e,null,"rgba(52, 152, 219, 0.5)",15,null,null,null,!0)))}})),B.onExit((function(){(u==SOLO_AI||u==SOLO_PLAYER||u==AI_VS_AI||u==PLAYER_VS_AI&&f||u==BATTLE_ROYALE&&f)&&(B.killAll(),v())})),B.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",B.closeNotification()}))}}function k(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)var n=SOLO_PLAYER_SAVE+"defautLevelsSave";else if(e==PLAYER_AI)n=SOLO_AI_SAVE+"defautLevelsSave"}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)n=SOLO_PLAYER_SAVE+"downloadedLevelsSave";else if(e==PLAYER_AI)n=SOLO_AI_SAVE+"downloadedLevelsSave";return n}function _(e,t){null==p.getItem(k(e,t))&&O(e,t,!1);try{return JSON.parse(p.getItem(k(e,t)))}catch(n){return O(e,t,!0),_(e,t)}}function x(e,t,n){return _(t,n)[e]}function R(e,t,n,i){var s=k(n,i),o=_(n,i),a=P(n,i);return null!=o&&(Array.isArray(e)&&e.length>=2&&Array.isArray(o[t])&&o[t].length>=2&&1==o[t][0]&&(a[t].type!=LEVEL_REACH_SCORE_ON_TIME&&a[t].type!=LEVEL_MULTI_REACH_SCORE_FIRST&&a[t].type!=LEVEL_MAZE_WIN?e[1]<o[t][1]&&(e[1]=o[t][1]):e[1]>o[t][1]&&(e[1]=o[t][1])),o[t]=e,p.setItem(s,JSON.stringify(o)),!0)}function O(e,t,n){if("undefined"!=typeof Storage){var i=k(e,t);return(null==p.getItem(i)||n)&&(p.setItem(i,JSON.stringify({version:o.Setting.APP_VERSION})),R([!1,0],1,e,t)),!1}return!1}function P(e,t){if(t==DEFAULT_LEVEL){if(e==PLAYER_HUMAN)return DEFAULT_LEVELS_SOLO_PLAYER;if(e==PLAYER_AI)return DEFAULT_LEVELS_SOLO_AI}else if(t==DOWNLOADED_LEVEL)if(e==PLAYER_HUMAN)try{return JSON.parse(p.getItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO))}catch(e){return null}else if(e==PLAYER_AI)try{return JSON.parse(p.getItem(SOLO_AI_DOWNLOAD_LEVELS_TO))}catch(e){return null}return null}function M(e,t,n){var i=!0,s=P(t,n);if(null==s)return!1;for(var o=1;o<e;o++){var a=x(o,t,n);(null==a||!a[0]&&D(s[o].type,s[o].version))&&(i=!1)}return i}function D(e,t){return!(e!=LEVEL_REACH_SCORE&&e!=LEVEL_REACH_MAX_SCORE&&e!=LEVEL_MULTI_BEST_SCORE&&e!=LEVEL_REACH_SCORE_ON_TIME&&e!=LEVEL_MULTI_REACH_SCORE_FIRST&&e!=LEVEL_MAZE_WIN||o.Setting.APP_VERSION.strcmp(t)<0)}function B(e,t,n,s,o){var a,r="";return null==(a=x(e,t,s))?"":(a=a[1])<=0?"":(o?n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?r=i.t("levels.bestScoreShort",{count:a}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(r=i.t("levels.bestTimeShort",{count:Math.round(a)})):n==LEVEL_REACH_SCORE||n==LEVEL_REACH_MAX_SCORE||n==LEVEL_MULTI_BEST_SCORE?r=i.t("levels.bestScore",{count:a}):n!=LEVEL_REACH_SCORE_ON_TIME&&n!=LEVEL_MULTI_REACH_SCORE_FIRST&&n!=LEVEL_MAZE_WIN||(r=i.t("levels.bestTime",{count:Math.round(a)})),r)}function C(e,t){var n=P(e,t),s="";if(t==DOWNLOADED_LEVEL&&(s+='<div class="row mb-3"><div class="col text-center"><button class="btn btn-lg btn-warning" onclick="downloadLevels('+e+', this);"><span class="fui-plus-circle"></span>&nbsp; '+i.t("levels.download")+'</button><br /><a href="#null" onclick="editDownloadURL();" class="small"><span class="fui-new"></span>&nbsp; '+i.t("levels.editDownloadURL")+"</a></div></div>"),null==n)return s+"<strong>"+i.t("levels.emptyList")+"</strong>";var o=1,a=!0;for(var r in n){if(n.hasOwnProperty(r)){if(M(r,e,t))if(D(n[r].type,n[r].version))l='<button class="btn btn-lg btn-primary btn-block-85" onclick="playLevel('+r+", "+e+", "+t+');" '+(""!=B(r,e,n[r].type,t).trim()?'aria-label="'+B(r,e,n[r].type,t)+'" data-balloon-length="fit" data-balloon-pos="up"':"")+">"+i.t("levels.level")+" "+o+"</button>";else var l='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+i.t("levels.notCompatible")+'" data-balloon-length="fit" data-balloon-pos="up">'+i.t("levels.level")+" "+o+"</button>";else var l='<button class="btn btn-lg btn-primary btn-block-85" disabled aria-label="'+i.t("levels.disabledLevel")+'" data-balloon-length="fit" data-balloon-pos="up">'+i.t("levels.level")+" "+o+"</button>";1==o&&(s+='<div class="row mb-2">'),s+=o%2==0?'<div class="col pl-0 justify-content-center">'+l+'</div></div><div class="row mb-2">':'<div class="col pr-0 justify-content-center">'+l+"</div>",a=!1}o++}return a?s+"<strong>"+i.t("levels.emptyList")+"</strong>":(o%2==0&&(s+='<div class="col pr-0 justify-content-center"></div>'),s+"</div>")}function N(){!function(e){if(null!=e){document.getElementById("languageSelect").disabled=!0,document.getElementById("languageSelect").innerHTML="";for(var t=0;t<e.length;t++)document.getElementById("languageSelect").innerHTML=document.getElementById("languageSelect").innerHTML+'<option data-i18n="lang.'+e[t]+'" value="'+e[t]+'"></option>';document.getElementById("languageSelect").value=i.language.substr(0,2),document.getElementById("languageSelect").disabled=!1}}(i.languages);for(var e=document.querySelectorAll("[data-i18n]"),t=0,n=e.length;t<n;t++)e[t].innerHTML=i.t(e[t].dataset.i18n);document.getElementById("dateTxt").innerHTML=i.t("menu.versionDate",{date:new Intl.DateTimeFormat(i.language).format(new Date(DATE_VERSION))}),document.getElementById("heightGrid").placeholder=i.t("settings.placeholderHeight"),document.getElementById("widthGrid").placeholder=i.t("settings.placeholderWidth"),document.getElementById("customSpeed").placeholder=i.t("settings.placeholderCustomSpeed"),document.getElementById("numberIA").placeholder=i.t("settings.placeholderNumberIA"),document.getElementById("appDownloadURLGet").setAttribute("aria-label",i.t("update.getURL")),document.getElementById("appUpdateChanges").setAttribute("aria-label",i.t("update.getChanges")),document.getElementById("appUpdateDateLocalized").innerHTML=i.t("update.versionDate",{date:new Intl.DateTimeFormat(i.language).format(new Date(document.getElementById("appUpdateDate").innerHTML))}),document.getElementById("aiAssistantInfos").setAttribute("aria-label",i.t("settings.aiAssistantInfos"))}p.isSupported()||(document.getElementById("localstorageDisabled").style.display="block"),window.updateCallback=function(e){if(null!=e&&void 0!==e.version&&null!==e.version&&o.Setting.APP_VERSION.strcmp(e.version)<0){document.getElementById("updateAvailable").style.display="block",document.getElementById("appUpdateVersion").textContent=e.version;var t=DATE_VERSION;if(void 0!==e.date&&null!==e.date)t=e.date;document.getElementById("appUpdateDate").textContent=t;var n="http://eliastiksofts.com/snakeia/downloads/index.php";if(void 0!==e.url&&null!==e.url)n=e.url;document.getElementById("appDownloadLink").onclick=function(){window.open(n,"_blank")},document.getElementById("appDownloadURLGet").onclick=function(){prompt(i.t("update.URLToDownload"),n)};var s=i.t("update.noChanges");if(void 0!==e.changes&&null!==e.changes)s=e.changes;document.getElementById("appUpdateChanges").onclick=function(){alert(i.t("update.changes")+"\n"+s)},N()}},(g=document.createElement("script")).src=UPDATER_URI,document.getElementsByTagName("head")[0].appendChild(g),document.getElementById("soloAi").onclick=function(){y(SOLO_AI)},document.getElementById("soloPlayer").onclick=function(){y(SOLO_PLAYER)},document.getElementById("playerVsAi").onclick=function(){y(PLAYER_VS_AI)},document.getElementById("aiVsAi").onclick=function(){y(AI_VS_AI)},document.getElementById("battleRoyale").onclick=function(){y(BATTLE_ROYALE)},document.getElementById("backToMenu").onclick=function(){v()},document.getElementById("backToMenuLevelList").onclick=function(){v()},document.getElementById("levelsSoloPlayer").onclick=function(){E(PLAYER_HUMAN)},document.getElementById("levelsSoloAI").onclick=function(){E(PLAYER_AI)},document.getElementById("gameSpeed").onchange=function(){b()},document.getElementById("heightGrid").onchange=function(){S()},document.getElementById("widthGrid").onchange=function(){S()},document.getElementById("borderWalls").onchange=function(){S()},document.getElementById("generateWalls").onchange=function(){S()},document.getElementById("sameGrid").onchange=function(){A(),b(),S()},document.getElementById("numberIA").onchange=function(){S()},document.getElementById("battleAgainstAIs").onchange=function(){L(),S()},document.getElementById("mazeGrid").onchange=function(){I()},document.getElementById("resetSettings").onclick=function(){T(!0)},document.getElementById("validateSettings").onclick=function(){w()},window.playLevel=function(e,t,n){var o=P(t,n);if(null==o)return!1;if(null==o[e])return!1;{var u=o[e],g=u.settings,p=u.type,y=u.typeValue,v=u.version;if(!D(p,v))return alert(i.t("levels.notCompatible")),!1;if(!M(e,t,n))return alert(i.t("levels.disabledLevel")),!1;var A=g[0],b=g[1],L=g[2],I=g[3],S=g[4],T=g[5],w=g[6],k=g[7],_=g[8],x=g[9],O=g[10],C=g[11],N=[],F=new r(b,A,I,L,x,O,C);if(t==PLAYER_AI)var H=new a(RIGHT,3,F,t,AI_LEVEL_HIGH);else if(t==PLAYER_HUMAN)H=new a(RIGHT,3,F,t);if(S){for(var U=[H],V=0;V<_;V++)U.push(new a(RIGHT,3,F,PLAYER_AI,k));var G=new s(F,U,T,document.getElementById("gameContainer"),!0,!0,w,null,null,null,null,!h);N.push(G)}else{if(_+1<=2)var Y=null,z=null;else Y=350,z=250;G=new s(F,H,T,document.getElementById("gameContainer"),!0,!0,w,Y,z,null,null,!h);N.push(G);for(V=0;V<_;V++){F=new r(b,A,I,L);var W=new a(RIGHT,3,F,PLAYER_AI,k,!1);N.push(new s(F,W,T,document.getElementById("gameContainer"),!1,!1,w,Y,z,null,null,!h))}}document.getElementById("settings").style.display="none",document.getElementById("menu").style.display="none",document.getElementById("levelContainer").style.display="none",document.getElementById("gameContainer").style.display="block",document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",document.getElementById("titleGame").innerHTML=i.t("levels.level")+" "+e;var K=new c(N);K.setDisplayFPS(!!d),K.start(),document.getElementById("gameOrder").scrollIntoView();var j,q,J=new f(null,0),Q=!1,X=!1,Z="rgba(231, 76, 60, 0.5)";function $(){G.setBestScore(B(e,t,p,n,!0)),p==LEVEL_REACH_SCORE?q=i.t("levels.reachScore",{value:y}):p==LEVEL_REACH_SCORE_ON_TIME?(q=i.t("levels.reachScoreTime",{value:y[0],count:y[1]}),document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:y[1]}),G.setTimeToDisplay(y[1])):p==LEVEL_REACH_MAX_SCORE?q=i.t("levels.reachMaxScore"):p==LEVEL_MULTI_BEST_SCORE?q=i.t("levels.multiBestScore",{count:_}):p==LEVEL_MULTI_REACH_SCORE_FIRST?q=i.t("levels.multiReachScoreFirst",{value:y,count:_}):p==LEVEL_MAZE_WIN&&(q=i.t("levels.mazeMode",{value:y,count:_})),document.getElementById("gameOrder").innerHTML=q.replace("\n","<br />")}document.getElementById("backToMenuGame").onclick=function(){confirm(i.t("game.confirmQuit"))&&(J.pause(),K.killAll(),E(t),K=null)},function(){if(p==LEVEL_REACH_SCORE)G.onScoreIncreased((function(){G.snakes[0].score>=y&&(R([!0,G.snakes[0].score],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"))),Q=!0))})),G.onStop((function(){G.snakes[0].score<y&&(Q||(G.setNotification(new l(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),Q=!0))}));else if(p==LEVEL_REACH_SCORE_ON_TIME)J=new f((function(){G.setTimeToDisplay(0),document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:0}),Q||(G.setNotification(new l(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),Q=!0),K.stopAll(!0)}),1e3*y[1]-1,new m((function(){document.getElementById("gameStatus").innerHTML=i.t("levels.timerRemaining",{count:Math.round(J.getTime()/1e3)}),G.setTimeToDisplay(Math.round(J.getTime()/1e3))}))),G.onStart((function(){J.resume()})),G.onPause((function(){J.pause()})),G.onReset((function(){J.reset()})),G.onStop((function(){J.pause()})),G.onScoreIncreased((function(){if(G.snakes[0].score>=y[0]){var s=1e3*y[1]-J.getTime();J.reset(),K.stopAll(!0),R([!0,s/1e3],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),Q=!0)}}));else if(p==LEVEL_REACH_MAX_SCORE)G.onStop((function(){G.scoreMax?(R([!0,G.snakes[0].score],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),Q=!0)):Q||(G.setNotification(new l(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),Q=!0)}));else if(p==LEVEL_MULTI_BEST_SCORE)K.onStop((function(){for(var s=K.getWinners(),o=!1,a=0;a<s.winners.length;a++)s.winners[a]==G.snakes[0]&&(o=!0,R([!0,G.snakes[0].score],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),Q=!0));o||Q||(G.setNotification(new l(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),Q=!0)}));else if(p==LEVEL_MULTI_REACH_SCORE_FIRST){var s=0,o=new m((function(){s++}));G.onStart((function(){o.start()})),G.onPause((function(){o.stop()})),G.onReset((function(){s=0,o.stop()})),G.onStop((function(){o.stop()})),K.onScoreIncreased((function(){for(var o=0;o<K.games.length;o++)for(var a=0;a<K.games[o].snakes.length;a++)K.games[o].snakes[a].score>=y&&(K.games[o].snakes[a]==G.snakes[0]?(K.stopAll(!0),R([!0,s],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),Q=!0)):(K.stopAll(!0),Q||(G.setNotification(new l(i.t("levels.goalNotAchieved"),null,Z,null,null,null,null,!0)),Q=!0)))}))}else if(p==LEVEL_MAZE_WIN){s=0,o=new m((function(){s++}));G.onStart((function(){o.start()})),G.onPause((function(){o.stop()})),G.onReset((function(){s=0,o.stop()})),G.onStop((function(){o.stop()})),G.onScoreIncreased((function(){G.snakes[0].score>=1&&(R([!0,s],e,t,n),G.setBestScore(B(e,t,p,n,!0)),Q||(G.setNotification(new l(i.t("levels.goalAchieved"),null,null,null,null,null,null,!0)),Q=!0))}))}}(),$(),K.onExit((function(){J.pause(),K.killAll(),E(t)})),K.onReset((function(){document.getElementById("resultLevels").innerHTML="",document.getElementById("gameStatus").innerHTML="",document.getElementById("gameOrder").innerHTML="",document.getElementById("gameStatusError").innerHTML="",Q=!1,X=!1,$()})),G.onStart((function(){Q||X||(j=new l(q,null,"rgba(52, 152, 219, 0.5)",10),G.setNotification(j),X=!0)}))}},window.editDownloadURL=function(){var e=window.prompt(i.t("levels.editDownloadURLPrompt"),DOWNLOAD_DEFAULT_URI);null!=e&&(DOWNLOAD_DEFAULT_URI=e)},window.downloadLevels=function(e,t){var n=DOWNLOAD_DEFAULT_URI;n=(n=n.replace("{player}",e)).replace("{appVersion}",o.Setting.APP_VERSION);var s=document.createElement("script");s.src=n;var a=!1;window.callbackDownloadLevels=function(e,t){a||(e==PLAYER_HUMAN?p.setItem(SOLO_PLAYER_DOWNLOAD_LEVELS_TO,JSON.stringify(t)):e==PLAYER_AI&&p.setItem(SOLO_AI_DOWNLOAD_LEVELS_TO,JSON.stringify(t)),E(e)),document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML=""},t.disabled=!0;var r=document.createElement("button");r.classList="btn btn-lg btn-warning",r.innerHTML=i.t("levels.buttonDeblock"),document.getElementById("levelDownloading").innerHTML="<strong>"+i.t("levels.downloading")+"</strong>",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].appendChild(s),r.onclick=function(){a=!0,function(e,t){e.disabled=!1,t.src=null,document.getElementById("levelDownloading").innerHTML="",document.getElementById("btnDeblockDiv").innerHTML="",document.getElementsByTagName("head")[0].removeChild(t)}(t,s)},document.getElementById("btnDeblockDiv").appendChild(r)},document.getElementById("languageSelect").onchange=function(){i.changeLanguage(document.getElementById("languageSelect").value,(function(e,t){N()}))},window.addEventListener("load",(function(){setTimeout((function(){N()}),250)})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")}]);